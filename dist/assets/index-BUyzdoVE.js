import{r as requireReact,a as requireReactDom,b as reactExports,R as React,u as useNavigate,c as useLocation,L as Link$1,O as Outlet,N as Navigate,d as useParams,e as commonjsGlobal,g as getDefaultExportFromCjs,f as getAugmentedNamespace,h as useSearchParams,B as BrowserRouter,i as Routes,j as Route}from"./vendor-BKMMTkz6.js";import{a as axios}from"./ui-B9ygI19o.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var o=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function i(r,l,h){var m=null;if(h!==void 0&&(m=""+h),l.key!==void 0&&(m=""+l.key),"key"in l){h={};for(var v in l)v!=="key"&&(h[v]=l[v])}else h=l;return l=h.ref,{$$typeof:o,type:r,key:m,ref:l!==void 0?l:null,props:h}}return reactJsxRuntime_production.Fragment=s,reactJsxRuntime_production.jsx=i,reactJsxRuntime_production.jsxs=i,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(o){function s(U,P){var k=U.length;U.push(P);t:for(;0<k;){var _=k-1>>>1,S=U[_];if(0<l(S,P))U[_]=P,U[k]=S,k=_;else break t}}function i(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var P=U[0],k=U.pop();if(k!==P){U[0]=k;t:for(var _=0,S=U.length,O=S>>>1;_<O;){var H=2*(_+1)-1,G=U[H],K=H+1,q=U[K];if(0>l(G,k))K<S&&0>l(q,G)?(U[_]=q,U[K]=k,_=K):(U[_]=G,U[H]=k,_=H);else if(K<S&&0>l(q,k))U[_]=q,U[K]=k,_=K;else break t}}return P}function l(U,P){var k=U.sortIndex-P.sortIndex;return k!==0?k:U.id-P.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;o.unstable_now=function(){return h.now()}}else{var m=Date,v=m.now();o.unstable_now=function(){return m.now()-v}}var A=[],d=[],c=1,f=null,g=3,b=!1,p=!1,j=!1,E=!1,y=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function I(U){for(var P=i(d);P!==null;){if(P.callback===null)r(d);else if(P.startTime<=U)r(d),P.sortIndex=P.expirationTime,s(A,P);else break;P=i(d)}}function N(U){if(j=!1,I(U),!p)if(i(A)!==null)p=!0,L||(L=!0,it());else{var P=i(d);P!==null&&lt(N,P.startTime-U)}}var L=!1,Q=-1,tt=5,Z=-1;function st(){return E?!0:!(o.unstable_now()-Z<tt)}function F(){if(E=!1,L){var U=o.unstable_now();Z=U;var P=!0;try{t:{p=!1,j&&(j=!1,C(Q),Q=-1),b=!0;var k=g;try{e:{for(I(U),f=i(A);f!==null&&!(f.expirationTime>U&&st());){var _=f.callback;if(typeof _=="function"){f.callback=null,g=f.priorityLevel;var S=_(f.expirationTime<=U);if(U=o.unstable_now(),typeof S=="function"){f.callback=S,I(U),P=!0;break e}f===i(A)&&r(A),I(U)}else r(A);f=i(A)}if(f!==null)P=!0;else{var O=i(d);O!==null&&lt(N,O.startTime-U),P=!1}}break t}finally{f=null,g=k,b=!1}P=void 0}}finally{P?it():L=!1}}}var it;if(typeof B=="function")it=function(){B(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,rt=Y.port2;Y.port1.onmessage=F,it=function(){rt.postMessage(null)}}else it=function(){y(F,0)};function lt(U,P){Q=y(function(){U(o.unstable_now())},P)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):tt=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return g},o.unstable_next=function(U){switch(g){case 1:case 2:case 3:var P=3;break;default:P=g}var k=g;g=P;try{return U()}finally{g=k}},o.unstable_requestPaint=function(){E=!0},o.unstable_runWithPriority=function(U,P){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var k=g;g=U;try{return P()}finally{g=k}},o.unstable_scheduleCallback=function(U,P,k){var _=o.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?_+k:_):k=_,U){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=k+S,U={id:c++,callback:P,priorityLevel:U,startTime:k,expirationTime:S,sortIndex:-1},k>_?(U.sortIndex=k,s(d,U),i(A)===null&&U===i(d)&&(j?(C(Q),Q=-1):j=!0,lt(N,k-_))):(U.sortIndex=S,s(A,U),p||b||(p=!0,L||(L=!0,it()))),U},o.unstable_shouldYield=st,o.unstable_wrapCallback=function(U){var P=g;return function(){var k=g;g=P;try{return U.apply(this,arguments)}finally{g=k}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var o=requireScheduler(),s=requireReact(),i=requireReactDom();function r(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function m(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function v(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A(t){if(h(t)!==t)throw Error(r(188))}function d(t){var e=t.alternate;if(!e){if(e=h(t),e===null)throw Error(r(188));return e!==t?null:t}for(var n=t,a=e;;){var u=n.return;if(u===null)break;var x=u.alternate;if(x===null){if(a=u.return,a!==null){n=a;continue}break}if(u.child===x.child){for(x=u.child;x;){if(x===n)return A(u),t;if(x===a)return A(u),e;x=x.sibling}throw Error(r(188))}if(n.return!==a.return)n=u,a=x;else{for(var T=!1,z=u.child;z;){if(z===n){T=!0,n=u,a=x;break}if(z===a){T=!0,a=u,n=x;break}z=z.sibling}if(!T){for(z=x.child;z;){if(z===n){T=!0,n=x,a=u;break}if(z===a){T=!0,a=x,n=u;break}z=z.sibling}if(!T)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(n.tag!==3)throw Error(r(188));return n.stateNode.current===n?t:e}function c(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=c(t),e!==null)return e;t=t.sibling}return null}var f=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),B=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),tt=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),st=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function it(t){return t===null||typeof t!="object"?null:(t=F&&t[F]||t["@@iterator"],typeof t=="function"?t:null)}var Y=Symbol.for("react.client.reference");function rt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Y?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case y:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case L:return"SuspenseList";case Z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case p:return"Portal";case B:return t.displayName||"Context";case C:return(t._context.displayName||"Context")+".Consumer";case I:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q:return e=t.displayName||null,e!==null?e:rt(t.type)||"Memo";case tt:e=t._payload,t=t._init;try{return rt(t(e))}catch{}}return null}var lt=Array.isArray,U=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},_=[],S=-1;function O(t){return{current:t}}function H(t){0>S||(t.current=_[S],_[S]=null,S--)}function G(t,e){S++,_[S]=t.current,t.current=e}var K=O(null),q=O(null),R=O(null),M=O(null);function D(t,e){switch(G(R,e),G(q,t),G(K,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?sh(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=sh(e),t=nh(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}H(K),G(K,t)}function V(){H(K),H(q),H(R)}function W(t){t.memoizedState!==null&&G(M,t);var e=K.current,n=nh(e,t.type);e!==n&&(G(q,t),G(K,n))}function $(t){q.current===t&&(H(K),H(q)),M.current===t&&(H(M),ta._currentValue=k)}var J,ot;function yt(t){if(J===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);J=e&&e[1]||"",ot=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+t+ot}var ut=!1;function xt(t,e){if(!t||ut)return"";ut=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(e){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(bt){var pt=bt}Reflect.construct(t,[],St)}else{try{St.call()}catch(bt){pt=bt}t.call(St.prototype)}}else{try{throw Error()}catch(bt){pt=bt}(St=t())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(bt){if(bt&&pt&&typeof bt.stack=="string")return[bt.stack,pt.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=a.DetermineComponentFrameRoot(),T=x[0],z=x[1];if(T&&z){var et=T.split(`
`),mt=z.split(`
`);for(u=a=0;a<et.length&&!et[a].includes("DetermineComponentFrameRoot");)a++;for(;u<mt.length&&!mt[u].includes("DetermineComponentFrameRoot");)u++;if(a===et.length||u===mt.length)for(a=et.length-1,u=mt.length-1;1<=a&&0<=u&&et[a]!==mt[u];)u--;for(;1<=a&&0<=u;a--,u--)if(et[a]!==mt[u]){if(a!==1||u!==1)do if(a--,u--,0>u||et[a]!==mt[u]){var jt=`
`+et[a].replace(" at new "," at ");return t.displayName&&jt.includes("<anonymous>")&&(jt=jt.replace("<anonymous>",t.displayName)),jt}while(1<=a&&0<=u);break}}}finally{ut=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?yt(n):""}function vt(t,e){switch(t.tag){case 26:case 27:case 5:return yt(t.type);case 16:return yt("Lazy");case 13:return t.child!==e&&e!==null?yt("Suspense Fallback"):yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return xt(t.type,!1);case 11:return xt(t.type.render,!1);case 1:return xt(t.type,!0);case 31:return yt("Activity");default:return""}}function Et(t){try{var e="",n=null;do e+=vt(t,n),n=t,t=t.return;while(t);return e}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var wt=Object.prototype.hasOwnProperty,_t=o.unstable_scheduleCallback,Tt=o.unstable_cancelCallback,Dt=o.unstable_shouldYield,Pt=o.unstable_requestPaint,kt=o.unstable_now,Vt=o.unstable_getCurrentPriorityLevel,Te=o.unstable_ImmediatePriority,ue=o.unstable_UserBlockingPriority,Ue=o.unstable_NormalPriority,ge=o.unstable_LowPriority,de=o.unstable_IdlePriority,Vs=o.log,Nn=o.unstable_setDisableYieldValue,Is=null,Rt=null;function ht(t){if(typeof Vs=="function"&&Nn(t),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(Is,t)}catch{}}var ct=Math.clz32?Math.clz32:Jt,Nt=Math.log,Ut=Math.LN2;function Jt(t){return t>>>=0,t===0?32:31-(Nt(t)/Ut|0)|0}var se=256,$e=262144,Oe=4194304;function Re(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function le(t,e,n){var a=t.pendingLanes;if(a===0)return 0;var u=0,x=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var z=a&134217727;return z!==0?(a=z&~x,a!==0?u=Re(a):(T&=z,T!==0?u=Re(T):n||(n=z&~t,n!==0&&(u=Re(n))))):(z=a&~x,z!==0?u=Re(z):T!==0?u=Re(T):n||(n=a&~t,n!==0&&(u=Re(n)))),u===0?0:e!==0&&e!==u&&(e&x)===0&&(x=u&-u,n=e&-e,x>=n||x===32&&(n&4194048)!==0)?e:u}function ze(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function Qe(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(){var t=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),t}function te(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ss(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ze(t,e,n,a,u,x){var T=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var z=t.entanglements,et=t.expirationTimes,mt=t.hiddenUpdates;for(n=T&~n;0<n;){var jt=31-ct(n),St=1<<jt;z[jt]=0,et[jt]=-1;var pt=mt[jt];if(pt!==null)for(mt[jt]=null,jt=0;jt<pt.length;jt++){var bt=pt[jt];bt!==null&&(bt.lane&=-536870913)}n&=~St}a!==0&&$s(t,a,0),x!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=x&~(T&~e))}function $s(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var a=31-ct(e);t.entangledLanes|=e,t.entanglements[a]=t.entanglements[a]|1073741824|n&261930}function Xs(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var a=31-ct(n),u=1<<a;u&e|t[a]&e&&(t[a]|=e),n&=~u}}function _s(t,e){var n=e&-e;return n=(n&42)!==0?1:be(n),(n&(t.suspendedLanes|e))!==0?0:n}function be(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ns(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function me(){var t=P.p;return t!==0?t:(t=window.event,t===void 0?32:wh(t.type))}function Ci(t,e){var n=P.p;try{return P.p=t,e()}finally{P.p=n}}var Ns=Math.random().toString(36).slice(2),Se="__reactFiber$"+Ns,He="__reactProps$"+Ns,Ys="__reactContainer$"+Ns,Ce="__reactEvents$"+Ns,pr="__reactListeners$"+Ns,xr="__reactHandles$"+Ns,ki="__reactResources$"+Ns,on="__reactMarker$"+Ns;function ui(t){delete t[Se],delete t[He],delete t[Ce],delete t[pr],delete t[xr]}function we(t){var e=t[Se];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ys]||n[Se]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uh(t);t!==null;){if(n=t[Se])return n;t=uh(t)}return e}t=n,n=t.parentNode}return null}function Ws(t){if(t=t[Se]||t[Ys]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function ln(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(r(33))}function Ks(t){var e=t[ki];return e||(e=t[ki]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function ye(t){t[on]=!0}var Li=new Set,cn={};function Ts(t,e){ms(t,e),ms(t+"Capture",e)}function ms(t,e){for(cn[t]=e,t=0;t<e.length;t++)Li.add(e[t])}var Cs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tn={},Mi={};function gr(t){return wt.call(Mi,t)?!0:wt.call(Tn,t)?!1:Cs.test(t)?Mi[t]=!0:(Tn[t]=!0,!1)}function Cn(t,e,n){if(gr(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var a=e.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function kn(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function ps(t,e,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+a)}}function Pe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ln(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function un(t,e,n){var a=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,x=a.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return u.call(this)},set:function(T){n=""+T,x.call(this,T)}}),Object.defineProperty(t,e,{enumerable:a.enumerable}),{getValue:function(){return n},setValue:function(T){n=""+T},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mn(t){if(!t._valueTracker){var e=Ln(t)?"checked":"value";t._valueTracker=un(t,e,""+t[e])}}function di(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),a="";return t&&(a=Ln(t)?t.checked?"true":"false":t.value),t=a,t!==n?(e.setValue(t),!0):!1}function Dn(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var br=/[\n"\\]/g;function Je(t){return t.replace(br,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function hi(t,e,n,a,u,x,T,z){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),e!=null?T==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Pe(e)):t.value!==""+Pe(e)&&(t.value=""+Pe(e)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),e!=null?fi(t,T,Pe(e)):n!=null?fi(t,T,Pe(n)):a!=null&&t.removeAttribute("value"),u==null&&x!=null&&(t.defaultChecked=!!x),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?t.name=""+Pe(z):t.removeAttribute("name")}function On(t,e,n,a,u,x,T,z){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),e!=null||n!=null){if(!(x!=="submit"&&x!=="reset"||e!=null)){Mn(t);return}n=n!=null?""+Pe(n):"",e=e!=null?""+Pe(e):n,z||e===t.value||(t.value=e),t.defaultValue=e}a=a??u,a=typeof a!="function"&&typeof a!="symbol"&&!!a,t.checked=z?t.checked:!!a,t.defaultChecked=!!a,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),Mn(t)}function fi(t,e,n){e==="number"&&Dn(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Qs(t,e,n,a){if(t=t.options,e){e={};for(var u=0;u<n.length;u++)e["$"+n[u]]=!0;for(n=0;n<t.length;n++)u=e.hasOwnProperty("$"+t[n].value),t[n].selected!==u&&(t[n].selected=u),u&&a&&(t[n].defaultSelected=!0)}else{for(n=""+Pe(n),e=null,u=0;u<t.length;u++){if(t[u].value===n){t[u].selected=!0,a&&(t[u].defaultSelected=!0);return}e!==null||t[u].disabled||(e=t[u])}e!==null&&(e.selected=!0)}}function Zs(t,e,n){if(e!=null&&(e=""+Pe(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Pe(n):""}function as(t,e,n,a){if(e==null){if(a!=null){if(n!=null)throw Error(r(92));if(lt(a)){if(1<a.length)throw Error(r(93));a=a[0]}n=a}n==null&&(n=""),e=n}n=Pe(e),t.defaultValue=n,a=t.textContent,a===n&&a!==""&&a!==null&&(t.value=a),Mn(t)}function ts(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Di(t,e,n){var a=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":a?t.setProperty(e,n):typeof n!="number"||n===0||qs.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function xs(t,e,n){if(e!=null&&typeof e!="object")throw Error(r(62));if(t=t.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||e!=null&&e.hasOwnProperty(a)||(a.indexOf("--")===0?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="");for(var u in e)a=e[u],e.hasOwnProperty(u)&&n[u]!==a&&Di(t,u,a)}else for(var x in e)e.hasOwnProperty(x)&&Di(t,x,e[x])}function mi(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pn(t){return vr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function os(){}var Be=null;function Bn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Us=null,gs=null;function Fn(t){var e=Ws(t);if(e&&(t=e.stateNode)){var n=t[He]||null;t:switch(t=e.stateNode,e.type){case"input":if(hi(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Je(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var a=n[e];if(a!==t&&a.form===t.form){var u=a[He]||null;if(!u)throw Error(r(90));hi(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(e=0;e<n.length;e++)a=n[e],a.form===t.form&&di(a)}break t;case"textarea":Zs(t,n.value,n.defaultValue);break t;case"select":e=n.value,e!=null&&Qs(t,!!n.multiple,e,!1)}}}var Js=!1;function Oi(t,e,n){if(Js)return t(e,n);Js=!0;try{var a=t(e);return a}finally{if(Js=!1,(Us!==null||gs!==null)&&(qa(),Us&&(e=Us,t=gs,gs=Us=null,Fn(e),t)))for(e=0;e<t.length;e++)Fn(t[e])}}function tn(t,e){var n=t.stateNode;if(n===null)return null;var a=n[He]||null;if(a===null)return null;n=a[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break t;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(r(231,e,typeof n));return n}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),In=!1;if(is)try{var es={};Object.defineProperty(es,"passive",{get:function(){In=!0}}),window.addEventListener("test",es,es),window.removeEventListener("test",es,es)}catch{In=!1}var bs=null,dn=null,qn=null;function Pi(){if(qn)return qn;var t,e=dn,n=e.length,a,u="value"in bs?bs.value:bs.textContent,x=u.length;for(t=0;t<n&&e[t]===u[t];t++);var T=n-t;for(a=1;a<=T&&e[n-a]===u[x-a];a++);return qn=u.slice(t,1<a?1-a:void 0)}function w(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function X(){return!0}function nt(){return!1}function gt(t){function e(n,a,u,x,T){this._reactName=n,this._targetInst=u,this.type=a,this.nativeEvent=x,this.target=T,this.currentTarget=null;for(var z in t)t.hasOwnProperty(z)&&(n=t[z],this[z]=n?n(x):x[z]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?X:nt,this.isPropagationStopped=nt,this}return f(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=X)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=X)},persist:function(){},isPersistent:X}),e}var Bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lt=gt(Bt),zt=f({},Bt,{view:0,detail:0}),Yt=gt(zt),pe,Kt,ve,Fe=f({},zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ve&&(ve&&t.type==="mousemove"?(pe=t.screenX-ve.screenX,Kt=t.screenY-ve.screenY):Kt=pe=0,ve=t),pe)},movementY:function(t){return"movementY"in t?t.movementY:Kt}}),Ee=gt(Fe),Ge=f({},Fe,{dataTransfer:0}),Ie=gt(Ge),en=f({},zt,{relatedTarget:0}),ys=gt(en),hn=f({},Bt,{animationName:0,elapsedTime:0,pseudoElement:0}),ia=gt(hn),Bi=f({},Bt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fi=gt(Bi),Dh=f({},Bt,{data:0}),ac=gt(Dh),Oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ph={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fh(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bh[t])?!!e[t]:!1}function lo(){return Fh}var Ih=f({},zt,{key:function(t){if(t.key){var e=Oh[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=w(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ph[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lo,charCode:function(t){return t.type==="keypress"?w(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?w(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qh=gt(Ih),Uh=f({},Fe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oc=gt(Uh),zh=f({},zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lo}),Hh=gt(zh),Gh=f({},Bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vh=gt(Gh),$h=f({},Fe,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xh=gt($h),Yh=f({},Bt,{newState:0,oldState:0}),Wh=gt(Yh),Kh=[9,13,27,32],co=is&&"CompositionEvent"in window,Er=null;is&&"documentMode"in document&&(Er=document.documentMode);var Qh=is&&"TextEvent"in window&&!Er,lc=is&&(!co||Er&&8<Er&&11>=Er),cc=" ",uc=!1;function dc(t,e){switch(t){case"keyup":return Kh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ii=!1;function Zh(t,e){switch(t){case"compositionend":return hc(e);case"keypress":return e.which!==32?null:(uc=!0,cc);case"textInput":return t=e.data,t===cc&&uc?null:t;default:return null}}function Jh(t,e){if(Ii)return t==="compositionend"||!co&&dc(t,e)?(t=Pi(),qn=dn=bs=null,Ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lc&&e.locale!=="ko"?null:e.data;default:return null}}var tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tf[t.type]:e==="textarea"}function mc(t,e,n,a){Us?gs?gs.push(a):gs=[a]:Us=a,e=Xa(e,"onChange"),0<e.length&&(n=new Lt("onChange","change",null,n,a),t.push({event:n,listeners:e}))}var jr=null,Ar=null;function ef(t){Kd(t,0)}function ra(t){var e=ln(t);if(di(e))return t}function pc(t,e){if(t==="change")return e}var xc=!1;if(is){var uo;if(is){var ho="oninput"in document;if(!ho){var gc=document.createElement("div");gc.setAttribute("oninput","return;"),ho=typeof gc.oninput=="function"}uo=ho}else uo=!1;xc=uo&&(!document.documentMode||9<document.documentMode)}function bc(){jr&&(jr.detachEvent("onpropertychange",yc),Ar=jr=null)}function yc(t){if(t.propertyName==="value"&&ra(Ar)){var e=[];mc(e,Ar,t,Bn(t)),Oi(ef,e)}}function sf(t,e,n){t==="focusin"?(bc(),jr=e,Ar=n,jr.attachEvent("onpropertychange",yc)):t==="focusout"&&bc()}function nf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ra(Ar)}function rf(t,e){if(t==="click")return ra(e)}function af(t,e){if(t==="input"||t==="change")return ra(e)}function of(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vs=typeof Object.is=="function"?Object.is:of;function Rr(t,e){if(vs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var u=n[a];if(!wt.call(e,u)||!vs(t[u],e[u]))return!1}return!0}function vc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ec(t,e){var n=vc(t);t=0;for(var a;n;){if(n.nodeType===3){if(a=t+n.textContent.length,t<=e&&a>=e)return{node:n,offset:e-t};t=a}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=vc(n)}}function jc(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jc(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ac(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Dn(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Dn(t.document)}return e}function fo(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var lf=is&&"documentMode"in document&&11>=document.documentMode,qi=null,mo=null,Sr=null,po=!1;function Rc(t,e,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;po||qi==null||qi!==Dn(a)||(a=qi,"selectionStart"in a&&fo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Sr&&Rr(Sr,a)||(Sr=a,a=Xa(mo,"onSelect"),0<a.length&&(e=new Lt("onSelect","select",null,e,n),t.push({event:e,listeners:a}),e.target=qi)))}function pi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ui={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionrun:pi("Transition","TransitionRun"),transitionstart:pi("Transition","TransitionStart"),transitioncancel:pi("Transition","TransitionCancel"),transitionend:pi("Transition","TransitionEnd")},xo={},Sc={};is&&(Sc=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function xi(t){if(xo[t])return xo[t];if(!Ui[t])return t;var e=Ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sc)return xo[t]=e[n];return t}var wc=xi("animationend"),_c=xi("animationiteration"),Nc=xi("animationstart"),cf=xi("transitionrun"),uf=xi("transitionstart"),df=xi("transitioncancel"),Tc=xi("transitionend"),Cc=new Map,go="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");go.push("scrollEnd");function zs(t,e){Cc.set(t,e),Ts(e,[t])}var aa=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ks=[],zi=0,bo=0;function oa(){for(var t=zi,e=bo=zi=0;e<t;){var n=ks[e];ks[e++]=null;var a=ks[e];ks[e++]=null;var u=ks[e];ks[e++]=null;var x=ks[e];if(ks[e++]=null,a!==null&&u!==null){var T=a.pending;T===null?u.next=u:(u.next=T.next,T.next=u),a.pending=u}x!==0&&kc(n,u,x)}}function la(t,e,n,a){ks[zi++]=t,ks[zi++]=e,ks[zi++]=n,ks[zi++]=a,bo|=a,t.lanes|=a,t=t.alternate,t!==null&&(t.lanes|=a)}function yo(t,e,n,a){return la(t,e,n,a),ca(t)}function gi(t,e){return la(t,null,null,e),ca(t)}function kc(t,e,n){t.lanes|=n;var a=t.alternate;a!==null&&(a.lanes|=n);for(var u=!1,x=t.return;x!==null;)x.childLanes|=n,a=x.alternate,a!==null&&(a.childLanes|=n),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(u=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,u&&e!==null&&(u=31-ct(n),t=x.hiddenUpdates,a=t[u],a===null?t[u]=[e]:a.push(e),e.lane=n|536870912),x):null}function ca(t){if(50<Xr)throw Xr=0,Nl=null,Error(r(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Hi={};function hf(t,e,n,a){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(t,e,n,a){return new hf(t,e,n,a)}function vo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fn(t,e){var n=t.alternate;return n===null?(n=Es(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Lc(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function ua(t,e,n,a,u,x){var T=0;if(a=t,typeof t=="function")vo(t)&&(T=1);else if(typeof t=="string")T=gm(t,n,K.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case Z:return t=Es(31,n,e,u),t.elementType=Z,t.lanes=x,t;case j:return bi(n.children,u,x,e);case E:T=8,u|=24;break;case y:return t=Es(12,n,e,u|2),t.elementType=y,t.lanes=x,t;case N:return t=Es(13,n,e,u),t.elementType=N,t.lanes=x,t;case L:return t=Es(19,n,e,u),t.elementType=L,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:T=10;break t;case C:T=9;break t;case I:T=11;break t;case Q:T=14;break t;case tt:T=16,a=null;break t}T=29,n=Error(r(130,t===null?"null":typeof t,"")),a=null}return e=Es(T,n,e,u),e.elementType=t,e.type=a,e.lanes=x,e}function bi(t,e,n,a){return t=Es(7,t,a,e),t.lanes=n,t}function Eo(t,e,n){return t=Es(6,t,null,e),t.lanes=n,t}function Mc(t){var e=Es(18,null,null,0);return e.stateNode=t,e}function jo(t,e,n){return e=Es(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Dc=new WeakMap;function Ls(t,e){if(typeof t=="object"&&t!==null){var n=Dc.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Et(e)},Dc.set(t,e),e)}return{value:t,source:e,stack:Et(e)}}var Gi=[],Vi=0,da=null,wr=0,Ms=[],Ds=0,Un=null,sn=1,nn="";function mn(t,e){Gi[Vi++]=wr,Gi[Vi++]=da,da=t,wr=e}function Oc(t,e,n){Ms[Ds++]=sn,Ms[Ds++]=nn,Ms[Ds++]=Un,Un=t;var a=sn;t=nn;var u=32-ct(a)-1;a&=~(1<<u),n+=1;var x=32-ct(e)+u;if(30<x){var T=u-u%5;x=(a&(1<<T)-1).toString(32),a>>=T,u-=T,sn=1<<32-ct(e)+u|n<<u|a,nn=x+t}else sn=1<<x|n<<u|a,nn=t}function Ao(t){t.return!==null&&(mn(t,1),Oc(t,1,0))}function Ro(t){for(;t===da;)da=Gi[--Vi],Gi[Vi]=null,wr=Gi[--Vi],Gi[Vi]=null;for(;t===Un;)Un=Ms[--Ds],Ms[Ds]=null,nn=Ms[--Ds],Ms[Ds]=null,sn=Ms[--Ds],Ms[Ds]=null}function Pc(t,e){Ms[Ds++]=sn,Ms[Ds++]=nn,Ms[Ds++]=Un,sn=e.id,nn=e.overflow,Un=t}var Xe=null,he=null,Wt=!1,zn=null,Os=!1,So=Error(r(519));function Hn(t){var e=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _r(Ls(e,t)),So}function Bc(t){var e=t.stateNode,n=t.type,a=t.memoizedProps;switch(e[Se]=t,e[He]=a,n){case"dialog":Gt("cancel",e),Gt("close",e);break;case"iframe":case"object":case"embed":Gt("load",e);break;case"video":case"audio":for(n=0;n<Wr.length;n++)Gt(Wr[n],e);break;case"source":Gt("error",e);break;case"img":case"image":case"link":Gt("error",e),Gt("load",e);break;case"details":Gt("toggle",e);break;case"input":Gt("invalid",e),On(e,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Gt("invalid",e);break;case"textarea":Gt("invalid",e),as(e,a.value,a.defaultValue,a.children)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||a.suppressHydrationWarning===!0||th(e.textContent,n)?(a.popover!=null&&(Gt("beforetoggle",e),Gt("toggle",e)),a.onScroll!=null&&Gt("scroll",e),a.onScrollEnd!=null&&Gt("scrollend",e),a.onClick!=null&&(e.onclick=os),e=!0):e=!1,e||Hn(t,!0)}function Fc(t){for(Xe=t.return;Xe;)switch(Xe.tag){case 5:case 31:case 13:Os=!1;return;case 27:case 3:Os=!0;return;default:Xe=Xe.return}}function $i(t){if(t!==Xe)return!1;if(!Wt)return Fc(t),Wt=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Hl(t.type,t.memoizedProps)),n=!n),n&&he&&Hn(t),Fc(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));he=ch(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));he=ch(t)}else e===27?(e=he,ni(t.type)?(t=Yl,Yl=null,he=t):he=e):he=Xe?Bs(t.stateNode.nextSibling):null;return!0}function yi(){he=Xe=null,Wt=!1}function wo(){var t=zn;return t!==null&&(ds===null?ds=t:ds.push.apply(ds,t),zn=null),t}function _r(t){zn===null?zn=[t]:zn.push(t)}var _o=O(null),vi=null,pn=null;function Gn(t,e,n){G(_o,e._currentValue),e._currentValue=n}function xn(t){t._currentValue=_o.current,H(_o)}function No(t,e,n){for(;t!==null;){var a=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,a!==null&&(a.childLanes|=e)):a!==null&&(a.childLanes&e)!==e&&(a.childLanes|=e),t===n)break;t=t.return}}function To(t,e,n,a){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var x=u.dependencies;if(x!==null){var T=u.child;x=x.firstContext;t:for(;x!==null;){var z=x;x=u;for(var et=0;et<e.length;et++)if(z.context===e[et]){x.lanes|=n,z=x.alternate,z!==null&&(z.lanes|=n),No(x.return,n,t),a||(T=null);break t}x=z.next}}else if(u.tag===18){if(T=u.return,T===null)throw Error(r(341));T.lanes|=n,x=T.alternate,x!==null&&(x.lanes|=n),No(T,n,t),T=null}else T=u.child;if(T!==null)T.return=u;else for(T=u;T!==null;){if(T===t){T=null;break}if(u=T.sibling,u!==null){u.return=T.return,T=u;break}T=T.return}u=T}}function Xi(t,e,n,a){t=null;for(var u=e,x=!1;u!==null;){if(!x){if((u.flags&524288)!==0)x=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var T=u.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var z=u.type;vs(u.pendingProps.value,T.value)||(t!==null?t.push(z):t=[z])}}else if(u===M.current){if(T=u.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(ta):t=[ta])}u=u.return}t!==null&&To(e,t,n,a),e.flags|=262144}function ha(t){for(t=t.firstContext;t!==null;){if(!vs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ei(t){vi=t,pn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ye(t){return Ic(vi,t)}function fa(t,e){return vi===null&&Ei(t),Ic(t,e)}function Ic(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},pn===null){if(t===null)throw Error(r(308));pn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else pn=pn.next=e;return n}var ff=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,a){t.push(a)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},mf=o.unstable_scheduleCallback,pf=o.unstable_NormalPriority,ke={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Co(){return{controller:new ff,data:new Map,refCount:0}}function Nr(t){t.refCount--,t.refCount===0&&mf(pf,function(){t.controller.abort()})}var Tr=null,ko=0,Yi=0,Wi=null;function xf(t,e){if(Tr===null){var n=Tr=[];ko=0,Yi=Dl(),Wi={status:"pending",value:void 0,then:function(a){n.push(a)}}}return ko++,e.then(qc,qc),e}function qc(){if(--ko===0&&Tr!==null){Wi!==null&&(Wi.status="fulfilled");var t=Tr;Tr=null,Yi=0,Wi=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function gf(t,e){var n=[],a={status:"pending",value:null,reason:null,then:function(u){n.push(u)}};return t.then(function(){a.status="fulfilled",a.value=e;for(var u=0;u<n.length;u++)(0,n[u])(e)},function(u){for(a.status="rejected",a.reason=u,u=0;u<n.length;u++)(0,n[u])(void 0)}),a}var Uc=U.S;U.S=function(t,e){Rd=kt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&xf(t,e),Uc!==null&&Uc(t,e)};var ji=O(null);function Lo(){var t=ji.current;return t!==null?t:ce.pooledCache}function ma(t,e){e===null?G(ji,ji.current):G(ji,e.pool)}function zc(){var t=Lo();return t===null?null:{parent:ke._currentValue,pool:t}}var Ki=Error(r(460)),Mo=Error(r(474)),pa=Error(r(542)),xa={then:function(){}};function Hc(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Gc(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(os,os),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,$c(t),t;default:if(typeof e.status=="string")e.then(os,os);else{if(t=ce,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=e,t.status="pending",t.then(function(a){if(e.status==="pending"){var u=e;u.status="fulfilled",u.value=a}},function(a){if(e.status==="pending"){var u=e;u.status="rejected",u.reason=a}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,$c(t),t}throw Ri=e,Ki}}function Ai(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ri=n,Ki):n}}var Ri=null;function Vc(){if(Ri===null)throw Error(r(459));var t=Ri;return Ri=null,t}function $c(t){if(t===Ki||t===pa)throw Error(r(483))}var Qi=null,Cr=0;function ga(t){var e=Cr;return Cr+=1,Qi===null&&(Qi=[]),Gc(Qi,t,e)}function kr(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function ba(t,e){throw e.$$typeof===g?Error(r(525)):(t=Object.prototype.toString.call(e),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Xc(t){function e(dt,at){if(t){var ft=dt.deletions;ft===null?(dt.deletions=[at],dt.flags|=16):ft.push(at)}}function n(dt,at){if(!t)return null;for(;at!==null;)e(dt,at),at=at.sibling;return null}function a(dt){for(var at=new Map;dt!==null;)dt.key!==null?at.set(dt.key,dt):at.set(dt.index,dt),dt=dt.sibling;return at}function u(dt,at){return dt=fn(dt,at),dt.index=0,dt.sibling=null,dt}function x(dt,at,ft){return dt.index=ft,t?(ft=dt.alternate,ft!==null?(ft=ft.index,ft<at?(dt.flags|=67108866,at):ft):(dt.flags|=67108866,at)):(dt.flags|=1048576,at)}function T(dt){return t&&dt.alternate===null&&(dt.flags|=67108866),dt}function z(dt,at,ft,At){return at===null||at.tag!==6?(at=Eo(ft,dt.mode,At),at.return=dt,at):(at=u(at,ft),at.return=dt,at)}function et(dt,at,ft,At){var Ot=ft.type;return Ot===j?jt(dt,at,ft.props.children,At,ft.key):at!==null&&(at.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===tt&&Ai(Ot)===at.type)?(at=u(at,ft.props),kr(at,ft),at.return=dt,at):(at=ua(ft.type,ft.key,ft.props,null,dt.mode,At),kr(at,ft),at.return=dt,at)}function mt(dt,at,ft,At){return at===null||at.tag!==4||at.stateNode.containerInfo!==ft.containerInfo||at.stateNode.implementation!==ft.implementation?(at=jo(ft,dt.mode,At),at.return=dt,at):(at=u(at,ft.children||[]),at.return=dt,at)}function jt(dt,at,ft,At,Ot){return at===null||at.tag!==7?(at=bi(ft,dt.mode,At,Ot),at.return=dt,at):(at=u(at,ft),at.return=dt,at)}function St(dt,at,ft){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return at=Eo(""+at,dt.mode,ft),at.return=dt,at;if(typeof at=="object"&&at!==null){switch(at.$$typeof){case b:return ft=ua(at.type,at.key,at.props,null,dt.mode,ft),kr(ft,at),ft.return=dt,ft;case p:return at=jo(at,dt.mode,ft),at.return=dt,at;case tt:return at=Ai(at),St(dt,at,ft)}if(lt(at)||it(at))return at=bi(at,dt.mode,ft,null),at.return=dt,at;if(typeof at.then=="function")return St(dt,ga(at),ft);if(at.$$typeof===B)return St(dt,fa(dt,at),ft);ba(dt,at)}return null}function pt(dt,at,ft,At){var Ot=at!==null?at.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Ot!==null?null:z(dt,at,""+ft,At);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case b:return ft.key===Ot?et(dt,at,ft,At):null;case p:return ft.key===Ot?mt(dt,at,ft,At):null;case tt:return ft=Ai(ft),pt(dt,at,ft,At)}if(lt(ft)||it(ft))return Ot!==null?null:jt(dt,at,ft,At,null);if(typeof ft.then=="function")return pt(dt,at,ga(ft),At);if(ft.$$typeof===B)return pt(dt,at,fa(dt,ft),At);ba(dt,ft)}return null}function bt(dt,at,ft,At,Ot){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return dt=dt.get(ft)||null,z(at,dt,""+At,Ot);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case b:return dt=dt.get(At.key===null?ft:At.key)||null,et(at,dt,At,Ot);case p:return dt=dt.get(At.key===null?ft:At.key)||null,mt(at,dt,At,Ot);case tt:return At=Ai(At),bt(dt,at,ft,At,Ot)}if(lt(At)||it(At))return dt=dt.get(ft)||null,jt(at,dt,At,Ot,null);if(typeof At.then=="function")return bt(dt,at,ft,ga(At),Ot);if(At.$$typeof===B)return bt(dt,at,ft,fa(at,At),Ot);ba(at,At)}return null}function Ct(dt,at,ft,At){for(var Ot=null,Qt=null,Mt=at,qt=at=0,Xt=null;Mt!==null&&qt<ft.length;qt++){Mt.index>qt?(Xt=Mt,Mt=null):Xt=Mt.sibling;var Zt=pt(dt,Mt,ft[qt],At);if(Zt===null){Mt===null&&(Mt=Xt);break}t&&Mt&&Zt.alternate===null&&e(dt,Mt),at=x(Zt,at,qt),Qt===null?Ot=Zt:Qt.sibling=Zt,Qt=Zt,Mt=Xt}if(qt===ft.length)return n(dt,Mt),Wt&&mn(dt,qt),Ot;if(Mt===null){for(;qt<ft.length;qt++)Mt=St(dt,ft[qt],At),Mt!==null&&(at=x(Mt,at,qt),Qt===null?Ot=Mt:Qt.sibling=Mt,Qt=Mt);return Wt&&mn(dt,qt),Ot}for(Mt=a(Mt);qt<ft.length;qt++)Xt=bt(Mt,dt,qt,ft[qt],At),Xt!==null&&(t&&Xt.alternate!==null&&Mt.delete(Xt.key===null?qt:Xt.key),at=x(Xt,at,qt),Qt===null?Ot=Xt:Qt.sibling=Xt,Qt=Xt);return t&&Mt.forEach(function(li){return e(dt,li)}),Wt&&mn(dt,qt),Ot}function Ft(dt,at,ft,At){if(ft==null)throw Error(r(151));for(var Ot=null,Qt=null,Mt=at,qt=at=0,Xt=null,Zt=ft.next();Mt!==null&&!Zt.done;qt++,Zt=ft.next()){Mt.index>qt?(Xt=Mt,Mt=null):Xt=Mt.sibling;var li=pt(dt,Mt,Zt.value,At);if(li===null){Mt===null&&(Mt=Xt);break}t&&Mt&&li.alternate===null&&e(dt,Mt),at=x(li,at,qt),Qt===null?Ot=li:Qt.sibling=li,Qt=li,Mt=Xt}if(Zt.done)return n(dt,Mt),Wt&&mn(dt,qt),Ot;if(Mt===null){for(;!Zt.done;qt++,Zt=ft.next())Zt=St(dt,Zt.value,At),Zt!==null&&(at=x(Zt,at,qt),Qt===null?Ot=Zt:Qt.sibling=Zt,Qt=Zt);return Wt&&mn(dt,qt),Ot}for(Mt=a(Mt);!Zt.done;qt++,Zt=ft.next())Zt=bt(Mt,dt,qt,Zt.value,At),Zt!==null&&(t&&Zt.alternate!==null&&Mt.delete(Zt.key===null?qt:Zt.key),at=x(Zt,at,qt),Qt===null?Ot=Zt:Qt.sibling=Zt,Qt=Zt);return t&&Mt.forEach(function(Nm){return e(dt,Nm)}),Wt&&mn(dt,qt),Ot}function oe(dt,at,ft,At){if(typeof ft=="object"&&ft!==null&&ft.type===j&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case b:t:{for(var Ot=ft.key;at!==null;){if(at.key===Ot){if(Ot=ft.type,Ot===j){if(at.tag===7){n(dt,at.sibling),At=u(at,ft.props.children),At.return=dt,dt=At;break t}}else if(at.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===tt&&Ai(Ot)===at.type){n(dt,at.sibling),At=u(at,ft.props),kr(At,ft),At.return=dt,dt=At;break t}n(dt,at);break}else e(dt,at);at=at.sibling}ft.type===j?(At=bi(ft.props.children,dt.mode,At,ft.key),At.return=dt,dt=At):(At=ua(ft.type,ft.key,ft.props,null,dt.mode,At),kr(At,ft),At.return=dt,dt=At)}return T(dt);case p:t:{for(Ot=ft.key;at!==null;){if(at.key===Ot)if(at.tag===4&&at.stateNode.containerInfo===ft.containerInfo&&at.stateNode.implementation===ft.implementation){n(dt,at.sibling),At=u(at,ft.children||[]),At.return=dt,dt=At;break t}else{n(dt,at);break}else e(dt,at);at=at.sibling}At=jo(ft,dt.mode,At),At.return=dt,dt=At}return T(dt);case tt:return ft=Ai(ft),oe(dt,at,ft,At)}if(lt(ft))return Ct(dt,at,ft,At);if(it(ft)){if(Ot=it(ft),typeof Ot!="function")throw Error(r(150));return ft=Ot.call(ft),Ft(dt,at,ft,At)}if(typeof ft.then=="function")return oe(dt,at,ga(ft),At);if(ft.$$typeof===B)return oe(dt,at,fa(dt,ft),At);ba(dt,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint"?(ft=""+ft,at!==null&&at.tag===6?(n(dt,at.sibling),At=u(at,ft),At.return=dt,dt=At):(n(dt,at),At=Eo(ft,dt.mode,At),At.return=dt,dt=At),T(dt)):n(dt,at)}return function(dt,at,ft,At){try{Cr=0;var Ot=oe(dt,at,ft,At);return Qi=null,Ot}catch(Mt){if(Mt===Ki||Mt===pa)throw Mt;var Qt=Es(29,Mt,null,dt.mode);return Qt.lanes=At,Qt.return=dt,Qt}finally{}}}var Si=Xc(!0),Yc=Xc(!1),Vn=!1;function Do(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function $n(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Xn(t,e,n){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,(ee&2)!==0){var u=a.pending;return u===null?e.next=e:(e.next=u.next,u.next=e),a.pending=e,e=ca(t),kc(t,null,n),e}return la(t,a,e,n),ca(t)}function Lr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,Xs(t,n)}}function Po(t,e){var n=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var u=null,x=null;if(n=n.firstBaseUpdate,n!==null){do{var T={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};x===null?u=x=T:x=x.next=T,n=n.next}while(n!==null);x===null?u=x=e:x=x.next=e}else u=x=e;n={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:x,shared:a.shared,callbacks:a.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Bo=!1;function Mr(){if(Bo){var t=Wi;if(t!==null)throw t}}function Dr(t,e,n,a){Bo=!1;var u=t.updateQueue;Vn=!1;var x=u.firstBaseUpdate,T=u.lastBaseUpdate,z=u.shared.pending;if(z!==null){u.shared.pending=null;var et=z,mt=et.next;et.next=null,T===null?x=mt:T.next=mt,T=et;var jt=t.alternate;jt!==null&&(jt=jt.updateQueue,z=jt.lastBaseUpdate,z!==T&&(z===null?jt.firstBaseUpdate=mt:z.next=mt,jt.lastBaseUpdate=et))}if(x!==null){var St=u.baseState;T=0,jt=mt=et=null,z=x;do{var pt=z.lane&-536870913,bt=pt!==z.lane;if(bt?($t&pt)===pt:(a&pt)===pt){pt!==0&&pt===Yi&&(Bo=!0),jt!==null&&(jt=jt.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});t:{var Ct=t,Ft=z;pt=e;var oe=n;switch(Ft.tag){case 1:if(Ct=Ft.payload,typeof Ct=="function"){St=Ct.call(oe,St,pt);break t}St=Ct;break t;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Ft.payload,pt=typeof Ct=="function"?Ct.call(oe,St,pt):Ct,pt==null)break t;St=f({},St,pt);break t;case 2:Vn=!0}}pt=z.callback,pt!==null&&(t.flags|=64,bt&&(t.flags|=8192),bt=u.callbacks,bt===null?u.callbacks=[pt]:bt.push(pt))}else bt={lane:pt,tag:z.tag,payload:z.payload,callback:z.callback,next:null},jt===null?(mt=jt=bt,et=St):jt=jt.next=bt,T|=pt;if(z=z.next,z===null){if(z=u.shared.pending,z===null)break;bt=z,z=bt.next,bt.next=null,u.lastBaseUpdate=bt,u.shared.pending=null}}while(!0);jt===null&&(et=St),u.baseState=et,u.firstBaseUpdate=mt,u.lastBaseUpdate=jt,x===null&&(u.shared.lanes=0),Zn|=T,t.lanes=T,t.memoizedState=St}}function Wc(t,e){if(typeof t!="function")throw Error(r(191,t));t.call(e)}function Kc(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)Wc(n[t],e)}var Zi=O(null),ya=O(0);function Qc(t,e){t=Sn,G(ya,t),G(Zi,e),Sn=t|e.baseLanes}function Fo(){G(ya,Sn),G(Zi,Zi.current)}function Io(){Sn=ya.current,H(Zi),H(ya)}var js=O(null),Ps=null;function Yn(t){var e=t.alternate;G(_e,_e.current&1),G(js,t),Ps===null&&(e===null||Zi.current!==null||e.memoizedState!==null)&&(Ps=t)}function qo(t){G(_e,_e.current),G(js,t),Ps===null&&(Ps=t)}function Zc(t){t.tag===22?(G(_e,_e.current),G(js,t),Ps===null&&(Ps=t)):Wn()}function Wn(){G(_e,_e.current),G(js,js.current)}function As(t){H(js),Ps===t&&(Ps=null),H(_e)}var _e=O(0);function va(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||$l(n)||Xl(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gn=0,It=null,re=null,Le=null,Ea=!1,Ji=!1,wi=!1,ja=0,Or=0,tr=null,bf=0;function je(){throw Error(r(321))}function Uo(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vs(t[n],e[n]))return!1;return!0}function zo(t,e,n,a,u,x){return gn=x,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,U.H=t===null||t.memoizedState===null?Ou:nl,wi=!1,x=n(a,u),wi=!1,Ji&&(x=tu(e,n,a,u)),Jc(t),x}function Jc(t){U.H=Fr;var e=re!==null&&re.next!==null;if(gn=0,Le=re=It=null,Ea=!1,Or=0,tr=null,e)throw Error(r(300));t===null||Me||(t=t.dependencies,t!==null&&ha(t)&&(Me=!0))}function tu(t,e,n,a){It=t;var u=0;do{if(Ji&&(tr=null),Or=0,Ji=!1,25<=u)throw Error(r(301));if(u+=1,Le=re=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}U.H=Pu,x=e(n,a)}while(Ji);return x}function yf(){var t=U.H,e=t.useState()[0];return e=typeof e.then=="function"?Pr(e):e,t=t.useState()[0],(re!==null?re.memoizedState:null)!==t&&(It.flags|=1024),e}function Ho(){var t=ja!==0;return ja=0,t}function Go(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Vo(t){if(Ea){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ea=!1}gn=0,Le=re=It=null,Ji=!1,Or=ja=0,tr=null}function rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?It.memoizedState=Le=t:Le=Le.next=t,Le}function Ne(){if(re===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=re.next;var e=Le===null?It.memoizedState:Le.next;if(e!==null)Le=e,re=t;else{if(t===null)throw It.alternate===null?Error(r(467)):Error(r(310));re=t,t={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},Le===null?It.memoizedState=Le=t:Le=Le.next=t}return Le}function Aa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pr(t){var e=Or;return Or+=1,tr===null&&(tr=[]),t=Gc(tr,t,e),e=It,(Le===null?e.memoizedState:Le.next)===null&&(e=e.alternate,U.H=e===null||e.memoizedState===null?Ou:nl),t}function Ra(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Pr(t);if(t.$$typeof===B)return Ye(t)}throw Error(r(438,String(t)))}function $o(t){var e=null,n=It.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var a=It.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(e={data:a.data.map(function(u){return u.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Aa(),It.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),a=0;a<t;a++)n[a]=st;return e.index++,n}function bn(t,e){return typeof e=="function"?e(t):e}function Sa(t){var e=Ne();return Xo(e,re,t)}function Xo(t,e,n){var a=t.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var u=t.baseQueue,x=a.pending;if(x!==null){if(u!==null){var T=u.next;u.next=x.next,x.next=T}e.baseQueue=u=x,a.pending=null}if(x=t.baseState,u===null)t.memoizedState=x;else{e=u.next;var z=T=null,et=null,mt=e,jt=!1;do{var St=mt.lane&-536870913;if(St!==mt.lane?($t&St)===St:(gn&St)===St){var pt=mt.revertLane;if(pt===0)et!==null&&(et=et.next={lane:0,revertLane:0,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null}),St===Yi&&(jt=!0);else if((gn&pt)===pt){mt=mt.next,pt===Yi&&(jt=!0);continue}else St={lane:0,revertLane:mt.revertLane,gesture:null,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},et===null?(z=et=St,T=x):et=et.next=St,It.lanes|=pt,Zn|=pt;St=mt.action,wi&&n(x,St),x=mt.hasEagerState?mt.eagerState:n(x,St)}else pt={lane:St,revertLane:mt.revertLane,gesture:mt.gesture,action:mt.action,hasEagerState:mt.hasEagerState,eagerState:mt.eagerState,next:null},et===null?(z=et=pt,T=x):et=et.next=pt,It.lanes|=St,Zn|=St;mt=mt.next}while(mt!==null&&mt!==e);if(et===null?T=x:et.next=z,!vs(x,t.memoizedState)&&(Me=!0,jt&&(n=Wi,n!==null)))throw n;t.memoizedState=x,t.baseState=T,t.baseQueue=et,a.lastRenderedState=x}return u===null&&(a.lanes=0),[t.memoizedState,a.dispatch]}function Yo(t){var e=Ne(),n=e.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=t;var a=n.dispatch,u=n.pending,x=e.memoizedState;if(u!==null){n.pending=null;var T=u=u.next;do x=t(x,T.action),T=T.next;while(T!==u);vs(x,e.memoizedState)||(Me=!0),e.memoizedState=x,e.baseQueue===null&&(e.baseState=x),n.lastRenderedState=x}return[x,a]}function eu(t,e,n){var a=It,u=Ne(),x=Wt;if(x){if(n===void 0)throw Error(r(407));n=n()}else n=e();var T=!vs((re||u).memoizedState,n);if(T&&(u.memoizedState=n,Me=!0),u=u.queue,Qo(iu.bind(null,a,u,t),[t]),u.getSnapshot!==e||T||Le!==null&&Le.memoizedState.tag&1){if(a.flags|=2048,er(9,{destroy:void 0},nu.bind(null,a,u,n,e),null),ce===null)throw Error(r(349));x||(gn&127)!==0||su(a,e,n)}return n}function su(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=It.updateQueue,e===null?(e=Aa(),It.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nu(t,e,n,a){e.value=n,e.getSnapshot=a,ru(e)&&au(t)}function iu(t,e,n){return n(function(){ru(e)&&au(t)})}function ru(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vs(t,n)}catch{return!0}}function au(t){var e=gi(t,2);e!==null&&hs(e,t,2)}function Wo(t){var e=rs();if(typeof t=="function"){var n=t;if(t=n(),wi){ht(!0);try{n()}finally{ht(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:t},e}function ou(t,e,n,a){return t.baseState=n,Xo(t,re,typeof a=="function"?a:bn)}function vf(t,e,n,a,u){if(Na(t))throw Error(r(485));if(t=e.action,t!==null){var x={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){x.listeners.push(T)}};U.T!==null?n(!0):x.isTransition=!1,a(x),n=e.pending,n===null?(x.next=e.pending=x,lu(e,x)):(x.next=n.next,e.pending=n.next=x)}}function lu(t,e){var n=e.action,a=e.payload,u=t.state;if(e.isTransition){var x=U.T,T={};U.T=T;try{var z=n(u,a),et=U.S;et!==null&&et(T,z),cu(t,e,z)}catch(mt){Ko(t,e,mt)}finally{x!==null&&T.types!==null&&(x.types=T.types),U.T=x}}else try{x=n(u,a),cu(t,e,x)}catch(mt){Ko(t,e,mt)}}function cu(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){uu(t,e,a)},function(a){return Ko(t,e,a)}):uu(t,e,n)}function uu(t,e,n){e.status="fulfilled",e.value=n,du(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,lu(t,n)))}function Ko(t,e,n){var a=t.pending;if(t.pending=null,a!==null){a=a.next;do e.status="rejected",e.reason=n,du(e),e=e.next;while(e!==a)}t.action=null}function du(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function hu(t,e){return e}function fu(t,e){if(Wt){var n=ce.formState;if(n!==null){t:{var a=It;if(Wt){if(he){e:{for(var u=he,x=Os;u.nodeType!==8;){if(!x){u=null;break e}if(u=Bs(u.nextSibling),u===null){u=null;break e}}x=u.data,u=x==="F!"||x==="F"?u:null}if(u){he=Bs(u.nextSibling),a=u.data==="F!";break t}}Hn(a)}a=!1}a&&(e=n[0])}}return n=rs(),n.memoizedState=n.baseState=e,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:e},n.queue=a,n=Lu.bind(null,It,a),a.dispatch=n,a=Wo(!1),x=sl.bind(null,It,!1,a.queue),a=rs(),u={state:e,dispatch:null,action:t,pending:null},a.queue=u,n=vf.bind(null,It,u,x,n),u.dispatch=n,a.memoizedState=t,[e,n,!1]}function mu(t){var e=Ne();return pu(e,re,t)}function pu(t,e,n){if(e=Xo(t,e,hu)[0],t=Sa(bn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var a=Pr(e)}catch(T){throw T===Ki?pa:T}else a=e;e=Ne();var u=e.queue,x=u.dispatch;return n!==e.memoizedState&&(It.flags|=2048,er(9,{destroy:void 0},Ef.bind(null,u,n),null)),[a,x,t]}function Ef(t,e){t.action=e}function xu(t){var e=Ne(),n=re;if(n!==null)return pu(e,n,t);Ne(),e=e.memoizedState,n=Ne();var a=n.queue.dispatch;return n.memoizedState=t,[e,a,!1]}function er(t,e,n,a){return t={tag:t,create:n,deps:a,inst:e,next:null},e=It.updateQueue,e===null&&(e=Aa(),It.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(a=n.next,n.next=t,t.next=a,e.lastEffect=t),t}function gu(){return Ne().memoizedState}function wa(t,e,n,a){var u=rs();It.flags|=t,u.memoizedState=er(1|e,{destroy:void 0},n,a===void 0?null:a)}function _a(t,e,n,a){var u=Ne();a=a===void 0?null:a;var x=u.memoizedState.inst;re!==null&&a!==null&&Uo(a,re.memoizedState.deps)?u.memoizedState=er(e,x,n,a):(It.flags|=t,u.memoizedState=er(1|e,x,n,a))}function bu(t,e){wa(8390656,8,t,e)}function Qo(t,e){_a(2048,8,t,e)}function jf(t){It.flags|=4;var e=It.updateQueue;if(e===null)e=Aa(),It.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function yu(t){var e=Ne().memoizedState;return jf({ref:e,nextImpl:t}),function(){if((ee&2)!==0)throw Error(r(440));return e.impl.apply(void 0,arguments)}}function vu(t,e){return _a(4,2,t,e)}function Eu(t,e){return _a(4,4,t,e)}function ju(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Au(t,e,n){n=n!=null?n.concat([t]):null,_a(4,4,ju.bind(null,e,t),n)}function Zo(){}function Ru(t,e){var n=Ne();e=e===void 0?null:e;var a=n.memoizedState;return e!==null&&Uo(e,a[1])?a[0]:(n.memoizedState=[t,e],t)}function Su(t,e){var n=Ne();e=e===void 0?null:e;var a=n.memoizedState;if(e!==null&&Uo(e,a[1]))return a[0];if(a=t(),wi){ht(!0);try{t()}finally{ht(!1)}}return n.memoizedState=[a,e],a}function Jo(t,e,n){return n===void 0||(gn&1073741824)!==0&&($t&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=wd(),It.lanes|=t,Zn|=t,n)}function wu(t,e,n,a){return vs(n,e)?n:Zi.current!==null?(t=Jo(t,n,a),vs(t,e)||(Me=!0),t):(gn&42)===0||(gn&1073741824)!==0&&($t&261930)===0?(Me=!0,t.memoizedState=n):(t=wd(),It.lanes|=t,Zn|=t,e)}function _u(t,e,n,a,u){var x=P.p;P.p=x!==0&&8>x?x:8;var T=U.T,z={};U.T=z,sl(t,!1,e,n);try{var et=u(),mt=U.S;if(mt!==null&&mt(z,et),et!==null&&typeof et=="object"&&typeof et.then=="function"){var jt=gf(et,a);Br(t,e,jt,ws(t))}else Br(t,e,a,ws(t))}catch(St){Br(t,e,{then:function(){},status:"rejected",reason:St},ws())}finally{P.p=x,T!==null&&z.types!==null&&(T.types=z.types),U.T=T}}function Af(){}function tl(t,e,n,a){if(t.tag!==5)throw Error(r(476));var u=Nu(t).queue;_u(t,u,e,k,n===null?Af:function(){return Tu(t),n(a)})}function Nu(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:k},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Tu(t){var e=Nu(t);e.next===null&&(e=t.alternate.memoizedState),Br(t,e.next.queue,{},ws())}function el(){return Ye(ta)}function Cu(){return Ne().memoizedState}function ku(){return Ne().memoizedState}function Rf(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ws();t=$n(n);var a=Xn(e,t,n);a!==null&&(hs(a,e,n),Lr(a,e,n)),e={cache:Co()},t.payload=e;return}e=e.return}}function Sf(t,e,n){var a=ws();n={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Na(t)?Mu(e,n):(n=yo(t,e,n,a),n!==null&&(hs(n,t,a),Du(n,e,a)))}function Lu(t,e,n){var a=ws();Br(t,e,n,a)}function Br(t,e,n,a){var u={lane:a,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Na(t))Mu(e,u);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=e.lastRenderedReducer,x!==null))try{var T=e.lastRenderedState,z=x(T,n);if(u.hasEagerState=!0,u.eagerState=z,vs(z,T))return la(t,e,u,0),ce===null&&oa(),!1}catch{}finally{}if(n=yo(t,e,u,a),n!==null)return hs(n,t,a),Du(n,e,a),!0}return!1}function sl(t,e,n,a){if(a={lane:2,revertLane:Dl(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Na(t)){if(e)throw Error(r(479))}else e=yo(t,n,a,2),e!==null&&hs(e,t,2)}function Na(t){var e=t.alternate;return t===It||e!==null&&e===It}function Mu(t,e){Ji=Ea=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Du(t,e,n){if((n&4194048)!==0){var a=e.lanes;a&=t.pendingLanes,n|=a,e.lanes=n,Xs(t,n)}}var Fr={readContext:Ye,use:Ra,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useLayoutEffect:je,useInsertionEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useSyncExternalStore:je,useId:je,useHostTransitionStatus:je,useFormState:je,useActionState:je,useOptimistic:je,useMemoCache:je,useCacheRefresh:je};Fr.useEffectEvent=je;var Ou={readContext:Ye,use:Ra,useCallback:function(t,e){return rs().memoizedState=[t,e===void 0?null:e],t},useContext:Ye,useEffect:bu,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,wa(4194308,4,ju.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wa(4194308,4,t,e)},useInsertionEffect:function(t,e){wa(4,2,t,e)},useMemo:function(t,e){var n=rs();e=e===void 0?null:e;var a=t();if(wi){ht(!0);try{t()}finally{ht(!1)}}return n.memoizedState=[a,e],a},useReducer:function(t,e,n){var a=rs();if(n!==void 0){var u=n(e);if(wi){ht(!0);try{n(e)}finally{ht(!1)}}}else u=e;return a.memoizedState=a.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},a.queue=t,t=t.dispatch=Sf.bind(null,It,t),[a.memoizedState,t]},useRef:function(t){var e=rs();return t={current:t},e.memoizedState=t},useState:function(t){t=Wo(t);var e=t.queue,n=Lu.bind(null,It,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Zo,useDeferredValue:function(t,e){var n=rs();return Jo(n,t,e)},useTransition:function(){var t=Wo(!1);return t=_u.bind(null,It,t.queue,!0,!1),rs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var a=It,u=rs();if(Wt){if(n===void 0)throw Error(r(407));n=n()}else{if(n=e(),ce===null)throw Error(r(349));($t&127)!==0||su(a,e,n)}u.memoizedState=n;var x={value:n,getSnapshot:e};return u.queue=x,bu(iu.bind(null,a,x,t),[t]),a.flags|=2048,er(9,{destroy:void 0},nu.bind(null,a,x,n,e),null),n},useId:function(){var t=rs(),e=ce.identifierPrefix;if(Wt){var n=nn,a=sn;n=(a&~(1<<32-ct(a)-1)).toString(32)+n,e="_"+e+"R_"+n,n=ja++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=bf++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:el,useFormState:fu,useActionState:fu,useOptimistic:function(t){var e=rs();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=sl.bind(null,It,!0,n),n.dispatch=e,[t,e]},useMemoCache:$o,useCacheRefresh:function(){return rs().memoizedState=Rf.bind(null,It)},useEffectEvent:function(t){var e=rs(),n={impl:t};return e.memoizedState=n,function(){if((ee&2)!==0)throw Error(r(440));return n.impl.apply(void 0,arguments)}}},nl={readContext:Ye,use:Ra,useCallback:Ru,useContext:Ye,useEffect:Qo,useImperativeHandle:Au,useInsertionEffect:vu,useLayoutEffect:Eu,useMemo:Su,useReducer:Sa,useRef:gu,useState:function(){return Sa(bn)},useDebugValue:Zo,useDeferredValue:function(t,e){var n=Ne();return wu(n,re.memoizedState,t,e)},useTransition:function(){var t=Sa(bn)[0],e=Ne().memoizedState;return[typeof t=="boolean"?t:Pr(t),e]},useSyncExternalStore:eu,useId:Cu,useHostTransitionStatus:el,useFormState:mu,useActionState:mu,useOptimistic:function(t,e){var n=Ne();return ou(n,re,t,e)},useMemoCache:$o,useCacheRefresh:ku};nl.useEffectEvent=yu;var Pu={readContext:Ye,use:Ra,useCallback:Ru,useContext:Ye,useEffect:Qo,useImperativeHandle:Au,useInsertionEffect:vu,useLayoutEffect:Eu,useMemo:Su,useReducer:Yo,useRef:gu,useState:function(){return Yo(bn)},useDebugValue:Zo,useDeferredValue:function(t,e){var n=Ne();return re===null?Jo(n,t,e):wu(n,re.memoizedState,t,e)},useTransition:function(){var t=Yo(bn)[0],e=Ne().memoizedState;return[typeof t=="boolean"?t:Pr(t),e]},useSyncExternalStore:eu,useId:Cu,useHostTransitionStatus:el,useFormState:xu,useActionState:xu,useOptimistic:function(t,e){var n=Ne();return re!==null?ou(n,re,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:$o,useCacheRefresh:ku};Pu.useEffectEvent=yu;function il(t,e,n,a){e=t.memoizedState,n=n(a,e),n=n==null?e:f({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rl={enqueueSetState:function(t,e,n){t=t._reactInternals;var a=ws(),u=$n(a);u.payload=e,n!=null&&(u.callback=n),e=Xn(t,u,a),e!==null&&(hs(e,t,a),Lr(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var a=ws(),u=$n(a);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=Xn(t,u,a),e!==null&&(hs(e,t,a),Lr(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ws(),a=$n(n);a.tag=2,e!=null&&(a.callback=e),e=Xn(t,a,n),e!==null&&(hs(e,t,n),Lr(e,t,n))}};function Bu(t,e,n,a,u,x,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,x,T):e.prototype&&e.prototype.isPureReactComponent?!Rr(n,a)||!Rr(u,x):!0}function Fu(t,e,n,a){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,a),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,a),e.state!==t&&rl.enqueueReplaceState(e,e.state,null)}function _i(t,e){var n=e;if("ref"in e){n={};for(var a in e)a!=="ref"&&(n[a]=e[a])}if(t=t.defaultProps){n===e&&(n=f({},n));for(var u in t)n[u]===void 0&&(n[u]=t[u])}return n}function Iu(t){aa(t)}function qu(t){console.error(t)}function Uu(t){aa(t)}function Ta(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(a){setTimeout(function(){throw a})}}function zu(t,e,n){try{var a=t.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function al(t,e,n){return n=$n(n),n.tag=3,n.payload={element:null},n.callback=function(){Ta(t,e)},n}function Hu(t){return t=$n(t),t.tag=3,t}function Gu(t,e,n,a){var u=n.type.getDerivedStateFromError;if(typeof u=="function"){var x=a.value;t.payload=function(){return u(x)},t.callback=function(){zu(e,n,a)}}var T=n.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){zu(e,n,a),typeof u!="function"&&(Jn===null?Jn=new Set([this]):Jn.add(this));var z=a.stack;this.componentDidCatch(a.value,{componentStack:z!==null?z:""})})}function wf(t,e,n,a,u){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(e=n.alternate,e!==null&&Xi(e,n,u,!0),n=js.current,n!==null){switch(n.tag){case 31:case 13:return Ps===null?Ua():n.alternate===null&&Ae===0&&(Ae=3),n.flags&=-257,n.flags|=65536,n.lanes=u,a===xa?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([a]):e.add(a),kl(t,a,u)),!1;case 22:return n.flags|=65536,a===xa?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([a]):n.add(a)),kl(t,a,u)),!1}throw Error(r(435,n.tag))}return kl(t,a,u),Ua(),!1}if(Wt)return e=js.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=u,a!==So&&(t=Error(r(422),{cause:a}),_r(Ls(t,n)))):(a!==So&&(e=Error(r(423),{cause:a}),_r(Ls(e,n))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,a=Ls(a,n),u=al(t.stateNode,a,u),Po(t,u),Ae!==4&&(Ae=2)),!1;var x=Error(r(520),{cause:a});if(x=Ls(x,n),$r===null?$r=[x]:$r.push(x),Ae!==4&&(Ae=2),e===null)return!0;a=Ls(a,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=u&-u,n.lanes|=t,t=al(n.stateNode,a,t),Po(n,t),!1;case 1:if(e=n.type,x=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Jn===null||!Jn.has(x))))return n.flags|=65536,u&=-u,n.lanes|=u,u=Hu(u),Gu(u,t,n,a),Po(n,u),!1}n=n.return}while(n!==null);return!1}var ol=Error(r(461)),Me=!1;function We(t,e,n,a){e.child=t===null?Yc(e,null,n,a):Si(e,t.child,n,a)}function Vu(t,e,n,a,u){n=n.render;var x=e.ref;if("ref"in a){var T={};for(var z in a)z!=="ref"&&(T[z]=a[z])}else T=a;return Ei(e),a=zo(t,e,n,T,x,u),z=Ho(),t!==null&&!Me?(Go(t,e,u),yn(t,e,u)):(Wt&&z&&Ao(e),e.flags|=1,We(t,e,a,u),e.child)}function $u(t,e,n,a,u){if(t===null){var x=n.type;return typeof x=="function"&&!vo(x)&&x.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=x,Xu(t,e,x,a,u)):(t=ua(n.type,null,a,e,e.mode,u),t.ref=e.ref,t.return=e,e.child=t)}if(x=t.child,!pl(t,u)){var T=x.memoizedProps;if(n=n.compare,n=n!==null?n:Rr,n(T,a)&&t.ref===e.ref)return yn(t,e,u)}return e.flags|=1,t=fn(x,a),t.ref=e.ref,t.return=e,e.child=t}function Xu(t,e,n,a,u){if(t!==null){var x=t.memoizedProps;if(Rr(x,a)&&t.ref===e.ref)if(Me=!1,e.pendingProps=a=x,pl(t,u))(t.flags&131072)!==0&&(Me=!0);else return e.lanes=t.lanes,yn(t,e,u)}return ll(t,e,n,a,u)}function Yu(t,e,n,a){var u=a.children,x=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((e.flags&128)!==0){if(x=x!==null?x.baseLanes|n:n,t!==null){for(a=e.child=t.child,u=0;a!==null;)u=u|a.lanes|a.childLanes,a=a.sibling;a=u&~x}else a=0,e.child=null;return Wu(t,e,x,n,a)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&ma(e,x!==null?x.cachePool:null),x!==null?Qc(e,x):Fo(),Zc(e);else return a=e.lanes=536870912,Wu(t,e,x!==null?x.baseLanes|n:n,n,a)}else x!==null?(ma(e,x.cachePool),Qc(e,x),Wn(),e.memoizedState=null):(t!==null&&ma(e,null),Fo(),Wn());return We(t,e,u,n),e.child}function Ir(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function Wu(t,e,n,a,u){var x=Lo();return x=x===null?null:{parent:ke._currentValue,pool:x},e.memoizedState={baseLanes:n,cachePool:x},t!==null&&ma(e,null),Fo(),Zc(e),t!==null&&Xi(t,e,a,!0),e.childLanes=u,null}function Ca(t,e){return e=La({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Ku(t,e,n){return Si(e,t.child,null,n),t=Ca(e,e.pendingProps),t.flags|=2,As(e),e.memoizedState=null,t}function _f(t,e,n){var a=e.pendingProps,u=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Wt){if(a.mode==="hidden")return t=Ca(e,a),e.lanes=536870912,Ir(null,t);if(qo(e),(t=he)?(t=lh(t,Os),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Un!==null?{id:sn,overflow:nn}:null,retryLane:536870912,hydrationErrors:null},n=Mc(t),n.return=e,e.child=n,Xe=e,he=null)):t=null,t===null)throw Hn(e);return e.lanes=536870912,null}return Ca(e,a)}var x=t.memoizedState;if(x!==null){var T=x.dehydrated;if(qo(e),u)if(e.flags&256)e.flags&=-257,e=Ku(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(r(558));else if(Me||Xi(t,e,n,!1),u=(n&t.childLanes)!==0,Me||u){if(a=ce,a!==null&&(T=_s(a,n),T!==0&&T!==x.retryLane))throw x.retryLane=T,gi(t,T),hs(a,t,T),ol;Ua(),e=Ku(t,e,n)}else t=x.treeContext,he=Bs(T.nextSibling),Xe=e,Wt=!0,zn=null,Os=!1,t!==null&&Pc(e,t),e=Ca(e,a),e.flags|=4096;return e}return t=fn(t.child,{mode:a.mode,children:a.children}),t.ref=e.ref,e.child=t,t.return=e,t}function ka(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(r(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function ll(t,e,n,a,u){return Ei(e),n=zo(t,e,n,a,void 0,u),a=Ho(),t!==null&&!Me?(Go(t,e,u),yn(t,e,u)):(Wt&&a&&Ao(e),e.flags|=1,We(t,e,n,u),e.child)}function Qu(t,e,n,a,u,x){return Ei(e),e.updateQueue=null,n=tu(e,a,n,u),Jc(t),a=Ho(),t!==null&&!Me?(Go(t,e,x),yn(t,e,x)):(Wt&&a&&Ao(e),e.flags|=1,We(t,e,n,x),e.child)}function Zu(t,e,n,a,u){if(Ei(e),e.stateNode===null){var x=Hi,T=n.contextType;typeof T=="object"&&T!==null&&(x=Ye(T)),x=new n(a,x),e.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=rl,e.stateNode=x,x._reactInternals=e,x=e.stateNode,x.props=a,x.state=e.memoizedState,x.refs={},Do(e),T=n.contextType,x.context=typeof T=="object"&&T!==null?Ye(T):Hi,x.state=e.memoizedState,T=n.getDerivedStateFromProps,typeof T=="function"&&(il(e,n,T,a),x.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(T=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),T!==x.state&&rl.enqueueReplaceState(x,x.state,null),Dr(e,a,x,u),Mr(),x.state=e.memoizedState),typeof x.componentDidMount=="function"&&(e.flags|=4194308),a=!0}else if(t===null){x=e.stateNode;var z=e.memoizedProps,et=_i(n,z);x.props=et;var mt=x.context,jt=n.contextType;T=Hi,typeof jt=="object"&&jt!==null&&(T=Ye(jt));var St=n.getDerivedStateFromProps;jt=typeof St=="function"||typeof x.getSnapshotBeforeUpdate=="function",z=e.pendingProps!==z,jt||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(z||mt!==T)&&Fu(e,x,a,T),Vn=!1;var pt=e.memoizedState;x.state=pt,Dr(e,a,x,u),Mr(),mt=e.memoizedState,z||pt!==mt||Vn?(typeof St=="function"&&(il(e,n,St,a),mt=e.memoizedState),(et=Vn||Bu(e,n,et,a,pt,mt,T))?(jt||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(e.flags|=4194308)):(typeof x.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=a,e.memoizedState=mt),x.props=a,x.state=mt,x.context=T,a=et):(typeof x.componentDidMount=="function"&&(e.flags|=4194308),a=!1)}else{x=e.stateNode,Oo(t,e),T=e.memoizedProps,jt=_i(n,T),x.props=jt,St=e.pendingProps,pt=x.context,mt=n.contextType,et=Hi,typeof mt=="object"&&mt!==null&&(et=Ye(mt)),z=n.getDerivedStateFromProps,(mt=typeof z=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T!==St||pt!==et)&&Fu(e,x,a,et),Vn=!1,pt=e.memoizedState,x.state=pt,Dr(e,a,x,u),Mr();var bt=e.memoizedState;T!==St||pt!==bt||Vn||t!==null&&t.dependencies!==null&&ha(t.dependencies)?(typeof z=="function"&&(il(e,n,z,a),bt=e.memoizedState),(jt=Vn||Bu(e,n,jt,a,pt,bt,et)||t!==null&&t.dependencies!==null&&ha(t.dependencies))?(mt||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(a,bt,et),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(a,bt,et)),typeof x.componentDidUpdate=="function"&&(e.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof x.componentDidUpdate!="function"||T===t.memoizedProps&&pt===t.memoizedState||(e.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&pt===t.memoizedState||(e.flags|=1024),e.memoizedProps=a,e.memoizedState=bt),x.props=a,x.state=bt,x.context=et,a=jt):(typeof x.componentDidUpdate!="function"||T===t.memoizedProps&&pt===t.memoizedState||(e.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&pt===t.memoizedState||(e.flags|=1024),a=!1)}return x=a,ka(t,e),a=(e.flags&128)!==0,x||a?(x=e.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:x.render(),e.flags|=1,t!==null&&a?(e.child=Si(e,t.child,null,u),e.child=Si(e,null,n,u)):We(t,e,n,u),e.memoizedState=x.state,t=e.child):t=yn(t,e,u),t}function Ju(t,e,n,a){return yi(),e.flags|=256,We(t,e,n,a),e.child}var cl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ul(t){return{baseLanes:t,cachePool:zc()}}function dl(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Ss),t}function td(t,e,n){var a=e.pendingProps,u=!1,x=(e.flags&128)!==0,T;if((T=x)||(T=t!==null&&t.memoizedState===null?!1:(_e.current&2)!==0),T&&(u=!0,e.flags&=-129),T=(e.flags&32)!==0,e.flags&=-33,t===null){if(Wt){if(u?Yn(e):Wn(),(t=he)?(t=lh(t,Os),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Un!==null?{id:sn,overflow:nn}:null,retryLane:536870912,hydrationErrors:null},n=Mc(t),n.return=e,e.child=n,Xe=e,he=null)):t=null,t===null)throw Hn(e);return Xl(t)?e.lanes=32:e.lanes=536870912,null}var z=a.children;return a=a.fallback,u?(Wn(),u=e.mode,z=La({mode:"hidden",children:z},u),a=bi(a,u,n,null),z.return=e,a.return=e,z.sibling=a,e.child=z,a=e.child,a.memoizedState=ul(n),a.childLanes=dl(t,T,n),e.memoizedState=cl,Ir(null,a)):(Yn(e),hl(e,z))}var et=t.memoizedState;if(et!==null&&(z=et.dehydrated,z!==null)){if(x)e.flags&256?(Yn(e),e.flags&=-257,e=fl(t,e,n)):e.memoizedState!==null?(Wn(),e.child=t.child,e.flags|=128,e=null):(Wn(),z=a.fallback,u=e.mode,a=La({mode:"visible",children:a.children},u),z=bi(z,u,n,null),z.flags|=2,a.return=e,z.return=e,a.sibling=z,e.child=a,Si(e,t.child,null,n),a=e.child,a.memoizedState=ul(n),a.childLanes=dl(t,T,n),e.memoizedState=cl,e=Ir(null,a));else if(Yn(e),Xl(z)){if(T=z.nextSibling&&z.nextSibling.dataset,T)var mt=T.dgst;T=mt,a=Error(r(419)),a.stack="",a.digest=T,_r({value:a,source:null,stack:null}),e=fl(t,e,n)}else if(Me||Xi(t,e,n,!1),T=(n&t.childLanes)!==0,Me||T){if(T=ce,T!==null&&(a=_s(T,n),a!==0&&a!==et.retryLane))throw et.retryLane=a,gi(t,a),hs(T,t,a),ol;$l(z)||Ua(),e=fl(t,e,n)}else $l(z)?(e.flags|=192,e.child=t.child,e=null):(t=et.treeContext,he=Bs(z.nextSibling),Xe=e,Wt=!0,zn=null,Os=!1,t!==null&&Pc(e,t),e=hl(e,a.children),e.flags|=4096);return e}return u?(Wn(),z=a.fallback,u=e.mode,et=t.child,mt=et.sibling,a=fn(et,{mode:"hidden",children:a.children}),a.subtreeFlags=et.subtreeFlags&65011712,mt!==null?z=fn(mt,z):(z=bi(z,u,n,null),z.flags|=2),z.return=e,a.return=e,a.sibling=z,e.child=a,Ir(null,a),a=e.child,z=t.child.memoizedState,z===null?z=ul(n):(u=z.cachePool,u!==null?(et=ke._currentValue,u=u.parent!==et?{parent:et,pool:et}:u):u=zc(),z={baseLanes:z.baseLanes|n,cachePool:u}),a.memoizedState=z,a.childLanes=dl(t,T,n),e.memoizedState=cl,Ir(t.child,a)):(Yn(e),n=t.child,t=n.sibling,n=fn(n,{mode:"visible",children:a.children}),n.return=e,n.sibling=null,t!==null&&(T=e.deletions,T===null?(e.deletions=[t],e.flags|=16):T.push(t)),e.child=n,e.memoizedState=null,n)}function hl(t,e){return e=La({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function La(t,e){return t=Es(22,t,null,e),t.lanes=0,t}function fl(t,e,n){return Si(e,t.child,null,n),t=hl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ed(t,e,n){t.lanes|=e;var a=t.alternate;a!==null&&(a.lanes|=e),No(t.return,e,n)}function ml(t,e,n,a,u,x){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:u,treeForkCount:x}:(T.isBackwards=e,T.rendering=null,T.renderingStartTime=0,T.last=a,T.tail=n,T.tailMode=u,T.treeForkCount=x)}function sd(t,e,n){var a=e.pendingProps,u=a.revealOrder,x=a.tail;a=a.children;var T=_e.current,z=(T&2)!==0;if(z?(T=T&1|2,e.flags|=128):T&=1,G(_e,T),We(t,e,a,n),a=Wt?wr:0,!z&&t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ed(t,n,e);else if(t.tag===19)ed(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(n=e.child,u=null;n!==null;)t=n.alternate,t!==null&&va(t)===null&&(u=n),n=n.sibling;n=u,n===null?(u=e.child,e.child=null):(u=n.sibling,n.sibling=null),ml(e,!1,u,n,x,a);break;case"backwards":case"unstable_legacy-backwards":for(n=null,u=e.child,e.child=null;u!==null;){if(t=u.alternate,t!==null&&va(t)===null){e.child=u;break}t=u.sibling,u.sibling=n,n=u,u=t}ml(e,!0,n,null,x,a);break;case"together":ml(e,!1,null,null,void 0,a);break;default:e.memoizedState=null}return e.child}function yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zn|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(Xi(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(r(153));if(e.child!==null){for(t=e.child,n=fn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pl(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&ha(t)))}function Nf(t,e,n){switch(e.tag){case 3:D(e,e.stateNode.containerInfo),Gn(e,ke,t.memoizedState.cache),yi();break;case 27:case 5:W(e);break;case 4:D(e,e.stateNode.containerInfo);break;case 10:Gn(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,qo(e),null;break;case 13:var a=e.memoizedState;if(a!==null)return a.dehydrated!==null?(Yn(e),e.flags|=128,null):(n&e.child.childLanes)!==0?td(t,e,n):(Yn(e),t=yn(t,e,n),t!==null?t.sibling:null);Yn(e);break;case 19:var u=(t.flags&128)!==0;if(a=(n&e.childLanes)!==0,a||(Xi(t,e,n,!1),a=(n&e.childLanes)!==0),u){if(a)return sd(t,e,n);e.flags|=128}if(u=e.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),G(_e,_e.current),a)break;return null;case 22:return e.lanes=0,Yu(t,e,n,e.pendingProps);case 24:Gn(e,ke,t.memoizedState.cache)}return yn(t,e,n)}function nd(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Me=!0;else{if(!pl(t,n)&&(e.flags&128)===0)return Me=!1,Nf(t,e,n);Me=(t.flags&131072)!==0}else Me=!1,Wt&&(e.flags&1048576)!==0&&Oc(e,wr,e.index);switch(e.lanes=0,e.tag){case 16:t:{var a=e.pendingProps;if(t=Ai(e.elementType),e.type=t,typeof t=="function")vo(t)?(a=_i(t,a),e.tag=1,e=Zu(null,e,t,a,n)):(e.tag=0,e=ll(null,e,t,a,n));else{if(t!=null){var u=t.$$typeof;if(u===I){e.tag=11,e=Vu(null,e,t,a,n);break t}else if(u===Q){e.tag=14,e=$u(null,e,t,a,n);break t}}throw e=rt(t)||t,Error(r(306,e,""))}}return e;case 0:return ll(t,e,e.type,e.pendingProps,n);case 1:return a=e.type,u=_i(a,e.pendingProps),Zu(t,e,a,u,n);case 3:t:{if(D(e,e.stateNode.containerInfo),t===null)throw Error(r(387));a=e.pendingProps;var x=e.memoizedState;u=x.element,Oo(t,e),Dr(e,a,null,n);var T=e.memoizedState;if(a=T.cache,Gn(e,ke,a),a!==x.cache&&To(e,[ke],n,!0),Mr(),a=T.element,x.isDehydrated)if(x={element:a,isDehydrated:!1,cache:T.cache},e.updateQueue.baseState=x,e.memoizedState=x,e.flags&256){e=Ju(t,e,a,n);break t}else if(a!==u){u=Ls(Error(r(424)),e),_r(u),e=Ju(t,e,a,n);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(he=Bs(t.firstChild),Xe=e,Wt=!0,zn=null,Os=!0,n=Yc(e,null,a,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(yi(),a===u){e=yn(t,e,n);break t}We(t,e,a,n)}e=e.child}return e;case 26:return ka(t,e),t===null?(n=mh(e.type,null,e.pendingProps,null))?e.memoizedState=n:Wt||(n=e.type,t=e.pendingProps,a=Ya(R.current).createElement(n),a[Se]=e,a[He]=t,Ke(a,n,t),ye(a),e.stateNode=a):e.memoizedState=mh(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return W(e),t===null&&Wt&&(a=e.stateNode=dh(e.type,e.pendingProps,R.current),Xe=e,Os=!0,u=he,ni(e.type)?(Yl=u,he=Bs(a.firstChild)):he=u),We(t,e,e.pendingProps.children,n),ka(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Wt&&((u=a=he)&&(a=im(a,e.type,e.pendingProps,Os),a!==null?(e.stateNode=a,Xe=e,he=Bs(a.firstChild),Os=!1,u=!0):u=!1),u||Hn(e)),W(e),u=e.type,x=e.pendingProps,T=t!==null?t.memoizedProps:null,a=x.children,Hl(u,x)?a=null:T!==null&&Hl(u,T)&&(e.flags|=32),e.memoizedState!==null&&(u=zo(t,e,yf,null,null,n),ta._currentValue=u),ka(t,e),We(t,e,a,n),e.child;case 6:return t===null&&Wt&&((t=n=he)&&(n=rm(n,e.pendingProps,Os),n!==null?(e.stateNode=n,Xe=e,he=null,t=!0):t=!1),t||Hn(e)),null;case 13:return td(t,e,n);case 4:return D(e,e.stateNode.containerInfo),a=e.pendingProps,t===null?e.child=Si(e,null,a,n):We(t,e,a,n),e.child;case 11:return Vu(t,e,e.type,e.pendingProps,n);case 7:return We(t,e,e.pendingProps,n),e.child;case 8:return We(t,e,e.pendingProps.children,n),e.child;case 12:return We(t,e,e.pendingProps.children,n),e.child;case 10:return a=e.pendingProps,Gn(e,e.type,a.value),We(t,e,a.children,n),e.child;case 9:return u=e.type._context,a=e.pendingProps.children,Ei(e),u=Ye(u),a=a(u),e.flags|=1,We(t,e,a,n),e.child;case 14:return $u(t,e,e.type,e.pendingProps,n);case 15:return Xu(t,e,e.type,e.pendingProps,n);case 19:return sd(t,e,n);case 31:return _f(t,e,n);case 22:return Yu(t,e,n,e.pendingProps);case 24:return Ei(e),a=Ye(ke),t===null?(u=Lo(),u===null&&(u=ce,x=Co(),u.pooledCache=x,x.refCount++,x!==null&&(u.pooledCacheLanes|=n),u=x),e.memoizedState={parent:a,cache:u},Do(e),Gn(e,ke,u)):((t.lanes&n)!==0&&(Oo(t,e),Dr(e,null,null,n),Mr()),u=t.memoizedState,x=e.memoizedState,u.parent!==a?(u={parent:a,cache:a},e.memoizedState=u,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=u),Gn(e,ke,a)):(a=x.cache,Gn(e,ke,a),a!==u.cache&&To(e,[ke],n,!0))),We(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(r(156,e.tag))}function vn(t){t.flags|=4}function xl(t,e,n,a,u){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(Cd())t.flags|=8192;else throw Ri=xa,Mo}else t.flags&=-16777217}function id(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!yh(e))if(Cd())t.flags|=8192;else throw Ri=xa,Mo}function Ma(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?fs():536870912,t.lanes|=e,rr|=e)}function qr(t,e){if(!Wt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function fe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,a=0;if(e)for(var u=t.child;u!==null;)n|=u.lanes|u.childLanes,a|=u.subtreeFlags&65011712,a|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)n|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=a,t.childLanes=n,e}function Tf(t,e,n){var a=e.pendingProps;switch(Ro(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fe(e),null;case 1:return fe(e),null;case 3:return n=e.stateNode,a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),xn(ke),V(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&($i(e)?vn(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,wo())),fe(e),null;case 26:var u=e.type,x=e.memoizedState;return t===null?(vn(e),x!==null?(fe(e),id(e,x)):(fe(e),xl(e,u,null,a,n))):x?x!==t.memoizedState?(vn(e),fe(e),id(e,x)):(fe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==a&&vn(e),fe(e),xl(e,u,t,a,n)),null;case 27:if($(e),n=R.current,u=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&vn(e);else{if(!a){if(e.stateNode===null)throw Error(r(166));return fe(e),null}t=K.current,$i(e)?Bc(e):(t=dh(u,a,n),e.stateNode=t,vn(e))}return fe(e),null;case 5:if($(e),u=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==a&&vn(e);else{if(!a){if(e.stateNode===null)throw Error(r(166));return fe(e),null}if(x=K.current,$i(e))Bc(e);else{var T=Ya(R.current);switch(x){case 1:x=T.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:x=T.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":x=T.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":x=T.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":x=T.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof a.is=="string"?T.createElement("select",{is:a.is}):T.createElement("select"),a.multiple?x.multiple=!0:a.size&&(x.size=a.size);break;default:x=typeof a.is=="string"?T.createElement(u,{is:a.is}):T.createElement(u)}}x[Se]=e,x[He]=a;t:for(T=e.child;T!==null;){if(T.tag===5||T.tag===6)x.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===e)break t;for(;T.sibling===null;){if(T.return===null||T.return===e)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}e.stateNode=x;t:switch(Ke(x,u,a),u){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break t;case"img":a=!0;break t;default:a=!1}a&&vn(e)}}return fe(e),xl(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==a&&vn(e);else{if(typeof a!="string"&&e.stateNode===null)throw Error(r(166));if(t=R.current,$i(e)){if(t=e.stateNode,n=e.memoizedProps,a=null,u=Xe,u!==null)switch(u.tag){case 27:case 5:a=u.memoizedProps}t[Se]=e,t=!!(t.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||th(t.nodeValue,n)),t||Hn(e,!0)}else t=Ya(t).createTextNode(a),t[Se]=e,e.stateNode=t}return fe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(a=$i(e),n!==null){if(t===null){if(!a)throw Error(r(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Se]=e}else yi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;fe(e),t=!1}else n=wo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(As(e),e):(As(e),null);if((e.flags&128)!==0)throw Error(r(558))}return fe(e),null;case 13:if(a=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=$i(e),a!==null&&a.dehydrated!==null){if(t===null){if(!u)throw Error(r(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(r(317));u[Se]=e}else yi(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;fe(e),u=!1}else u=wo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return e.flags&256?(As(e),e):(As(e),null)}return As(e),(e.flags&128)!==0?(e.lanes=n,e):(n=a!==null,t=t!==null&&t.memoizedState!==null,n&&(a=e.child,u=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(u=a.alternate.memoizedState.cachePool.pool),x=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(x=a.memoizedState.cachePool.pool),x!==u&&(a.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Ma(e,e.updateQueue),fe(e),null);case 4:return V(),t===null&&Fl(e.stateNode.containerInfo),fe(e),null;case 10:return xn(e.type),fe(e),null;case 19:if(H(_e),a=e.memoizedState,a===null)return fe(e),null;if(u=(e.flags&128)!==0,x=a.rendering,x===null)if(u)qr(a,!1);else{if(Ae!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(x=va(t),x!==null){for(e.flags|=128,qr(a,!1),t=x.updateQueue,e.updateQueue=t,Ma(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Lc(n,t),n=n.sibling;return G(_e,_e.current&1|2),Wt&&mn(e,a.treeForkCount),e.child}t=t.sibling}a.tail!==null&&kt()>Fa&&(e.flags|=128,u=!0,qr(a,!1),e.lanes=4194304)}else{if(!u)if(t=va(x),t!==null){if(e.flags|=128,u=!0,t=t.updateQueue,e.updateQueue=t,Ma(e,t),qr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!x.alternate&&!Wt)return fe(e),null}else 2*kt()-a.renderingStartTime>Fa&&n!==536870912&&(e.flags|=128,u=!0,qr(a,!1),e.lanes=4194304);a.isBackwards?(x.sibling=e.child,e.child=x):(t=a.last,t!==null?t.sibling=x:e.child=x,a.last=x)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=kt(),t.sibling=null,n=_e.current,G(_e,u?n&1|2:n&1),Wt&&mn(e,a.treeForkCount),t):(fe(e),null);case 22:case 23:return As(e),Io(),a=e.memoizedState!==null,t!==null?t.memoizedState!==null!==a&&(e.flags|=8192):a&&(e.flags|=8192),a?(n&536870912)!==0&&(e.flags&128)===0&&(fe(e),e.subtreeFlags&6&&(e.flags|=8192)):fe(e),n=e.updateQueue,n!==null&&Ma(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),a=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),a!==n&&(e.flags|=2048),t!==null&&H(ji),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),xn(ke),fe(e),null;case 25:return null;case 30:return null}throw Error(r(156,e.tag))}function Cf(t,e){switch(Ro(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xn(ke),V(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return $(e),null;case 31:if(e.memoizedState!==null){if(As(e),e.alternate===null)throw Error(r(340));yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(As(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(r(340));yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return H(_e),null;case 4:return V(),null;case 10:return xn(e.type),null;case 22:case 23:return As(e),Io(),t!==null&&H(ji),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return xn(ke),null;case 25:return null;default:return null}}function rd(t,e){switch(Ro(e),e.tag){case 3:xn(ke),V();break;case 26:case 27:case 5:$(e);break;case 4:V();break;case 31:e.memoizedState!==null&&As(e);break;case 13:As(e);break;case 19:H(_e);break;case 10:xn(e.type);break;case 22:case 23:As(e),Io(),t!==null&&H(ji);break;case 24:xn(ke)}}function Ur(t,e){try{var n=e.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var u=a.next;n=u;do{if((n.tag&t)===t){a=void 0;var x=n.create,T=n.inst;a=x(),T.destroy=a}n=n.next}while(n!==u)}}catch(z){ie(e,e.return,z)}}function Kn(t,e,n){try{var a=e.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var x=u.next;a=x;do{if((a.tag&t)===t){var T=a.inst,z=T.destroy;if(z!==void 0){T.destroy=void 0,u=e;var et=n,mt=z;try{mt()}catch(jt){ie(u,et,jt)}}}a=a.next}while(a!==x)}}catch(jt){ie(e,e.return,jt)}}function ad(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{Kc(e,n)}catch(a){ie(t,t.return,a)}}}function od(t,e,n){n.props=_i(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(a){ie(t,e,a)}}function zr(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var a=t.stateNode;break;case 30:a=t.stateNode;break;default:a=t.stateNode}typeof n=="function"?t.refCleanup=n(a):n.current=a}}catch(u){ie(t,e,u)}}function rn(t,e){var n=t.ref,a=t.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(u){ie(t,e,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(u){ie(t,e,u)}else n.current=null}function ld(t){var e=t.type,n=t.memoizedProps,a=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break t;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(u){ie(t,t.return,u)}}function gl(t,e,n){try{var a=t.stateNode;Zf(a,t.type,n,e),a[He]=e}catch(u){ie(t,t.return,u)}}function cd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ni(t.type)||t.tag===4}function bl(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||cd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ni(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yl(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=os));else if(a!==4&&(a===27&&ni(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(yl(t,e,n),t=t.sibling;t!==null;)yl(t,e,n),t=t.sibling}function Da(t,e,n){var a=t.tag;if(a===5||a===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(a!==4&&(a===27&&ni(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Da(t,e,n),t=t.sibling;t!==null;)Da(t,e,n),t=t.sibling}function ud(t){var e=t.stateNode,n=t.memoizedProps;try{for(var a=t.type,u=e.attributes;u.length;)e.removeAttributeNode(u[0]);Ke(e,a,n),e[Se]=t,e[He]=n}catch(x){ie(t,t.return,x)}}var En=!1,De=!1,vl=!1,dd=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function kf(t,e){if(t=t.containerInfo,Ul=eo,t=Ac(t),fo(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{n=(n=t.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var u=a.anchorOffset,x=a.focusNode;a=a.focusOffset;try{n.nodeType,x.nodeType}catch{n=null;break t}var T=0,z=-1,et=-1,mt=0,jt=0,St=t,pt=null;e:for(;;){for(var bt;St!==n||u!==0&&St.nodeType!==3||(z=T+u),St!==x||a!==0&&St.nodeType!==3||(et=T+a),St.nodeType===3&&(T+=St.nodeValue.length),(bt=St.firstChild)!==null;)pt=St,St=bt;for(;;){if(St===t)break e;if(pt===n&&++mt===u&&(z=T),pt===x&&++jt===a&&(et=T),(bt=St.nextSibling)!==null)break;St=pt,pt=St.parentNode}St=bt}n=z===-1||et===-1?null:{start:z,end:et}}else n=null}n=n||{start:0,end:0}}else n=null;for(zl={focusedElem:t,selectionRange:n},eo=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){switch(e=Ve,x=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)u=t[n],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,n=e,u=x.memoizedProps,x=x.memoizedState,a=n.stateNode;try{var Ct=_i(n.type,u);t=a.getSnapshotBeforeUpdate(Ct,x),a.__reactInternalSnapshotBeforeUpdate=t}catch(Ft){ie(n,n.return,Ft)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Vl(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vl(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}}function hd(t,e,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:An(t,n),a&4&&Ur(5,n);break;case 1:if(An(t,n),a&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(T){ie(n,n.return,T)}else{var u=_i(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(u,e,t.__reactInternalSnapshotBeforeUpdate)}catch(T){ie(n,n.return,T)}}a&64&&ad(n),a&512&&zr(n,n.return);break;case 3:if(An(t,n),a&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{Kc(t,e)}catch(T){ie(n,n.return,T)}}break;case 27:e===null&&a&4&&ud(n);case 26:case 5:An(t,n),e===null&&a&4&&ld(n),a&512&&zr(n,n.return);break;case 12:An(t,n);break;case 31:An(t,n),a&4&&pd(t,n);break;case 13:An(t,n),a&4&&xd(t,n),a&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=qf.bind(null,n),am(t,n))));break;case 22:if(a=n.memoizedState!==null||En,!a){e=e!==null&&e.memoizedState!==null||De,u=En;var x=De;En=a,(De=e)&&!x?Rn(t,n,(n.subtreeFlags&8772)!==0):An(t,n),En=u,De=x}break;case 30:break;default:An(t,n)}}function fd(t){var e=t.alternate;e!==null&&(t.alternate=null,fd(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&ui(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var xe=null,ls=!1;function jn(t,e,n){for(n=n.child;n!==null;)md(t,e,n),n=n.sibling}function md(t,e,n){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(Is,n)}catch{}switch(n.tag){case 26:De||rn(n,e),jn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:De||rn(n,e);var a=xe,u=ls;ni(n.type)&&(xe=n.stateNode,ls=!1),jn(t,e,n),Qr(n.stateNode),xe=a,ls=u;break;case 5:De||rn(n,e);case 6:if(a=xe,u=ls,xe=null,jn(t,e,n),xe=a,ls=u,xe!==null)if(ls)try{(xe.nodeType===9?xe.body:xe.nodeName==="HTML"?xe.ownerDocument.body:xe).removeChild(n.stateNode)}catch(x){ie(n,e,x)}else try{xe.removeChild(n.stateNode)}catch(x){ie(n,e,x)}break;case 18:xe!==null&&(ls?(t=xe,ah(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),fr(t)):ah(xe,n.stateNode));break;case 4:a=xe,u=ls,xe=n.stateNode.containerInfo,ls=!0,jn(t,e,n),xe=a,ls=u;break;case 0:case 11:case 14:case 15:Kn(2,n,e),De||Kn(4,n,e),jn(t,e,n);break;case 1:De||(rn(n,e),a=n.stateNode,typeof a.componentWillUnmount=="function"&&od(n,e,a)),jn(t,e,n);break;case 21:jn(t,e,n);break;case 22:De=(a=De)||n.memoizedState!==null,jn(t,e,n),De=a;break;default:jn(t,e,n)}}function pd(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{fr(t)}catch(n){ie(e,e.return,n)}}}function xd(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fr(t)}catch(n){ie(e,e.return,n)}}function Lf(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new dd),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new dd),e;default:throw Error(r(435,t.tag))}}function Oa(t,e){var n=Lf(t);e.forEach(function(a){if(!n.has(a)){n.add(a);var u=Uf.bind(null,t,a);a.then(u,u)}})}function cs(t,e){var n=e.deletions;if(n!==null)for(var a=0;a<n.length;a++){var u=n[a],x=t,T=e,z=T;t:for(;z!==null;){switch(z.tag){case 27:if(ni(z.type)){xe=z.stateNode,ls=!1;break t}break;case 5:xe=z.stateNode,ls=!1;break t;case 3:case 4:xe=z.stateNode.containerInfo,ls=!0;break t}z=z.return}if(xe===null)throw Error(r(160));md(x,T,u),xe=null,ls=!1,x=u.alternate,x!==null&&(x.return=null),u.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)gd(e,t),e=e.sibling}var Hs=null;function gd(t,e){var n=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:cs(e,t),us(t),a&4&&(Kn(3,t,t.return),Ur(3,t),Kn(5,t,t.return));break;case 1:cs(e,t),us(t),a&512&&(De||n===null||rn(n,n.return)),a&64&&En&&(t=t.updateQueue,t!==null&&(a=t.callbacks,a!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var u=Hs;if(cs(e,t),us(t),a&512&&(De||n===null||rn(n,n.return)),a&4){var x=n!==null?n.memoizedState:null;if(a=t.memoizedState,n===null)if(a===null)if(t.stateNode===null){t:{a=t.type,n=t.memoizedProps,u=u.ownerDocument||u;e:switch(a){case"title":x=u.getElementsByTagName("title")[0],(!x||x[on]||x[Se]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=u.createElement(a),u.head.insertBefore(x,u.querySelector("head > title"))),Ke(x,a,n),x[Se]=t,ye(x),a=x;break t;case"link":var T=gh("link","href",u).get(a+(n.href||""));if(T){for(var z=0;z<T.length;z++)if(x=T[z],x.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&x.getAttribute("rel")===(n.rel==null?null:n.rel)&&x.getAttribute("title")===(n.title==null?null:n.title)&&x.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){T.splice(z,1);break e}}x=u.createElement(a),Ke(x,a,n),u.head.appendChild(x);break;case"meta":if(T=gh("meta","content",u).get(a+(n.content||""))){for(z=0;z<T.length;z++)if(x=T[z],x.getAttribute("content")===(n.content==null?null:""+n.content)&&x.getAttribute("name")===(n.name==null?null:n.name)&&x.getAttribute("property")===(n.property==null?null:n.property)&&x.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&x.getAttribute("charset")===(n.charSet==null?null:n.charSet)){T.splice(z,1);break e}}x=u.createElement(a),Ke(x,a,n),u.head.appendChild(x);break;default:throw Error(r(468,a))}x[Se]=t,ye(x),a=x}t.stateNode=a}else bh(u,t.type,t.stateNode);else t.stateNode=xh(u,a,t.memoizedProps);else x!==a?(x===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):x.count--,a===null?bh(u,t.type,t.stateNode):xh(u,a,t.memoizedProps)):a===null&&t.stateNode!==null&&gl(t,t.memoizedProps,n.memoizedProps)}break;case 27:cs(e,t),us(t),a&512&&(De||n===null||rn(n,n.return)),n!==null&&a&4&&gl(t,t.memoizedProps,n.memoizedProps);break;case 5:if(cs(e,t),us(t),a&512&&(De||n===null||rn(n,n.return)),t.flags&32){u=t.stateNode;try{ts(u,"")}catch(Ct){ie(t,t.return,Ct)}}a&4&&t.stateNode!=null&&(u=t.memoizedProps,gl(t,u,n!==null?n.memoizedProps:u)),a&1024&&(vl=!0);break;case 6:if(cs(e,t),us(t),a&4){if(t.stateNode===null)throw Error(r(162));a=t.memoizedProps,n=t.stateNode;try{n.nodeValue=a}catch(Ct){ie(t,t.return,Ct)}}break;case 3:if(Qa=null,u=Hs,Hs=Wa(e.containerInfo),cs(e,t),Hs=u,us(t),a&4&&n!==null&&n.memoizedState.isDehydrated)try{fr(e.containerInfo)}catch(Ct){ie(t,t.return,Ct)}vl&&(vl=!1,bd(t));break;case 4:a=Hs,Hs=Wa(t.stateNode.containerInfo),cs(e,t),us(t),Hs=a;break;case 12:cs(e,t),us(t);break;case 31:cs(e,t),us(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Oa(t,a)));break;case 13:cs(e,t),us(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Ba=kt()),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Oa(t,a)));break;case 22:u=t.memoizedState!==null;var et=n!==null&&n.memoizedState!==null,mt=En,jt=De;if(En=mt||u,De=jt||et,cs(e,t),De=jt,En=mt,us(t),a&8192)t:for(e=t.stateNode,e._visibility=u?e._visibility&-2:e._visibility|1,u&&(n===null||et||En||De||Ni(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){et=n=e;try{if(x=et.stateNode,u)T=x.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{z=et.stateNode;var St=et.memoizedProps.style,pt=St!=null&&St.hasOwnProperty("display")?St.display:null;z.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(Ct){ie(et,et.return,Ct)}}}else if(e.tag===6){if(n===null){et=e;try{et.stateNode.nodeValue=u?"":et.memoizedProps}catch(Ct){ie(et,et.return,Ct)}}}else if(e.tag===18){if(n===null){et=e;try{var bt=et.stateNode;u?oh(bt,!0):oh(et.stateNode,!1)}catch(Ct){ie(et,et.return,Ct)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}a&4&&(a=t.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Oa(t,n))));break;case 19:cs(e,t),us(t),a&4&&(a=t.updateQueue,a!==null&&(t.updateQueue=null,Oa(t,a)));break;case 30:break;case 21:break;default:cs(e,t),us(t)}}function us(t){var e=t.flags;if(e&2){try{for(var n,a=t.return;a!==null;){if(cd(a)){n=a;break}a=a.return}if(n==null)throw Error(r(160));switch(n.tag){case 27:var u=n.stateNode,x=bl(t);Da(t,x,u);break;case 5:var T=n.stateNode;n.flags&32&&(ts(T,""),n.flags&=-33);var z=bl(t);Da(t,z,T);break;case 3:case 4:var et=n.stateNode.containerInfo,mt=bl(t);yl(t,mt,et);break;default:throw Error(r(161))}}catch(jt){ie(t,t.return,jt)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bd(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;bd(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function An(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)hd(t,e.alternate,e),e=e.sibling}function Ni(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Kn(4,e,e.return),Ni(e);break;case 1:rn(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&od(e,e.return,n),Ni(e);break;case 27:Qr(e.stateNode);case 26:case 5:rn(e,e.return),Ni(e);break;case 22:e.memoizedState===null&&Ni(e);break;case 30:Ni(e);break;default:Ni(e)}t=t.sibling}}function Rn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var a=e.alternate,u=t,x=e,T=x.flags;switch(x.tag){case 0:case 11:case 15:Rn(u,x,n),Ur(4,x);break;case 1:if(Rn(u,x,n),a=x,u=a.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(mt){ie(a,a.return,mt)}if(a=x,u=a.updateQueue,u!==null){var z=a.stateNode;try{var et=u.shared.hiddenCallbacks;if(et!==null)for(u.shared.hiddenCallbacks=null,u=0;u<et.length;u++)Wc(et[u],z)}catch(mt){ie(a,a.return,mt)}}n&&T&64&&ad(x),zr(x,x.return);break;case 27:ud(x);case 26:case 5:Rn(u,x,n),n&&a===null&&T&4&&ld(x),zr(x,x.return);break;case 12:Rn(u,x,n);break;case 31:Rn(u,x,n),n&&T&4&&pd(u,x);break;case 13:Rn(u,x,n),n&&T&4&&xd(u,x);break;case 22:x.memoizedState===null&&Rn(u,x,n),zr(x,x.return);break;case 30:break;default:Rn(u,x,n)}e=e.sibling}}function El(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Nr(n))}function jl(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Nr(t))}function Gs(t,e,n,a){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yd(t,e,n,a),e=e.sibling}function yd(t,e,n,a){var u=e.flags;switch(e.tag){case 0:case 11:case 15:Gs(t,e,n,a),u&2048&&Ur(9,e);break;case 1:Gs(t,e,n,a);break;case 3:Gs(t,e,n,a),u&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Nr(t)));break;case 12:if(u&2048){Gs(t,e,n,a),t=e.stateNode;try{var x=e.memoizedProps,T=x.id,z=x.onPostCommit;typeof z=="function"&&z(T,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(et){ie(e,e.return,et)}}else Gs(t,e,n,a);break;case 31:Gs(t,e,n,a);break;case 13:Gs(t,e,n,a);break;case 23:break;case 22:x=e.stateNode,T=e.alternate,e.memoizedState!==null?x._visibility&2?Gs(t,e,n,a):Hr(t,e):x._visibility&2?Gs(t,e,n,a):(x._visibility|=2,sr(t,e,n,a,(e.subtreeFlags&10256)!==0||!1)),u&2048&&El(T,e);break;case 24:Gs(t,e,n,a),u&2048&&jl(e.alternate,e);break;default:Gs(t,e,n,a)}}function sr(t,e,n,a,u){for(u=u&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var x=t,T=e,z=n,et=a,mt=T.flags;switch(T.tag){case 0:case 11:case 15:sr(x,T,z,et,u),Ur(8,T);break;case 23:break;case 22:var jt=T.stateNode;T.memoizedState!==null?jt._visibility&2?sr(x,T,z,et,u):Hr(x,T):(jt._visibility|=2,sr(x,T,z,et,u)),u&&mt&2048&&El(T.alternate,T);break;case 24:sr(x,T,z,et,u),u&&mt&2048&&jl(T.alternate,T);break;default:sr(x,T,z,et,u)}e=e.sibling}}function Hr(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,a=e,u=a.flags;switch(a.tag){case 22:Hr(n,a),u&2048&&El(a.alternate,a);break;case 24:Hr(n,a),u&2048&&jl(a.alternate,a);break;default:Hr(n,a)}e=e.sibling}}var Gr=8192;function nr(t,e,n){if(t.subtreeFlags&Gr)for(t=t.child;t!==null;)vd(t,e,n),t=t.sibling}function vd(t,e,n){switch(t.tag){case 26:nr(t,e,n),t.flags&Gr&&t.memoizedState!==null&&bm(n,Hs,t.memoizedState,t.memoizedProps);break;case 5:nr(t,e,n);break;case 3:case 4:var a=Hs;Hs=Wa(t.stateNode.containerInfo),nr(t,e,n),Hs=a;break;case 22:t.memoizedState===null&&(a=t.alternate,a!==null&&a.memoizedState!==null?(a=Gr,Gr=16777216,nr(t,e,n),Gr=a):nr(t,e,n));break;default:nr(t,e,n)}}function Ed(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Vr(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];Ve=a,Ad(a,t)}Ed(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jd(t),t=t.sibling}function jd(t){switch(t.tag){case 0:case 11:case 15:Vr(t),t.flags&2048&&Kn(9,t,t.return);break;case 3:Vr(t);break;case 12:Vr(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Pa(t)):Vr(t);break;default:Vr(t)}}function Pa(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var a=e[n];Ve=a,Ad(a,t)}Ed(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Kn(8,e,e.return),Pa(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Pa(e));break;default:Pa(e)}t=t.sibling}}function Ad(t,e){for(;Ve!==null;){var n=Ve;switch(n.tag){case 0:case 11:case 15:Kn(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Nr(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,Ve=a;else t:for(n=t;Ve!==null;){a=Ve;var u=a.sibling,x=a.return;if(fd(a),a===n){Ve=null;break t}if(u!==null){u.return=x,Ve=u;break t}Ve=x}}}var Mf={getCacheForType:function(t){var e=Ye(ke),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Ye(ke).controller.signal}},Df=typeof WeakMap=="function"?WeakMap:Map,ee=0,ce=null,Ht=null,$t=0,ne=0,Rs=null,Qn=!1,ir=!1,Al=!1,Sn=0,Ae=0,Zn=0,Ti=0,Rl=0,Ss=0,rr=0,$r=null,ds=null,Sl=!1,Ba=0,Rd=0,Fa=1/0,Ia=null,Jn=null,qe=0,ti=null,ar=null,wn=0,wl=0,_l=null,Sd=null,Xr=0,Nl=null;function ws(){return(ee&2)!==0&&$t!==0?$t&-$t:U.T!==null?Dl():me()}function wd(){if(Ss===0)if(($t&536870912)===0||Wt){var t=$e;$e<<=1,($e&3932160)===0&&($e=262144),Ss=t}else Ss=536870912;return t=js.current,t!==null&&(t.flags|=32),Ss}function hs(t,e,n){(t===ce&&(ne===2||ne===9)||t.cancelPendingCommit!==null)&&(or(t,0),ei(t,$t,Ss,!1)),ss(t,n),((ee&2)===0||t!==ce)&&(t===ce&&((ee&2)===0&&(Ti|=n),Ae===4&&ei(t,$t,Ss,!1)),an(t))}function _d(t,e,n){if((ee&6)!==0)throw Error(r(327));var a=!n&&(e&127)===0&&(e&t.expiredLanes)===0||ze(t,e),u=a?Bf(t,e):Cl(t,e,!0),x=a;do{if(u===0){ir&&!a&&ei(t,e,0,!1);break}else{if(n=t.current.alternate,x&&!Of(n)){u=Cl(t,e,!1),x=!1;continue}if(u===2){if(x=e,t.errorRecoveryDisabledLanes&x)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){e=T;t:{var z=t;u=$r;var et=z.current.memoizedState.isDehydrated;if(et&&(or(z,T).flags|=256),T=Cl(z,T,!1),T!==2){if(Al&&!et){z.errorRecoveryDisabledLanes|=x,Ti|=x,u=4;break t}x=ds,ds=u,x!==null&&(ds===null?ds=x:ds.push.apply(ds,x))}u=T}if(x=!1,u!==2)continue}}if(u===1){or(t,0),ei(t,e,0,!0);break}t:{switch(a=t,x=u,x){case 0:case 1:throw Error(r(345));case 4:if((e&4194048)!==e)break;case 6:ei(a,e,Ss,!Qn);break t;case 2:ds=null;break;case 3:case 5:break;default:throw Error(r(329))}if((e&62914560)===e&&(u=Ba+300-kt(),10<u)){if(ei(a,e,Ss,!Qn),le(a,0,!0)!==0)break t;wn=e,a.timeoutHandle=ih(Nd.bind(null,a,n,ds,Ia,Sl,e,Ss,Ti,rr,Qn,x,"Throttled",-0,0),u);break t}Nd(a,n,ds,Ia,Sl,e,Ss,Ti,rr,Qn,x,null,-0,0)}}break}while(!0);an(t)}function Nd(t,e,n,a,u,x,T,z,et,mt,jt,St,pt,bt){if(t.timeoutHandle=-1,St=e.subtreeFlags,St&8192||(St&16785408)===16785408){St={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:os},vd(e,x,St);var Ct=(x&62914560)===x?Ba-kt():(x&4194048)===x?Rd-kt():0;if(Ct=ym(St,Ct),Ct!==null){wn=x,t.cancelPendingCommit=Ct(Pd.bind(null,t,e,x,n,a,u,T,z,et,jt,St,null,pt,bt)),ei(t,x,T,!mt);return}}Pd(t,e,x,n,a,u,T,z,et)}function Of(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var u=n[a],x=u.getSnapshot;u=u.value;try{if(!vs(x(),u))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ei(t,e,n,a){e&=~Rl,e&=~Ti,t.suspendedLanes|=e,t.pingedLanes&=~e,a&&(t.warmLanes|=e),a=t.expirationTimes;for(var u=e;0<u;){var x=31-ct(u),T=1<<x;a[x]=-1,u&=~T}n!==0&&$s(t,n,e)}function qa(){return(ee&6)===0?(Yr(0),!1):!0}function Tl(){if(Ht!==null){if(ne===0)var t=Ht.return;else t=Ht,pn=vi=null,Vo(t),Qi=null,Cr=0,t=Ht;for(;t!==null;)rd(t.alternate,t),t=t.return;Ht=null}}function or(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,em(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),wn=0,Tl(),ce=t,Ht=n=fn(t.current,null),$t=e,ne=0,Rs=null,Qn=!1,ir=ze(t,e),Al=!1,rr=Ss=Rl=Ti=Zn=Ae=0,ds=$r=null,Sl=!1,(e&8)!==0&&(e|=e&32);var a=t.entangledLanes;if(a!==0)for(t=t.entanglements,a&=e;0<a;){var u=31-ct(a),x=1<<u;e|=t[u],a&=~x}return Sn=e,oa(),n}function Td(t,e){It=null,U.H=Fr,e===Ki||e===pa?(e=Vc(),ne=3):e===Mo?(e=Vc(),ne=4):ne=e===ol?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Rs=e,Ht===null&&(Ae=1,Ta(t,Ls(e,t.current)))}function Cd(){var t=js.current;return t===null?!0:($t&4194048)===$t?Ps===null:($t&62914560)===$t||($t&536870912)!==0?t===Ps:!1}function kd(){var t=U.H;return U.H=Fr,t===null?Fr:t}function Ld(){var t=U.A;return U.A=Mf,t}function Ua(){Ae=4,Qn||($t&4194048)!==$t&&js.current!==null||(ir=!0),(Zn&134217727)===0&&(Ti&134217727)===0||ce===null||ei(ce,$t,Ss,!1)}function Cl(t,e,n){var a=ee;ee|=2;var u=kd(),x=Ld();(ce!==t||$t!==e)&&(Ia=null,or(t,e)),e=!1;var T=Ae;t:do try{if(ne!==0&&Ht!==null){var z=Ht,et=Rs;switch(ne){case 8:Tl(),T=6;break t;case 3:case 2:case 9:case 6:js.current===null&&(e=!0);var mt=ne;if(ne=0,Rs=null,lr(t,z,et,mt),n&&ir){T=0;break t}break;default:mt=ne,ne=0,Rs=null,lr(t,z,et,mt)}}Pf(),T=Ae;break}catch(jt){Td(t,jt)}while(!0);return e&&t.shellSuspendCounter++,pn=vi=null,ee=a,U.H=u,U.A=x,Ht===null&&(ce=null,$t=0,oa()),T}function Pf(){for(;Ht!==null;)Md(Ht)}function Bf(t,e){var n=ee;ee|=2;var a=kd(),u=Ld();ce!==t||$t!==e?(Ia=null,Fa=kt()+500,or(t,e)):ir=ze(t,e);t:do try{if(ne!==0&&Ht!==null){e=Ht;var x=Rs;e:switch(ne){case 1:ne=0,Rs=null,lr(t,e,x,1);break;case 2:case 9:if(Hc(x)){ne=0,Rs=null,Dd(e);break}e=function(){ne!==2&&ne!==9||ce!==t||(ne=7),an(t)},x.then(e,e);break t;case 3:ne=7;break t;case 4:ne=5;break t;case 7:Hc(x)?(ne=0,Rs=null,Dd(e)):(ne=0,Rs=null,lr(t,e,x,7));break;case 5:var T=null;switch(Ht.tag){case 26:T=Ht.memoizedState;case 5:case 27:var z=Ht;if(T?yh(T):z.stateNode.complete){ne=0,Rs=null;var et=z.sibling;if(et!==null)Ht=et;else{var mt=z.return;mt!==null?(Ht=mt,za(mt)):Ht=null}break e}}ne=0,Rs=null,lr(t,e,x,5);break;case 6:ne=0,Rs=null,lr(t,e,x,6);break;case 8:Tl(),Ae=6;break t;default:throw Error(r(462))}}Ff();break}catch(jt){Td(t,jt)}while(!0);return pn=vi=null,U.H=a,U.A=u,ee=n,Ht!==null?0:(ce=null,$t=0,oa(),Ae)}function Ff(){for(;Ht!==null&&!Dt();)Md(Ht)}function Md(t){var e=nd(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?za(t):Ht=e}function Dd(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=Qu(n,e,e.pendingProps,e.type,void 0,$t);break;case 11:e=Qu(n,e,e.pendingProps,e.type.render,e.ref,$t);break;case 5:Vo(e);default:rd(n,e),e=Ht=Lc(e,Sn),e=nd(n,e,Sn)}t.memoizedProps=t.pendingProps,e===null?za(t):Ht=e}function lr(t,e,n,a){pn=vi=null,Vo(e),Qi=null,Cr=0;var u=e.return;try{if(wf(t,u,e,n,$t)){Ae=1,Ta(t,Ls(n,t.current)),Ht=null;return}}catch(x){if(u!==null)throw Ht=u,x;Ae=1,Ta(t,Ls(n,t.current)),Ht=null;return}e.flags&32768?(Wt||a===1?t=!0:ir||($t&536870912)!==0?t=!1:(Qn=t=!0,(a===2||a===9||a===3||a===6)&&(a=js.current,a!==null&&a.tag===13&&(a.flags|=16384))),Od(e,t)):za(e)}function za(t){var e=t;do{if((e.flags&32768)!==0){Od(e,Qn);return}t=e.return;var n=Tf(e.alternate,e,Sn);if(n!==null){Ht=n;return}if(e=e.sibling,e!==null){Ht=e;return}Ht=e=t}while(e!==null);Ae===0&&(Ae=5)}function Od(t,e){do{var n=Cf(t.alternate,t);if(n!==null){n.flags&=32767,Ht=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ht=t;return}Ht=t=n}while(t!==null);Ae=6,Ht=null}function Pd(t,e,n,a,u,x,T,z,et){t.cancelPendingCommit=null;do Ha();while(qe!==0);if((ee&6)!==0)throw Error(r(327));if(e!==null){if(e===t.current)throw Error(r(177));if(x=e.lanes|e.childLanes,x|=bo,Ze(t,n,x,T,z,et),t===ce&&(Ht=ce=null,$t=0),ar=e,ti=t,wn=n,wl=x,_l=u,Sd=a,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,zf(Ue,function(){return Ud(),null})):(t.callbackNode=null,t.callbackPriority=0),a=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||a){a=U.T,U.T=null,u=P.p,P.p=2,T=ee,ee|=4;try{kf(t,e,n)}finally{ee=T,P.p=u,U.T=a}}qe=1,Bd(),Fd(),Id()}}function Bd(){if(qe===1){qe=0;var t=ti,e=ar,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=U.T,U.T=null;var a=P.p;P.p=2;var u=ee;ee|=4;try{gd(e,t);var x=zl,T=Ac(t.containerInfo),z=x.focusedElem,et=x.selectionRange;if(T!==z&&z&&z.ownerDocument&&jc(z.ownerDocument.documentElement,z)){if(et!==null&&fo(z)){var mt=et.start,jt=et.end;if(jt===void 0&&(jt=mt),"selectionStart"in z)z.selectionStart=mt,z.selectionEnd=Math.min(jt,z.value.length);else{var St=z.ownerDocument||document,pt=St&&St.defaultView||window;if(pt.getSelection){var bt=pt.getSelection(),Ct=z.textContent.length,Ft=Math.min(et.start,Ct),oe=et.end===void 0?Ft:Math.min(et.end,Ct);!bt.extend&&Ft>oe&&(T=oe,oe=Ft,Ft=T);var dt=Ec(z,Ft),at=Ec(z,oe);if(dt&&at&&(bt.rangeCount!==1||bt.anchorNode!==dt.node||bt.anchorOffset!==dt.offset||bt.focusNode!==at.node||bt.focusOffset!==at.offset)){var ft=St.createRange();ft.setStart(dt.node,dt.offset),bt.removeAllRanges(),Ft>oe?(bt.addRange(ft),bt.extend(at.node,at.offset)):(ft.setEnd(at.node,at.offset),bt.addRange(ft))}}}}for(St=[],bt=z;bt=bt.parentNode;)bt.nodeType===1&&St.push({element:bt,left:bt.scrollLeft,top:bt.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<St.length;z++){var At=St[z];At.element.scrollLeft=At.left,At.element.scrollTop=At.top}}eo=!!Ul,zl=Ul=null}finally{ee=u,P.p=a,U.T=n}}t.current=e,qe=2}}function Fd(){if(qe===2){qe=0;var t=ti,e=ar,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=U.T,U.T=null;var a=P.p;P.p=2;var u=ee;ee|=4;try{hd(t,e.alternate,e)}finally{ee=u,P.p=a,U.T=n}}qe=3}}function Id(){if(qe===4||qe===3){qe=0,Pt();var t=ti,e=ar,n=wn,a=Sd;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?qe=5:(qe=0,ar=ti=null,qd(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Jn=null),ns(n),e=e.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(Is,e,void 0,(e.current.flags&128)===128)}catch{}if(a!==null){e=U.T,u=P.p,P.p=2,U.T=null;try{for(var x=t.onRecoverableError,T=0;T<a.length;T++){var z=a[T];x(z.value,{componentStack:z.stack})}}finally{U.T=e,P.p=u}}(wn&3)!==0&&Ha(),an(t),u=t.pendingLanes,(n&261930)!==0&&(u&42)!==0?t===Nl?Xr++:(Xr=0,Nl=t):Xr=0,Yr(0)}}function qd(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Nr(e)))}function Ha(){return Bd(),Fd(),Id(),Ud()}function Ud(){if(qe!==5)return!1;var t=ti,e=wl;wl=0;var n=ns(wn),a=U.T,u=P.p;try{P.p=32>n?32:n,U.T=null,n=_l,_l=null;var x=ti,T=wn;if(qe=0,ar=ti=null,wn=0,(ee&6)!==0)throw Error(r(331));var z=ee;if(ee|=4,jd(x.current),yd(x,x.current,T,n),ee=z,Yr(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(Is,x)}catch{}return!0}finally{P.p=u,U.T=a,qd(t,e)}}function zd(t,e,n){e=Ls(n,e),e=al(t.stateNode,e,2),t=Xn(t,e,2),t!==null&&(ss(t,2),an(t))}function ie(t,e,n){if(t.tag===3)zd(t,t,n);else for(;e!==null;){if(e.tag===3){zd(e,t,n);break}else if(e.tag===1){var a=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Jn===null||!Jn.has(a))){t=Ls(n,t),n=Hu(2),a=Xn(e,n,2),a!==null&&(Gu(n,a,e,t),ss(a,2),an(a));break}}e=e.return}}function kl(t,e,n){var a=t.pingCache;if(a===null){a=t.pingCache=new Df;var u=new Set;a.set(e,u)}else u=a.get(e),u===void 0&&(u=new Set,a.set(e,u));u.has(n)||(Al=!0,u.add(n),t=If.bind(null,t,e,n),e.then(t,t))}function If(t,e,n){var a=t.pingCache;a!==null&&a.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ce===t&&($t&n)===n&&(Ae===4||Ae===3&&($t&62914560)===$t&&300>kt()-Ba?(ee&2)===0&&or(t,0):Rl|=n,rr===$t&&(rr=0)),an(t)}function Hd(t,e){e===0&&(e=fs()),t=gi(t,e),t!==null&&(ss(t,e),an(t))}function qf(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Hd(t,n)}function Uf(t,e){var n=0;switch(t.tag){case 31:case 13:var a=t.stateNode,u=t.memoizedState;u!==null&&(n=u.retryLane);break;case 19:a=t.stateNode;break;case 22:a=t.stateNode._retryCache;break;default:throw Error(r(314))}a!==null&&a.delete(e),Hd(t,n)}function zf(t,e){return _t(t,e)}var Ga=null,cr=null,Ll=!1,Va=!1,Ml=!1,si=0;function an(t){t!==cr&&t.next===null&&(cr===null?Ga=cr=t:cr=cr.next=t),Va=!0,Ll||(Ll=!0,Gf())}function Yr(t,e){if(!Ml&&Va){Ml=!0;do for(var n=!1,a=Ga;a!==null;){if(t!==0){var u=a.pendingLanes;if(u===0)var x=0;else{var T=a.suspendedLanes,z=a.pingedLanes;x=(1<<31-ct(42|t)+1)-1,x&=u&~(T&~z),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(n=!0,Xd(a,x))}else x=$t,x=le(a,a===ce?x:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(x&3)===0||ze(a,x)||(n=!0,Xd(a,x));a=a.next}while(n);Ml=!1}}function Hf(){Gd()}function Gd(){Va=Ll=!1;var t=0;si!==0&&tm()&&(t=si);for(var e=kt(),n=null,a=Ga;a!==null;){var u=a.next,x=Vd(a,e);x===0?(a.next=null,n===null?Ga=u:n.next=u,u===null&&(cr=n)):(n=a,(t!==0||(x&3)!==0)&&(Va=!0)),a=u}qe!==0&&qe!==5||Yr(t),si!==0&&(si=0)}function Vd(t,e){for(var n=t.suspendedLanes,a=t.pingedLanes,u=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var T=31-ct(x),z=1<<T,et=u[T];et===-1?((z&n)===0||(z&a)!==0)&&(u[T]=Qe(z,e)):et<=e&&(t.expiredLanes|=z),x&=~z}if(e=ce,n=$t,n=le(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a=t.callbackNode,n===0||t===e&&(ne===2||ne===9)||t.cancelPendingCommit!==null)return a!==null&&a!==null&&Tt(a),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||ze(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(a!==null&&Tt(a),ns(n)){case 2:case 8:n=ue;break;case 32:n=Ue;break;case 268435456:n=de;break;default:n=Ue}return a=$d.bind(null,t),n=_t(n,a),t.callbackPriority=e,t.callbackNode=n,e}return a!==null&&a!==null&&Tt(a),t.callbackPriority=2,t.callbackNode=null,2}function $d(t,e){if(qe!==0&&qe!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ha()&&t.callbackNode!==n)return null;var a=$t;return a=le(t,t===ce?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),a===0?null:(_d(t,a,e),Vd(t,kt()),t.callbackNode!=null&&t.callbackNode===n?$d.bind(null,t):null)}function Xd(t,e){if(Ha())return null;_d(t,e,!0)}function Gf(){sm(function(){(ee&6)!==0?_t(Te,Hf):Gd()})}function Dl(){if(si===0){var t=Yi;t===0&&(t=se,se<<=1,(se&261888)===0&&(se=256)),si=t}return si}function Yd(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Pn(""+t)}function Wd(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Vf(t,e,n,a,u){if(e==="submit"&&n&&n.stateNode===u){var x=Yd((u[He]||null).action),T=a.submitter;T&&(e=(e=T[He]||null)?Yd(e.formAction):T.getAttribute("formAction"),e!==null&&(x=e,T=null));var z=new Lt("action","action",null,a,u);t.push({event:z,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(si!==0){var et=T?Wd(u,T):new FormData(u);tl(n,{pending:!0,data:et,method:u.method,action:x},null,et)}}else typeof x=="function"&&(z.preventDefault(),et=T?Wd(u,T):new FormData(u),tl(n,{pending:!0,data:et,method:u.method,action:x},x,et))},currentTarget:u}]})}}for(var Ol=0;Ol<go.length;Ol++){var Pl=go[Ol],$f=Pl.toLowerCase(),Xf=Pl[0].toUpperCase()+Pl.slice(1);zs($f,"on"+Xf)}zs(wc,"onAnimationEnd"),zs(_c,"onAnimationIteration"),zs(Nc,"onAnimationStart"),zs("dblclick","onDoubleClick"),zs("focusin","onFocus"),zs("focusout","onBlur"),zs(cf,"onTransitionRun"),zs(uf,"onTransitionStart"),zs(df,"onTransitionCancel"),zs(Tc,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wr));function Kd(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var a=t[n],u=a.event;a=a.listeners;t:{var x=void 0;if(e)for(var T=a.length-1;0<=T;T--){var z=a[T],et=z.instance,mt=z.currentTarget;if(z=z.listener,et!==x&&u.isPropagationStopped())break t;x=z,u.currentTarget=mt;try{x(u)}catch(jt){aa(jt)}u.currentTarget=null,x=et}else for(T=0;T<a.length;T++){if(z=a[T],et=z.instance,mt=z.currentTarget,z=z.listener,et!==x&&u.isPropagationStopped())break t;x=z,u.currentTarget=mt;try{x(u)}catch(jt){aa(jt)}u.currentTarget=null,x=et}}}}function Gt(t,e){var n=e[Ce];n===void 0&&(n=e[Ce]=new Set);var a=t+"__bubble";n.has(a)||(Qd(e,t,2,!1),n.add(a))}function Bl(t,e,n){var a=0;e&&(a|=4),Qd(n,t,a,e)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Fl(t){if(!t[$a]){t[$a]=!0,Li.forEach(function(n){n!=="selectionchange"&&(Yf.has(n)||Bl(n,!1,t),Bl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$a]||(e[$a]=!0,Bl("selectionchange",!1,e))}}function Qd(t,e,n,a){switch(wh(e)){case 2:var u=jm;break;case 8:u=Am;break;default:u=Jl}n=u.bind(null,e,n,t),u=void 0,!In||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(u=!0),a?u!==void 0?t.addEventListener(e,n,{capture:!0,passive:u}):t.addEventListener(e,n,!0):u!==void 0?t.addEventListener(e,n,{passive:u}):t.addEventListener(e,n,!1)}function Il(t,e,n,a,u){var x=a;if((e&1)===0&&(e&2)===0&&a!==null)t:for(;;){if(a===null)return;var T=a.tag;if(T===3||T===4){var z=a.stateNode.containerInfo;if(z===u)break;if(T===4)for(T=a.return;T!==null;){var et=T.tag;if((et===3||et===4)&&T.stateNode.containerInfo===u)return;T=T.return}for(;z!==null;){if(T=we(z),T===null)return;if(et=T.tag,et===5||et===6||et===26||et===27){a=x=T;continue t}z=z.parentNode}}a=a.return}Oi(function(){var mt=x,jt=Bn(n),St=[];t:{var pt=Cc.get(t);if(pt!==void 0){var bt=Lt,Ct=t;switch(t){case"keypress":if(w(n)===0)break t;case"keydown":case"keyup":bt=qh;break;case"focusin":Ct="focus",bt=ys;break;case"focusout":Ct="blur",bt=ys;break;case"beforeblur":case"afterblur":bt=ys;break;case"click":if(n.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Ee;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Ie;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=Hh;break;case wc:case _c:case Nc:bt=ia;break;case Tc:bt=Vh;break;case"scroll":case"scrollend":bt=Yt;break;case"wheel":bt=Xh;break;case"copy":case"cut":case"paste":bt=Fi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=oc;break;case"toggle":case"beforetoggle":bt=Wh}var Ft=(e&4)!==0,oe=!Ft&&(t==="scroll"||t==="scrollend"),dt=Ft?pt!==null?pt+"Capture":null:pt;Ft=[];for(var at=mt,ft;at!==null;){var At=at;if(ft=At.stateNode,At=At.tag,At!==5&&At!==26&&At!==27||ft===null||dt===null||(At=tn(at,dt),At!=null&&Ft.push(Kr(at,At,ft))),oe)break;at=at.return}0<Ft.length&&(pt=new bt(pt,Ct,null,n,jt),St.push({event:pt,listeners:Ft}))}}if((e&7)===0){t:{if(pt=t==="mouseover"||t==="pointerover",bt=t==="mouseout"||t==="pointerout",pt&&n!==Be&&(Ct=n.relatedTarget||n.fromElement)&&(we(Ct)||Ct[Ys]))break t;if((bt||pt)&&(pt=jt.window===jt?jt:(pt=jt.ownerDocument)?pt.defaultView||pt.parentWindow:window,bt?(Ct=n.relatedTarget||n.toElement,bt=mt,Ct=Ct?we(Ct):null,Ct!==null&&(oe=h(Ct),Ft=Ct.tag,Ct!==oe||Ft!==5&&Ft!==27&&Ft!==6)&&(Ct=null)):(bt=null,Ct=mt),bt!==Ct)){if(Ft=Ee,At="onMouseLeave",dt="onMouseEnter",at="mouse",(t==="pointerout"||t==="pointerover")&&(Ft=oc,At="onPointerLeave",dt="onPointerEnter",at="pointer"),oe=bt==null?pt:ln(bt),ft=Ct==null?pt:ln(Ct),pt=new Ft(At,at+"leave",bt,n,jt),pt.target=oe,pt.relatedTarget=ft,At=null,we(jt)===mt&&(Ft=new Ft(dt,at+"enter",Ct,n,jt),Ft.target=ft,Ft.relatedTarget=oe,At=Ft),oe=At,bt&&Ct)e:{for(Ft=Wf,dt=bt,at=Ct,ft=0,At=dt;At;At=Ft(At))ft++;At=0;for(var Ot=at;Ot;Ot=Ft(Ot))At++;for(;0<ft-At;)dt=Ft(dt),ft--;for(;0<At-ft;)at=Ft(at),At--;for(;ft--;){if(dt===at||at!==null&&dt===at.alternate){Ft=dt;break e}dt=Ft(dt),at=Ft(at)}Ft=null}else Ft=null;bt!==null&&Zd(St,pt,bt,Ft,!1),Ct!==null&&oe!==null&&Zd(St,oe,Ct,Ft,!0)}}t:{if(pt=mt?ln(mt):window,bt=pt.nodeName&&pt.nodeName.toLowerCase(),bt==="select"||bt==="input"&&pt.type==="file")var Qt=pc;else if(fc(pt))if(xc)Qt=af;else{Qt=nf;var Mt=sf}else bt=pt.nodeName,!bt||bt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?mt&&mi(mt.elementType)&&(Qt=pc):Qt=rf;if(Qt&&(Qt=Qt(t,mt))){mc(St,Qt,n,jt);break t}Mt&&Mt(t,pt,mt),t==="focusout"&&mt&&pt.type==="number"&&mt.memoizedProps.value!=null&&fi(pt,"number",pt.value)}switch(Mt=mt?ln(mt):window,t){case"focusin":(fc(Mt)||Mt.contentEditable==="true")&&(qi=Mt,mo=mt,Sr=null);break;case"focusout":Sr=mo=qi=null;break;case"mousedown":po=!0;break;case"contextmenu":case"mouseup":case"dragend":po=!1,Rc(St,n,jt);break;case"selectionchange":if(lf)break;case"keydown":case"keyup":Rc(St,n,jt)}var qt;if(co)t:{switch(t){case"compositionstart":var Xt="onCompositionStart";break t;case"compositionend":Xt="onCompositionEnd";break t;case"compositionupdate":Xt="onCompositionUpdate";break t}Xt=void 0}else Ii?dc(t,n)&&(Xt="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Xt="onCompositionStart");Xt&&(lc&&n.locale!=="ko"&&(Ii||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&Ii&&(qt=Pi()):(bs=jt,dn="value"in bs?bs.value:bs.textContent,Ii=!0)),Mt=Xa(mt,Xt),0<Mt.length&&(Xt=new ac(Xt,t,null,n,jt),St.push({event:Xt,listeners:Mt}),qt?Xt.data=qt:(qt=hc(n),qt!==null&&(Xt.data=qt)))),(qt=Qh?Zh(t,n):Jh(t,n))&&(Xt=Xa(mt,"onBeforeInput"),0<Xt.length&&(Mt=new ac("onBeforeInput","beforeinput",null,n,jt),St.push({event:Mt,listeners:Xt}),Mt.data=qt)),Vf(St,t,mt,n,jt)}Kd(St,e)})}function Kr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xa(t,e){for(var n=e+"Capture",a=[];t!==null;){var u=t,x=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||x===null||(u=tn(t,n),u!=null&&a.unshift(Kr(t,u,x)),u=tn(t,e),u!=null&&a.push(Kr(t,u,x))),t.tag===3)return a;t=t.return}return[]}function Wf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Zd(t,e,n,a,u){for(var x=e._reactName,T=[];n!==null&&n!==a;){var z=n,et=z.alternate,mt=z.stateNode;if(z=z.tag,et!==null&&et===a)break;z!==5&&z!==26&&z!==27||mt===null||(et=mt,u?(mt=tn(n,x),mt!=null&&T.unshift(Kr(n,mt,et))):u||(mt=tn(n,x),mt!=null&&T.push(Kr(n,mt,et)))),n=n.return}T.length!==0&&t.push({event:e,listeners:T})}var Kf=/\r\n?/g,Qf=/\u0000|\uFFFD/g;function Jd(t){return(typeof t=="string"?t:""+t).replace(Kf,`
`).replace(Qf,"")}function th(t,e){return e=Jd(e),Jd(t)===e}function ae(t,e,n,a,u,x){switch(n){case"children":typeof a=="string"?e==="body"||e==="textarea"&&a===""||ts(t,a):(typeof a=="number"||typeof a=="bigint")&&e!=="body"&&ts(t,""+a);break;case"className":kn(t,"class",a);break;case"tabIndex":kn(t,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(t,n,a);break;case"style":xs(t,a,x);break;case"data":if(e!=="object"){kn(t,"data",a);break}case"src":case"href":if(a===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Pn(""+a),t.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(n==="formAction"?(e!=="input"&&ae(t,e,"name",u.name,u,null),ae(t,e,"formEncType",u.formEncType,u,null),ae(t,e,"formMethod",u.formMethod,u,null),ae(t,e,"formTarget",u.formTarget,u,null)):(ae(t,e,"encType",u.encType,u,null),ae(t,e,"method",u.method,u,null),ae(t,e,"target",u.target,u,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){t.removeAttribute(n);break}a=Pn(""+a),t.setAttribute(n,a);break;case"onClick":a!=null&&(t.onclick=os);break;case"onScroll":a!=null&&Gt("scroll",t);break;case"onScrollEnd":a!=null&&Gt("scrollend",t);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(n=a.__html,n!=null){if(u.children!=null)throw Error(r(60));t.innerHTML=n}}break;case"multiple":t.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":t.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){t.removeAttribute("xlink:href");break}n=Pn(""+a),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""+a):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":a===!0?t.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?t.setAttribute(n,a):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?t.setAttribute(n,a):t.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?t.removeAttribute(n):t.setAttribute(n,a);break;case"popover":Gt("beforetoggle",t),Gt("toggle",t),Cn(t,"popover",a);break;case"xlinkActuate":ps(t,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":ps(t,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":ps(t,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":ps(t,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":ps(t,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":ps(t,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":ps(t,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":ps(t,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":ps(t,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Cn(t,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=yr.get(n)||n,Cn(t,n,a))}}function ql(t,e,n,a,u,x){switch(n){case"style":xs(t,a,x);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(n=a.__html,n!=null){if(u.children!=null)throw Error(r(60));t.innerHTML=n}}break;case"children":typeof a=="string"?ts(t,a):(typeof a=="number"||typeof a=="bigint")&&ts(t,""+a);break;case"onScroll":a!=null&&Gt("scroll",t);break;case"onScrollEnd":a!=null&&Gt("scrollend",t);break;case"onClick":a!=null&&(t.onclick=os);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cn.hasOwnProperty(n))t:{if(n[0]==="o"&&n[1]==="n"&&(u=n.endsWith("Capture"),e=n.slice(2,u?n.length-7:void 0),x=t[He]||null,x=x!=null?x[n]:null,typeof x=="function"&&t.removeEventListener(e,x,u),typeof a=="function")){typeof x!="function"&&x!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,a,u);break t}n in t?t[n]=a:a===!0?t.setAttribute(n,""):Cn(t,n,a)}}}function Ke(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",t),Gt("load",t);var a=!1,u=!1,x;for(x in n)if(n.hasOwnProperty(x)){var T=n[x];if(T!=null)switch(x){case"src":a=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,e));default:ae(t,e,x,T,n,null)}}u&&ae(t,e,"srcSet",n.srcSet,n,null),a&&ae(t,e,"src",n.src,n,null);return;case"input":Gt("invalid",t);var z=x=T=u=null,et=null,mt=null;for(a in n)if(n.hasOwnProperty(a)){var jt=n[a];if(jt!=null)switch(a){case"name":u=jt;break;case"type":T=jt;break;case"checked":et=jt;break;case"defaultChecked":mt=jt;break;case"value":x=jt;break;case"defaultValue":z=jt;break;case"children":case"dangerouslySetInnerHTML":if(jt!=null)throw Error(r(137,e));break;default:ae(t,e,a,jt,n,null)}}On(t,x,z,et,mt,T,u,!1);return;case"select":Gt("invalid",t),a=T=x=null;for(u in n)if(n.hasOwnProperty(u)&&(z=n[u],z!=null))switch(u){case"value":x=z;break;case"defaultValue":T=z;break;case"multiple":a=z;default:ae(t,e,u,z,n,null)}e=x,n=T,t.multiple=!!a,e!=null?Qs(t,!!a,e,!1):n!=null&&Qs(t,!!a,n,!0);return;case"textarea":Gt("invalid",t),x=u=a=null;for(T in n)if(n.hasOwnProperty(T)&&(z=n[T],z!=null))switch(T){case"value":a=z;break;case"defaultValue":u=z;break;case"children":x=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:ae(t,e,T,z,n,null)}as(t,a,u,x);return;case"option":for(et in n)if(n.hasOwnProperty(et)&&(a=n[et],a!=null))switch(et){case"selected":t.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:ae(t,e,et,a,n,null)}return;case"dialog":Gt("beforetoggle",t),Gt("toggle",t),Gt("cancel",t),Gt("close",t);break;case"iframe":case"object":Gt("load",t);break;case"video":case"audio":for(a=0;a<Wr.length;a++)Gt(Wr[a],t);break;case"image":Gt("error",t),Gt("load",t);break;case"details":Gt("toggle",t);break;case"embed":case"source":case"link":Gt("error",t),Gt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(mt in n)if(n.hasOwnProperty(mt)&&(a=n[mt],a!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,e));default:ae(t,e,mt,a,n,null)}return;default:if(mi(e)){for(jt in n)n.hasOwnProperty(jt)&&(a=n[jt],a!==void 0&&ql(t,e,jt,a,n,void 0));return}}for(z in n)n.hasOwnProperty(z)&&(a=n[z],a!=null&&ae(t,e,z,a,n,null))}function Zf(t,e,n,a){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,x=null,T=null,z=null,et=null,mt=null,jt=null;for(bt in n){var St=n[bt];if(n.hasOwnProperty(bt)&&St!=null)switch(bt){case"checked":break;case"value":break;case"defaultValue":et=St;default:a.hasOwnProperty(bt)||ae(t,e,bt,null,a,St)}}for(var pt in a){var bt=a[pt];if(St=n[pt],a.hasOwnProperty(pt)&&(bt!=null||St!=null))switch(pt){case"type":x=bt;break;case"name":u=bt;break;case"checked":mt=bt;break;case"defaultChecked":jt=bt;break;case"value":T=bt;break;case"defaultValue":z=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(r(137,e));break;default:bt!==St&&ae(t,e,pt,bt,a,St)}}hi(t,T,z,et,mt,jt,x,u);return;case"select":bt=T=z=pt=null;for(x in n)if(et=n[x],n.hasOwnProperty(x)&&et!=null)switch(x){case"value":break;case"multiple":bt=et;default:a.hasOwnProperty(x)||ae(t,e,x,null,a,et)}for(u in a)if(x=a[u],et=n[u],a.hasOwnProperty(u)&&(x!=null||et!=null))switch(u){case"value":pt=x;break;case"defaultValue":z=x;break;case"multiple":T=x;default:x!==et&&ae(t,e,u,x,a,et)}e=z,n=T,a=bt,pt!=null?Qs(t,!!n,pt,!1):!!a!=!!n&&(e!=null?Qs(t,!!n,e,!0):Qs(t,!!n,n?[]:"",!1));return;case"textarea":bt=pt=null;for(z in n)if(u=n[z],n.hasOwnProperty(z)&&u!=null&&!a.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:ae(t,e,z,null,a,u)}for(T in a)if(u=a[T],x=n[T],a.hasOwnProperty(T)&&(u!=null||x!=null))switch(T){case"value":pt=u;break;case"defaultValue":bt=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(r(91));break;default:u!==x&&ae(t,e,T,u,a,x)}Zs(t,pt,bt);return;case"option":for(var Ct in n)if(pt=n[Ct],n.hasOwnProperty(Ct)&&pt!=null&&!a.hasOwnProperty(Ct))switch(Ct){case"selected":t.selected=!1;break;default:ae(t,e,Ct,null,a,pt)}for(et in a)if(pt=a[et],bt=n[et],a.hasOwnProperty(et)&&pt!==bt&&(pt!=null||bt!=null))switch(et){case"selected":t.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:ae(t,e,et,pt,a,bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ft in n)pt=n[Ft],n.hasOwnProperty(Ft)&&pt!=null&&!a.hasOwnProperty(Ft)&&ae(t,e,Ft,null,a,pt);for(mt in a)if(pt=a[mt],bt=n[mt],a.hasOwnProperty(mt)&&pt!==bt&&(pt!=null||bt!=null))switch(mt){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,e));break;default:ae(t,e,mt,pt,a,bt)}return;default:if(mi(e)){for(var oe in n)pt=n[oe],n.hasOwnProperty(oe)&&pt!==void 0&&!a.hasOwnProperty(oe)&&ql(t,e,oe,void 0,a,pt);for(jt in a)pt=a[jt],bt=n[jt],!a.hasOwnProperty(jt)||pt===bt||pt===void 0&&bt===void 0||ql(t,e,jt,pt,a,bt);return}}for(var dt in n)pt=n[dt],n.hasOwnProperty(dt)&&pt!=null&&!a.hasOwnProperty(dt)&&ae(t,e,dt,null,a,pt);for(St in a)pt=a[St],bt=n[St],!a.hasOwnProperty(St)||pt===bt||pt==null&&bt==null||ae(t,e,St,pt,a,bt)}function eh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jf(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),a=0;a<n.length;a++){var u=n[a],x=u.transferSize,T=u.initiatorType,z=u.duration;if(x&&z&&eh(T)){for(T=0,z=u.responseEnd,a+=1;a<n.length;a++){var et=n[a],mt=et.startTime;if(mt>z)break;var jt=et.transferSize,St=et.initiatorType;jt&&eh(St)&&(et=et.responseEnd,T+=jt*(et<z?1:(z-mt)/(et-mt)))}if(--a,e+=8*(x+T)/(u.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ul=null,zl=null;function Ya(t){return t.nodeType===9?t:t.ownerDocument}function sh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nh(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Hl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gl=null;function tm(){var t=window.event;return t&&t.type==="popstate"?t===Gl?!1:(Gl=t,!0):(Gl=null,!1)}var ih=typeof setTimeout=="function"?setTimeout:void 0,em=typeof clearTimeout=="function"?clearTimeout:void 0,rh=typeof Promise=="function"?Promise:void 0,sm=typeof queueMicrotask=="function"?queueMicrotask:typeof rh<"u"?function(t){return rh.resolve(null).then(t).catch(nm)}:ih;function nm(t){setTimeout(function(){throw t})}function ni(t){return t==="head"}function ah(t,e){var n=e,a=0;do{var u=n.nextSibling;if(t.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"||n==="/&"){if(a===0){t.removeChild(u),fr(e);return}a--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")a++;else if(n==="html")Qr(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Qr(n);for(var x=n.firstChild;x;){var T=x.nextSibling,z=x.nodeName;x[on]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&x.rel.toLowerCase()==="stylesheet"||n.removeChild(x),x=T}}else n==="body"&&Qr(t.ownerDocument.body);n=u}while(n);fr(e)}function oh(t,e){var n=t;t=0;do{var a=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=a}while(n)}function Vl(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Vl(n),ui(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function im(t,e,n,a){for(;t.nodeType===1;){var u=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!a&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(a){if(!t[on])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var x=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=Bs(t.nextSibling),t===null)break}return null}function rm(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Bs(t.nextSibling),t===null))return null;return t}function lh(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Bs(t.nextSibling),t===null))return null;return t}function $l(t){return t.data==="$?"||t.data==="$~"}function Xl(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function am(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var a=function(){e(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),t._reactRetry=a}}function Bs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Yl=null;function ch(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Bs(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function uh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function dh(t,e,n){switch(e=Ya(n),t){case"html":if(t=e.documentElement,!t)throw Error(r(452));return t;case"head":if(t=e.head,!t)throw Error(r(453));return t;case"body":if(t=e.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Qr(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);ui(t)}var Fs=new Map,hh=new Set;function Wa(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _n=P.d;P.d={f:om,r:lm,D:cm,C:um,L:dm,m:hm,X:mm,S:fm,M:pm};function om(){var t=_n.f(),e=qa();return t||e}function lm(t){var e=Ws(t);e!==null&&e.tag===5&&e.type==="form"?Tu(e):_n.r(t)}var ur=typeof document>"u"?null:document;function fh(t,e,n){var a=ur;if(a&&typeof e=="string"&&e){var u=Je(e);u='link[rel="'+t+'"][href="'+u+'"]',typeof n=="string"&&(u+='[crossorigin="'+n+'"]'),hh.has(u)||(hh.add(u),t={rel:t,crossOrigin:n,href:e},a.querySelector(u)===null&&(e=a.createElement("link"),Ke(e,"link",t),ye(e),a.head.appendChild(e)))}}function cm(t){_n.D(t),fh("dns-prefetch",t,null)}function um(t,e){_n.C(t,e),fh("preconnect",t,e)}function dm(t,e,n){_n.L(t,e,n);var a=ur;if(a&&t&&e){var u='link[rel="preload"][as="'+Je(e)+'"]';e==="image"&&n&&n.imageSrcSet?(u+='[imagesrcset="'+Je(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(u+='[imagesizes="'+Je(n.imageSizes)+'"]')):u+='[href="'+Je(t)+'"]';var x=u;switch(e){case"style":x=dr(t);break;case"script":x=hr(t)}Fs.has(x)||(t=f({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Fs.set(x,t),a.querySelector(u)!==null||e==="style"&&a.querySelector(Zr(x))||e==="script"&&a.querySelector(Jr(x))||(e=a.createElement("link"),Ke(e,"link",t),ye(e),a.head.appendChild(e)))}}function hm(t,e){_n.m(t,e);var n=ur;if(n&&t){var a=e&&typeof e.as=="string"?e.as:"script",u='link[rel="modulepreload"][as="'+Je(a)+'"][href="'+Je(t)+'"]',x=u;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=hr(t)}if(!Fs.has(x)&&(t=f({rel:"modulepreload",href:t},e),Fs.set(x,t),n.querySelector(u)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jr(x)))return}a=n.createElement("link"),Ke(a,"link",t),ye(a),n.head.appendChild(a)}}}function fm(t,e,n){_n.S(t,e,n);var a=ur;if(a&&t){var u=Ks(a).hoistableStyles,x=dr(t);e=e||"default";var T=u.get(x);if(!T){var z={loading:0,preload:null};if(T=a.querySelector(Zr(x)))z.loading=5;else{t=f({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Fs.get(x))&&Wl(t,n);var et=T=a.createElement("link");ye(et),Ke(et,"link",t),et._p=new Promise(function(mt,jt){et.onload=mt,et.onerror=jt}),et.addEventListener("load",function(){z.loading|=1}),et.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Ka(T,e,a)}T={type:"stylesheet",instance:T,count:1,state:z},u.set(x,T)}}}function mm(t,e){_n.X(t,e);var n=ur;if(n&&t){var a=Ks(n).hoistableScripts,u=hr(t),x=a.get(u);x||(x=n.querySelector(Jr(u)),x||(t=f({src:t,async:!0},e),(e=Fs.get(u))&&Kl(t,e),x=n.createElement("script"),ye(x),Ke(x,"link",t),n.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},a.set(u,x))}}function pm(t,e){_n.M(t,e);var n=ur;if(n&&t){var a=Ks(n).hoistableScripts,u=hr(t),x=a.get(u);x||(x=n.querySelector(Jr(u)),x||(t=f({src:t,async:!0,type:"module"},e),(e=Fs.get(u))&&Kl(t,e),x=n.createElement("script"),ye(x),Ke(x,"link",t),n.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},a.set(u,x))}}function mh(t,e,n,a){var u=(u=R.current)?Wa(u):null;if(!u)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=dr(n.href),n=Ks(u).hoistableStyles,a=n.get(e),a||(a={type:"style",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=dr(n.href);var x=Ks(u).hoistableStyles,T=x.get(t);if(T||(u=u.ownerDocument||u,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,T),(x=u.querySelector(Zr(t)))&&!x._p&&(T.instance=x,T.state.loading=5),Fs.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Fs.set(t,n),x||xm(u,t,n,T.state))),e&&a===null)throw Error(r(528,""));return T}if(e&&a!==null)throw Error(r(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=hr(n),n=Ks(u).hoistableScripts,a=n.get(e),a||(a={type:"script",instance:null,count:0,state:null},n.set(e,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function dr(t){return'href="'+Je(t)+'"'}function Zr(t){return'link[rel="stylesheet"]['+t+"]"}function ph(t){return f({},t,{"data-precedence":t.precedence,precedence:null})}function xm(t,e,n,a){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?a.loading=1:(e=t.createElement("link"),a.preload=e,e.addEventListener("load",function(){return a.loading|=1}),e.addEventListener("error",function(){return a.loading|=2}),Ke(e,"link",n),ye(e),t.head.appendChild(e))}function hr(t){return'[src="'+Je(t)+'"]'}function Jr(t){return"script[async]"+t}function xh(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var a=t.querySelector('style[data-href~="'+Je(n.href)+'"]');if(a)return e.instance=a,ye(a),a;var u=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(t.ownerDocument||t).createElement("style"),ye(a),Ke(a,"style",u),Ka(a,n.precedence,t),e.instance=a;case"stylesheet":u=dr(n.href);var x=t.querySelector(Zr(u));if(x)return e.state.loading|=4,e.instance=x,ye(x),x;a=ph(n),(u=Fs.get(u))&&Wl(a,u),x=(t.ownerDocument||t).createElement("link"),ye(x);var T=x;return T._p=new Promise(function(z,et){T.onload=z,T.onerror=et}),Ke(x,"link",a),e.state.loading|=4,Ka(x,n.precedence,t),e.instance=x;case"script":return x=hr(n.src),(u=t.querySelector(Jr(x)))?(e.instance=u,ye(u),u):(a=n,(u=Fs.get(x))&&(a=f({},n),Kl(a,u)),t=t.ownerDocument||t,u=t.createElement("script"),ye(u),Ke(u,"link",a),t.head.appendChild(u),e.instance=u);case"void":return null;default:throw Error(r(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(a=e.instance,e.state.loading|=4,Ka(a,n.precedence,t));return e.instance}function Ka(t,e,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=a.length?a[a.length-1]:null,x=u,T=0;T<a.length;T++){var z=a[T];if(z.dataset.precedence===e)x=z;else if(x!==u)break}x?x.parentNode.insertBefore(t,x.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Wl(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Kl(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Qa=null;function gh(t,e,n){if(Qa===null){var a=new Map,u=Qa=new Map;u.set(n,a)}else u=Qa,a=u.get(n),a||(a=new Map,u.set(n,a));if(a.has(t))return a;for(a.set(t,null),n=n.getElementsByTagName(t),u=0;u<n.length;u++){var x=n[u];if(!(x[on]||x[Se]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var T=x.getAttribute(e)||"";T=t+T;var z=a.get(T);z?z.push(x):a.set(T,[x])}}return a}function bh(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function gm(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function yh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function bm(t,e,n,a){if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var u=dr(a.href),x=e.querySelector(Zr(u));if(x){e=x._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Za.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=x,ye(x);return}x=e.ownerDocument||e,a=ph(a),(u=Fs.get(u))&&Wl(a,u),x=x.createElement("link"),ye(x);var T=x;T._p=new Promise(function(z,et){T.onload=z,T.onerror=et}),Ke(x,"link",a),n.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=Za.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Ql=0;function ym(t,e){return t.stylesheets&&t.count===0&&to(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var a=setTimeout(function(){if(t.stylesheets&&to(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+e);0<t.imgBytes&&Ql===0&&(Ql=62500*Jf());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&to(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>Ql?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a),clearTimeout(u)}}:null}function Za(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)to(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ja=null;function to(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ja=new Map,e.forEach(vm,t),Ja=null,Za.call(t))}function vm(t,e){if(!(e.state.loading&4)){var n=Ja.get(t);if(n)var a=n.get(null);else{n=new Map,Ja.set(t,n);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<u.length;x++){var T=u[x];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(n.set(T.dataset.precedence,T),a=T)}a&&n.set(null,a)}u=e.instance,T=u.getAttribute("data-precedence"),x=n.get(T)||a,x===a&&n.set(null,u),n.set(T,u),this.count++,a=Za.bind(this),u.addEventListener("load",a),u.addEventListener("error",a),x?x.parentNode.insertBefore(u,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),e.state.loading|=4}}var ta={$$typeof:B,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function Em(t,e,n,a,u,x,T,z,et){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=te(0),this.hiddenUpdates=te(null),this.identifierPrefix=a,this.onUncaughtError=u,this.onCaughtError=x,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=et,this.incompleteTransitions=new Map}function vh(t,e,n,a,u,x,T,z,et,mt,jt,St){return t=new Em(t,e,n,T,et,mt,jt,St,z),e=1,x===!0&&(e|=24),x=Es(3,null,null,e),t.current=x,x.stateNode=t,e=Co(),e.refCount++,t.pooledCache=e,e.refCount++,x.memoizedState={element:a,isDehydrated:n,cache:e},Do(x),t}function Eh(t){return t?(t=Hi,t):Hi}function jh(t,e,n,a,u,x){u=Eh(u),a.context===null?a.context=u:a.pendingContext=u,a=$n(e),a.payload={element:n},x=x===void 0?null:x,x!==null&&(a.callback=x),n=Xn(t,a,e),n!==null&&(hs(n,t,e),Lr(n,t,e))}function Ah(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zl(t,e){Ah(t,e),(t=t.alternate)&&Ah(t,e)}function Rh(t){if(t.tag===13||t.tag===31){var e=gi(t,67108864);e!==null&&hs(e,t,67108864),Zl(t,67108864)}}function Sh(t){if(t.tag===13||t.tag===31){var e=ws();e=be(e);var n=gi(t,e);n!==null&&hs(n,t,e),Zl(t,e)}}var eo=!0;function jm(t,e,n,a){var u=U.T;U.T=null;var x=P.p;try{P.p=2,Jl(t,e,n,a)}finally{P.p=x,U.T=u}}function Am(t,e,n,a){var u=U.T;U.T=null;var x=P.p;try{P.p=8,Jl(t,e,n,a)}finally{P.p=x,U.T=u}}function Jl(t,e,n,a){if(eo){var u=tc(a);if(u===null)Il(t,e,a,so,n),_h(t,a);else if(Sm(u,t,e,n,a))a.stopPropagation();else if(_h(t,a),e&4&&-1<Rm.indexOf(t)){for(;u!==null;){var x=Ws(u);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var T=Re(x.pendingLanes);if(T!==0){var z=x;for(z.pendingLanes|=2,z.entangledLanes|=2;T;){var et=1<<31-ct(T);z.entanglements[1]|=et,T&=~et}an(x),(ee&6)===0&&(Fa=kt()+500,Yr(0))}}break;case 31:case 13:z=gi(x,2),z!==null&&hs(z,x,2),qa(),Zl(x,2)}if(x=tc(a),x===null&&Il(t,e,a,so,n),x===u)break;u=x}u!==null&&a.stopPropagation()}else Il(t,e,a,null,n)}}function tc(t){return t=Bn(t),ec(t)}var so=null;function ec(t){if(so=null,t=we(t),t!==null){var e=h(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=m(e),t!==null)return t;t=null}else if(n===31){if(t=v(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return so=t,null}function wh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vt()){case Te:return 2;case ue:return 8;case Ue:case ge:return 32;case de:return 268435456;default:return 32}default:return 32}}var sc=!1,ii=null,ri=null,ai=null,ea=new Map,sa=new Map,oi=[],Rm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _h(t,e){switch(t){case"focusin":case"focusout":ii=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(e.pointerId)}}function na(t,e,n,a,u,x){return t===null||t.nativeEvent!==x?(t={blockedOn:e,domEventName:n,eventSystemFlags:a,nativeEvent:x,targetContainers:[u]},e!==null&&(e=Ws(e),e!==null&&Rh(e)),t):(t.eventSystemFlags|=a,e=t.targetContainers,u!==null&&e.indexOf(u)===-1&&e.push(u),t)}function Sm(t,e,n,a,u){switch(e){case"focusin":return ii=na(ii,t,e,n,a,u),!0;case"dragenter":return ri=na(ri,t,e,n,a,u),!0;case"mouseover":return ai=na(ai,t,e,n,a,u),!0;case"pointerover":var x=u.pointerId;return ea.set(x,na(ea.get(x)||null,t,e,n,a,u)),!0;case"gotpointercapture":return x=u.pointerId,sa.set(x,na(sa.get(x)||null,t,e,n,a,u)),!0}return!1}function Nh(t){var e=we(t.target);if(e!==null){var n=h(e);if(n!==null){if(e=n.tag,e===13){if(e=m(n),e!==null){t.blockedOn=e,Ci(t.priority,function(){Sh(n)});return}}else if(e===31){if(e=v(n),e!==null){t.blockedOn=e,Ci(t.priority,function(){Sh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function no(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tc(t.nativeEvent);if(n===null){n=t.nativeEvent;var a=new n.constructor(n.type,n);Be=a,n.target.dispatchEvent(a),Be=null}else return e=Ws(n),e!==null&&Rh(e),t.blockedOn=n,!1;e.shift()}return!0}function Th(t,e,n){no(t)&&n.delete(e)}function wm(){sc=!1,ii!==null&&no(ii)&&(ii=null),ri!==null&&no(ri)&&(ri=null),ai!==null&&no(ai)&&(ai=null),ea.forEach(Th),sa.forEach(Th)}function io(t,e){t.blockedOn===e&&(t.blockedOn=null,sc||(sc=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,wm)))}var ro=null;function Ch(t){ro!==t&&(ro=t,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){ro===t&&(ro=null);for(var e=0;e<t.length;e+=3){var n=t[e],a=t[e+1],u=t[e+2];if(typeof a!="function"){if(ec(a||n)===null)continue;break}var x=Ws(n);x!==null&&(t.splice(e,3),e-=3,tl(x,{pending:!0,data:u,method:n.method,action:a},a,u))}}))}function fr(t){function e(et){return io(et,t)}ii!==null&&io(ii,t),ri!==null&&io(ri,t),ai!==null&&io(ai,t),ea.forEach(e),sa.forEach(e);for(var n=0;n<oi.length;n++){var a=oi[n];a.blockedOn===t&&(a.blockedOn=null)}for(;0<oi.length&&(n=oi[0],n.blockedOn===null);)Nh(n),n.blockedOn===null&&oi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var u=n[a],x=n[a+1],T=u[He]||null;if(typeof x=="function")T||Ch(n);else if(T){var z=null;if(x&&x.hasAttribute("formAction")){if(u=x,T=x[He]||null)z=T.formAction;else if(ec(u)!==null)continue}else z=T.action;typeof z=="function"?n[a+1]=z:(n.splice(a,3),a-=3),Ch(n)}}}function kh(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(T){return u=T})},focusReset:"manual",scroll:"manual"})}function e(){u!==null&&(u(),u=null),a||setTimeout(n,20)}function n(){if(!a&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){a=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),u!==null&&(u(),u=null)}}}function nc(t){this._internalRoot=t}ao.prototype.render=nc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(r(409));var n=e.current,a=ws();jh(n,a,t,e,null,null)},ao.prototype.unmount=nc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;jh(t.current,2,null,t,null,null),qa(),e[Ys]=null}};function ao(t){this._internalRoot=t}ao.prototype.unstable_scheduleHydration=function(t){if(t){var e=me();t={blockedOn:null,target:t,priority:e};for(var n=0;n<oi.length&&e!==0&&e<oi[n].priority;n++);oi.splice(n,0,t),n===0&&Nh(t)}};var Lh=s.version;if(Lh!=="19.2.0")throw Error(r(527,Lh,"19.2.0"));P.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=d(e),t=t!==null?c(t):null,t=t===null?null:t.stateNode,t};var _m={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oo.isDisabled&&oo.supportsFiber)try{Is=oo.inject(_m),Rt=oo}catch{}}return reactDomClient_production.createRoot=function(t,e){if(!l(t))throw Error(r(299));var n=!1,a="",u=Iu,x=qu,T=Uu;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(a=e.identifierPrefix),e.onUncaughtError!==void 0&&(u=e.onUncaughtError),e.onCaughtError!==void 0&&(x=e.onCaughtError),e.onRecoverableError!==void 0&&(T=e.onRecoverableError)),e=vh(t,1,!1,null,null,n,a,null,u,x,T,kh),t[Ys]=e.current,Fl(t),new nc(e)},reactDomClient_production.hydrateRoot=function(t,e,n){if(!l(t))throw Error(r(299));var a=!1,u="",x=Iu,T=qu,z=Uu,et=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(T=n.onCaughtError),n.onRecoverableError!==void 0&&(z=n.onRecoverableError),n.formState!==void 0&&(et=n.formState)),e=vh(t,1,!0,e,n??null,a,u,et,x,T,z,kh),e.context=Eh(null),n=e.current,a=ws(),a=be(a),u=$n(a),u.callback=null,Xn(n,u,a),n=a,e.current.lanes=n,ss(e,n),an(e),t[Ys]=e.current,Fl(t),new ao(e)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}return o(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();function useLoadGsiScript(o={}){const{nonce:s,onScriptLoadSuccess:i,onScriptLoadError:r}=o,[l,h]=reactExports.useState(!1),m=reactExports.useRef(i);m.current=i;const v=reactExports.useRef(r);return v.current=r,reactExports.useEffect(()=>{const A=document.createElement("script");return A.src="https://accounts.google.com/gsi/client",A.async=!0,A.defer=!0,A.nonce=s,A.onload=()=>{var d;h(!0),(d=m.current)===null||d===void 0||d.call(m)},A.onerror=()=>{var d;h(!1),(d=v.current)===null||d===void 0||d.call(v)},document.body.appendChild(A),()=>{document.body.removeChild(A)}},[s]),l}const GoogleOAuthContext=reactExports.createContext(null);function GoogleOAuthProvider({clientId:o,nonce:s,onScriptLoadSuccess:i,onScriptLoadError:r,children:l}){const h=useLoadGsiScript({nonce:s,onScriptLoadSuccess:i,onScriptLoadError:r}),m=reactExports.useMemo(()=>({clientId:o,scriptLoadedSuccessfully:h}),[o,h]);return React.createElement(GoogleOAuthContext.Provider,{value:m},l)}function useGoogleOAuth(){const o=reactExports.useContext(GoogleOAuthContext);if(!o)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return o}function extractClientId(o){var s;return(s=o?.clientId)!==null&&s!==void 0?s:o?.client_id}const containerHeightMap={large:40,medium:32,small:20};function GoogleLogin({onSuccess:o,onError:s,useOneTap:i,promptMomentNotification:r,type:l="standard",theme:h="outline",size:m="large",text:v,shape:A,logo_alignment:d,width:c,locale:f,click_listener:g,containerProps:b,...p}){const j=reactExports.useRef(null),{clientId:E,scriptLoadedSuccessfully:y}=useGoogleOAuth(),C=reactExports.useRef(o);C.current=o;const B=reactExports.useRef(s);B.current=s;const I=reactExports.useRef(r);return I.current=r,reactExports.useEffect(()=>{var N,L,Q,tt,Z,st,F,it,Y;if(y)return(Q=(L=(N=window?.google)===null||N===void 0?void 0:N.accounts)===null||L===void 0?void 0:L.id)===null||Q===void 0||Q.initialize({client_id:E,callback:rt=>{var lt;if(!rt?.credential)return(lt=B.current)===null||lt===void 0?void 0:lt.call(B);const{credential:U,select_by:P}=rt;C.current({credential:U,clientId:extractClientId(rt),select_by:P})},...p}),(st=(Z=(tt=window?.google)===null||tt===void 0?void 0:tt.accounts)===null||Z===void 0?void 0:Z.id)===null||st===void 0||st.renderButton(j.current,{type:l,theme:h,size:m,text:v,shape:A,logo_alignment:d,width:c,locale:f,click_listener:g}),i&&((Y=(it=(F=window?.google)===null||F===void 0?void 0:F.accounts)===null||it===void 0?void 0:it.id)===null||Y===void 0||Y.prompt(I.current)),()=>{var rt,lt,U;i&&((U=(lt=(rt=window?.google)===null||rt===void 0?void 0:rt.accounts)===null||lt===void 0?void 0:lt.id)===null||U===void 0||U.cancel())}},[E,y,i,l,h,m,v,A,d,c,f]),React.createElement("div",{...b,ref:j,style:{height:containerHeightMap[m],...b?.style}})}const API_URL="https://4cbz.com/",apiClient=axios.create({baseURL:`${API_URL}/api`,headers:{"Content-Type":"application/json"}});apiClient.interceptors.request.use(o=>{const s=localStorage.getItem("accessToken");return s&&(o.headers.Authorization=`Bearer ${s}`),o},o=>Promise.reject(o));apiClient.interceptors.response.use(o=>o,async o=>{const s=o.config;if(o.response?.status===401&&!s._retry){s._retry=!0;try{const i=localStorage.getItem("refreshToken");if(!i)return localStorage.clear(),window.location.href="/",Promise.reject(o);const{data:r}=await axios.post(`${API_URL}/api/auth/refresh`,{refreshToken:i});return localStorage.setItem("accessToken",r.data.accessToken),s.headers.Authorization=`Bearer ${r.data.accessToken}`,apiClient(s)}catch(i){return localStorage.clear(),window.location.href="/",Promise.reject(i)}}return Promise.reject(o)});const authAPI={googleAuth:async o=>(await apiClient.post("/auth/google",{idToken:o})).data,refreshToken:async o=>(await apiClient.post("/auth/refresh",{refreshToken:o})).data,getProfile:async()=>(await apiClient.get("/auth/profile")).data,logout:async()=>(await apiClient.post("/auth/logout")).data,adminLogin:async(o,s)=>(await apiClient.post("/auth/admin/login",{email:o,password:s})).data,setAdminPassword:async(o,s=null)=>(await apiClient.post("/auth/admin/set-password",{password:o,currentPassword:s})).data},documentsAPI={getAll:async(o=null)=>{const s=o?{folder_id:o}:{};return(await apiClient.get("/documents",{params:s})).data},getById:async o=>(await apiClient.get(`/documents/${o}`)).data,checkAccess:async o=>(await apiClient.get(`/documents/${o}/access`)).data,upload:async o=>(await apiClient.post("/documents",o,{headers:{"Content-Type":"multipart/form-data"}})).data,update:async(o,s)=>(await apiClient.put(`/documents/${o}`,s)).data,delete:async o=>(await apiClient.delete(`/documents/${o}`)).data,moveToFolder:async(o,s=null)=>(await apiClient.put(`/documents/${o}`,{folder_id:s})).data,toggleVisibility:async o=>(await apiClient.patch(`/documents/${o}/visibility`)).data},paymentsAPI={createCheckout:async o=>(await apiClient.post("/payments/create-checkout",{documentId:o})).data,verifyPayment:async o=>(await apiClient.post("/payments/verify-payment",{sessionId:o})).data,getPaymentStatus:async o=>(await apiClient.get(`/payments/status/${o}`)).data,getTransactions:async(o={})=>{const{limit:s=20,offset:i=0,status:r,search:l,startDate:h,endDate:m}=o,v=new URLSearchParams({limit:s.toString(),offset:i.toString(),...r&&{status:r},...l&&{search:l},...h&&{startDate:h},...m&&{endDate:m}});return(await apiClient.get(`/payments/admin/transactions?${v}`)).data},getTransactionStats:async()=>(await apiClient.get("/payments/admin/stats")).data},usersAPI={getPurchases:async()=>(await apiClient.get("/users/purchases")).data,getProfile:async()=>(await apiClient.get("/users/profile")).data,updateProfile:async o=>(await apiClient.put("/users/profile",o)).data,getAllUsers:async(o={})=>{const{limit:s=20,offset:i=0,search:r,startDate:l,endDate:h}=o,m=new URLSearchParams({limit:s.toString(),offset:i.toString(),...r&&{search:r},...l&&{startDate:l},...h&&{endDate:h}});return(await apiClient.get(`/users/admin/all?${m}`)).data}},foldersAPI={getTree:async()=>(await apiClient.get("/folders/tree")).data,getById:async o=>(await apiClient.get(`/folders/${o}`)).data,getDocuments:async o=>(await apiClient.get(`/folders/${o}/documents`)).data,getPath:async o=>(await apiClient.get(`/folders/${o}/path`)).data,create:async(o,s=null)=>(await apiClient.post("/folders",{name:o,parent_id:s})).data,update:async(o,s)=>(await apiClient.put(`/folders/${o}`,{name:s})).data,delete:async o=>(await apiClient.delete(`/folders/${o}`)).data,move:async(o,s=null)=>(await apiClient.put(`/folders/${o}/move`,{parent_id:s})).data},settingsAPI={getPublicByKey:async o=>(await apiClient.get(`/settings/public/${o}`)).data,getAll:async()=>(await apiClient.get("/settings")).data,getByKey:async o=>(await apiClient.get(`/settings/${o}`)).data,update:async(o,s)=>(await apiClient.put(`/settings/${o}`,{value:s})).data,create:async(o,s,i=null)=>(await apiClient.post("/settings",{key:o,value:s,description:i})).data},publicDocumentsAPI={upload:async o=>(await apiClient.post("/public-documents",o,{headers:{"Content-Type":"multipart/form-data"}})).data,getAll:async()=>(await apiClient.get("/public-documents")).data,getByToken:async o=>(await apiClient.get(`/public/${o}`)).data,delete:async o=>(await apiClient.delete(`/public-documents/${o}`)).data,toggleStatus:async(o,s)=>(await apiClient.patch(`/public-documents/${o}/status`,{is_active:s})).data},AuthContext=reactExports.createContext({}),useAuth=()=>{const o=reactExports.useContext(AuthContext);if(!o)throw new Error("useAuth must be used within AuthProvider");return o},AuthProvider=({children:o})=>{const[s,i]=reactExports.useState(null),[r,l]=reactExports.useState(null),[h,m]=reactExports.useState(!0);reactExports.useEffect(()=>{v()},[]);const v=async()=>{try{if(!localStorage.getItem("accessToken")){m(!1);return}const E=await authAPI.getProfile();E.success&&E.data?(i(E.data),l(E.data.role)):d()}catch(j){console.error("Auth check failed:",j),d()}finally{m(!1)}},A=async j=>{try{m(!0);const E=await authAPI.googleAuth(j.credential);if(E.success&&E.data){const{user:y,accessToken:C,refreshToken:B}=E.data;return localStorage.setItem("accessToken",C),localStorage.setItem("refreshToken",B),i(y),l(y.role),{success:!0,user:y}}throw new Error(E.message||"Login failed")}catch(E){return console.error("Google login error:",E),d(),{success:!1,error:E.message}}finally{m(!1)}},d=async()=>{try{await authAPI.logout()}catch(j){console.error("Logout error:",j)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),i(null),l(null)}},p={user:s,userRole:r,loading:h,isAdmin:r==="admin",isUser:r==="user",isAuthenticated:!!s,handleGoogleLogin:A,handleLogout:d,checkAuth:v,setAuthData:(j,E)=>{i(j),l(E)}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:p,children:o})},Navbar=()=>{const{user:o,userRole:s,handleLogout:i}=useAuth(),r=useNavigate(),l=useLocation(),[h,m]=reactExports.useState(!1),[v,A]=reactExports.useState(!1),[d,c]=reactExports.useState(!1),[f,g]=reactExports.useState(!1),b=reactExports.useRef(null),p=l.pathname.startsWith("/admin");reactExports.useEffect(()=>{(async()=>{if(o&&s==="user")try{const y=await usersAPI.getPurchases();y&&y.data&&y.data.length>0?c(!0):c(!1)}catch(y){console.error("Error checking subscription:",y),c(!0)}else c(!1)})()},[o,s,l]),reactExports.useEffect(()=>{const E=y=>{b.current&&!b.current.contains(y.target)&&g(!1)};return f&&document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[f]);const j=async()=>{if(!v){A(!0),m(!1);try{await i(),setTimeout(()=>{r("/"),A(!1)},200)}catch(E){console.error("Logout error:",E),alert(`Logout failed: ${E.message||"Unknown error"}. Please try again.`),A(!1)}}};return jsxRuntimeExports.jsxs("nav",{className:"bg-white shadow-md backdrop-blur-sm sticky top-0 z-50 border-b border-gray-200",children:[jsxRuntimeExports.jsx("div",{className:`${p?"":"max-w-7xl mx-auto"} px-3 sm:px-6 lg:px-8`,children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center h-16 sm:h-20",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsx(Link$1,{to:"/",className:"flex items-center transition-all duration-300 hover:opacity-80",children:jsxRuntimeExports.jsx("img",{src:"/PNG/Horizontal_Logo.png",alt:"4C Management BZ Services",className:"h-5 sm:h-6 md:h-7 lg:h-8 w-auto"})})}),jsxRuntimeExports.jsx("div",{className:"md:hidden",children:jsxRuntimeExports.jsx("button",{onClick:()=>m(!h),className:"group relative p-2 rounded-lg bg-gray-100 hover:bg-gray-200 transition-all duration-300 mobile-min-h-44 mobile-min-w-44","aria-label":"Toggle mobile menu",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col space-y-1",children:[jsxRuntimeExports.jsx("span",{className:`block w-6 h-0.5 bg-gray-800 transition-all duration-300 transform ${h?"rotate-45 translate-y-2":""}`}),jsxRuntimeExports.jsx("span",{className:`block w-6 h-0.5 bg-gray-800 transition-all duration-300 ${h?"opacity-0":""}`}),jsxRuntimeExports.jsx("span",{className:`block w-6 h-0.5 bg-gray-800 transition-all duration-300 transform ${h?"-rotate-45 -translate-y-2":""}`})]})})}),jsxRuntimeExports.jsx("div",{className:"hidden md:flex items-center space-x-3 lg:space-x-4",children:o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-100 rounded-lg px-3 lg:px-4 py-2 border border-gray-300 flex items-center",children:[jsxRuntimeExports.jsx("span",{className:`inline-block w-2 h-2 rounded-full mr-2 flex-shrink-0 ${s==="admin"?"bg-yellow-500":"bg-green-500"}`}),jsxRuntimeExports.jsxs("span",{className:"text-xs lg:text-sm text-gray-700 whitespace-nowrap",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:s==="admin"?"Admin":"User"}),jsxRuntimeExports.jsx("span",{className:"mx-2",children:"|"}),jsxRuntimeExports.jsx("span",{className:"truncate max-w-[120px] lg:max-w-[200px] inline-block align-bottom",children:o.email})]})]}),s==="admin"&&jsxRuntimeExports.jsx(Link$1,{to:"/admin",className:"group relative bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-3 lg:px-6 py-2 rounded-xl text-xs lg:text-sm font-semibold transition-all duration-300 transform hover:scale-105 hover:shadow-lg mobile-min-h-44",children:jsxRuntimeExports.jsxs("span",{className:"relative z-10 flex items-center",children:[jsxRuntimeExports.jsxs("svg",{className:"w-4 h-4 mr-1 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),jsxRuntimeExports.jsx("span",{className:"hidden lg:inline",children:"Admin Panel"}),jsxRuntimeExports.jsx("span",{className:"lg:hidden",children:"Admin"})]})}),s==="user"&&jsxRuntimeExports.jsxs("div",{className:"relative",ref:b,children:[jsxRuntimeExports.jsx("button",{onClick:()=>g(!f),className:"group relative bg-gradient-to-r from-[#B12417] to-[#2B266F] hover:from-[#8f1d12] hover:to-[#1e1a4f] text-white p-2.5 lg:p-3 rounded-full text-xs lg:text-sm font-semibold transition-all duration-300 transform hover:scale-110 hover:shadow-lg mobile-min-h-44 flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 lg:w-6 lg:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),f&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-200 py-2 z-50 animate-fadeIn",children:[jsxRuntimeExports.jsxs(Link$1,{to:"/profile",onClick:()=>g(!1),className:"flex items-center px-4 py-3 hover:bg-gradient-to-r hover:from-purple-50 hover:to-indigo-50 transition-all duration-200 group",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-3 text-gray-600 group-hover:text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 group-hover:text-purple-600 font-medium",children:"Profile"})]}),d&&jsxRuntimeExports.jsxs(Link$1,{to:"/documents",onClick:()=>g(!1),className:"flex items-center px-4 py-3 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 transition-all duration-200 group",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-3 text-gray-600 group-hover:text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 group-hover:text-emerald-600 font-medium",children:"Documents"})]}),jsxRuntimeExports.jsxs(Link$1,{to:"/payment-history",onClick:()=>g(!1),className:"flex items-center px-4 py-3 hover:bg-gradient-to-r hover:from-blue-50 hover:to-cyan-50 transition-all duration-200 group",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-3 text-gray-600 group-hover:text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 group-hover:text-blue-600 font-medium",children:"Payment History"})]}),jsxRuntimeExports.jsx("hr",{className:"my-2 border-gray-200"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{g(!1),j()},disabled:v,className:"flex items-center w-full px-4 py-3 hover:bg-gradient-to-r hover:from-red-50 hover:to-red-50 transition-all duration-200 group disabled:opacity-50 disabled:cursor-not-allowed",children:[v?jsxRuntimeExports.jsxs("svg",{className:"animate-spin w-5 h-5 mr-3 text-gray-600",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-3 text-gray-600 group-hover:text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 group-hover:text-red-600 font-medium",children:v?"Signing Out...":"Sign Out"})]})]})]}),s==="admin"&&jsxRuntimeExports.jsxs("button",{onClick:j,disabled:v,className:`group relative bg-gradient-to-r ${v?"from-gray-400 to-gray-500 cursor-not-allowed":"from-red-500 to-red-600 hover:from-red-600 hover:to-red-700"} text-white px-3 lg:px-6 py-2 rounded-xl text-xs lg:text-sm font-semibold transition-all duration-300 ${v?"":"transform hover:scale-105 hover:shadow-lg"} flex items-center mobile-min-h-44`,children:[v?jsxRuntimeExports.jsxs("svg",{className:"animate-spin w-4 h-4 mr-1 lg:mr-2",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 mr-1 lg:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),jsxRuntimeExports.jsx("span",{className:"hidden lg:inline",children:v?"Signing Out...":"Sign Out"}),jsxRuntimeExports.jsx("span",{className:"lg:hidden",children:v?"...":"Out"})]})]}):null})]})}),jsxRuntimeExports.jsx("div",{className:`md:hidden transition-all duration-300 ease-in-out ${h?"max-h-96 opacity-100":"max-h-0 opacity-0"} overflow-hidden bg-gray-50 border-t border-gray-200`,children:jsxRuntimeExports.jsx("div",{className:"px-4 py-4 space-y-3",children:o?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-300 shadow-sm",children:jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-700",children:[jsxRuntimeExports.jsx("span",{className:`inline-block w-2 h-2 rounded-full mr-2 ${s==="admin"?"bg-yellow-500":"bg-green-500"}`}),s==="admin"?"Admin":"User"," | ",o.email]})}),s==="admin"&&jsxRuntimeExports.jsxs(Link$1,{to:"/admin",onClick:()=>m(!1),className:"block w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white px-4 py-3 rounded-xl text-sm font-semibold text-center transition-all duration-300 transform hover:scale-105 mobile-min-h-44 flex items-center justify-center",children:[jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Admin Panel"]}),s==="user"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Link$1,{to:"/profile",onClick:()=>m(!1),className:"block w-full bg-white hover:bg-gradient-to-r hover:from-purple-50 hover:to-indigo-50 text-gray-700 px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-300 border border-gray-200 mobile-min-h-44 flex items-center",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]}),d&&jsxRuntimeExports.jsxs(Link$1,{to:"/documents",onClick:()=>m(!1),className:"block w-full bg-white hover:bg-gradient-to-r hover:from-emerald-50 hover:to-teal-50 text-gray-700 px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-300 border border-gray-200 mobile-min-h-44 flex items-center",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Documents"]}),jsxRuntimeExports.jsxs(Link$1,{to:"/payment-history",onClick:()=>m(!1),className:"block w-full bg-white hover:bg-gradient-to-r hover:from-blue-50 hover:to-cyan-50 text-gray-700 px-4 py-3 rounded-xl text-sm font-semibold transition-all duration-300 border border-gray-200 mobile-min-h-44 flex items-center",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Payment History"]}),jsxRuntimeExports.jsx("hr",{className:"my-2 border-gray-300"})]}),jsxRuntimeExports.jsxs("button",{onClick:j,disabled:v,className:`block w-full bg-gradient-to-r ${v?"from-gray-400 to-gray-500 cursor-not-allowed":"from-red-500 to-red-600 hover:from-red-600 hover:to-red-700"} text-white px-4 py-3 rounded-xl text-sm font-semibold text-center transition-all duration-300 ${v?"":"transform hover:scale-105"} mobile-min-h-44 flex items-center justify-center`,children:[v?jsxRuntimeExports.jsxs("svg",{className:"animate-spin w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),v?"Signing Out...":"Sign Out"]})]}):null})})]})},Layout=({children:o})=>{const s=useLocation(),i=s.pathname==="/",r=s.pathname.startsWith("/admin");return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsx(Navbar,{}),jsxRuntimeExports.jsx("main",{className:i||r?"":"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:o})]})},SidebarContext=reactExports.createContext(),useSidebar=()=>{const o=reactExports.useContext(SidebarContext);if(!o)throw new Error("useSidebar must be used within SidebarProvider");return o},SidebarProvider=({children:o})=>{const[s,i]=reactExports.useState(!1),[r,l]=reactExports.useState(!1);reactExports.useEffect(()=>{const d=()=>{window.innerWidth>=1024?i(!0):i(!1)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]);const A={isSidebarOpen:s,isSidebarCollapsed:r,toggleSidebar:()=>{i(d=>!d)},closeSidebar:()=>{i(!1)},toggleCollapse:()=>{l(d=>!d)}};return jsxRuntimeExports.jsx(SidebarContext.Provider,{value:A,children:o})},HomeIcon=({className:o})=>jsxRuntimeExports.jsx("svg",{className:o,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),FolderDocumentIcon=({className:o})=>jsxRuntimeExports.jsxs("svg",{className:o,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6"})]}),BanknotesIcon=({className:o})=>jsxRuntimeExports.jsx("svg",{className:o,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),UsersIcon=({className:o})=>jsxRuntimeExports.jsx("svg",{className:o,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),PricingIcon=({className:o})=>jsxRuntimeExports.jsx("svg",{className:o,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),SettingsIcon=({className:o})=>jsxRuntimeExports.jsxs("svg",{className:o,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),AdminSidebar=()=>{const o=useLocation(),{isSidebarOpen:s,isSidebarCollapsed:i,closeSidebar:r}=useSidebar(),l=[{name:"Dashboard",path:"/admin",icon:HomeIcon,exact:!0},{name:"Document Manager",path:"/admin/documents",icon:FolderDocumentIcon},{name:"Transactions",path:"/admin/transactions",icon:BanknotesIcon},{name:"Users",path:"/admin/users",icon:UsersIcon},{name:"Pricing",path:"/admin/pricing",icon:PricingIcon},{name:"Settings",path:"/admin/settings",icon:SettingsIcon}],h=m=>m.exact?o.pathname===m.path:o.pathname.startsWith(m.path);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("aside",{className:`
          flex-shrink-0
          fixed top-[73px] bottom-0 left-0 z-40
          bg-white shadow-lg
          transition-all duration-300 ease-in-out
          ${i?"lg:w-20":"lg:w-64"}
          ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          w-64
        `,children:jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:`p-6 border-b border-gray-200 ${i?"lg:p-4":""}`,children:[!i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Admin Panel"}),jsxRuntimeExports.jsx("button",{onClick:r,className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close sidebar",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your platform"})]}),i&&jsxRuntimeExports.jsx("div",{className:"hidden lg:flex justify-center",children:jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-lg",children:"A"})})})]}),jsxRuntimeExports.jsx("nav",{className:`flex-1 overflow-y-auto p-4 ${i?"lg:p-2":""}`,children:jsxRuntimeExports.jsx("div",{className:"space-y-2",children:l.map(m=>{const v=m.icon,A=h(m);return jsxRuntimeExports.jsxs(Link$1,{to:m.path,onClick:()=>{window.innerWidth<1024&&r()},className:`
                      group relative flex items-center gap-3 px-4 py-3 rounded-lg
                      transition-all duration-200
                      ${A?"bg-red-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100 hover:text-red-600"}
                      ${i?"lg:justify-center lg:px-2":""}
                    `,title:i?m.name:"",children:[jsxRuntimeExports.jsx(v,{className:"w-5 h-5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:`font-medium ${i?"lg:hidden":""}`,children:m.name}),i&&jsxRuntimeExports.jsxs("div",{className:"hidden lg:block absolute left-full ml-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50",children:[m.name,jsxRuntimeExports.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-gray-900"})]})]},m.path)})})}),!i&&jsxRuntimeExports.jsx("div",{className:"p-6 border-t border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold mb-1",children:"Quick Stats"}),jsxRuntimeExports.jsx("p",{children:"Platform Version 1.0"})]})})]})})})},AdminLayoutContent=()=>{const{isSidebarOpen:o,isSidebarCollapsed:s,toggleSidebar:i,closeSidebar:r}=useSidebar();return jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsx(AdminSidebar,{}),o&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:r}),jsxRuntimeExports.jsxs("div",{className:`flex-1 flex flex-col min-h-screen overflow-hidden ${s?"lg:ml-20":"lg:ml-64"} transition-all duration-300`,children:[jsxRuntimeExports.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-20 lg:hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[jsxRuntimeExports.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Toggle sidebar",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Admin Panel"}),jsxRuntimeExports.jsx("div",{className:"w-10"})]})}),jsxRuntimeExports.jsx("main",{className:"flex-1 overflow-x-auto overflow-y-auto",children:jsxRuntimeExports.jsx(Outlet,{})})]})]})},AdminLayout=()=>jsxRuntimeExports.jsx(SidebarProvider,{children:jsxRuntimeExports.jsx(AdminLayoutContent,{})}),ProtectedRoute=({children:o,requiredRole:s=null})=>{const{user:i,userRole:r,loading:l}=useAuth(),[h,m]=reactExports.useState(!1);return reactExports.useEffect(()=>{const v=setTimeout(()=>{l&&(console.warn(" ProtectedRoute: Loading timeout - still loading after 8 seconds"),m(!0))},8e3);return()=>clearTimeout(v)},[l,i,r,s]),l?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-gray-50 to-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"relative mb-4",children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto rounded-full border-4 border-red-200 border-t-red-600 animate-spin"})}),jsxRuntimeExports.jsx("div",{className:"text-lg font-medium text-gray-700 mb-2",children:h?"Still loading...":"Loading..."}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("p",{className:"mb-2",children:"This is taking longer than usual."}),jsxRuntimeExports.jsx("p",{children:"Check the browser console for details."})]}):"Please wait"})]})}):i?s&&r!==s&&r!=="admin"?jsxRuntimeExports.jsx(Navigate,{to:"/"}):o:s==="admin"?jsxRuntimeExports.jsx(Navigate,{to:"/admin/login"}):jsxRuntimeExports.jsx(Navigate,{to:"/"})},PolicyModal=({isOpen:o,onClose:s,title:i,content:r})=>o?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-4xl max-h-[90vh] bg-white rounded-2xl shadow-2xl flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:i}),jsxRuntimeExports.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-lg","aria-label":"Close modal",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:jsxRuntimeExports.jsx("div",{className:"prose prose-sm md:prose max-w-none",dangerouslySetInnerHTML:{__html:r}})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200",children:jsxRuntimeExports.jsx("button",{onClick:s,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors shadow-sm hover:shadow-md",children:"Close"})})]})}):null,Footer=({onPolicyClick:o})=>{const[s,i]=reactExports.useState({address:"P O Box 48707, Level 14, Boulevard Plaza Tower 1, Downtown Dubai, Dubai, UAE.",email:"4cdoc@4CBZ.com",tel:"+971 4 2288006"}),[r,l]=reactExports.useState(!0);return reactExports.useEffect(()=>{(async()=>{try{const[m,v,A]=await Promise.all([settingsAPI.getPublicByKey("footer_address").catch(()=>({data:null})),settingsAPI.getPublicByKey("footer_email").catch(()=>({data:null})),settingsAPI.getPublicByKey("footer_tel").catch(()=>({data:null}))]);i({address:m.data?.value||"P O Box 48707, Level 14, Boulevard Plaza Tower 1, Downtown Dubai, Dubai, UAE.",email:v.data?.value||"4cdoc@4CBZ.com",tel:A.data?.value||"+971 4 2288006"})}catch(m){console.error("Error fetching footer data:",m)}finally{l(!1)}})()},[]),r?jsxRuntimeExports.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 py-8",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto px-4",children:jsxRuntimeExports.jsx("div",{className:"text-center text-gray-400",children:"Loading..."})})}):jsxRuntimeExports.jsx("footer",{className:"bg-white border-t border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 lg:px-8 py-12",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 mb-2",children:jsxRuntimeExports.jsx("img",{src:"/PNG/Horizontal_Logo.png",alt:"4C BZ Management Services Logo",className:"h-7"})}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"A vertical of 4C Integrated Communicators"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Links"}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2",children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>o&&o("terms"),className:"text-gray-600 hover:text-red-600 transition-colors text-sm",children:"Terms of Services"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>o&&o("privacy"),className:"text-gray-600 hover:text-red-600 transition-colors text-sm",children:"Privacy Policy"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("button",{onClick:()=>o&&o("refund"),className:"text-gray-600 hover:text-red-600 transition-colors text-sm",children:"Refund Policy"})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Address"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:s.address}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:["Email:"," ",jsxRuntimeExports.jsx("a",{href:`mailto:${s.email}`,className:"text-blue-600 hover:text-blue-800 hover:underline",children:s.email})]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:["Tel:"," ",jsxRuntimeExports.jsx("a",{href:`tel:${s.tel}`,className:"text-gray-900 hover:text-red-600 transition-colors",children:s.tel})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-200 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center gap-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Copyright @2025 4C BZ Management Services"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Designed by 4C Integrated Communicators"})]})]})})},Home=()=>{const{handleGoogleLogin:o,user:s}=useAuth(),i=useNavigate(),r=reactExports.useRef(null),[l,h]=reactExports.useState(!1),[m,v]=reactExports.useState(!1),[A,d]=reactExports.useState(!0),[c,f]=reactExports.useState({isOpen:!1,title:"",content:""}),g=async y=>{v(!0);const C=await o(y);C.success?C.user.role==="admin"?i("/admin"):i("/documents"):v(!1)},b=()=>{console.error("Google Sign-In failed"),alert("Failed to sign in with Google. Please try again.")},p=()=>{s?i("/documents"):(h(!0),setTimeout(()=>h(!1),500),r.current?.scrollIntoView({behavior:"smooth",block:"center"}))},j=async y=>{try{let C,B;y==="terms"?(C="terms_of_service",B="Terms of Service"):y==="privacy"?(C="privacy_policy",B="Privacy Policy"):y==="refund"&&(C="refund_policy",B="Refund Policy");const I=await settingsAPI.getPublicByKey(C);I.success&&I.data&&f({isOpen:!0,title:B,content:I.data.value})}catch(C){console.error("Error fetching policy:",C),alert("Failed to load policy. Please try again.")}},E=()=>{f({isOpen:!1,title:"",content:""})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{children:`
          @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
            20%, 40%, 60%, 80% { transform: translateX(10px); }
          }

          .animate-shake {
            animation: shake 0.5s ease-in-out;
          }
        `}),jsxRuntimeExports.jsxs("div",{className:"min-h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900 min-h-[600px] flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/40"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(/background.jpeg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),jsxRuntimeExports.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20 w-full",children:jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-white space-y-6 sm:space-y-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold leading-tight",children:"Establish and Launch Your Business Venture in the UAE with us"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{onClick:p,className:"bg-white text-blue-900 hover:bg-gray-100 px-8 py-4 rounded-full font-semibold text-lg transition-all duration-300 transform hover:scale-105 shadow-xl hover:shadow-2xl",children:"Access Now "})})]}),jsxRuntimeExports.jsx("div",{ref:r,className:"mt-8 lg:mt-0",children:jsxRuntimeExports.jsxs("div",{className:`bg-gradient-to-br from-red-600 to-red-700 rounded-3xl p-8 lg:p-10 shadow-2xl border-2 border-red-400/50 backdrop-blur-sm ${l?"animate-shake":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-6 lg:mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl lg:text-3xl font-bold text-white mb-2 lg:mb-3",children:"Start Your Journey Here!"}),jsxRuntimeExports.jsx("p",{className:"text-white/90 text-sm lg:text-base",children:"Sign in to access our comprehensive guide"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 px-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"acceptTerms",checked:A,onChange:y=>d(y.target.checked),className:"mt-0.5 w-5 h-5 rounded border-2 border-white bg-white/20 text-red-600 focus:ring-2 focus:ring-white/50 cursor-pointer flex-shrink-0"}),jsxRuntimeExports.jsxs("label",{htmlFor:"acceptTerms",className:"text-white text-xs lg:text-sm leading-relaxed",children:["I agree to the"," ",jsxRuntimeExports.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),j("terms")},className:"font-bold underline hover:text-white/80 transition-colors",children:"Terms of Service"}),", ",jsxRuntimeExports.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),j("privacy")},className:"font-bold underline hover:text-white/80 transition-colors",children:"Privacy Policy"})," ","and"," ",jsxRuntimeExports.jsx("button",{type:"button",onClick:y=>{y.preventDefault(),j("refund")},className:"font-bold underline hover:text-white/80 transition-colors",children:"Refund Policy"})]})]}),jsxRuntimeExports.jsx("div",{className:`flex justify-center ${A?"":"opacity-50 pointer-events-none"}`,children:jsxRuntimeExports.jsx(GoogleLogin,{onSuccess:g,onError:b,theme:"filled_blue",size:"large",text:"continue_with",shape:"pill"})})]})]})})]})})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-blue-900 via-indigo-800 to-purple-900 py-16 sm:py-20",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[jsxRuntimeExports.jsx("div",{className:"order-2 lg:order-1",children:jsxRuntimeExports.jsx("div",{className:"rounded-2xl overflow-hidden shadow-2xl",children:jsxRuntimeExports.jsx("img",{src:"/card.jpeg",alt:"Professional business team",className:"w-full h-[400px] sm:h-[500px] object-cover"})})}),jsxRuntimeExports.jsxs("div",{className:"order-1 lg:order-2 text-white space-y-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl sm:text-4xl font-bold",children:"What You'll Discover Inside the Guide"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-200",children:"A comprehensive guide to establishing and launching businesses in the UAE. Collated by experts in the field, to help entrepreneurs, business owners save time, money and efforts. Find relevant and updated information on:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-red-500 rounded-full mt-2"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:"Company Structures"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Mainland, Free Zone & Offshore"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-red-500 rounded-full mt-2"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:"Licensing Requirements"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Choose the right activity and licence"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-red-500 rounded-full mt-2"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:"Legal & Regulatory Compliance"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Going by the book"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-red-500 rounded-full mt-2"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:"Step-by-Step Application Process"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"From documentation and preapprovals to licence"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-red-500 rounded-full mt-2"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:"Business Essentials"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Industry specific, Authority approvals, Certifications, Banking, Immigration services, Customs, Offices and warehousing"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-red-500 rounded-full mt-2"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:"Market Insights"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Market dynamics explained"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsx("button",{onClick:p,className:"bg-red-600 hover:bg-red-700 text-white px-8 py-3 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Access Now "})})]})]})})})]}),m&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-2xl",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 font-semibold text-lg",children:"Signing you in..."}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"Please wait"})]})})}),jsxRuntimeExports.jsx(PolicyModal,{isOpen:c.isOpen,onClose:E,title:c.title,content:c.content}),jsxRuntimeExports.jsx(Footer,{onPolicyClick:j})]})},AdminLogin=()=>{const o=useNavigate(),{setAuthData:s}=useAuth(),[i,r]=reactExports.useState({email:"",password:""}),[l,h]=reactExports.useState(""),[m,v]=reactExports.useState(!1),A=f=>{const{name:g,value:b}=f.target;r(p=>({...p,[g]:b})),h("")},d=async f=>{f.preventDefault(),h(""),v(!0);try{const g=await authAPI.adminLogin(i.email,i.password);if(g.success){const{user:b,accessToken:p,refreshToken:j}=g.data;localStorage.setItem("accessToken",p),localStorage.setItem("refreshToken",j),s(b,b.role),o("/admin")}else h(g.message||"Login failed")}catch(g){h(g.response?.data?.message||"Invalid email or password")}finally{v(!1)}},c=()=>{o("/")};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-red-900 to-black flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Admin Login"}),jsxRuntimeExports.jsx("p",{className:"text-gray-300",children:"Sign in to access the admin panel"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[jsxRuntimeExports.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),jsxRuntimeExports.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:A,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"admin@example.com",disabled:m})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",id:"password",name:"password",value:i.password,onChange:A,required:!0,minLength:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all",placeholder:"Enter your password",disabled:m})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:m,className:"w-full bg-red-600 text-white py-3 rounded-lg font-semibold hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-lg hover:shadow-xl",children:m?jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-center",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})]}),jsxRuntimeExports.jsxs("div",{className:"relative my-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-gray-300"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-sm",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-white text-gray-500",children:"OR"})})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:c,className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Back to Home"})]}),jsxRuntimeExports.jsx("p",{className:"text-center text-gray-300 text-sm mt-6",children:"For regular access, please use Google login from the home page"})]})})},AdminDashboard=()=>{const[o,s]=reactExports.useState([]),[i,r]=reactExports.useState({totalDocs:0,recentUploads:0}),[l,h]=reactExports.useState(null),[m,v]=reactExports.useState(!0);reactExports.useEffect(()=>{A()},[]);const A=async()=>{try{const c=await documentsAPI.getAll();if(c.success&&c.data){const g=c.data;s(g);const b=g.filter(p=>{const j=new Date(p.created_at),E=new Date(Date.now()-10080*60*1e3);return j>E}).length;r({totalDocs:g.length,recentUploads:b})}const f=await paymentsAPI.getTransactionStats();f.success&&h(f.data)}catch(c){console.error("Error fetching dashboard data:",c)}finally{v(!1)}},d=c=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c);return jsxRuntimeExports.jsx("div",{className:"p-8 overflow-y-auto h-screen",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Overview"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600",children:"Welcome to your admin dashboard. Here's a quick overview of your platform."})]}),m?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-12",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-red-200 border-t-red-600 animate-spin"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Documents"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Documents"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:i.totalDocs})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"This Week"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:i.recentUploads})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})})]})]}),l&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Revenue & Payments"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:d(l.totalRevenue)})]}),jsxRuntimeExports.jsx("div",{className:"p-2 bg-green-100 rounded-lg -mr-2",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:[l.successRate,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 rounded-lg -mr-2",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:l.completedPayments})]}),jsxRuntimeExports.jsx("div",{className:"p-2 bg-green-100 rounded-lg -mr-2",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:l.failedPayments})]}),jsxRuntimeExports.jsx("div",{className:"p-2 bg-red-100 rounded-lg -mr-2",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx(Link$1,{to:"/admin/documents",className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Upload Documents"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Add new documents to the platform"})]})]})}),jsxRuntimeExports.jsx(Link$1,{to:"/admin/transactions",className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"View Transactions"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Monitor all payment transactions"})]})]})}),jsxRuntimeExports.jsx(Link$1,{to:"/admin/users",className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Manage Users"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View all registered users"})]})]})})]})]})]})]})})},FolderTreeItem=({folder:o,selectedId:s,onSelect:i,onContextMenu:r,readOnly:l,level:h=0})=>{const[m,v]=reactExports.useState(!0),A=o.children&&o.children.length>0,d=s===o.id,c=b=>{b.stopPropagation(),v(!m)},f=()=>{i&&i(o)},g=b=>{!l&&r&&(b.preventDefault(),r(b,o))};return jsxRuntimeExports.jsxs("div",{className:"select-none",children:[jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-colors ${d?"bg-red-50 text-red-700 font-medium":"hover:bg-gray-100 text-gray-700"}`,style:{paddingLeft:`${h*20+12}px`},onClick:f,onContextMenu:g,children:[A?jsxRuntimeExports.jsx("button",{onClick:c,className:"flex items-center justify-center w-4 h-4 hover:bg-gray-200 rounded transition-colors",children:jsxRuntimeExports.jsx("svg",{className:`w-3 h-3 transition-transform ${m?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):jsxRuntimeExports.jsx("div",{className:"w-4"}),jsxRuntimeExports.jsx("svg",{className:`w-5 h-5 flex-shrink-0 ${d?"text-red-600":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m&&A?jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"}):jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),jsxRuntimeExports.jsx("span",{className:"flex-1 truncate text-sm",children:o.name}),o.documentCount!==void 0&&o.documentCount>0&&jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 text-gray-600 rounded-full",children:o.documentCount})]}),A&&m&&jsxRuntimeExports.jsx("div",{className:"mt-1",children:o.children.map(b=>jsxRuntimeExports.jsx(FolderTreeItem,{folder:b,selectedId:s,onSelect:i,onContextMenu:r,readOnly:l,level:h+1},b.id))})]})},FolderTree=({folders:o,selectedId:s,onSelect:i,onContextMenu:r,readOnly:l=!1,showRoot:h=!0})=>!o||o.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"No folders yet"}),!l&&jsxRuntimeExports.jsx("p",{className:"text-xs mt-1",children:"Create your first folder to get started"})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[h&&jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-colors ${s===null?"bg-red-50 text-red-700 font-medium":"hover:bg-gray-100 text-gray-700"}`,onClick:()=>i&&i(null),children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-sm",children:"All Documents"})]}),o.map(m=>jsxRuntimeExports.jsx(FolderTreeItem,{folder:m,selectedId:s,onSelect:i,onContextMenu:r,readOnly:l,level:0},m.id))]}),FolderSelectorItem=({folder:o,level:s=0,onSelect:i,selectedId:r})=>{const l=r===o.id;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`px-3 py-2 cursor-pointer transition-colors ${l?"bg-red-50 text-red-700":"hover:bg-gray-100"}`,style:{paddingLeft:`${s*20+12}px`},onClick:()=>i(o),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),jsxRuntimeExports.jsx("span",{className:"text-sm truncate",children:o.name})]})}),o.children&&o.children.map(h=>jsxRuntimeExports.jsx(FolderSelectorItem,{folder:h,level:s+1,onSelect:i,selectedId:r},h.id))]})},FolderSelector=({folders:o,value:s,onChange:i,placeholder:r="Select folder...",allowRoot:l=!0,error:h})=>{const[m,v]=reactExports.useState(!1),[A,d]=reactExports.useState(""),c=reactExports.useRef(null),f=(C,B)=>{for(const I of C){if(I.id===B)return I;if(I.children){const N=f(I.children,B);if(N)return N}}return null},g=s?f(o,s):null,b=(C,B,I=[])=>{for(const N of C){if(N.id===B)return[...I,N.name];if(N.children){const L=b(N.children,B,[...I,N.name]);if(L)return L}}return null},p=s?b(o,s):null;reactExports.useEffect(()=>{const C=B=>{c.current&&!c.current.contains(B.target)&&(v(!1),d(""))};return m&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[m]);const j=C=>{i(C?C.id:null),v(!1),d("")},E=(C,B)=>{if(!B)return C;const I=[];for(const N of C){const L=N.name.toLowerCase().includes(B.toLowerCase()),Q=N.children?E(N.children,B):[];(L||Q.length>0)&&I.push({...N,children:Q})}return I},y=A?E(o,A):o;return jsxRuntimeExports.jsxs("div",{className:"relative",ref:c,children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>v(!m),className:`w-full flex items-center justify-between px-4 py-2.5 bg-white border rounded-lg text-left transition-colors ${h?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 hover:border-gray-400 focus:ring-red-500 focus:border-red-500"}`,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-900 truncate",children:p?p.join(" / "):g?.name})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:r})]})}),jsxRuntimeExports.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform flex-shrink-0 ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600",children:h}),m&&jsxRuntimeExports.jsxs("div",{className:"absolute z-50 mt-2 w-full bg-white border border-gray-200 rounded-lg shadow-lg max-h-96 overflow-hidden flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"p-2 border-b border-gray-200",children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search folders...",value:A,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",onClick:C=>C.stopPropagation()})}),jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto flex-1",children:[l&&jsxRuntimeExports.jsx("div",{className:`px-3 py-2 cursor-pointer transition-colors ${s===null?"bg-red-50 text-red-700":"hover:bg-gray-100"}`,onClick:()=>j(null),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"No Folder (Root)"})]})}),y.length>0?y.map(C=>jsxRuntimeExports.jsx(FolderSelectorItem,{folder:C,onSelect:j,selectedId:s,level:0},C.id)):jsxRuntimeExports.jsx("div",{className:"px-3 py-8 text-center text-gray-500 text-sm",children:A?"No folders found":"No folders available"})]})]})]})},DocumentManagerPage=()=>{const o=useNavigate(),[s,i]=reactExports.useState([]),[r,l]=reactExports.useState(null),[h,m]=reactExports.useState([]),[v,A]=reactExports.useState([]),[d,c]=reactExports.useState(!0),[f,g]=reactExports.useState(!1),[b,p]=reactExports.useState(!1),[j,E]=reactExports.useState(!1),[y,C]=reactExports.useState(!1),[B,I]=reactExports.useState(null),[N,L]=reactExports.useState(""),[Q,tt]=reactExports.useState(""),[Z,st]=reactExports.useState(null),[F,it]=reactExports.useState({title:"",description:"",file:null,folderId:null}),Y=reactExports.useCallback(async()=>{try{const R=await foldersAPI.getTree();i(R.data||[])}catch(R){console.error("Error fetching folders:",R)}finally{c(!1)}},[]),rt=reactExports.useCallback(async()=>{try{const R=await documentsAPI.getAll(r);A(R.data||[])}catch(R){console.error("Error fetching documents:",R)}},[r]),lt=reactExports.useCallback(async()=>{if(r)try{const R=await foldersAPI.getPath(r);m(R.data||[])}catch(R){console.error("Error fetching folder path:",R)}},[r]);reactExports.useEffect(()=>{Y()},[Y]),reactExports.useEffect(()=>{rt(),r?lt():m([])},[r,rt,lt]);const U=async()=>{if(!N.trim()){tt("Folder name is required");return}try{await foldersAPI.create(N,B?.id||null),p(!1),L(""),tt(""),I(null),Y()}catch(R){tt(R.response?.data?.message||"Failed to create folder")}},P=async()=>{if(!N.trim()){tt("Folder name is required");return}try{await foldersAPI.update(B.id,N),E(!1),L(""),tt(""),I(null),Y()}catch(R){tt(R.response?.data?.message||"Failed to rename folder")}},k=async()=>{try{await foldersAPI.delete(B.id),C(!1),I(null),r===B.id&&l(null),Y()}catch(R){tt(R.response?.data?.message||"Failed to delete folder")}},_=(R,M)=>{R.preventDefault(),st({x:R.pageX,y:R.pageY,folder:M})},S=()=>{st(null)};reactExports.useEffect(()=>{const R=()=>S();return Z&&document.addEventListener("click",R),()=>document.removeEventListener("click",R)},[Z]);const O=R=>{const M=R.target.files[0];if(M){if(M.type!=="application/pdf"){alert("Only PDF files are supported");return}if(M.size>500*1024*1024){alert("File size must be less than 500MB");return}it({...F,file:M})}},H=async R=>{if(R.preventDefault(),!F.title||!F.file){alert("Title and file are required");return}g(!0);const M=new FormData;M.append("title",F.title),M.append("description",F.description),M.append("file",F.file),F.folderId&&M.append("folder_id",F.folderId);try{await documentsAPI.upload(M),it({title:"",description:"",file:null,folderId:r}),document.getElementById("file-input").value="",rt(),alert("Document uploaded successfully!")}catch(D){alert(D.response?.data?.message||"Failed to upload document")}finally{g(!1)}},G=async R=>{if(confirm("Are you sure you want to delete this document?"))try{await documentsAPI.delete(R),rt(),alert("Document deleted successfully!")}catch{alert("Failed to delete document")}},K=R=>{o(`/admin/documents/view/${R}`)},q=async R=>{try{await documentsAPI.toggleVisibility(R),rt()}catch{alert("Failed to toggle visibility")}};return d?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-red-200 border-t-red-600 animate-spin"})}):jsxRuntimeExports.jsxs("div",{className:"p-8 overflow-y-auto h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-6 h-full overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"w-64 bg-white border border-gray-200 rounded-xl shadow-sm flex flex-col flex-shrink-0 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-6 pb-4 border-b border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Folders"}),jsxRuntimeExports.jsx("button",{onClick:()=>{I(null),p(!0)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"New Folder",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:jsxRuntimeExports.jsx(FolderTree,{folders:s,selectedId:r,onSelect:R=>l(R?.id||null),onContextMenu:_,readOnly:!1,showRoot:!0})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto bg-white border border-gray-200 rounded-xl shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"pb-0",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload Document"}),h.length>0&&jsxRuntimeExports.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>l(null),className:"hover:text-gray-900 transition-colors",children:"All Documents"}),h.map((R,M)=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900",children:R.name})]},R.id))]})]}),jsxRuntimeExports.jsx("div",{className:"pb-8",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:jsxRuntimeExports.jsxs("form",{onSubmit:H,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Title *"}),jsxRuntimeExports.jsx("input",{type:"text",value:F.title,onChange:R=>it({...F,title:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter document title",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),jsxRuntimeExports.jsx("textarea",{value:F.description,onChange:R=>it({...F,description:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Add a description",rows:3})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folder"}),jsxRuntimeExports.jsx(FolderSelector,{folders:s,value:F.folderId||r,onChange:R=>it({...F,folderId:R}),placeholder:"Select folder (optional)",allowRoot:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File (PDF only) *"}),jsxRuntimeExports.jsx("input",{id:"file-input",type:"file",accept:".pdf",onChange:O,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",required:!0}),F.file&&jsxRuntimeExports.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",F.file.name]})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:f,className:"w-full bg-red-600 text-white py-3 rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:f?"Uploading...":"Upload Document"})]})})}),jsxRuntimeExports.jsx("div",{className:"pb-8",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Documents ",r?"in this folder":""]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[v.length," document(s)"]})]}),jsxRuntimeExports.jsx("div",{className:"divide-y divide-gray-200",children:v.length>0?v.map(R=>jsxRuntimeExports.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"text-base font-medium text-gray-900",children:R.title}),!R.is_visible&&jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Hidden"})]}),R.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-2",children:R.description}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded ",new Date(R.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>K(R.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Document",children:jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),jsxRuntimeExports.jsx("button",{onClick:()=>q(R.id),className:`p-2 rounded-lg transition-colors ${R.is_visible?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-50"}`,title:R.is_visible?"Visible to users (click to hide)":"Hidden from users (click to show)",children:R.is_visible?jsxRuntimeExports.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})}),jsxRuntimeExports.jsx("button",{onClick:()=>G(R.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},R.id)):jsxRuntimeExports.jsxs("div",{className:"p-12 text-center text-gray-500",children:[jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"No documents yet"}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-1",children:"Upload your first document to get started"})]})})]})})]})})]}),Z&&jsxRuntimeExports.jsxs("div",{className:"fixed bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",style:{top:Z.y,left:Z.x},children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{I(Z.folder),p(!0),S()},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Subfolder"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{I(Z.folder),L(Z.folder.name),E(!0),S()},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Rename"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{I(Z.folder),C(!0),S()},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})]}),b&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:B?`Create Subfolder in "${B.name}"`:"Create New Folder"}),jsxRuntimeExports.jsx("input",{type:"text",value:N,onChange:R=>{L(R.target.value),tt("")},placeholder:"Folder name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent mb-2",autoFocus:!0}),Q&&jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 mb-4",children:Q}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{p(!1),L(""),tt(""),I(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:U,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Create"})]})]})}),j&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rename Folder"}),jsxRuntimeExports.jsx("input",{type:"text",value:N,onChange:R=>{L(R.target.value),tt("")},placeholder:"Folder name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent mb-2",autoFocus:!0}),Q&&jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 mb-4",children:Q}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{E(!1),L(""),tt(""),I(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:P,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Rename"})]})]})}),y&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Delete Folder"]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-700 mb-3",children:['Are you sure you want to delete "',jsxRuntimeExports.jsx("strong",{children:B?.name}),'"?']}),jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-red-800 font-medium mb-1",children:" Warning: This action cannot be undone"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-red-700",children:["This will permanently delete the folder and ",jsxRuntimeExports.jsx("strong",{children:"all subfolders and documents"})," inside it."]})]})]}),Q&&jsxRuntimeExports.jsx("p",{className:"text-sm text-red-600 mb-4",children:Q}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{C(!1),tt(""),I(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:k,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Delete Permanently"})]})]})})]})},AdminDocumentViewer=()=>{const{id:o}=useParams(),s=useNavigate(),{user:i}=useAuth(),[r,l]=reactExports.useState(null),[h,m]=reactExports.useState(!0),[v,A]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{if(!i){A("Please log in to view documents."),m(!1);return}const f=await documentsAPI.getById(o);if(!f.success||!f.data){A("Document not found or access denied."),m(!1);return}const g=f.data;if(!g.file_url){A("Document file is not available."),m(!1);return}l(g),m(!1)}catch(f){console.error("Error fetching document:",f),A(`Failed to load document: ${f.message}`),m(!1)}})()},[o,i]);const d=()=>{s("/admin/documents")};return h?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Loading document..."})]})}):v||!r?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-md",children:[jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Document Not Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:v}),jsxRuntimeExports.jsx("button",{onClick:d,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg font-medium transition-colors",children:"Back to Document Manager"})]})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-100",children:[jsxRuntimeExports.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[jsxRuntimeExports.jsxs("button",{onClick:d,className:"flex items-center text-gray-700 hover:text-gray-900 mr-6 transition-colors",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Back"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center min-w-0",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-red-600 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-semibold text-gray-900 truncate",children:r.title})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Admin View"]}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"No Restrictions"})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[r.description&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Description"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:r.description})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:jsxRuntimeExports.jsx("iframe",{src:r.file_url,className:"w-full",style:{height:"calc(100vh - 200px)",minHeight:"600px"},title:r.title})}),jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:[jsxRuntimeExports.jsx("p",{children:"Admin preview - Full access with no restrictions"}),jsxRuntimeExports.jsxs("p",{className:"text-xs mt-1",children:["Uploaded on ",new Date(r.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]})]})]})},TransactionsList=({transactions:o,loading:s,hasMore:i,onLoadMore:r})=>{const l=A=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(A),h=A=>{const d=new Date(A);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(d)},m=A=>{const d={completed:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",failed:"bg-red-100 text-red-800 border-red-200",expired:"bg-gray-100 text-gray-800 border-gray-200"},c={completed:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),pending:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),failed:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),expired:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})};return jsxRuntimeExports.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium border ${d[A]||d.pending}`,children:[c[A],A.charAt(0).toUpperCase()+A.slice(1)]})},v=A=>{navigator.clipboard.writeText(A).then(()=>{}).catch(d=>{console.error("Failed to copy session ID:",d)})};return s&&o.length===0?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-12",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-red-200 border-t-red-600 animate-spin mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-medium mt-4",children:"Loading transactions..."})]})}):o.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No transactions found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Try adjusting your filters to see more results."})]}):jsxRuntimeExports.jsxs("div",{className:"overflow-x-auto",children:[jsxRuntimeExports.jsxs("table",{className:"w-full min-w-[1200px]",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session ID"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(A=>jsxRuntimeExports.jsxs("tr",{className:"group hover:bg-gray-50 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.user?.name||"N/A"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:A.user?.email||"N/A"})]})})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-900",children:A.document?.title||"Lifetime Subscription"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-900",children:l(A.amount)})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m(A.status)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(A.created_at)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 font-mono truncate max-w-[200px]",title:A.stripe_session_id,children:A.stripe_session_id}),jsxRuntimeExports.jsx("button",{onClick:()=>v(A.stripe_session_id),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-100 rounded",title:"Copy to clipboard",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})})]},A.id))})]}),i&&jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:jsxRuntimeExports.jsx("button",{onClick:r,disabled:s,className:"w-full py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center gap-2",children:s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white border-t-transparent animate-spin"}),"Loading..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Load More"]})})}),!i&&o.length>0&&jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"No more transactions to load"})})]})},TransactionsPage=()=>{const[o,s]=reactExports.useState([]),[i,r]=reactExports.useState(null),[l,h]=reactExports.useState(!0),[m,v]=reactExports.useState(!0),[A,d]=reactExports.useState({status:"",search:"",startDate:"",endDate:""}),[c,f]=reactExports.useState({limit:20,offset:0,hasMore:!0});reactExports.useEffect(()=>{g()},[]),reactExports.useEffect(()=>{b(!0)},[A]);const g=async()=>{try{const y=await paymentsAPI.getTransactionStats();y.success&&r(y.data)}catch(y){console.error("Error fetching stats:",y)}finally{v(!1)}},b=async(y=!1)=>{try{h(!0);const C=y?0:c.offset,B=await paymentsAPI.getTransactions({limit:c.limit,offset:C,...A});if(B.success){const I=B.data.transactions;y?(s(I),f({...c,offset:I.length})):(s([...o,...I]),f({...c,offset:c.offset+I.length})),I.length<c.limit?f(N=>({...N,hasMore:!1})):f(N=>({...N,hasMore:!0}))}}catch(C){console.error("Error fetching transactions:",C)}finally{h(!1)}},p=(y,C)=>{d(B=>({...B,[y]:C})),f({...c,offset:0,hasMore:!0})},j=()=>{b(!1)},E=y=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y);return jsxRuntimeExports.jsxs("div",{className:"py-8 px-4 md:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transactions"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600",children:"Monitor all payment transactions and revenue"})]}),m?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-8",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-200 border-t-red-600 animate-spin"})}):i&&jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:E(i.totalRevenue)})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:[i.successRate,"%"]})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:i.completedPayments})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Failed"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:i.failedPayments})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),jsxRuntimeExports.jsxs("select",{value:A.status,onChange:y=>p("status",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"All Statuses"}),jsxRuntimeExports.jsx("option",{value:"completed",children:"Completed"}),jsxRuntimeExports.jsx("option",{value:"pending",children:"Pending"}),jsxRuntimeExports.jsx("option",{value:"failed",children:"Failed"}),jsxRuntimeExports.jsx("option",{value:"expired",children:"Expired"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search User"}),jsxRuntimeExports.jsx("input",{type:"text",value:A.search,onChange:y=>p("search",y.target.value),placeholder:"Email or name...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:A.startDate,onChange:y=>p("startDate",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:A.endDate,onChange:y=>p("endDate",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Transaction History"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View all payment transactions"})]}),jsxRuntimeExports.jsx(TransactionsList,{transactions:o,loading:l,hasMore:c.hasMore,onLoadMore:j})]})]})},UsersList=({users:o,loading:s,hasMore:i,onLoadMore:r})=>{const l=A=>{if(!A)return"N/A";const d=new Date(A);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).format(d)},h=A=>A?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(A):"N/A",m=A=>A?jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Lifetime Subscriber"]}):jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Free User"]}),v=A=>A==="admin"?jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"Admin"]}):jsxRuntimeExports.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:"User"});return s&&o.length===0?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-12",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-red-200 border-t-red-600 animate-spin mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-medium mt-4",children:"Loading users..."})]})}):o.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Try adjusting your search to see more results."})]}):jsxRuntimeExports.jsxs("div",{className:"overflow-x-auto",children:[jsxRuntimeExports.jsxs("table",{className:"w-full min-w-[1000px]",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription Status"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Number"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription Date"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount Paid"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(A=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:jsxRuntimeExports.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-red-500 to-red-600 flex items-center justify-center text-white font-semibold",children:A.name?.charAt(0).toUpperCase()||"U"})}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name||"N/A"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:A.email})]})]})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v(A.role)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m(A.hasLifetimeSubscription)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.contact_number||"N/A"}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(A.subscriptionDate)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:h(A.subscriptionAmount)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l(A.created_at)})]},A.id))})]}),i&&jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:jsxRuntimeExports.jsx("button",{onClick:r,disabled:s,className:"w-full py-2 px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center gap-2",children:s?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white border-t-transparent animate-spin"}),"Loading..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Load More"]})})}),!i&&o.length>0&&jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"No more users to load"})})]})},UsersManagementPage=()=>{const[o,s]=reactExports.useState([]),[i,r]=reactExports.useState(!0),[l,h]=reactExports.useState({search:"",startDate:"",endDate:""}),[m,v]=reactExports.useState({limit:20,offset:0,hasMore:!0});reactExports.useEffect(()=>{A(!0)},[l]);const A=async(b=!1)=>{try{r(!0);const p=b?0:m.offset,j=await usersAPI.getAllUsers({limit:m.limit,offset:p,...l});if(j.success){const E=j.data.users;b?(s(E),v({...m,offset:E.length})):(s([...o,...E]),v({...m,offset:m.offset+E.length})),E.length<m.limit?v(y=>({...y,hasMore:!1})):v(y=>({...y,hasMore:!0}))}}catch(p){console.error("Error fetching users:",p)}finally{r(!1)}},d=(b,p)=>{h(j=>({...j,[b]:p})),v({...m,offset:0,hasMore:!0})},c=b=>{d("search",b.target.value)},f=()=>{A(!1)},g={totalUsers:o.length,subscribedUsers:o.filter(b=>b.hasLifetimeSubscription).length,freeUsers:o.filter(b=>!b.hasLifetimeSubscription).length};return jsxRuntimeExports.jsxs("div",{className:"py-8 px-4 md:px-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Users Management"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600",children:"View and manage all registered users"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:g.totalUsers})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Subscribed Users"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:g.subscribedUsers})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Free Users"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:g.freeUsers})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm mb-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Search and Filter Users"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"text",value:l.search,onChange:c,placeholder:"Search by email or name...",className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),jsxRuntimeExports.jsx("svg",{className:"absolute left-3 top-3 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:l.startDate,onChange:b=>d("startDate",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:l.endDate,onChange:b=>d("endDate",b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"All Users"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"View all registered users and their subscription status"})]}),jsxRuntimeExports.jsx(UsersList,{users:o,loading:i,hasMore:m.hasMore,onLoadMore:f})]})]})},PricingPage=()=>{const[o,s]=reactExports.useState(""),[i,r]=reactExports.useState(!0),[l,h]=reactExports.useState(!1),[m,v]=reactExports.useState(""),[A,d]=reactExports.useState("");reactExports.useEffect(()=>{c()},[]);const c=async()=>{try{r(!0);const b=await settingsAPI.getByKey("lifetime_subscription_price");b.success&&s(b.data.value)}catch(b){console.error("Error fetching price:",b),v("Failed to load current price")}finally{r(!1)}},f=async b=>{b.preventDefault(),v(""),d("");const p=parseFloat(o);if(isNaN(p)){v("Please enter a valid number");return}if(p<1){v("Price must be at least $1.00");return}if(p>9999){v("Price cannot exceed $9,999.00");return}try{h(!0);const j=await settingsAPI.update("lifetime_subscription_price",p.toFixed(2));j.success&&(d("Subscription price updated successfully!"),s(j.data.value),setTimeout(()=>d(""),3e3))}catch(j){console.error("Error updating price:",j),v(j.response?.data?.message||"Failed to update price")}finally{h(!1)}},g=b=>b?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(b):"$0.00";return jsxRuntimeExports.jsx("div",{className:"p-8 overflow-y-auto h-screen",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Subscription Pricing"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600",children:"Configure your platform's subscription pricing"})]}),i?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-12",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-full border-4 border-red-200 border-t-red-600 animate-spin mx-auto"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-medium mt-4",children:"Loading pricing settings..."})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-lg p-8 mb-8 text-white",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-red-100 text-sm font-medium uppercase tracking-wide",children:"Current Subscription Price"}),jsxRuntimeExports.jsx("p",{className:"text-5xl font-bold mt-2",children:g(o)}),jsxRuntimeExports.jsx("p",{className:"text-red-100 mt-2",children:"One-time payment for lifetime access"})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-white/20 rounded-full",children:jsxRuntimeExports.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Update Pricing"}),jsxRuntimeExports.jsxs("form",{onSubmit:f,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lifetime Subscription Price (USD)"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-lg font-medium",children:"$"})}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.01",min:"1",max:"9999",value:o,onChange:b=>s(b.target.value),className:"w-full pl-8 pr-4 py-3 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"29.99",required:!0})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Enter an amount between $1.00 and $9,999.00"})]}),m&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-1.964-1.333-2.732 0L4.082 16c-.77 1.333.192 3 1.732 3z"})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-red-800",children:m})]}),A&&jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-800",children:A})]}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Important Notes:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc ml-4 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Price changes take effect immediately for new purchases"}),jsxRuntimeExports.jsx("li",{children:"Existing subscribers are not affected"}),jsxRuntimeExports.jsx("li",{children:"This is the one-time lifetime subscription price"})]})]})]})}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:l,className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:l?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Saving..."})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),jsxRuntimeExports.jsx("span",{children:"Save Changes"})]})})]})]})]})]})})};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$f=Object.prototype,hasOwnProperty$c=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(o){var s=hasOwnProperty$c.call(o,symToStringTag$1),i=o[symToStringTag$1];try{o[symToStringTag$1]=void 0;var r=!0}catch{}var l=nativeObjectToString$1.call(o);return r&&(s?o[symToStringTag$1]=i:delete o[symToStringTag$1]),l}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(o){return nativeObjectToString.call(o)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(o){return o==null?o===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(o)?getRawTag(o):objectToString(o)}function isObjectLike(o){return o!=null&&typeof o=="object"}var isArray=Array.isArray;function isObject(o){var s=typeof o;return o!=null&&(s=="object"||s=="function")}function identity(o){return o}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(o){if(!isObject(o))return!1;var s=baseGetTag(o);return s==funcTag$2||s==genTag$1||s==asyncTag||s==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=(function(){var o=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""})();function isMasked(o){return!!maskSrcKey&&maskSrcKey in o}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(o){if(o!=null){try{return funcToString$2.call(o)}catch{}try{return o+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$b=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$b).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(o){if(!isObject(o)||isMasked(o))return!1;var s=isFunction(o)?reIsNative:reIsHostCtor;return s.test(toSource(o))}function getValue(o,s){return o?.[s]}function getNative(o,s){var i=getValue(o,s);return baseIsNative(i)?i:void 0}var WeakMap$1=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=(function(){function o(){}return function(s){if(!isObject(s))return{};if(objectCreate)return objectCreate(s);o.prototype=s;var i=new o;return o.prototype=void 0,i}})();function apply(o,s,i){switch(i.length){case 0:return o.call(s);case 1:return o.call(s,i[0]);case 2:return o.call(s,i[0],i[1]);case 3:return o.call(s,i[0],i[1],i[2])}return o.apply(s,i)}function copyArray(o,s){var i=-1,r=o.length;for(s||(s=Array(r));++i<r;)s[i]=o[i];return s}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(o){var s=0,i=0;return function(){var r=nativeNow(),l=HOT_SPAN-(r-i);if(i=r,l>0){if(++s>=HOT_COUNT)return arguments[0]}else s=0;return o.apply(void 0,arguments)}}function constant(o){return function(){return o}}var defineProperty=(function(){try{var o=getNative(Object,"defineProperty");return o({},"",{}),o}catch{}})(),baseSetToString=defineProperty?function(o,s){return defineProperty(o,"toString",{configurable:!0,enumerable:!1,value:constant(s),writable:!0})}:identity,setToString=shortOut(baseSetToString);function arrayEach(o,s){for(var i=-1,r=o==null?0:o.length;++i<r&&s(o[i],i,o)!==!1;);return o}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(o,s){var i=typeof o;return s=s??MAX_SAFE_INTEGER$1,!!s&&(i=="number"||i!="symbol"&&reIsUint.test(o))&&o>-1&&o%1==0&&o<s}function baseAssignValue(o,s,i){s=="__proto__"&&defineProperty?defineProperty(o,s,{configurable:!0,enumerable:!0,value:i,writable:!0}):o[s]=i}function eq(o,s){return o===s||o!==o&&s!==s}var objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty;function assignValue(o,s,i){var r=o[s];(!(hasOwnProperty$a.call(o,s)&&eq(r,i))||i===void 0&&!(s in o))&&baseAssignValue(o,s,i)}function copyObject(o,s,i,r){var l=!i;i||(i={});for(var h=-1,m=s.length;++h<m;){var v=s[h],A=void 0;A===void 0&&(A=o[v]),l?baseAssignValue(i,v,A):assignValue(i,v,A)}return i}var nativeMax=Math.max;function overRest(o,s,i){return s=nativeMax(s===void 0?o.length-1:s,0),function(){for(var r=arguments,l=-1,h=nativeMax(r.length-s,0),m=Array(h);++l<h;)m[l]=r[s+l];l=-1;for(var v=Array(s+1);++l<s;)v[l]=r[l];return v[s]=i(m),apply(o,this,v)}}function baseRest(o,s){return setToString(overRest(o,s,identity),o+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=MAX_SAFE_INTEGER}function isArrayLike(o){return o!=null&&isLength(o.length)&&!isFunction(o)}function isIterateeCall(o,s,i){if(!isObject(i))return!1;var r=typeof s;return(r=="number"?isArrayLike(i)&&isIndex(s,i.length):r=="string"&&s in i)?eq(i[s],o):!1}function createAssigner(o){return baseRest(function(s,i){var r=-1,l=i.length,h=l>1?i[l-1]:void 0,m=l>2?i[2]:void 0;for(h=o.length>3&&typeof h=="function"?(l--,h):void 0,m&&isIterateeCall(i[0],i[1],m)&&(h=l<3?void 0:h,l=1),s=Object(s);++r<l;){var v=i[r];v&&o(s,v,r,h)}return s})}var objectProto$b=Object.prototype;function isPrototype(o){var s=o&&o.constructor,i=typeof s=="function"&&s.prototype||objectProto$b;return o===i}function baseTimes(o,s){for(var i=-1,r=Array(o);++i<o;)r[i]=s(i);return r}var argsTag$3="[object Arguments]";function baseIsArguments(o){return isObjectLike(o)&&baseGetTag(o)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments((function(){return arguments})())?baseIsArguments:function(o){return isObjectLike(o)&&hasOwnProperty$9.call(o,"callee")&&!propertyIsEnumerable$1.call(o,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(o){return isObjectLike(o)&&isLength(o.length)&&!!typedArrayTags[baseGetTag(o)]}function baseUnary(o){return function(s){return o(s)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=(function(){try{var o=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return o||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}})(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function arrayLikeKeys(o,s){var i=isArray(o),r=!i&&isArguments(o),l=!i&&!r&&isBuffer(o),h=!i&&!r&&!l&&isTypedArray(o),m=i||r||l||h,v=m?baseTimes(o.length,String):[],A=v.length;for(var d in o)(s||hasOwnProperty$8.call(o,d))&&!(m&&(d=="length"||l&&(d=="offset"||d=="parent")||h&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||isIndex(d,A)))&&v.push(d);return v}function overArg(o,s){return function(i){return o(s(i))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeys(o){if(!isPrototype(o))return nativeKeys(o);var s=[];for(var i in Object(o))hasOwnProperty$7.call(o,i)&&i!="constructor"&&s.push(i);return s}function keys(o){return isArrayLike(o)?arrayLikeKeys(o):baseKeys(o)}function nativeKeysIn(o){var s=[];if(o!=null)for(var i in Object(o))s.push(i);return s}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function baseKeysIn(o){if(!isObject(o))return nativeKeysIn(o);var s=isPrototype(o),i=[];for(var r in o)r=="constructor"&&(s||!hasOwnProperty$6.call(o,r))||i.push(r);return i}function keysIn(o){return isArrayLike(o)?arrayLikeKeys(o,!0):baseKeysIn(o)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(o){var s=this.has(o)&&delete this.__data__[o];return this.size-=s?1:0,s}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashGet(o){var s=this.__data__;if(nativeCreate){var i=s[o];return i===HASH_UNDEFINED$2?void 0:i}return hasOwnProperty$5.call(s,o)?s[o]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function hashHas(o){var s=this.__data__;return nativeCreate?s[o]!==void 0:hasOwnProperty$4.call(s,o)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(o,s){var i=this.__data__;return this.size+=this.has(o)?0:1,i[o]=nativeCreate&&s===void 0?HASH_UNDEFINED$1:s,this}function Hash(o){var s=-1,i=o==null?0:o.length;for(this.clear();++s<i;){var r=o[s];this.set(r[0],r[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(o,s){for(var i=o.length;i--;)if(eq(o[i][0],s))return i;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(o){var s=this.__data__,i=assocIndexOf(s,o);if(i<0)return!1;var r=s.length-1;return i==r?s.pop():splice.call(s,i,1),--this.size,!0}function listCacheGet(o){var s=this.__data__,i=assocIndexOf(s,o);return i<0?void 0:s[i][1]}function listCacheHas(o){return assocIndexOf(this.__data__,o)>-1}function listCacheSet(o,s){var i=this.__data__,r=assocIndexOf(i,o);return r<0?(++this.size,i.push([o,s])):i[r][1]=s,this}function ListCache(o){var s=-1,i=o==null?0:o.length;for(this.clear();++s<i;){var r=o[s];this.set(r[0],r[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(o){var s=typeof o;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?o!=="__proto__":o===null}function getMapData(o,s){var i=o.__data__;return isKeyable(s)?i[typeof s=="string"?"string":"hash"]:i.map}function mapCacheDelete(o){var s=getMapData(this,o).delete(o);return this.size-=s?1:0,s}function mapCacheGet(o){return getMapData(this,o).get(o)}function mapCacheHas(o){return getMapData(this,o).has(o)}function mapCacheSet(o,s){var i=getMapData(this,o),r=i.size;return i.set(o,s),this.size+=i.size==r?0:1,this}function MapCache(o){var s=-1,i=o==null?0:o.length;for(this.clear();++s<i;){var r=o[s];this.set(r[0],r[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function arrayPush(o,s){for(var i=-1,r=s.length,l=o.length;++i<r;)o[l+i]=s[i];return o}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$3=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(o){if(!isObjectLike(o)||baseGetTag(o)!=objectTag$3)return!1;var s=getPrototype(o);if(s===null)return!0;var i=hasOwnProperty$3.call(s,"constructor")&&s.constructor;return typeof i=="function"&&i instanceof i&&funcToString.call(i)==objectCtorString}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(o){var s=this.__data__,i=s.delete(o);return this.size=s.size,i}function stackGet(o){return this.__data__.get(o)}function stackHas(o){return this.__data__.has(o)}var LARGE_ARRAY_SIZE=200;function stackSet(o,s){var i=this.__data__;if(i instanceof ListCache){var r=i.__data__;if(!Map$1||r.length<LARGE_ARRAY_SIZE-1)return r.push([o,s]),this.size=++i.size,this;i=this.__data__=new MapCache(r)}return i.set(o,s),this.size=i.size,this}function Stack(o){var s=this.__data__=new ListCache(o);this.size=s.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(o,s){if(s)return o.slice();var i=o.length,r=allocUnsafe?allocUnsafe(i):new o.constructor(i);return o.copy(r),r}function arrayFilter(o,s){for(var i=-1,r=o==null?0:o.length,l=0,h=[];++i<r;){var m=o[i];s(m,i,o)&&(h[l++]=m)}return h}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(o){return o==null?[]:(o=Object(o),arrayFilter(nativeGetSymbols(o),function(s){return propertyIsEnumerable.call(o,s)}))}:stubArray;function baseGetAllKeys(o,s,i){var r=s(o);return isArray(o)?r:arrayPush(r,i(o))}function getAllKeys(o){return baseGetAllKeys(o,keys,getSymbols)}var DataView=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(o){var s=baseGetTag(o),i=s==objectTag$2?o.constructor:void 0,r=i?toSource(i):"";if(r)switch(r){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return s});var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function initCloneArray(o){var s=o.length,i=new o.constructor(s);return s&&typeof o[0]=="string"&&hasOwnProperty$2.call(o,"index")&&(i.index=o.index,i.input=o.input),i}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(o){var s=new o.constructor(o.byteLength);return new Uint8Array$1(s).set(new Uint8Array$1(o)),s}function cloneDataView(o,s){var i=cloneArrayBuffer(o.buffer);return new o.constructor(i,o.byteOffset,o.byteLength)}var reFlags=/\w*$/;function cloneRegExp(o){var s=new o.constructor(o.source,reFlags.exec(o));return s.lastIndex=o.lastIndex,s}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(o){return symbolValueOf$1?Object(symbolValueOf$1.call(o)):{}}function cloneTypedArray(o,s){var i=s?cloneArrayBuffer(o.buffer):o.buffer;return new o.constructor(i,o.byteOffset,o.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(o,s,i){var r=o.constructor;switch(s){case arrayBufferTag$2:return cloneArrayBuffer(o);case boolTag$2:case dateTag$2:return new r(+o);case dataViewTag$2:return cloneDataView(o);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(o,i);case mapTag$3:return new r;case numberTag$2:case stringTag$2:return new r(o);case regexpTag$2:return cloneRegExp(o);case setTag$3:return new r;case symbolTag$2:return cloneSymbol(o)}}function initCloneObject(o){return typeof o.constructor=="function"&&!isPrototype(o)?baseCreate(getPrototype(o)):{}}var mapTag$2="[object Map]";function baseIsMap(o){return isObjectLike(o)&&getTag(o)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(o){return isObjectLike(o)&&getTag(o)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$1=1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(o,s,i,r,l,h){var m,v=s&CLONE_DEEP_FLAG$1;if(m!==void 0)return m;if(!isObject(o))return o;var A=isArray(o);if(A)m=initCloneArray(o);else{var d=getTag(o),c=d==funcTag||d==genTag;if(isBuffer(o))return cloneBuffer(o,v);if(d==objectTag$1||d==argsTag$1||c&&!l)m=c?{}:initCloneObject(o);else{if(!cloneableTags[d])return l?o:{};m=initCloneByTag(o,d,v)}}h||(h=new Stack);var f=h.get(o);if(f)return f;h.set(o,m),isSet(o)?o.forEach(function(p){m.add(baseClone(p,s,i,p,o,h))}):isMap(o)&&o.forEach(function(p,j){m.set(j,baseClone(p,s,i,j,o,h))});var g=getAllKeys,b=A?void 0:g(o);return arrayEach(b||o,function(p,j){b&&(j=p,p=o[j]),assignValue(m,j,baseClone(p,s,i,j,o,h))}),m}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(o){return baseClone(o,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(o){return this.__data__.set(o,HASH_UNDEFINED),this}function setCacheHas(o){return this.__data__.has(o)}function SetCache(o){var s=-1,i=o==null?0:o.length;for(this.__data__=new MapCache;++s<i;)this.add(o[s])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(o,s){for(var i=-1,r=o==null?0:o.length;++i<r;)if(s(o[i],i,o))return!0;return!1}function cacheHas(o,s){return o.has(s)}var COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays(o,s,i,r,l,h){var m=i&COMPARE_PARTIAL_FLAG$3,v=o.length,A=s.length;if(v!=A&&!(m&&A>v))return!1;var d=h.get(o),c=h.get(s);if(d&&c)return d==s&&c==o;var f=-1,g=!0,b=i&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(h.set(o,s),h.set(s,o);++f<v;){var p=o[f],j=s[f];if(r)var E=m?r(j,p,f,s,o,h):r(p,j,f,o,s,h);if(E!==void 0){if(E)continue;g=!1;break}if(b){if(!arraySome(s,function(y,C){if(!cacheHas(b,C)&&(p===y||l(p,y,i,r,h)))return b.push(C)})){g=!1;break}}else if(!(p===j||l(p,j,i,r,h))){g=!1;break}}return h.delete(o),h.delete(s),g}function mapToArray(o){var s=-1,i=Array(o.size);return o.forEach(function(r,l){i[++s]=[l,r]}),i}function setToArray(o){var s=-1,i=Array(o.size);return o.forEach(function(r){i[++s]=r}),i}var COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(o,s,i,r,l,h,m){switch(i){case dataViewTag:if(o.byteLength!=s.byteLength||o.byteOffset!=s.byteOffset)return!1;o=o.buffer,s=s.buffer;case arrayBufferTag:return!(o.byteLength!=s.byteLength||!h(new Uint8Array$1(o),new Uint8Array$1(s)));case boolTag:case dateTag:case numberTag:return eq(+o,+s);case errorTag:return o.name==s.name&&o.message==s.message;case regexpTag:case stringTag:return o==s+"";case mapTag:var v=mapToArray;case setTag:var A=r&COMPARE_PARTIAL_FLAG$2;if(v||(v=setToArray),o.size!=s.size&&!A)return!1;var d=m.get(o);if(d)return d==s;r|=COMPARE_UNORDERED_FLAG,m.set(o,s);var c=equalArrays(v(o),v(s),r,l,h,m);return m.delete(o),c;case symbolTag:if(symbolValueOf)return symbolValueOf.call(o)==symbolValueOf.call(s)}return!1}var COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(o,s,i,r,l,h){var m=i&COMPARE_PARTIAL_FLAG$1,v=getAllKeys(o),A=v.length,d=getAllKeys(s),c=d.length;if(A!=c&&!m)return!1;for(var f=A;f--;){var g=v[f];if(!(m?g in s:hasOwnProperty$1.call(s,g)))return!1}var b=h.get(o),p=h.get(s);if(b&&p)return b==s&&p==o;var j=!0;h.set(o,s),h.set(s,o);for(var E=m;++f<A;){g=v[f];var y=o[g],C=s[g];if(r)var B=m?r(C,y,g,s,o,h):r(y,C,g,o,s,h);if(!(B===void 0?y===C||l(y,C,i,r,h):B)){j=!1;break}E||(E=g=="constructor")}if(j&&!E){var I=o.constructor,N=s.constructor;I!=N&&"constructor"in o&&"constructor"in s&&!(typeof I=="function"&&I instanceof I&&typeof N=="function"&&N instanceof N)&&(j=!1)}return h.delete(o),h.delete(s),j}var COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(o,s,i,r,l,h){var m=isArray(o),v=isArray(s),A=m?arrayTag:getTag(o),d=v?arrayTag:getTag(s);A=A==argsTag?objectTag:A,d=d==argsTag?objectTag:d;var c=A==objectTag,f=d==objectTag,g=A==d;if(g&&isBuffer(o)){if(!isBuffer(s))return!1;m=!0,c=!1}if(g&&!c)return h||(h=new Stack),m||isTypedArray(o)?equalArrays(o,s,i,r,l,h):equalByTag(o,s,A,i,r,l,h);if(!(i&COMPARE_PARTIAL_FLAG)){var b=c&&hasOwnProperty.call(o,"__wrapped__"),p=f&&hasOwnProperty.call(s,"__wrapped__");if(b||p){var j=b?o.value():o,E=p?s.value():s;return h||(h=new Stack),l(j,E,i,r,h)}}return g?(h||(h=new Stack),equalObjects(o,s,i,r,l,h)):!1}function baseIsEqual(o,s,i,r,l){return o===s?!0:o==null||s==null||!isObjectLike(o)&&!isObjectLike(s)?o!==o&&s!==s:baseIsEqualDeep(o,s,i,r,baseIsEqual,l)}function createBaseFor(o){return function(s,i,r){for(var l=-1,h=Object(s),m=r(s),v=m.length;v--;){var A=m[++l];if(i(h[A],A,h)===!1)break}return s}}var baseFor=createBaseFor();function assignMergeValue(o,s,i){(i!==void 0&&!eq(o[s],i)||i===void 0&&!(s in o))&&baseAssignValue(o,s,i)}function isArrayLikeObject(o){return isObjectLike(o)&&isArrayLike(o)}function safeGet(o,s){if(!(s==="constructor"&&typeof o[s]=="function")&&s!="__proto__")return o[s]}function toPlainObject(o){return copyObject(o,keysIn(o))}function baseMergeDeep(o,s,i,r,l,h,m){var v=safeGet(o,i),A=safeGet(s,i),d=m.get(A);if(d){assignMergeValue(o,i,d);return}var c=h?h(v,A,i+"",o,s,m):void 0,f=c===void 0;if(f){var g=isArray(A),b=!g&&isBuffer(A),p=!g&&!b&&isTypedArray(A);c=A,g||b||p?isArray(v)?c=v:isArrayLikeObject(v)?c=copyArray(v):b?(f=!1,c=cloneBuffer(A,!0)):p?(f=!1,c=cloneTypedArray(A,!0)):c=[]:isPlainObject(A)||isArguments(A)?(c=v,isArguments(v)?c=toPlainObject(v):(!isObject(v)||isFunction(v))&&(c=initCloneObject(A))):f=!1}f&&(m.set(A,c),l(c,A,r,h,m),m.delete(A)),assignMergeValue(o,i,c)}function baseMerge(o,s,i,r,l){o!==s&&baseFor(s,function(h,m){if(l||(l=new Stack),isObject(h))baseMergeDeep(o,s,m,i,baseMerge,r,l);else{var v=r?r(safeGet(o,m),h,m+"",o,s,l):void 0;v===void 0&&(v=h),assignMergeValue(o,m,v)}},keysIn)}function isEqual$1(o,s){return baseIsEqual(o,s)}var merge=createAssigner(function(o,s,i){baseMerge(o,s,i)}),Scope=(o=>(o[o.TYPE=3]="TYPE",o[o.LEVEL=12]="LEVEL",o[o.ATTRIBUTE=13]="ATTRIBUTE",o[o.BLOT=14]="BLOT",o[o.INLINE=7]="INLINE",o[o.BLOCK=11]="BLOCK",o[o.BLOCK_BLOT=10]="BLOCK_BLOT",o[o.INLINE_BLOT=6]="INLINE_BLOT",o[o.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",o[o.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",o[o.ANY=15]="ANY",o))(Scope||{});class Attributor{constructor(s,i,r={}){this.attrName=s,this.keyName=i;const l=Scope.TYPE&Scope.ATTRIBUTE;this.scope=r.scope!=null?r.scope&Scope.LEVEL|l:Scope.ATTRIBUTE,r.whitelist!=null&&(this.whitelist=r.whitelist)}static keys(s){return Array.from(s.attributes).map(i=>i.name)}add(s,i){return this.canAdd(s,i)?(s.setAttribute(this.keyName,i),!0):!1}canAdd(s,i){return this.whitelist==null?!0:typeof i=="string"?this.whitelist.indexOf(i.replace(/["']/g,""))>-1:this.whitelist.indexOf(i)>-1}remove(s){s.removeAttribute(this.keyName)}value(s){const i=s.getAttribute(this.keyName);return this.canAdd(s,i)&&i?i:""}}class ParchmentError extends Error{constructor(s){s="[Parchment] "+s,super(s),this.message=s,this.name=this.constructor.name}}const _Registry=class ic{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(s,i=!1){if(s==null)return null;if(this.blots.has(s))return this.blots.get(s)||null;if(i){let r=null;try{r=s.parentNode}catch{return null}return this.find(r,i)}return null}create(s,i,r){const l=this.query(i);if(l==null)throw new ParchmentError(`Unable to create ${i} blot`);const h=l,m=i instanceof Node||i.nodeType===Node.TEXT_NODE?i:h.create(r),v=new h(s,m,r);return ic.blots.set(v.domNode,v),v}find(s,i=!1){return ic.find(s,i)}query(s,i=Scope.ANY){let r;return typeof s=="string"?r=this.types[s]||this.attributes[s]:s instanceof Text||s.nodeType===Node.TEXT_NODE?r=this.types.text:typeof s=="number"?s&Scope.LEVEL&Scope.BLOCK?r=this.types.block:s&Scope.LEVEL&Scope.INLINE&&(r=this.types.inline):s instanceof Element&&((s.getAttribute("class")||"").split(/\s+/).some(l=>(r=this.classes[l],!!r)),r=r||this.tags[s.tagName]),r==null?null:"scope"in r&&i&Scope.LEVEL&r.scope&&i&Scope.TYPE&r.scope?r:null}register(...s){return s.map(i=>{const r="blotName"in i,l="attrName"in i;if(!r&&!l)throw new ParchmentError("Invalid definition");if(r&&i.blotName==="abstract")throw new ParchmentError("Cannot register abstract class");const h=r?i.blotName:l?i.attrName:void 0;return this.types[h]=i,l?typeof i.keyName=="string"&&(this.attributes[i.keyName]=i):r&&(i.className&&(this.classes[i.className]=i),i.tagName&&(Array.isArray(i.tagName)?i.tagName=i.tagName.map(m=>m.toUpperCase()):i.tagName=i.tagName.toUpperCase(),(Array.isArray(i.tagName)?i.tagName:[i.tagName]).forEach(m=>{(this.tags[m]==null||i.className==null)&&(this.tags[m]=i)}))),i})}};_Registry.blots=new WeakMap;let Registry=_Registry;function match(o,s){return(o.getAttribute("class")||"").split(/\s+/).filter(i=>i.indexOf(`${s}-`)===0)}class ClassAttributor extends Attributor{static keys(s){return(s.getAttribute("class")||"").split(/\s+/).map(i=>i.split("-").slice(0,-1).join("-"))}add(s,i){return this.canAdd(s,i)?(this.remove(s),s.classList.add(`${this.keyName}-${i}`),!0):!1}remove(s){match(s,this.keyName).forEach(i=>{s.classList.remove(i)}),s.classList.length===0&&s.removeAttribute("class")}value(s){const i=(match(s,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(s,i)?i:""}}const ClassAttributor$1=ClassAttributor;function camelize(o){const s=o.split("-"),i=s.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("");return s[0]+i}class StyleAttributor extends Attributor{static keys(s){return(s.getAttribute("style")||"").split(";").map(i=>i.split(":")[0].trim())}add(s,i){return this.canAdd(s,i)?(s.style[camelize(this.keyName)]=i,!0):!1}remove(s){s.style[camelize(this.keyName)]="",s.getAttribute("style")||s.removeAttribute("style")}value(s){const i=s.style[camelize(this.keyName)];return this.canAdd(s,i)?i:""}}const StyleAttributor$1=StyleAttributor;class AttributorStore{constructor(s){this.attributes={},this.domNode=s,this.build()}attribute(s,i){i?s.add(this.domNode,i)&&(s.value(this.domNode)!=null?this.attributes[s.attrName]=s:delete this.attributes[s.attrName]):(s.remove(this.domNode),delete this.attributes[s.attrName])}build(){this.attributes={};const s=Registry.find(this.domNode);if(s==null)return;const i=Attributor.keys(this.domNode),r=ClassAttributor$1.keys(this.domNode),l=StyleAttributor$1.keys(this.domNode);i.concat(r).concat(l).forEach(h=>{const m=s.scroll.query(h,Scope.ATTRIBUTE);m instanceof Attributor&&(this.attributes[m.attrName]=m)})}copy(s){Object.keys(this.attributes).forEach(i=>{const r=this.attributes[i].value(this.domNode);s.format(i,r)})}move(s){this.copy(s),Object.keys(this.attributes).forEach(i=>{this.attributes[i].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((s,i)=>(s[i]=this.attributes[i].value(this.domNode),s),{})}}const AttributorStore$1=AttributorStore,_ShadowBlot=class{constructor(s,i){this.scroll=s,this.domNode=i,Registry.blots.set(i,this),this.prev=null,this.next=null}static create(s){if(this.tagName==null)throw new ParchmentError("Blot definition missing tagName");let i,r;return Array.isArray(this.tagName)?(typeof s=="string"?(r=s.toUpperCase(),parseInt(r,10).toString()===r&&(r=parseInt(r,10))):typeof s=="number"&&(r=s),typeof r=="number"?i=document.createElement(this.tagName[r-1]):r&&this.tagName.indexOf(r)>-1?i=document.createElement(r):i=document.createElement(this.tagName[0])):i=document.createElement(this.tagName),this.className&&i.classList.add(this.className),i}get statics(){return this.constructor}attach(){}clone(){const s=this.domNode.cloneNode(!1);return this.scroll.create(s)}detach(){this.parent!=null&&this.parent.removeChild(this),Registry.blots.delete(this.domNode)}deleteAt(s,i){this.isolate(s,i).remove()}formatAt(s,i,r,l){const h=this.isolate(s,i);if(this.scroll.query(r,Scope.BLOT)!=null&&l)h.wrap(r,l);else if(this.scroll.query(r,Scope.ATTRIBUTE)!=null){const m=this.scroll.create(this.statics.scope);h.wrap(m),m.format(r,l)}}insertAt(s,i,r){const l=r==null?this.scroll.create("text",i):this.scroll.create(i,r),h=this.split(s);this.parent.insertBefore(l,h||void 0)}isolate(s,i){const r=this.split(s);if(r==null)throw new Error("Attempt to isolate at end");return r.split(i),r}length(){return 1}offset(s=this.parent){return this.parent==null||this===s?0:this.parent.children.offset(this)+this.parent.offset(s)}optimize(s){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(s,i){const r=typeof s=="string"?this.scroll.create(s,i):s;return this.parent!=null&&(this.parent.insertBefore(r,this.next||void 0),this.remove()),r}split(s,i){return s===0?this:this.next}update(s,i){}wrap(s,i){const r=typeof s=="string"?this.scroll.create(s,i):s;if(this.parent!=null&&this.parent.insertBefore(r,this.next||void 0),typeof r.appendChild!="function")throw new ParchmentError(`Cannot wrap ${s}`);return r.appendChild(this),r}};_ShadowBlot.blotName="abstract";let ShadowBlot=_ShadowBlot;const _LeafBlot=class extends ShadowBlot{static value(s){return!0}index(s,i){return this.domNode===s||this.domNode.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(i,1):-1}position(s,i){let r=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return s>0&&(r+=1),[this.parent.domNode,r]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};_LeafBlot.scope=Scope.INLINE_BLOT;let LeafBlot=_LeafBlot;const LeafBlot$1=LeafBlot;class LinkedList{constructor(){this.head=null,this.tail=null,this.length=0}append(...s){if(this.insertBefore(s[0],null),s.length>1){const i=s.slice(1);this.append(...i)}}at(s){const i=this.iterator();let r=i();for(;r&&s>0;)s-=1,r=i();return r}contains(s){const i=this.iterator();let r=i();for(;r;){if(r===s)return!0;r=i()}return!1}indexOf(s){const i=this.iterator();let r=i(),l=0;for(;r;){if(r===s)return l;l+=1,r=i()}return-1}insertBefore(s,i){s!=null&&(this.remove(s),s.next=i,i!=null?(s.prev=i.prev,i.prev!=null&&(i.prev.next=s),i.prev=s,i===this.head&&(this.head=s)):this.tail!=null?(this.tail.next=s,s.prev=this.tail,this.tail=s):(s.prev=null,this.head=this.tail=s),this.length+=1)}offset(s){let i=0,r=this.head;for(;r!=null;){if(r===s)return i;i+=r.length(),r=r.next}return-1}remove(s){this.contains(s)&&(s.prev!=null&&(s.prev.next=s.next),s.next!=null&&(s.next.prev=s.prev),s===this.head&&(this.head=s.next),s===this.tail&&(this.tail=s.prev),this.length-=1)}iterator(s=this.head){return()=>{const i=s;return s!=null&&(s=s.next),i}}find(s,i=!1){const r=this.iterator();let l=r();for(;l;){const h=l.length();if(s<h||i&&s===h&&(l.next==null||l.next.length()!==0))return[l,s];s-=h,l=r()}return[null,0]}forEach(s){const i=this.iterator();let r=i();for(;r;)s(r),r=i()}forEachAt(s,i,r){if(i<=0)return;const[l,h]=this.find(s);let m=s-h;const v=this.iterator(l);let A=v();for(;A&&m<s+i;){const d=A.length();s>m?r(A,s-m,Math.min(i,m+d-s)):r(A,0,Math.min(d,s+i-m)),m+=d,A=v()}}map(s){return this.reduce((i,r)=>(i.push(s(r)),i),[])}reduce(s,i){const r=this.iterator();let l=r();for(;l;)i=s(i,l),l=r();return i}}function makeAttachedBlot(o,s){const i=s.find(o);if(i)return i;try{return s.create(o)}catch{const r=s.create(Scope.INLINE);return Array.from(o.childNodes).forEach(l=>{r.domNode.appendChild(l)}),o.parentNode&&o.parentNode.replaceChild(r.domNode,o),r.attach(),r}}const _ParentBlot=class ci extends ShadowBlot{constructor(s,i){super(s,i),this.uiNode=null,this.build()}appendChild(s){this.insertBefore(s)}attach(){super.attach(),this.children.forEach(s=>{s.attach()})}attachUI(s){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=s,ci.uiClass&&this.uiNode.classList.add(ci.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new LinkedList,Array.from(this.domNode.childNodes).filter(s=>s!==this.uiNode).reverse().forEach(s=>{try{const i=makeAttachedBlot(s,this.scroll);this.insertBefore(i,this.children.head||void 0)}catch(i){if(i instanceof ParchmentError)return;throw i}})}deleteAt(s,i){if(s===0&&i===this.length())return this.remove();this.children.forEachAt(s,i,(r,l,h)=>{r.deleteAt(l,h)})}descendant(s,i=0){const[r,l]=this.children.find(i);return s.blotName==null&&s(r)||s.blotName!=null&&r instanceof s?[r,l]:r instanceof ci?r.descendant(s,l):[null,-1]}descendants(s,i=0,r=Number.MAX_VALUE){let l=[],h=r;return this.children.forEachAt(i,r,(m,v,A)=>{(s.blotName==null&&s(m)||s.blotName!=null&&m instanceof s)&&l.push(m),m instanceof ci&&(l=l.concat(m.descendants(s,v,h))),h-=A}),l}detach(){this.children.forEach(s=>{s.detach()}),super.detach()}enforceAllowedChildren(){let s=!1;this.children.forEach(i=>{s||this.statics.allowedChildren.some(r=>i instanceof r)||(i.statics.scope===Scope.BLOCK_BLOT?(i.next!=null&&this.splitAfter(i),i.prev!=null&&this.splitAfter(i.prev),i.parent.unwrap(),s=!0):i instanceof ci?i.unwrap():i.remove())})}formatAt(s,i,r,l){this.children.forEachAt(s,i,(h,m,v)=>{h.formatAt(m,v,r,l)})}insertAt(s,i,r){const[l,h]=this.children.find(s);if(l)l.insertAt(h,i,r);else{const m=r==null?this.scroll.create("text",i):this.scroll.create(i,r);this.appendChild(m)}}insertBefore(s,i){s.parent!=null&&s.parent.children.remove(s);let r=null;this.children.insertBefore(s,i||null),s.parent=this,i!=null&&(r=i.domNode),(this.domNode.parentNode!==s.domNode||this.domNode.nextSibling!==r)&&this.domNode.insertBefore(s.domNode,r),s.attach()}length(){return this.children.reduce((s,i)=>s+i.length(),0)}moveChildren(s,i){this.children.forEach(r=>{s.insertBefore(r,i)})}optimize(s){if(super.optimize(s),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i)}else this.remove()}path(s,i=!1){const[r,l]=this.children.find(s,i),h=[[this,s]];return r instanceof ci?h.concat(r.path(l,i)):(r!=null&&h.push([r,l]),h)}removeChild(s){this.children.remove(s)}replaceWith(s,i){const r=typeof s=="string"?this.scroll.create(s,i):s;return r instanceof ci&&this.moveChildren(r),super.replaceWith(r)}split(s,i=!1){if(!i){if(s===0)return this;if(s===this.length())return this.next}const r=this.clone();return this.parent&&this.parent.insertBefore(r,this.next||void 0),this.children.forEachAt(s,this.length(),(l,h,m)=>{const v=l.split(h,i);v!=null&&r.appendChild(v)}),r}splitAfter(s){const i=this.clone();for(;s.next!=null;)i.appendChild(s.next);return this.parent&&this.parent.insertBefore(i,this.next||void 0),i}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(s,i){const r=[],l=[];s.forEach(h=>{h.target===this.domNode&&h.type==="childList"&&(r.push(...h.addedNodes),l.push(...h.removedNodes))}),l.forEach(h=>{if(h.parentNode!=null&&h.tagName!=="IFRAME"&&document.body.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const m=this.scroll.find(h);m!=null&&(m.domNode.parentNode==null||m.domNode.parentNode===this.domNode)&&m.detach()}),r.filter(h=>h.parentNode===this.domNode&&h!==this.uiNode).sort((h,m)=>h===m?0:h.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(h=>{let m=null;h.nextSibling!=null&&(m=this.scroll.find(h.nextSibling));const v=makeAttachedBlot(h,this.scroll);(v.next!==m||v.next==null)&&(v.parent!=null&&v.parent.removeChild(this),this.insertBefore(v,m||void 0))}),this.enforceAllowedChildren()}};_ParentBlot.uiClass="";let ParentBlot=_ParentBlot;const ParentBlot$1=ParentBlot;function isEqual(o,s){if(Object.keys(o).length!==Object.keys(s).length)return!1;for(const i in o)if(o[i]!==s[i])return!1;return!0}const _InlineBlot=class mr extends ParentBlot$1{static create(s){return super.create(s)}static formats(s,i){const r=i.query(mr.blotName);if(!(r!=null&&s.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return s.tagName.toLowerCase()}}constructor(s,i){super(s,i),this.attributes=new AttributorStore$1(this.domNode)}format(s,i){if(s===this.statics.blotName&&!i)this.children.forEach(r=>{r instanceof mr||(r=r.wrap(mr.blotName,!0)),this.attributes.copy(r)}),this.unwrap();else{const r=this.scroll.query(s,Scope.INLINE);if(r==null)return;r instanceof Attributor?this.attributes.attribute(r,i):i&&(s!==this.statics.blotName||this.formats()[s]!==i)&&this.replaceWith(s,i)}}formats(){const s=this.attributes.values(),i=this.statics.formats(this.domNode,this.scroll);return i!=null&&(s[this.statics.blotName]=i),s}formatAt(s,i,r,l){this.formats()[r]!=null||this.scroll.query(r,Scope.ATTRIBUTE)?this.isolate(s,i).format(r,l):super.formatAt(s,i,r,l)}optimize(s){super.optimize(s);const i=this.formats();if(Object.keys(i).length===0)return this.unwrap();const r=this.next;r instanceof mr&&r.prev===this&&isEqual(i,r.formats())&&(r.moveChildren(this),r.remove())}replaceWith(s,i){const r=super.replaceWith(s,i);return this.attributes.copy(r),r}update(s,i){super.update(s,i),s.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}wrap(s,i){const r=super.wrap(s,i);return r instanceof mr&&this.attributes.move(r),r}};_InlineBlot.allowedChildren=[_InlineBlot,LeafBlot$1],_InlineBlot.blotName="inline",_InlineBlot.scope=Scope.INLINE_BLOT,_InlineBlot.tagName="SPAN";let InlineBlot=_InlineBlot;const InlineBlot$1=InlineBlot,_BlockBlot=class rc extends ParentBlot$1{static create(s){return super.create(s)}static formats(s,i){const r=i.query(rc.blotName);if(!(r!=null&&s.tagName===r.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return s.tagName.toLowerCase()}}constructor(s,i){super(s,i),this.attributes=new AttributorStore$1(this.domNode)}format(s,i){const r=this.scroll.query(s,Scope.BLOCK);r!=null&&(r instanceof Attributor?this.attributes.attribute(r,i):s===this.statics.blotName&&!i?this.replaceWith(rc.blotName):i&&(s!==this.statics.blotName||this.formats()[s]!==i)&&this.replaceWith(s,i))}formats(){const s=this.attributes.values(),i=this.statics.formats(this.domNode,this.scroll);return i!=null&&(s[this.statics.blotName]=i),s}formatAt(s,i,r,l){this.scroll.query(r,Scope.BLOCK)!=null?this.format(r,l):super.formatAt(s,i,r,l)}insertAt(s,i,r){if(r==null||this.scroll.query(i,Scope.INLINE)!=null)super.insertAt(s,i,r);else{const l=this.split(s);if(l!=null){const h=this.scroll.create(i,r);l.parent.insertBefore(h,l)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(s,i){const r=super.replaceWith(s,i);return this.attributes.copy(r),r}update(s,i){super.update(s,i),s.some(r=>r.target===this.domNode&&r.type==="attributes")&&this.attributes.build()}};_BlockBlot.blotName="block",_BlockBlot.scope=Scope.BLOCK_BLOT,_BlockBlot.tagName="P",_BlockBlot.allowedChildren=[InlineBlot$1,_BlockBlot,LeafBlot$1];let BlockBlot=_BlockBlot;const BlockBlot$1=BlockBlot,_ContainerBlot=class extends ParentBlot$1{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(s,i){super.deleteAt(s,i),this.enforceAllowedChildren()}formatAt(s,i,r,l){super.formatAt(s,i,r,l),this.enforceAllowedChildren()}insertAt(s,i,r){super.insertAt(s,i,r),this.enforceAllowedChildren()}optimize(s){super.optimize(s),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};_ContainerBlot.blotName="container",_ContainerBlot.scope=Scope.BLOCK_BLOT;let ContainerBlot=_ContainerBlot;const ContainerBlot$1=ContainerBlot;class EmbedBlot extends LeafBlot$1{static formats(s,i){}format(s,i){super.formatAt(0,this.length(),s,i)}formatAt(s,i,r,l){s===0&&i===this.length()?this.format(r,l):super.formatAt(s,i,r,l)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const EmbedBlot$1=EmbedBlot,OBSERVER_CONFIG={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},MAX_OPTIMIZE_ITERATIONS=100,_ScrollBlot=class extends ParentBlot$1{constructor(s,i){super(null,i),this.registry=s,this.scroll=this,this.build(),this.observer=new MutationObserver(r=>{this.update(r)}),this.observer.observe(this.domNode,OBSERVER_CONFIG),this.attach()}create(s,i){return this.registry.create(this,s,i)}find(s,i=!1){const r=this.registry.find(s,i);return r?r.scroll===this?r:i?this.find(r.scroll.domNode.parentNode,!0):null:null}query(s,i=Scope.ANY){return this.registry.query(s,i)}register(...s){return this.registry.register(...s)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(s,i){this.update(),s===0&&i===this.length()?this.children.forEach(r=>{r.remove()}):super.deleteAt(s,i)}formatAt(s,i,r,l){this.update(),super.formatAt(s,i,r,l)}insertAt(s,i,r){this.update(),super.insertAt(s,i,r)}optimize(s=[],i={}){super.optimize(i);const r=i.mutationsMap||new WeakMap;let l=Array.from(this.observer.takeRecords());for(;l.length>0;)s.push(l.pop());const h=(A,d=!0)=>{A==null||A===this||A.domNode.parentNode!=null&&(r.has(A.domNode)||r.set(A.domNode,[]),d&&h(A.parent))},m=A=>{r.has(A.domNode)&&(A instanceof ParentBlot$1&&A.children.forEach(m),r.delete(A.domNode),A.optimize(i))};let v=s;for(let A=0;v.length>0;A+=1){if(A>=MAX_OPTIMIZE_ITERATIONS)throw new Error("[Parchment] Maximum optimize iterations reached");for(v.forEach(d=>{const c=this.find(d.target,!0);c!=null&&(c.domNode===d.target&&(d.type==="childList"?(h(this.find(d.previousSibling,!1)),Array.from(d.addedNodes).forEach(f=>{const g=this.find(f,!1);h(g,!1),g instanceof ParentBlot$1&&g.children.forEach(b=>{h(b,!1)})})):d.type==="attributes"&&h(c.prev)),h(c))}),this.children.forEach(m),v=Array.from(this.observer.takeRecords()),l=v.slice();l.length>0;)s.push(l.pop())}}update(s,i={}){s=s||this.observer.takeRecords();const r=new WeakMap;s.map(l=>{const h=this.find(l.target,!0);return h==null?null:r.has(h.domNode)?(r.get(h.domNode).push(l),null):(r.set(h.domNode,[l]),h)}).forEach(l=>{l!=null&&l!==this&&r.has(l.domNode)&&l.update(r.get(l.domNode)||[],i)}),i.mutationsMap=r,r.has(this.domNode)&&super.update(r.get(this.domNode),i),this.optimize(s,i)}};_ScrollBlot.blotName="scroll",_ScrollBlot.defaultChild=BlockBlot$1,_ScrollBlot.allowedChildren=[BlockBlot$1,ContainerBlot$1],_ScrollBlot.scope=Scope.BLOCK_BLOT,_ScrollBlot.tagName="DIV";let ScrollBlot=_ScrollBlot;const ScrollBlot$1=ScrollBlot,_TextBlot=class Mh extends LeafBlot$1{static create(s){return document.createTextNode(s)}static value(s){return s.data}constructor(s,i){super(s,i),this.text=this.statics.value(this.domNode)}deleteAt(s,i){this.domNode.data=this.text=this.text.slice(0,s)+this.text.slice(s+i)}index(s,i){return this.domNode===s?i:-1}insertAt(s,i,r){r==null?(this.text=this.text.slice(0,s)+i+this.text.slice(s),this.domNode.data=this.text):super.insertAt(s,i,r)}length(){return this.text.length}optimize(s){super.optimize(s),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Mh&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(s,i=!1){return[this.domNode,s]}split(s,i=!1){if(!i){if(s===0)return this;if(s===this.length())return this.next}const r=this.scroll.create(this.domNode.splitText(s));return this.parent.insertBefore(r,this.next||void 0),this.text=this.statics.value(this.domNode),r}update(s,i){s.some(r=>r.type==="characterData"&&r.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};_TextBlot.blotName="text",_TextBlot.scope=Scope.INLINE_BLOT;let TextBlot=_TextBlot;const TextBlot$1=TextBlot,Parchment=Object.freeze(Object.defineProperty({__proto__:null,Attributor,AttributorStore:AttributorStore$1,BlockBlot:BlockBlot$1,ClassAttributor:ClassAttributor$1,ContainerBlot:ContainerBlot$1,EmbedBlot:EmbedBlot$1,InlineBlot:InlineBlot$1,LeafBlot:LeafBlot$1,ParentBlot:ParentBlot$1,Registry,Scope,ScrollBlot:ScrollBlot$1,StyleAttributor:StyleAttributor$1,TextBlot:TextBlot$1},Symbol.toStringTag,{value:"Module"}));var Delta$1={exports:{}},diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;var o=-1,s=1,i=0;function r(F,it,Y,rt,lt){if(F===it)return F?[[i,F]]:[];if(Y!=null){var U=Z(F,it,Y);if(U)return U}var P=v(F,it),k=F.substring(0,P);F=F.substring(P),it=it.substring(P),P=d(F,it);var _=F.substring(F.length-P);F=F.substring(0,F.length-P),it=it.substring(0,it.length-P);var S=l(F,it);return k&&S.unshift([i,k]),_&&S.push([i,_]),C(S,lt),rt&&f(S),S}function l(F,it){var Y;if(!F)return[[s,it]];if(!it)return[[o,F]];var rt=F.length>it.length?F:it,lt=F.length>it.length?it:F,U=rt.indexOf(lt);if(U!==-1)return Y=[[s,rt.substring(0,U)],[i,lt],[s,rt.substring(U+lt.length)]],F.length>it.length&&(Y[0][0]=Y[2][0]=o),Y;if(lt.length===1)return[[o,F],[s,it]];var P=c(F,it);if(P){var k=P[0],_=P[1],S=P[2],O=P[3],H=P[4],G=r(k,S),K=r(_,O);return G.concat([[i,H]],K)}return h(F,it)}function h(F,it){for(var Y=F.length,rt=it.length,lt=Math.ceil((Y+rt)/2),U=lt,P=2*lt,k=new Array(P),_=new Array(P),S=0;S<P;S++)k[S]=-1,_[S]=-1;k[U+1]=0,_[U+1]=0;for(var O=Y-rt,H=O%2!==0,G=0,K=0,q=0,R=0,M=0;M<lt;M++){for(var D=-M+G;D<=M-K;D+=2){var V=U+D,W;D===-M||D!==M&&k[V-1]<k[V+1]?W=k[V+1]:W=k[V-1]+1;for(var $=W-D;W<Y&&$<rt&&F.charAt(W)===it.charAt($);)W++,$++;if(k[V]=W,W>Y)K+=2;else if($>rt)G+=2;else if(H){var J=U+O-D;if(J>=0&&J<P&&_[J]!==-1){var ot=Y-_[J];if(W>=ot)return m(F,it,W,$)}}}for(var yt=-M+q;yt<=M-R;yt+=2){var J=U+yt,ot;yt===-M||yt!==M&&_[J-1]<_[J+1]?ot=_[J+1]:ot=_[J-1]+1;for(var ut=ot-yt;ot<Y&&ut<rt&&F.charAt(Y-ot-1)===it.charAt(rt-ut-1);)ot++,ut++;if(_[J]=ot,ot>Y)R+=2;else if(ut>rt)q+=2;else if(!H){var V=U+O-yt;if(V>=0&&V<P&&k[V]!==-1){var W=k[V],$=U+W-V;if(ot=Y-ot,W>=ot)return m(F,it,W,$)}}}}return[[o,F],[s,it]]}function m(F,it,Y,rt){var lt=F.substring(0,Y),U=it.substring(0,rt),P=F.substring(Y),k=it.substring(rt),_=r(lt,U),S=r(P,k);return _.concat(S)}function v(F,it){if(!F||!it||F.charAt(0)!==it.charAt(0))return 0;for(var Y=0,rt=Math.min(F.length,it.length),lt=rt,U=0;Y<lt;)F.substring(U,lt)==it.substring(U,lt)?(Y=lt,U=Y):rt=lt,lt=Math.floor((rt-Y)/2+Y);return B(F.charCodeAt(lt-1))&&lt--,lt}function A(F,it){var Y=F.length,rt=it.length;if(Y==0||rt==0)return 0;Y>rt?F=F.substring(Y-rt):Y<rt&&(it=it.substring(0,Y));var lt=Math.min(Y,rt);if(F==it)return lt;for(var U=0,P=1;;){var k=F.substring(lt-P),_=it.indexOf(k);if(_==-1)return U;P+=_,(_==0||F.substring(lt-P)==it.substring(0,P))&&(U=P,P++)}}function d(F,it){if(!F||!it||F.slice(-1)!==it.slice(-1))return 0;for(var Y=0,rt=Math.min(F.length,it.length),lt=rt,U=0;Y<lt;)F.substring(F.length-lt,F.length-U)==it.substring(it.length-lt,it.length-U)?(Y=lt,U=Y):rt=lt,lt=Math.floor((rt-Y)/2+Y);return I(F.charCodeAt(F.length-lt))&&lt--,lt}function c(F,it){var Y=F.length>it.length?F:it,rt=F.length>it.length?it:F;if(Y.length<4||rt.length*2<Y.length)return null;function lt(K,q,R){for(var M=K.substring(R,R+Math.floor(K.length/4)),D=-1,V="",W,$,J,ot;(D=q.indexOf(M,D+1))!==-1;){var yt=v(K.substring(R),q.substring(D)),ut=d(K.substring(0,R),q.substring(0,D));V.length<ut+yt&&(V=q.substring(D-ut,D)+q.substring(D,D+yt),W=K.substring(0,R-ut),$=K.substring(R+yt),J=q.substring(0,D-ut),ot=q.substring(D+yt))}return V.length*2>=K.length?[W,$,J,ot,V]:null}var U=lt(Y,rt,Math.ceil(Y.length/4)),P=lt(Y,rt,Math.ceil(Y.length/2)),k;if(!U&&!P)return null;P?U?k=U[4].length>P[4].length?U:P:k=P:k=U;var _,S,O,H;F.length>it.length?(_=k[0],S=k[1],O=k[2],H=k[3]):(O=k[0],H=k[1],_=k[2],S=k[3]);var G=k[4];return[_,S,O,H,G]}function f(F){for(var it=!1,Y=[],rt=0,lt=null,U=0,P=0,k=0,_=0,S=0;U<F.length;)F[U][0]==i?(Y[rt++]=U,P=_,k=S,_=0,S=0,lt=F[U][1]):(F[U][0]==s?_+=F[U][1].length:S+=F[U][1].length,lt&&lt.length<=Math.max(P,k)&&lt.length<=Math.max(_,S)&&(F.splice(Y[rt-1],0,[o,lt]),F[Y[rt-1]+1][0]=s,rt--,rt--,U=rt>0?Y[rt-1]:-1,P=0,k=0,_=0,S=0,lt=null,it=!0)),U++;for(it&&C(F),y(F),U=1;U<F.length;){if(F[U-1][0]==o&&F[U][0]==s){var O=F[U-1][1],H=F[U][1],G=A(O,H),K=A(H,O);G>=K?(G>=O.length/2||G>=H.length/2)&&(F.splice(U,0,[i,H.substring(0,G)]),F[U-1][1]=O.substring(0,O.length-G),F[U+1][1]=H.substring(G),U++):(K>=O.length/2||K>=H.length/2)&&(F.splice(U,0,[i,O.substring(0,K)]),F[U-1][0]=s,F[U-1][1]=H.substring(0,H.length-K),F[U+1][0]=o,F[U+1][1]=O.substring(K),U++),U++}U++}}var g=/[^a-zA-Z0-9]/,b=/\s/,p=/[\r\n]/,j=/\n\r?\n$/,E=/^\r?\n\r?\n/;function y(F){function it(K,q){if(!K||!q)return 6;var R=K.charAt(K.length-1),M=q.charAt(0),D=R.match(g),V=M.match(g),W=D&&R.match(b),$=V&&M.match(b),J=W&&R.match(p),ot=$&&M.match(p),yt=J&&K.match(j),ut=ot&&q.match(E);return yt||ut?5:J||ot?4:D&&!W&&$?3:W||$?2:D||V?1:0}for(var Y=1;Y<F.length-1;){if(F[Y-1][0]==i&&F[Y+1][0]==i){var rt=F[Y-1][1],lt=F[Y][1],U=F[Y+1][1],P=d(rt,lt);if(P){var k=lt.substring(lt.length-P);rt=rt.substring(0,rt.length-P),lt=k+lt.substring(0,lt.length-P),U=k+U}for(var _=rt,S=lt,O=U,H=it(rt,lt)+it(lt,U);lt.charAt(0)===U.charAt(0);){rt+=lt.charAt(0),lt=lt.substring(1)+U.charAt(0),U=U.substring(1);var G=it(rt,lt)+it(lt,U);G>=H&&(H=G,_=rt,S=lt,O=U)}F[Y-1][1]!=_&&(_?F[Y-1][1]=_:(F.splice(Y-1,1),Y--),F[Y][1]=S,O?F[Y+1][1]=O:(F.splice(Y+1,1),Y--))}Y++}}function C(F,it){F.push([i,""]);for(var Y=0,rt=0,lt=0,U="",P="",k;Y<F.length;){if(Y<F.length-1&&!F[Y][1]){F.splice(Y,1);continue}switch(F[Y][0]){case s:lt++,P+=F[Y][1],Y++;break;case o:rt++,U+=F[Y][1],Y++;break;case i:var _=Y-lt-rt-1;if(it){if(_>=0&&L(F[_][1])){var S=F[_][1].slice(-1);if(F[_][1]=F[_][1].slice(0,-1),U=S+U,P=S+P,!F[_][1]){F.splice(_,1),Y--;var O=_-1;F[O]&&F[O][0]===s&&(lt++,P=F[O][1]+P,O--),F[O]&&F[O][0]===o&&(rt++,U=F[O][1]+U,O--),_=O}}if(N(F[Y][1])){var S=F[Y][1].charAt(0);F[Y][1]=F[Y][1].slice(1),U+=S,P+=S}}if(Y<F.length-1&&!F[Y][1]){F.splice(Y,1);break}if(U.length>0||P.length>0){U.length>0&&P.length>0&&(k=v(P,U),k!==0&&(_>=0?F[_][1]+=P.substring(0,k):(F.splice(0,0,[i,P.substring(0,k)]),Y++),P=P.substring(k),U=U.substring(k)),k=d(P,U),k!==0&&(F[Y][1]=P.substring(P.length-k)+F[Y][1],P=P.substring(0,P.length-k),U=U.substring(0,U.length-k)));var H=lt+rt;U.length===0&&P.length===0?(F.splice(Y-H,H),Y=Y-H):U.length===0?(F.splice(Y-H,H,[s,P]),Y=Y-H+1):P.length===0?(F.splice(Y-H,H,[o,U]),Y=Y-H+1):(F.splice(Y-H,H,[o,U],[s,P]),Y=Y-H+2)}Y!==0&&F[Y-1][0]===i?(F[Y-1][1]+=F[Y][1],F.splice(Y,1)):Y++,lt=0,rt=0,U="",P="";break}}F[F.length-1][1]===""&&F.pop();var G=!1;for(Y=1;Y<F.length-1;)F[Y-1][0]===i&&F[Y+1][0]===i&&(F[Y][1].substring(F[Y][1].length-F[Y-1][1].length)===F[Y-1][1]?(F[Y][1]=F[Y-1][1]+F[Y][1].substring(0,F[Y][1].length-F[Y-1][1].length),F[Y+1][1]=F[Y-1][1]+F[Y+1][1],F.splice(Y-1,1),G=!0):F[Y][1].substring(0,F[Y+1][1].length)==F[Y+1][1]&&(F[Y-1][1]+=F[Y+1][1],F[Y][1]=F[Y][1].substring(F[Y+1][1].length)+F[Y+1][1],F.splice(Y+1,1),G=!0)),Y++;G&&C(F,it)}function B(F){return F>=55296&&F<=56319}function I(F){return F>=56320&&F<=57343}function N(F){return I(F.charCodeAt(0))}function L(F){return B(F.charCodeAt(F.length-1))}function Q(F){for(var it=[],Y=0;Y<F.length;Y++)F[Y][1].length>0&&it.push(F[Y]);return it}function tt(F,it,Y,rt){return L(F)||N(rt)?null:Q([[i,F],[o,it],[s,Y],[i,rt]])}function Z(F,it,Y){var rt=typeof Y=="number"?{index:Y,length:0}:Y.oldRange,lt=typeof Y=="number"?null:Y.newRange,U=F.length,P=it.length;if(rt.length===0&&(lt===null||lt.length===0)){var k=rt.index,_=F.slice(0,k),S=F.slice(k),O=lt?lt.index:null;t:{var H=k+P-U;if(O!==null&&O!==H||H<0||H>P)break t;var G=it.slice(0,H),K=it.slice(H);if(K!==S)break t;var q=Math.min(k,H),R=_.slice(0,q),M=G.slice(0,q);if(R!==M)break t;var D=_.slice(q),V=G.slice(q);return tt(R,D,V,S)}t:{if(O!==null&&O!==k)break t;var W=k,G=it.slice(0,W),K=it.slice(W);if(G!==_)break t;var $=Math.min(U-W,P-W),J=S.slice(S.length-$),ot=K.slice(K.length-$);if(J!==ot)break t;var D=S.slice(0,S.length-$),V=K.slice(0,K.length-$);return tt(_,D,V,J)}}if(rt.length>0&&lt&&lt.length===0)t:{var R=F.slice(0,rt.index),J=F.slice(rt.index+rt.length),q=R.length,$=J.length;if(P<q+$)break t;var M=it.slice(0,q),ot=it.slice(P-$);if(R!==M||J!==ot)break t;var D=F.slice(q,U-$),V=it.slice(q,P-$);return tt(R,D,V,J)}return null}function st(F,it,Y,rt){return r(F,it,Y,rt,!0)}return st.INSERT=s,st.DELETE=o,st.EQUAL=i,diff_1=st,diff_1}var lodash_clonedeep={exports:{}};lodash_clonedeep.exports;var hasRequiredLodash_clonedeep;function requireLodash_clonedeep(){return hasRequiredLodash_clonedeep||(hasRequiredLodash_clonedeep=1,(function(o,s){var i=200,r="__lodash_hash_undefined__",l=9007199254740991,h="[object Arguments]",m="[object Array]",v="[object Boolean]",A="[object Date]",d="[object Error]",c="[object Function]",f="[object GeneratorFunction]",g="[object Map]",b="[object Number]",p="[object Object]",j="[object Promise]",E="[object RegExp]",y="[object Set]",C="[object String]",B="[object Symbol]",I="[object WeakMap]",N="[object ArrayBuffer]",L="[object DataView]",Q="[object Float32Array]",tt="[object Float64Array]",Z="[object Int8Array]",st="[object Int16Array]",F="[object Int32Array]",it="[object Uint8Array]",Y="[object Uint8ClampedArray]",rt="[object Uint16Array]",lt="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,P=/\w*$/,k=/^\[object .+?Constructor\]$/,_=/^(?:0|[1-9]\d*)$/,S={};S[h]=S[m]=S[N]=S[L]=S[v]=S[A]=S[Q]=S[tt]=S[Z]=S[st]=S[F]=S[g]=S[b]=S[p]=S[E]=S[y]=S[C]=S[B]=S[it]=S[Y]=S[rt]=S[lt]=!0,S[d]=S[c]=S[I]=!1;var O=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,H=typeof self=="object"&&self&&self.Object===Object&&self,G=O||H||Function("return this")(),K=s&&!s.nodeType&&s,q=K&&!0&&o&&!o.nodeType&&o,R=q&&q.exports===K;function M(w,X){return w.set(X[0],X[1]),w}function D(w,X){return w.add(X),w}function V(w,X){for(var nt=-1,gt=w?w.length:0;++nt<gt&&X(w[nt],nt,w)!==!1;);return w}function W(w,X){for(var nt=-1,gt=X.length,Bt=w.length;++nt<gt;)w[Bt+nt]=X[nt];return w}function $(w,X,nt,gt){for(var Bt=-1,Lt=w?w.length:0;++Bt<Lt;)nt=X(nt,w[Bt],Bt,w);return nt}function J(w,X){for(var nt=-1,gt=Array(w);++nt<w;)gt[nt]=X(nt);return gt}function ot(w,X){return w?.[X]}function yt(w){var X=!1;if(w!=null&&typeof w.toString!="function")try{X=!!(w+"")}catch{}return X}function ut(w){var X=-1,nt=Array(w.size);return w.forEach(function(gt,Bt){nt[++X]=[Bt,gt]}),nt}function xt(w,X){return function(nt){return w(X(nt))}}function vt(w){var X=-1,nt=Array(w.size);return w.forEach(function(gt){nt[++X]=gt}),nt}var Et=Array.prototype,wt=Function.prototype,_t=Object.prototype,Tt=G["__core-js_shared__"],Dt=(function(){var w=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Pt=wt.toString,kt=_t.hasOwnProperty,Vt=_t.toString,Te=RegExp("^"+Pt.call(kt).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=R?G.Buffer:void 0,Ue=G.Symbol,ge=G.Uint8Array,de=xt(Object.getPrototypeOf,Object),Vs=Object.create,Nn=_t.propertyIsEnumerable,Is=Et.splice,Rt=Object.getOwnPropertySymbols,ht=ue?ue.isBuffer:void 0,ct=xt(Object.keys,Object),Nt=as(G,"DataView"),Ut=as(G,"Map"),Jt=as(G,"Promise"),se=as(G,"Set"),$e=as(G,"WeakMap"),Oe=as(Object,"create"),Re=Be(Nt),le=Be(Ut),ze=Be(Jt),Qe=Be(se),fs=Be($e),te=Ue?Ue.prototype:void 0,ss=te?te.valueOf:void 0;function Ze(w){var X=-1,nt=w?w.length:0;for(this.clear();++X<nt;){var gt=w[X];this.set(gt[0],gt[1])}}function $s(){this.__data__=Oe?Oe(null):{}}function Xs(w){return this.has(w)&&delete this.__data__[w]}function _s(w){var X=this.__data__;if(Oe){var nt=X[w];return nt===r?void 0:nt}return kt.call(X,w)?X[w]:void 0}function be(w){var X=this.__data__;return Oe?X[w]!==void 0:kt.call(X,w)}function ns(w,X){var nt=this.__data__;return nt[w]=Oe&&X===void 0?r:X,this}Ze.prototype.clear=$s,Ze.prototype.delete=Xs,Ze.prototype.get=_s,Ze.prototype.has=be,Ze.prototype.set=ns;function me(w){var X=-1,nt=w?w.length:0;for(this.clear();++X<nt;){var gt=w[X];this.set(gt[0],gt[1])}}function Ci(){this.__data__=[]}function Ns(w){var X=this.__data__,nt=ms(X,w);if(nt<0)return!1;var gt=X.length-1;return nt==gt?X.pop():Is.call(X,nt,1),!0}function Se(w){var X=this.__data__,nt=ms(X,w);return nt<0?void 0:X[nt][1]}function He(w){return ms(this.__data__,w)>-1}function Ys(w,X){var nt=this.__data__,gt=ms(nt,w);return gt<0?nt.push([w,X]):nt[gt][1]=X,this}me.prototype.clear=Ci,me.prototype.delete=Ns,me.prototype.get=Se,me.prototype.has=He,me.prototype.set=Ys;function Ce(w){var X=-1,nt=w?w.length:0;for(this.clear();++X<nt;){var gt=w[X];this.set(gt[0],gt[1])}}function pr(){this.__data__={hash:new Ze,map:new(Ut||me),string:new Ze}}function xr(w){return Zs(this,w).delete(w)}function ki(w){return Zs(this,w).get(w)}function on(w){return Zs(this,w).has(w)}function ui(w,X){return Zs(this,w).set(w,X),this}Ce.prototype.clear=pr,Ce.prototype.delete=xr,Ce.prototype.get=ki,Ce.prototype.has=on,Ce.prototype.set=ui;function we(w){this.__data__=new me(w)}function Ws(){this.__data__=new me}function ln(w){return this.__data__.delete(w)}function Ks(w){return this.__data__.get(w)}function ye(w){return this.__data__.has(w)}function Li(w,X){var nt=this.__data__;if(nt instanceof me){var gt=nt.__data__;if(!Ut||gt.length<i-1)return gt.push([w,X]),this;nt=this.__data__=new Ce(gt)}return nt.set(w,X),this}we.prototype.clear=Ws,we.prototype.delete=ln,we.prototype.get=Ks,we.prototype.has=ye,we.prototype.set=Li;function cn(w,X){var nt=Fn(w)||gs(w)?J(w.length,String):[],gt=nt.length,Bt=!!gt;for(var Lt in w)kt.call(w,Lt)&&!(Bt&&(Lt=="length"||yr(Lt,gt)))&&nt.push(Lt);return nt}function Ts(w,X,nt){var gt=w[X];(!(kt.call(w,X)&&Us(gt,nt))||nt===void 0&&!(X in w))&&(w[X]=nt)}function ms(w,X){for(var nt=w.length;nt--;)if(Us(w[nt][0],X))return nt;return-1}function Cs(w,X){return w&&On(X,dn(X),w)}function Tn(w,X,nt,gt,Bt,Lt,zt){var Yt;if(gt&&(Yt=Lt?gt(w,Bt,Lt,zt):gt(w)),Yt!==void 0)return Yt;if(!es(w))return w;var pe=Fn(w);if(pe){if(Yt=Di(w),!X)return hi(w,Yt)}else{var Kt=qs(w),ve=Kt==c||Kt==f;if(tn(w))return Pe(w,X);if(Kt==p||Kt==h||ve&&!Lt){if(yt(w))return Lt?w:{};if(Yt=xs(ve?{}:w),!X)return fi(w,Cs(Yt,w))}else{if(!S[Kt])return Lt?w:{};Yt=mi(w,Kt,Tn,X)}}zt||(zt=new we);var Fe=zt.get(w);if(Fe)return Fe;if(zt.set(w,Yt),!pe)var Ee=nt?Qs(w):dn(w);return V(Ee||w,function(Ge,Ie){Ee&&(Ie=Ge,Ge=w[Ie]),Ts(Yt,Ie,Tn(Ge,X,nt,gt,Ie,w,zt))}),Yt}function Mi(w){return es(w)?Vs(w):{}}function gr(w,X,nt){var gt=X(w);return Fn(w)?gt:W(gt,nt(w))}function Cn(w){return Vt.call(w)}function kn(w){if(!es(w)||Pn(w))return!1;var X=is(w)||yt(w)?Te:k;return X.test(Be(w))}function ps(w){if(!os(w))return ct(w);var X=[];for(var nt in Object(w))kt.call(w,nt)&&nt!="constructor"&&X.push(nt);return X}function Pe(w,X){if(X)return w.slice();var nt=new w.constructor(w.length);return w.copy(nt),nt}function Ln(w){var X=new w.constructor(w.byteLength);return new ge(X).set(new ge(w)),X}function un(w,X){var nt=X?Ln(w.buffer):w.buffer;return new w.constructor(nt,w.byteOffset,w.byteLength)}function Mn(w,X,nt){var gt=X?nt(ut(w),!0):ut(w);return $(gt,M,new w.constructor)}function di(w){var X=new w.constructor(w.source,P.exec(w));return X.lastIndex=w.lastIndex,X}function Dn(w,X,nt){var gt=X?nt(vt(w),!0):vt(w);return $(gt,D,new w.constructor)}function br(w){return ss?Object(ss.call(w)):{}}function Je(w,X){var nt=X?Ln(w.buffer):w.buffer;return new w.constructor(nt,w.byteOffset,w.length)}function hi(w,X){var nt=-1,gt=w.length;for(X||(X=Array(gt));++nt<gt;)X[nt]=w[nt];return X}function On(w,X,nt,gt){nt||(nt={});for(var Bt=-1,Lt=X.length;++Bt<Lt;){var zt=X[Bt],Yt=void 0;Ts(nt,zt,Yt===void 0?w[zt]:Yt)}return nt}function fi(w,X){return On(w,ts(w),X)}function Qs(w){return gr(w,dn,ts)}function Zs(w,X){var nt=w.__data__;return vr(X)?nt[typeof X=="string"?"string":"hash"]:nt.map}function as(w,X){var nt=ot(w,X);return kn(nt)?nt:void 0}var ts=Rt?xt(Rt,Object):qn,qs=Cn;(Nt&&qs(new Nt(new ArrayBuffer(1)))!=L||Ut&&qs(new Ut)!=g||Jt&&qs(Jt.resolve())!=j||se&&qs(new se)!=y||$e&&qs(new $e)!=I)&&(qs=function(w){var X=Vt.call(w),nt=X==p?w.constructor:void 0,gt=nt?Be(nt):void 0;if(gt)switch(gt){case Re:return L;case le:return g;case ze:return j;case Qe:return y;case fs:return I}return X});function Di(w){var X=w.length,nt=w.constructor(X);return X&&typeof w[0]=="string"&&kt.call(w,"index")&&(nt.index=w.index,nt.input=w.input),nt}function xs(w){return typeof w.constructor=="function"&&!os(w)?Mi(de(w)):{}}function mi(w,X,nt,gt){var Bt=w.constructor;switch(X){case N:return Ln(w);case v:case A:return new Bt(+w);case L:return un(w,gt);case Q:case tt:case Z:case st:case F:case it:case Y:case rt:case lt:return Je(w,gt);case g:return Mn(w,gt,nt);case b:case C:return new Bt(w);case E:return di(w);case y:return Dn(w,gt,nt);case B:return br(w)}}function yr(w,X){return X=X??l,!!X&&(typeof w=="number"||_.test(w))&&w>-1&&w%1==0&&w<X}function vr(w){var X=typeof w;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?w!=="__proto__":w===null}function Pn(w){return!!Dt&&Dt in w}function os(w){var X=w&&w.constructor,nt=typeof X=="function"&&X.prototype||_t;return w===nt}function Be(w){if(w!=null){try{return Pt.call(w)}catch{}try{return w+""}catch{}}return""}function Bn(w){return Tn(w,!0,!0)}function Us(w,X){return w===X||w!==w&&X!==X}function gs(w){return Oi(w)&&kt.call(w,"callee")&&(!Nn.call(w,"callee")||Vt.call(w)==h)}var Fn=Array.isArray;function Js(w){return w!=null&&In(w.length)&&!is(w)}function Oi(w){return bs(w)&&Js(w)}var tn=ht||Pi;function is(w){var X=es(w)?Vt.call(w):"";return X==c||X==f}function In(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=l}function es(w){var X=typeof w;return!!w&&(X=="object"||X=="function")}function bs(w){return!!w&&typeof w=="object"}function dn(w){return Js(w)?cn(w):ps(w)}function qn(){return[]}function Pi(){return!1}o.exports=Bn})(lodash_clonedeep,lodash_clonedeep.exports)),lodash_clonedeep.exports}var lodash_isequal={exports:{}};lodash_isequal.exports;var hasRequiredLodash_isequal;function requireLodash_isequal(){return hasRequiredLodash_isequal||(hasRequiredLodash_isequal=1,(function(o,s){var i=200,r="__lodash_hash_undefined__",l=1,h=2,m=9007199254740991,v="[object Arguments]",A="[object Array]",d="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",g="[object Error]",b="[object Function]",p="[object GeneratorFunction]",j="[object Map]",E="[object Number]",y="[object Null]",C="[object Object]",B="[object Promise]",I="[object Proxy]",N="[object RegExp]",L="[object Set]",Q="[object String]",tt="[object Symbol]",Z="[object Undefined]",st="[object WeakMap]",F="[object ArrayBuffer]",it="[object DataView]",Y="[object Float32Array]",rt="[object Float64Array]",lt="[object Int8Array]",U="[object Int16Array]",P="[object Int32Array]",k="[object Uint8Array]",_="[object Uint8ClampedArray]",S="[object Uint16Array]",O="[object Uint32Array]",H=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,q={};q[Y]=q[rt]=q[lt]=q[U]=q[P]=q[k]=q[_]=q[S]=q[O]=!0,q[v]=q[A]=q[F]=q[c]=q[it]=q[f]=q[g]=q[b]=q[j]=q[E]=q[C]=q[N]=q[L]=q[Q]=q[st]=!1;var R=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,M=typeof self=="object"&&self&&self.Object===Object&&self,D=R||M||Function("return this")(),V=s&&!s.nodeType&&s,W=V&&!0&&o&&!o.nodeType&&o,$=W&&W.exports===V,J=$&&R.process,ot=(function(){try{return J&&J.binding&&J.binding("util")}catch{}})(),yt=ot&&ot.isTypedArray;function ut(w,X){for(var nt=-1,gt=w==null?0:w.length,Bt=0,Lt=[];++nt<gt;){var zt=w[nt];X(zt,nt,w)&&(Lt[Bt++]=zt)}return Lt}function xt(w,X){for(var nt=-1,gt=X.length,Bt=w.length;++nt<gt;)w[Bt+nt]=X[nt];return w}function vt(w,X){for(var nt=-1,gt=w==null?0:w.length;++nt<gt;)if(X(w[nt],nt,w))return!0;return!1}function Et(w,X){for(var nt=-1,gt=Array(w);++nt<w;)gt[nt]=X(nt);return gt}function wt(w){return function(X){return w(X)}}function _t(w,X){return w.has(X)}function Tt(w,X){return w?.[X]}function Dt(w){var X=-1,nt=Array(w.size);return w.forEach(function(gt,Bt){nt[++X]=[Bt,gt]}),nt}function Pt(w,X){return function(nt){return w(X(nt))}}function kt(w){var X=-1,nt=Array(w.size);return w.forEach(function(gt){nt[++X]=gt}),nt}var Vt=Array.prototype,Te=Function.prototype,ue=Object.prototype,Ue=D["__core-js_shared__"],ge=Te.toString,de=ue.hasOwnProperty,Vs=(function(){var w=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""})(),Nn=ue.toString,Is=RegExp("^"+ge.call(de).replace(H,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rt=$?D.Buffer:void 0,ht=D.Symbol,ct=D.Uint8Array,Nt=ue.propertyIsEnumerable,Ut=Vt.splice,Jt=ht?ht.toStringTag:void 0,se=Object.getOwnPropertySymbols,$e=Rt?Rt.isBuffer:void 0,Oe=Pt(Object.keys,Object),Re=ts(D,"DataView"),le=ts(D,"Map"),ze=ts(D,"Promise"),Qe=ts(D,"Set"),fs=ts(D,"WeakMap"),te=ts(Object,"create"),ss=Be(Re),Ze=Be(le),$s=Be(ze),Xs=Be(Qe),_s=Be(fs),be=ht?ht.prototype:void 0,ns=be?be.valueOf:void 0;function me(w){var X=-1,nt=w==null?0:w.length;for(this.clear();++X<nt;){var gt=w[X];this.set(gt[0],gt[1])}}function Ci(){this.__data__=te?te(null):{},this.size=0}function Ns(w){var X=this.has(w)&&delete this.__data__[w];return this.size-=X?1:0,X}function Se(w){var X=this.__data__;if(te){var nt=X[w];return nt===r?void 0:nt}return de.call(X,w)?X[w]:void 0}function He(w){var X=this.__data__;return te?X[w]!==void 0:de.call(X,w)}function Ys(w,X){var nt=this.__data__;return this.size+=this.has(w)?0:1,nt[w]=te&&X===void 0?r:X,this}me.prototype.clear=Ci,me.prototype.delete=Ns,me.prototype.get=Se,me.prototype.has=He,me.prototype.set=Ys;function Ce(w){var X=-1,nt=w==null?0:w.length;for(this.clear();++X<nt;){var gt=w[X];this.set(gt[0],gt[1])}}function pr(){this.__data__=[],this.size=0}function xr(w){var X=this.__data__,nt=Pe(X,w);if(nt<0)return!1;var gt=X.length-1;return nt==gt?X.pop():Ut.call(X,nt,1),--this.size,!0}function ki(w){var X=this.__data__,nt=Pe(X,w);return nt<0?void 0:X[nt][1]}function on(w){return Pe(this.__data__,w)>-1}function ui(w,X){var nt=this.__data__,gt=Pe(nt,w);return gt<0?(++this.size,nt.push([w,X])):nt[gt][1]=X,this}Ce.prototype.clear=pr,Ce.prototype.delete=xr,Ce.prototype.get=ki,Ce.prototype.has=on,Ce.prototype.set=ui;function we(w){var X=-1,nt=w==null?0:w.length;for(this.clear();++X<nt;){var gt=w[X];this.set(gt[0],gt[1])}}function Ws(){this.size=0,this.__data__={hash:new me,map:new(le||Ce),string:new me}}function ln(w){var X=as(this,w).delete(w);return this.size-=X?1:0,X}function Ks(w){return as(this,w).get(w)}function ye(w){return as(this,w).has(w)}function Li(w,X){var nt=as(this,w),gt=nt.size;return nt.set(w,X),this.size+=nt.size==gt?0:1,this}we.prototype.clear=Ws,we.prototype.delete=ln,we.prototype.get=Ks,we.prototype.has=ye,we.prototype.set=Li;function cn(w){var X=-1,nt=w==null?0:w.length;for(this.__data__=new we;++X<nt;)this.add(w[X])}function Ts(w){return this.__data__.set(w,r),this}function ms(w){return this.__data__.has(w)}cn.prototype.add=cn.prototype.push=Ts,cn.prototype.has=ms;function Cs(w){var X=this.__data__=new Ce(w);this.size=X.size}function Tn(){this.__data__=new Ce,this.size=0}function Mi(w){var X=this.__data__,nt=X.delete(w);return this.size=X.size,nt}function gr(w){return this.__data__.get(w)}function Cn(w){return this.__data__.has(w)}function kn(w,X){var nt=this.__data__;if(nt instanceof Ce){var gt=nt.__data__;if(!le||gt.length<i-1)return gt.push([w,X]),this.size=++nt.size,this;nt=this.__data__=new we(gt)}return nt.set(w,X),this.size=nt.size,this}Cs.prototype.clear=Tn,Cs.prototype.delete=Mi,Cs.prototype.get=gr,Cs.prototype.has=Cn,Cs.prototype.set=kn;function ps(w,X){var nt=gs(w),gt=!nt&&Us(w),Bt=!nt&&!gt&&Js(w),Lt=!nt&&!gt&&!Bt&&bs(w),zt=nt||gt||Bt||Lt,Yt=zt?Et(w.length,String):[],pe=Yt.length;for(var Kt in w)de.call(w,Kt)&&!(zt&&(Kt=="length"||Bt&&(Kt=="offset"||Kt=="parent")||Lt&&(Kt=="buffer"||Kt=="byteLength"||Kt=="byteOffset")||mi(Kt,pe)))&&Yt.push(Kt);return Yt}function Pe(w,X){for(var nt=w.length;nt--;)if(Bn(w[nt][0],X))return nt;return-1}function Ln(w,X,nt){var gt=X(w);return gs(w)?gt:xt(gt,nt(w))}function un(w){return w==null?w===void 0?Z:y:Jt&&Jt in Object(w)?qs(w):os(w)}function Mn(w){return es(w)&&un(w)==v}function di(w,X,nt,gt,Bt){return w===X?!0:w==null||X==null||!es(w)&&!es(X)?w!==w&&X!==X:Dn(w,X,nt,gt,di,Bt)}function Dn(w,X,nt,gt,Bt,Lt){var zt=gs(w),Yt=gs(X),pe=zt?A:xs(w),Kt=Yt?A:xs(X);pe=pe==v?C:pe,Kt=Kt==v?C:Kt;var ve=pe==C,Fe=Kt==C,Ee=pe==Kt;if(Ee&&Js(w)){if(!Js(X))return!1;zt=!0,ve=!1}if(Ee&&!ve)return Lt||(Lt=new Cs),zt||bs(w)?On(w,X,nt,gt,Bt,Lt):fi(w,X,pe,nt,gt,Bt,Lt);if(!(nt&l)){var Ge=ve&&de.call(w,"__wrapped__"),Ie=Fe&&de.call(X,"__wrapped__");if(Ge||Ie){var en=Ge?w.value():w,ys=Ie?X.value():X;return Lt||(Lt=new Cs),Bt(en,ys,nt,gt,Lt)}}return Ee?(Lt||(Lt=new Cs),Qs(w,X,nt,gt,Bt,Lt)):!1}function br(w){if(!In(w)||vr(w))return!1;var X=tn(w)?Is:G;return X.test(Be(w))}function Je(w){return es(w)&&is(w.length)&&!!q[un(w)]}function hi(w){if(!Pn(w))return Oe(w);var X=[];for(var nt in Object(w))de.call(w,nt)&&nt!="constructor"&&X.push(nt);return X}function On(w,X,nt,gt,Bt,Lt){var zt=nt&l,Yt=w.length,pe=X.length;if(Yt!=pe&&!(zt&&pe>Yt))return!1;var Kt=Lt.get(w);if(Kt&&Lt.get(X))return Kt==X;var ve=-1,Fe=!0,Ee=nt&h?new cn:void 0;for(Lt.set(w,X),Lt.set(X,w);++ve<Yt;){var Ge=w[ve],Ie=X[ve];if(gt)var en=zt?gt(Ie,Ge,ve,X,w,Lt):gt(Ge,Ie,ve,w,X,Lt);if(en!==void 0){if(en)continue;Fe=!1;break}if(Ee){if(!vt(X,function(ys,hn){if(!_t(Ee,hn)&&(Ge===ys||Bt(Ge,ys,nt,gt,Lt)))return Ee.push(hn)})){Fe=!1;break}}else if(!(Ge===Ie||Bt(Ge,Ie,nt,gt,Lt))){Fe=!1;break}}return Lt.delete(w),Lt.delete(X),Fe}function fi(w,X,nt,gt,Bt,Lt,zt){switch(nt){case it:if(w.byteLength!=X.byteLength||w.byteOffset!=X.byteOffset)return!1;w=w.buffer,X=X.buffer;case F:return!(w.byteLength!=X.byteLength||!Lt(new ct(w),new ct(X)));case c:case f:case E:return Bn(+w,+X);case g:return w.name==X.name&&w.message==X.message;case N:case Q:return w==X+"";case j:var Yt=Dt;case L:var pe=gt&l;if(Yt||(Yt=kt),w.size!=X.size&&!pe)return!1;var Kt=zt.get(w);if(Kt)return Kt==X;gt|=h,zt.set(w,X);var ve=On(Yt(w),Yt(X),gt,Bt,Lt,zt);return zt.delete(w),ve;case tt:if(ns)return ns.call(w)==ns.call(X)}return!1}function Qs(w,X,nt,gt,Bt,Lt){var zt=nt&l,Yt=Zs(w),pe=Yt.length,Kt=Zs(X),ve=Kt.length;if(pe!=ve&&!zt)return!1;for(var Fe=pe;Fe--;){var Ee=Yt[Fe];if(!(zt?Ee in X:de.call(X,Ee)))return!1}var Ge=Lt.get(w);if(Ge&&Lt.get(X))return Ge==X;var Ie=!0;Lt.set(w,X),Lt.set(X,w);for(var en=zt;++Fe<pe;){Ee=Yt[Fe];var ys=w[Ee],hn=X[Ee];if(gt)var ia=zt?gt(hn,ys,Ee,X,w,Lt):gt(ys,hn,Ee,w,X,Lt);if(!(ia===void 0?ys===hn||Bt(ys,hn,nt,gt,Lt):ia)){Ie=!1;break}en||(en=Ee=="constructor")}if(Ie&&!en){var Bi=w.constructor,Fi=X.constructor;Bi!=Fi&&"constructor"in w&&"constructor"in X&&!(typeof Bi=="function"&&Bi instanceof Bi&&typeof Fi=="function"&&Fi instanceof Fi)&&(Ie=!1)}return Lt.delete(w),Lt.delete(X),Ie}function Zs(w){return Ln(w,dn,Di)}function as(w,X){var nt=w.__data__;return yr(X)?nt[typeof X=="string"?"string":"hash"]:nt.map}function ts(w,X){var nt=Tt(w,X);return br(nt)?nt:void 0}function qs(w){var X=de.call(w,Jt),nt=w[Jt];try{w[Jt]=void 0;var gt=!0}catch{}var Bt=Nn.call(w);return gt&&(X?w[Jt]=nt:delete w[Jt]),Bt}var Di=se?function(w){return w==null?[]:(w=Object(w),ut(se(w),function(X){return Nt.call(w,X)}))}:qn,xs=un;(Re&&xs(new Re(new ArrayBuffer(1)))!=it||le&&xs(new le)!=j||ze&&xs(ze.resolve())!=B||Qe&&xs(new Qe)!=L||fs&&xs(new fs)!=st)&&(xs=function(w){var X=un(w),nt=X==C?w.constructor:void 0,gt=nt?Be(nt):"";if(gt)switch(gt){case ss:return it;case Ze:return j;case $s:return B;case Xs:return L;case _s:return st}return X});function mi(w,X){return X=X??m,!!X&&(typeof w=="number"||K.test(w))&&w>-1&&w%1==0&&w<X}function yr(w){var X=typeof w;return X=="string"||X=="number"||X=="symbol"||X=="boolean"?w!=="__proto__":w===null}function vr(w){return!!Vs&&Vs in w}function Pn(w){var X=w&&w.constructor,nt=typeof X=="function"&&X.prototype||ue;return w===nt}function os(w){return Nn.call(w)}function Be(w){if(w!=null){try{return ge.call(w)}catch{}try{return w+""}catch{}}return""}function Bn(w,X){return w===X||w!==w&&X!==X}var Us=Mn((function(){return arguments})())?Mn:function(w){return es(w)&&de.call(w,"callee")&&!Nt.call(w,"callee")},gs=Array.isArray;function Fn(w){return w!=null&&is(w.length)&&!tn(w)}var Js=$e||Pi;function Oi(w,X){return di(w,X)}function tn(w){if(!In(w))return!1;var X=un(w);return X==b||X==p||X==d||X==I}function is(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=m}function In(w){var X=typeof w;return w!=null&&(X=="object"||X=="function")}function es(w){return w!=null&&typeof w=="object"}var bs=yt?wt(yt):Je;function dn(w){return Fn(w)?ps(w):hi(w)}function qn(){return[]}function Pi(){return!1}o.exports=Oi})(lodash_isequal,lodash_isequal.exports)),lodash_isequal.exports}var AttributeMap={},hasRequiredAttributeMap;function requireAttributeMap(){if(hasRequiredAttributeMap)return AttributeMap;hasRequiredAttributeMap=1,Object.defineProperty(AttributeMap,"__esModule",{value:!0});const o=requireLodash_clonedeep(),s=requireLodash_isequal();var i;return(function(r){function l(A={},d={},c=!1){typeof A!="object"&&(A={}),typeof d!="object"&&(d={});let f=o(d);c||(f=Object.keys(f).reduce((g,b)=>(f[b]!=null&&(g[b]=f[b]),g),{}));for(const g in A)A[g]!==void 0&&d[g]===void 0&&(f[g]=A[g]);return Object.keys(f).length>0?f:void 0}r.compose=l;function h(A={},d={}){typeof A!="object"&&(A={}),typeof d!="object"&&(d={});const c=Object.keys(A).concat(Object.keys(d)).reduce((f,g)=>(s(A[g],d[g])||(f[g]=d[g]===void 0?null:d[g]),f),{});return Object.keys(c).length>0?c:void 0}r.diff=h;function m(A={},d={}){A=A||{};const c=Object.keys(d).reduce((f,g)=>(d[g]!==A[g]&&A[g]!==void 0&&(f[g]=d[g]),f),{});return Object.keys(A).reduce((f,g)=>(A[g]!==d[g]&&d[g]===void 0&&(f[g]=null),f),c)}r.invert=m;function v(A,d,c=!1){if(typeof A!="object")return d;if(typeof d!="object")return;if(!c)return d;const f=Object.keys(d).reduce((g,b)=>(A[b]===void 0&&(g[b]=d[b]),g),{});return Object.keys(f).length>0?f:void 0}r.transform=v})(i||(i={})),AttributeMap.default=i,AttributeMap}var Op={},hasRequiredOp;function requireOp(){if(hasRequiredOp)return Op;hasRequiredOp=1,Object.defineProperty(Op,"__esModule",{value:!0});var o;return(function(s){function i(r){return typeof r.delete=="number"?r.delete:typeof r.retain=="number"?r.retain:typeof r.retain=="object"&&r.retain!==null?1:typeof r.insert=="string"?r.insert.length:1}s.length=i})(o||(o={})),Op.default=o,Op}var OpIterator={},hasRequiredOpIterator;function requireOpIterator(){if(hasRequiredOpIterator)return OpIterator;hasRequiredOpIterator=1,Object.defineProperty(OpIterator,"__esModule",{value:!0});const o=requireOp();class s{constructor(r){this.ops=r,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(r){r||(r=1/0);const l=this.ops[this.index];if(l){const h=this.offset,m=o.default.length(l);if(r>=m-h?(r=m-h,this.index+=1,this.offset=0):this.offset+=r,typeof l.delete=="number")return{delete:r};{const v={};return l.attributes&&(v.attributes=l.attributes),typeof l.retain=="number"?v.retain=r:typeof l.retain=="object"&&l.retain!==null?v.retain=l.retain:typeof l.insert=="string"?v.insert=l.insert.substr(h,r):v.insert=l.insert,v}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?o.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const r=this.ops[this.index];return r?typeof r.delete=="number"?"delete":typeof r.retain=="number"||typeof r.retain=="object"&&r.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const r=this.offset,l=this.index,h=this.next(),m=this.ops.slice(this.index);return this.offset=r,this.index=l,[h].concat(m)}}else return[]}}return OpIterator.default=s,OpIterator}var hasRequiredDelta;function requireDelta(){return hasRequiredDelta||(hasRequiredDelta=1,(function(o,s){Object.defineProperty(s,"__esModule",{value:!0}),s.AttributeMap=s.OpIterator=s.Op=void 0;const i=requireDiff(),r=requireLodash_clonedeep(),l=requireLodash_isequal(),h=requireAttributeMap();s.AttributeMap=h.default;const m=requireOp();s.Op=m.default;const v=requireOpIterator();s.OpIterator=v.default;const A="\0",d=(f,g)=>{if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);if(typeof g!="object"||g===null)throw new Error(`cannot retain a ${typeof g}`);const b=Object.keys(f)[0];if(!b||b!==Object.keys(g)[0])throw new Error(`embed types not matched: ${b} != ${Object.keys(g)[0]}`);return[b,f[b],g[b]]};class c{constructor(g){Array.isArray(g)?this.ops=g:g!=null&&Array.isArray(g.ops)?this.ops=g.ops:this.ops=[]}static registerEmbed(g,b){this.handlers[g]=b}static unregisterEmbed(g){delete this.handlers[g]}static getHandler(g){const b=this.handlers[g];if(!b)throw new Error(`no handlers for embed type "${g}"`);return b}insert(g,b){const p={};return typeof g=="string"&&g.length===0?this:(p.insert=g,b!=null&&typeof b=="object"&&Object.keys(b).length>0&&(p.attributes=b),this.push(p))}delete(g){return g<=0?this:this.push({delete:g})}retain(g,b){if(typeof g=="number"&&g<=0)return this;const p={retain:g};return b!=null&&typeof b=="object"&&Object.keys(b).length>0&&(p.attributes=b),this.push(p)}push(g){let b=this.ops.length,p=this.ops[b-1];if(g=r(g),typeof p=="object"){if(typeof g.delete=="number"&&typeof p.delete=="number")return this.ops[b-1]={delete:p.delete+g.delete},this;if(typeof p.delete=="number"&&g.insert!=null&&(b-=1,p=this.ops[b-1],typeof p!="object"))return this.ops.unshift(g),this;if(l(g.attributes,p.attributes)){if(typeof g.insert=="string"&&typeof p.insert=="string")return this.ops[b-1]={insert:p.insert+g.insert},typeof g.attributes=="object"&&(this.ops[b-1].attributes=g.attributes),this;if(typeof g.retain=="number"&&typeof p.retain=="number")return this.ops[b-1]={retain:p.retain+g.retain},typeof g.attributes=="object"&&(this.ops[b-1].attributes=g.attributes),this}}return b===this.ops.length?this.ops.push(g):this.ops.splice(b,0,g),this}chop(){const g=this.ops[this.ops.length-1];return g&&typeof g.retain=="number"&&!g.attributes&&this.ops.pop(),this}filter(g){return this.ops.filter(g)}forEach(g){this.ops.forEach(g)}map(g){return this.ops.map(g)}partition(g){const b=[],p=[];return this.forEach(j=>{(g(j)?b:p).push(j)}),[b,p]}reduce(g,b){return this.ops.reduce(g,b)}changeLength(){return this.reduce((g,b)=>b.insert?g+m.default.length(b):b.delete?g-b.delete:g,0)}length(){return this.reduce((g,b)=>g+m.default.length(b),0)}slice(g=0,b=1/0){const p=[],j=new v.default(this.ops);let E=0;for(;E<b&&j.hasNext();){let y;E<g?y=j.next(g-E):(y=j.next(b-E),p.push(y)),E+=m.default.length(y)}return new c(p)}compose(g){const b=new v.default(this.ops),p=new v.default(g.ops),j=[],E=p.peek();if(E!=null&&typeof E.retain=="number"&&E.attributes==null){let C=E.retain;for(;b.peekType()==="insert"&&b.peekLength()<=C;)C-=b.peekLength(),j.push(b.next());E.retain-C>0&&p.next(E.retain-C)}const y=new c(j);for(;b.hasNext()||p.hasNext();)if(p.peekType()==="insert")y.push(p.next());else if(b.peekType()==="delete")y.push(b.next());else{const C=Math.min(b.peekLength(),p.peekLength()),B=b.next(C),I=p.next(C);if(I.retain){const N={};if(typeof B.retain=="number")N.retain=typeof I.retain=="number"?C:I.retain;else if(typeof I.retain=="number")B.retain==null?N.insert=B.insert:N.retain=B.retain;else{const Q=B.retain==null?"insert":"retain",[tt,Z,st]=d(B[Q],I.retain),F=c.getHandler(tt);N[Q]={[tt]:F.compose(Z,st,Q==="retain")}}const L=h.default.compose(B.attributes,I.attributes,typeof B.retain=="number");if(L&&(N.attributes=L),y.push(N),!p.hasNext()&&l(y.ops[y.ops.length-1],N)){const Q=new c(b.rest());return y.concat(Q).chop()}}else typeof I.delete=="number"&&(typeof B.retain=="number"||typeof B.retain=="object"&&B.retain!==null)&&y.push(I)}return y.chop()}concat(g){const b=new c(this.ops.slice());return g.ops.length>0&&(b.push(g.ops[0]),b.ops=b.ops.concat(g.ops.slice(1))),b}diff(g,b){if(this.ops===g.ops)return new c;const p=[this,g].map(B=>B.map(I=>{if(I.insert!=null)return typeof I.insert=="string"?I.insert:A;const N=B===g?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")),j=new c,E=i(p[0],p[1],b,!0),y=new v.default(this.ops),C=new v.default(g.ops);return E.forEach(B=>{let I=B[1].length;for(;I>0;){let N=0;switch(B[0]){case i.INSERT:N=Math.min(C.peekLength(),I),j.push(C.next(N));break;case i.DELETE:N=Math.min(I,y.peekLength()),y.next(N),j.delete(N);break;case i.EQUAL:N=Math.min(y.peekLength(),C.peekLength(),I);const L=y.next(N),Q=C.next(N);l(L.insert,Q.insert)?j.retain(N,h.default.diff(L.attributes,Q.attributes)):j.push(Q).delete(N);break}I-=N}}),j.chop()}eachLine(g,b=`
`){const p=new v.default(this.ops);let j=new c,E=0;for(;p.hasNext();){if(p.peekType()!=="insert")return;const y=p.peek(),C=m.default.length(y)-p.peekLength(),B=typeof y.insert=="string"?y.insert.indexOf(b,C)-C:-1;if(B<0)j.push(p.next());else if(B>0)j.push(p.next(B));else{if(g(j,p.next(1).attributes||{},E)===!1)return;E+=1,j=new c}}j.length()>0&&g(j,{},E)}invert(g){const b=new c;return this.reduce((p,j)=>{if(j.insert)b.delete(m.default.length(j));else{if(typeof j.retain=="number"&&j.attributes==null)return b.retain(j.retain),p+j.retain;if(j.delete||typeof j.retain=="number"){const E=j.delete||j.retain;return g.slice(p,p+E).forEach(C=>{j.delete?b.push(C):j.retain&&j.attributes&&b.retain(m.default.length(C),h.default.invert(j.attributes,C.attributes))}),p+E}else if(typeof j.retain=="object"&&j.retain!==null){const E=g.slice(p,p+1),y=new v.default(E.ops).next(),[C,B,I]=d(j.retain,y.insert),N=c.getHandler(C);return b.retain({[C]:N.invert(B,I)},h.default.invert(j.attributes,y.attributes)),p+1}}return p},0),b.chop()}transform(g,b=!1){if(b=!!b,typeof g=="number")return this.transformPosition(g,b);const p=g,j=new v.default(this.ops),E=new v.default(p.ops),y=new c;for(;j.hasNext()||E.hasNext();)if(j.peekType()==="insert"&&(b||E.peekType()!=="insert"))y.retain(m.default.length(j.next()));else if(E.peekType()==="insert")y.push(E.next());else{const C=Math.min(j.peekLength(),E.peekLength()),B=j.next(C),I=E.next(C);if(B.delete)continue;if(I.delete)y.push(I);else{const N=B.retain,L=I.retain;let Q=typeof L=="object"&&L!==null?L:C;if(typeof N=="object"&&N!==null&&typeof L=="object"&&L!==null){const tt=Object.keys(N)[0];if(tt===Object.keys(L)[0]){const Z=c.getHandler(tt);Z&&(Q={[tt]:Z.transform(N[tt],L[tt],b)})}}y.retain(Q,h.default.transform(B.attributes,I.attributes,b))}}return y.chop()}transformPosition(g,b=!1){b=!!b;const p=new v.default(this.ops);let j=0;for(;p.hasNext()&&j<=g;){const E=p.peekLength(),y=p.peekType();if(p.next(),y==="delete"){g-=Math.min(E,g-j);continue}else y==="insert"&&(j<g||!b)&&(g+=E);j+=E}return g}}c.Op=m.default,c.OpIterator=v.default,c.AttributeMap=h.default,c.handlers={},s.default=c,o.exports=c,o.exports.default=c})(Delta$1,Delta$1.exports)),Delta$1.exports}var DeltaExports=requireDelta();const Delta=getDefaultExportFromCjs(DeltaExports);class Break extends EmbedBlot$1{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Break.blotName="break";Break.tagName="BR";let Text$1=class extends TextBlot$1{};const entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function escapeText(o){return o.replace(/[&<>"']/g,s=>entityMap[s])}class Inline extends InlineBlot$1{static allowedChildren=[Inline,Break,EmbedBlot$1,Text$1];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(s,i){const r=Inline.order.indexOf(s),l=Inline.order.indexOf(i);return r>=0||l>=0?r-l:s===i?0:s<i?-1:1}formatAt(s,i,r,l){if(Inline.compare(this.statics.blotName,r)<0&&this.scroll.query(r,Scope.BLOT)){const h=this.isolate(s,i);l&&h.wrap(r,l)}else super.formatAt(s,i,r,l)}optimize(s){if(super.optimize(s),this.parent instanceof Inline&&Inline.compare(this.statics.blotName,this.parent.statics.blotName)>0){const i=this.parent.isolate(this.offset(),this.length());this.moveChildren(i),i.wrap(this)}}}const NEWLINE_LENGTH=1;class Block extends BlockBlot$1{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=blockDelta(this)),this.cache.delta}deleteAt(s,i){super.deleteAt(s,i),this.cache={}}formatAt(s,i,r,l){i<=0||(this.scroll.query(r,Scope.BLOCK)?s+i===this.length()&&this.format(r,l):super.formatAt(s,Math.min(i,this.length()-s-1),r,l),this.cache={})}insertAt(s,i,r){if(r!=null){super.insertAt(s,i,r),this.cache={};return}if(i.length===0)return;const l=i.split(`
`),h=l.shift();h.length>0&&(s<this.length()-1||this.children.tail==null?super.insertAt(Math.min(s,this.length()-1),h):this.children.tail.insertAt(this.children.tail.length(),h),this.cache={});let m=this;l.reduce((v,A)=>(m=m.split(v,!0),m.insertAt(0,A),A.length),s+h.length)}insertBefore(s,i){const{head:r}=this.children;super.insertBefore(s,i),r instanceof Break&&r.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+NEWLINE_LENGTH),this.cache.length}moveChildren(s,i){super.moveChildren(s,i),this.cache={}}optimize(s){super.optimize(s),this.cache={}}path(s){return super.path(s,!0)}removeChild(s){super.removeChild(s),this.cache={}}split(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i&&(s===0||s>=this.length()-NEWLINE_LENGTH)){const l=this.clone();return s===0?(this.parent.insertBefore(l,this),this):(this.parent.insertBefore(l,this.next),l)}const r=super.split(s,i);return this.cache={},r}}Block.blotName="block";Block.tagName="P";Block.defaultChild=Break;Block.allowedChildren=[Break,Inline,EmbedBlot$1,Text$1];class BlockEmbed extends EmbedBlot$1{attach(){super.attach(),this.attributes=new AttributorStore$1(this.domNode)}delta(){return new Delta().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(s,i){const r=this.scroll.query(s,Scope.BLOCK_ATTRIBUTE);r!=null&&this.attributes.attribute(r,i)}formatAt(s,i,r,l){this.format(r,l)}insertAt(s,i,r){if(r!=null){super.insertAt(s,i,r);return}const l=i.split(`
`),h=l.pop(),m=l.map(A=>{const d=this.scroll.create(Block.blotName);return d.insertAt(0,A),d}),v=this.split(s);m.forEach(A=>{this.parent.insertBefore(A,v)}),h&&this.parent.insertBefore(this.scroll.create("text",h),v)}}BlockEmbed.scope=Scope.BLOCK_BLOT;function blockDelta(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return o.descendants(LeafBlot$1).reduce((i,r)=>r.length()===0?i:i.insert(r.value(),bubbleFormats(r,{},s)),new Delta).insert(`
`,bubbleFormats(o))}function bubbleFormats(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return o==null||("formats"in o&&typeof o.formats=="function"&&(s={...s,...o.formats()},i&&delete s["code-token"]),o.parent==null||o.parent.statics.blotName==="scroll"||o.parent.statics.scope!==o.statics.scope)?s:bubbleFormats(o.parent,s,i)}class Cursor extends EmbedBlot$1{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(s,i,r){super(s,i),this.selection=r,this.textNode=document.createTextNode(Cursor.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(s,i){if(this.savedLength!==0){super.format(s,i);return}let r=this,l=0;for(;r!=null&&r.statics.scope!==Scope.BLOCK_BLOT;)l+=r.offset(r.parent),r=r.parent;r!=null&&(this.savedLength=Cursor.CONTENTS.length,r.optimize(),r.formatAt(l,Cursor.CONTENTS.length,s,i),this.savedLength=0)}index(s,i){return s===this.textNode?0:super.index(s,i)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const s=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const i=this.prev instanceof Text$1?this.prev:null,r=i?i.length():0,l=this.next instanceof Text$1?this.next:null,h=l?l.text:"",{textNode:m}=this,v=m.data.split(Cursor.CONTENTS).join("");m.data=Cursor.CONTENTS;let A;if(i)A=i,(v||l)&&(i.insertAt(i.length(),v+h),l&&l.remove());else if(l)A=l,l.insertAt(0,v);else{const d=document.createTextNode(v);A=this.scroll.create(d),this.parent.insertBefore(A,this)}if(this.remove(),s){const d=(g,b)=>i&&g===i.domNode?b:g===m?r+b-1:l&&g===l.domNode?r+v.length+b:null,c=d(s.start.node,s.start.offset),f=d(s.end.node,s.end.offset);if(c!==null&&f!==null)return{startNode:A.domNode,startOffset:c,endNode:A.domNode,endOffset:f}}return null}update(s,i){if(s.some(r=>r.type==="characterData"&&r.target===this.textNode)){const r=this.restore();r&&(i.range=r)}}optimize(s){super.optimize(s);let{parent:i}=this;for(;i;){if(i.domNode.tagName==="A"){this.savedLength=Cursor.CONTENTS.length,i.isolate(this.offset(i),this.length()).unwrap(),this.savedLength=0;break}i=i.parent}}value(){return""}}var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(o){var s=Object.prototype.hasOwnProperty,i="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1));function l(A,d,c){this.fn=A,this.context=d,this.once=c||!1}function h(A,d,c,f,g){if(typeof c!="function")throw new TypeError("The listener must be a function");var b=new l(c,f||A,g),p=i?i+d:d;return A._events[p]?A._events[p].fn?A._events[p]=[A._events[p],b]:A._events[p].push(b):(A._events[p]=b,A._eventsCount++),A}function m(A,d){--A._eventsCount===0?A._events=new r:delete A._events[d]}function v(){this._events=new r,this._eventsCount=0}v.prototype.eventNames=function(){var d=[],c,f;if(this._eventsCount===0)return d;for(f in c=this._events)s.call(c,f)&&d.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},v.prototype.listeners=function(d){var c=i?i+d:d,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var g=0,b=f.length,p=new Array(b);g<b;g++)p[g]=f[g].fn;return p},v.prototype.listenerCount=function(d){var c=i?i+d:d,f=this._events[c];return f?f.fn?1:f.length:0},v.prototype.emit=function(d,c,f,g,b,p){var j=i?i+d:d;if(!this._events[j])return!1;var E=this._events[j],y=arguments.length,C,B;if(E.fn){switch(E.once&&this.removeListener(d,E.fn,void 0,!0),y){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,c),!0;case 3:return E.fn.call(E.context,c,f),!0;case 4:return E.fn.call(E.context,c,f,g),!0;case 5:return E.fn.call(E.context,c,f,g,b),!0;case 6:return E.fn.call(E.context,c,f,g,b,p),!0}for(B=1,C=new Array(y-1);B<y;B++)C[B-1]=arguments[B];E.fn.apply(E.context,C)}else{var I=E.length,N;for(B=0;B<I;B++)switch(E[B].once&&this.removeListener(d,E[B].fn,void 0,!0),y){case 1:E[B].fn.call(E[B].context);break;case 2:E[B].fn.call(E[B].context,c);break;case 3:E[B].fn.call(E[B].context,c,f);break;case 4:E[B].fn.call(E[B].context,c,f,g);break;default:if(!C)for(N=1,C=new Array(y-1);N<y;N++)C[N-1]=arguments[N];E[B].fn.apply(E[B].context,C)}}return!0},v.prototype.on=function(d,c,f){return h(this,d,c,f,!1)},v.prototype.once=function(d,c,f){return h(this,d,c,f,!0)},v.prototype.removeListener=function(d,c,f,g){var b=i?i+d:d;if(!this._events[b])return this;if(!c)return m(this,b),this;var p=this._events[b];if(p.fn)p.fn===c&&(!g||p.once)&&(!f||p.context===f)&&m(this,b);else{for(var j=0,E=[],y=p.length;j<y;j++)(p[j].fn!==c||g&&!p[j].once||f&&p[j].context!==f)&&E.push(p[j]);E.length?this._events[b]=E.length===1?E[0]:E:m(this,b)}return this},v.prototype.removeAllListeners=function(d){var c;return d?(c=i?i+d:d,this._events[c]&&m(this,c)):(this._events=new r,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=i,v.EventEmitter=v,o.exports=v})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports),instances=new WeakMap,levels=["error","warn","log","info"];let level="warn";function debug$6(o){if(level&&levels.indexOf(o)<=levels.indexOf(level)){for(var s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];console[o](...i)}}function namespace(o){return levels.reduce((s,i)=>(s[i]=debug$6.bind(console,i,o),s),{})}namespace.level=o=>{level=o};debug$6.level=namespace.level;const debug$5=namespace("quill:events"),EVENTS=["selectionchange","mousedown","mouseup","click"];EVENTS.forEach(o=>{document.addEventListener(o,function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];Array.from(document.querySelectorAll(".ql-container")).forEach(l=>{const h=instances.get(l);h&&h.emitter&&h.emitter.handleDOM(...i)})})});class Emitter extends EventEmitter{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",debug$5.error)}emit(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return debug$5.log.call(debug$5,...i),super.emit(...i)}handleDOM(s){for(var i=arguments.length,r=new Array(i>1?i-1:0),l=1;l<i;l++)r[l-1]=arguments[l];(this.domListeners[s.type]||[]).forEach(h=>{let{node:m,handler:v}=h;(s.target===m||m.contains(s.target))&&v(s,...r)})}listenDOM(s,i,r){this.domListeners[s]||(this.domListeners[s]=[]),this.domListeners[s].push({node:i,handler:r})}}const debug$4=namespace("quill:selection");class Range{constructor(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=s,this.length=i}}class Selection{constructor(s,i){this.emitter=i,this.scroll=s,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Range(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Emitter.sources.USER),1)}),this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const r=this.getNativeRange();r!=null&&r.start.node!==this.cursor.textNode&&this.emitter.once(Emitter.events.SCROLL_UPDATE,(l,h)=>{try{this.root.contains(r.start.node)&&this.root.contains(r.end.node)&&this.setNativeRange(r.start.node,r.start.offset,r.end.node,r.end.offset);const m=h.some(v=>v.type==="characterData"||v.type==="childList"||v.type==="attributes"&&v.target===this.root);this.update(m?Emitter.sources.SILENT:l)}catch{}})}),this.emitter.on(Emitter.events.SCROLL_OPTIMIZE,(r,l)=>{if(l.range){const{startNode:h,startOffset:m,endNode:v,endOffset:A}=l.range;this.setNativeRange(h,m,v,A),this.update(Emitter.sources.SILENT)}}),this.update(Emitter.sources.SILENT)}handleComposition(){this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Emitter.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const s=this.cursor.restore();if(!s)return;setTimeout(()=>{this.setNativeRange(s.startNode,s.startOffset,s.endNode,s.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Emitter.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(s,i){this.scroll.update();const r=this.getNativeRange();if(!(r==null||!r.native.collapsed||this.scroll.query(s,Scope.BLOCK))){if(r.start.node!==this.cursor.textNode){const l=this.scroll.find(r.start.node,!1);if(l==null)return;if(l instanceof LeafBlot$1){const h=l.split(r.start.offset);l.parent.insertBefore(this.cursor,h)}else l.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(s,i),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=this.scroll.length();s=Math.min(s,r-1),i=Math.min(s+i,r-1)-s;let l,[h,m]=this.scroll.leaf(s);if(h==null)return null;if(i>0&&m===h.length()){const[c]=this.scroll.leaf(s+1);if(c){const[f]=this.scroll.line(s),[g]=this.scroll.line(s+1);f===g&&(h=c,m=0)}}[l,m]=h.position(m,!0);const v=document.createRange();if(i>0)return v.setStart(l,m),[h,m]=this.scroll.leaf(s+i),h==null?null:([l,m]=h.position(m,!0),v.setEnd(l,m),v.getBoundingClientRect());let A="left",d;if(l instanceof Text){if(!l.data.length)return null;m<l.data.length?(v.setStart(l,m),v.setEnd(l,m+1)):(v.setStart(l,m-1),v.setEnd(l,m),A="right"),d=v.getBoundingClientRect()}else{if(!(h.domNode instanceof Element))return null;d=h.domNode.getBoundingClientRect(),m>0&&(A="right")}return{bottom:d.top+d.height,height:d.height,left:d[A],right:d[A],top:d.top,width:0}}getNativeRange(){const s=document.getSelection();if(s==null||s.rangeCount<=0)return null;const i=s.getRangeAt(0);if(i==null)return null;const r=this.normalizeNative(i);return debug$4.info("getNativeRange",r),r}getRange(){const s=this.scroll.domNode;if("isConnected"in s&&!s.isConnected)return[null,null];const i=this.getNativeRange();return i==null?[null,null]:[this.normalizedToRange(i),i]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&contains(this.root,document.activeElement)}normalizedToRange(s){const i=[[s.start.node,s.start.offset]];s.native.collapsed||i.push([s.end.node,s.end.offset]);const r=i.map(m=>{const[v,A]=m,d=this.scroll.find(v,!0),c=d.offset(this.scroll);return A===0?c:d instanceof LeafBlot$1?c+d.index(v,A):c+d.length()}),l=Math.min(Math.max(...r),this.scroll.length()-1),h=Math.min(l,...r);return new Range(h,l-h)}normalizeNative(s){if(!contains(this.root,s.startContainer)||!s.collapsed&&!contains(this.root,s.endContainer))return null;const i={start:{node:s.startContainer,offset:s.startOffset},end:{node:s.endContainer,offset:s.endOffset},native:s};return[i.start,i.end].forEach(r=>{let{node:l,offset:h}=r;for(;!(l instanceof Text)&&l.childNodes.length>0;)if(l.childNodes.length>h)l=l.childNodes[h],h=0;else if(l.childNodes.length===h)l=l.lastChild,l instanceof Text?h=l.data.length:l.childNodes.length>0?h=l.childNodes.length:h=l.childNodes.length+1;else break;r.node=l,r.offset=h}),i}rangeToNative(s){const i=this.scroll.length(),r=(l,h)=>{l=Math.min(i-1,l);const[m,v]=this.scroll.leaf(l);return m?m.position(v,h):[null,-1]};return[...r(s.index,!1),...r(s.index+s.length,!0)]}setNativeRange(s,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(debug$4.info("setNativeRange",s,i,r,l),s!=null&&(this.root.parentNode==null||s.parentNode==null||r.parentNode==null))return;const m=document.getSelection();if(m!=null)if(s!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:v}=this.getNativeRange()||{};if(v==null||h||s!==v.startContainer||i!==v.startOffset||r!==v.endContainer||l!==v.endOffset){s instanceof Element&&s.tagName==="BR"&&(i=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode),r instanceof Element&&r.tagName==="BR"&&(l=Array.from(r.parentNode.childNodes).indexOf(r),r=r.parentNode);const A=document.createRange();A.setStart(s,i),A.setEnd(r,l),m.removeAllRanges(),m.addRange(A)}}else m.removeAllRanges(),this.root.blur()}setRange(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Emitter.sources.API;if(typeof i=="string"&&(r=i,i=!1),debug$4.info("setRange",s),s!=null){const l=this.rangeToNative(s);this.setNativeRange(...l,i)}else this.setNativeRange(null);this.update(r)}update(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Emitter.sources.USER;const i=this.lastRange,[r,l]=this.getRange();if(this.lastRange=r,this.lastNative=l,this.lastRange!=null&&(this.savedRange=this.lastRange),!isEqual$1(i,this.lastRange)){if(!this.composing&&l!=null&&l.native.collapsed&&l.start.node!==this.cursor.textNode){const m=this.cursor.restore();m&&this.setNativeRange(m.startNode,m.startOffset,m.endNode,m.endOffset)}const h=[Emitter.events.SELECTION_CHANGE,cloneDeep(this.lastRange),cloneDeep(i),s];this.emitter.emit(Emitter.events.EDITOR_CHANGE,...h),s!==Emitter.sources.SILENT&&this.emitter.emit(...h)}}}function contains(o,s){try{s.parentNode}catch{return!1}return o.contains(s)}const ASCII=/^[ -~]*$/;class Editor{constructor(s){this.scroll=s,this.delta=this.getDelta()}applyDelta(s){this.scroll.update();let i=this.scroll.length();this.scroll.batchStart();const r=normalizeDelta(s),l=new Delta;return splitOpLines(r.ops.slice()).reduce((m,v)=>{const A=DeltaExports.Op.length(v);let d=v.attributes||{},c=!1,f=!1;if(v.insert!=null){if(l.retain(A),typeof v.insert=="string"){const p=v.insert;f=!p.endsWith(`
`)&&(i<=m||!!this.scroll.descendant(BlockEmbed,m)[0]),this.scroll.insertAt(m,p);const[j,E]=this.scroll.line(m);let y=merge({},bubbleFormats(j));if(j instanceof Block){const[C]=j.descendant(LeafBlot$1,E);C&&(y=merge(y,bubbleFormats(C)))}d=DeltaExports.AttributeMap.diff(y,d)||{}}else if(typeof v.insert=="object"){const p=Object.keys(v.insert)[0];if(p==null)return m;const j=this.scroll.query(p,Scope.INLINE)!=null;if(j)(i<=m||this.scroll.descendant(BlockEmbed,m)[0])&&(f=!0);else if(m>0){const[E,y]=this.scroll.descendant(LeafBlot$1,m-1);E instanceof Text$1?E.value()[y]!==`
`&&(c=!0):E instanceof EmbedBlot$1&&E.statics.scope===Scope.INLINE_BLOT&&(c=!0)}if(this.scroll.insertAt(m,p,v.insert[p]),j){const[E]=this.scroll.descendant(LeafBlot$1,m);if(E){const y=merge({},bubbleFormats(E));d=DeltaExports.AttributeMap.diff(y,d)||{}}}}i+=A}else if(l.push(v),v.retain!==null&&typeof v.retain=="object"){const p=Object.keys(v.retain)[0];if(p==null)return m;this.scroll.updateEmbedAt(m,p,v.retain[p])}Object.keys(d).forEach(p=>{this.scroll.formatAt(m,A,p,d[p])});const g=c?1:0,b=f?1:0;return i+=g+b,l.retain(g),l.delete(b),m+A+g+b},0),l.reduce((m,v)=>typeof v.delete=="number"?(this.scroll.deleteAt(m,v.delete),m):m+DeltaExports.Op.length(v),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}deleteText(s,i){return this.scroll.deleteAt(s,i),this.update(new Delta().retain(s).delete(i))}formatLine(s,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach(h=>{this.scroll.lines(s,Math.max(i,1)).forEach(m=>{m.format(h,r[h])})}),this.scroll.optimize();const l=new Delta().retain(s).retain(i,cloneDeep(r));return this.update(l)}formatText(s,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(r).forEach(h=>{this.scroll.formatAt(s,i,h,r[h])});const l=new Delta().retain(s).retain(i,cloneDeep(r));return this.update(l)}getContents(s,i){return this.delta.slice(s,s+i)}getDelta(){return this.scroll.lines().reduce((s,i)=>s.concat(i.delta()),new Delta)}getFormat(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],l=[];i===0?this.scroll.path(s).forEach(v=>{const[A]=v;A instanceof Block?r.push(A):A instanceof LeafBlot$1&&l.push(A)}):(r=this.scroll.lines(s,i),l=this.scroll.descendants(LeafBlot$1,s,i));const[h,m]=[r,l].map(v=>{const A=v.shift();if(A==null)return{};let d=bubbleFormats(A);for(;Object.keys(d).length>0;){const c=v.shift();if(c==null)return d;d=combineFormats(bubbleFormats(c),d)}return d});return{...h,...m}}getHTML(s,i){const[r,l]=this.scroll.line(s);if(r){const h=r.length();return r.length()>=l+i&&!(l===0&&i===h)?convertHTML(r,l,i,!0):convertHTML(this.scroll,s,i,!0)}return""}getText(s,i){return this.getContents(s,i).filter(r=>typeof r.insert=="string").map(r=>r.insert).join("")}insertContents(s,i){const r=normalizeDelta(i),l=new Delta().retain(s).concat(r);return this.scroll.insertContents(s,r),this.update(l)}insertEmbed(s,i,r){return this.scroll.insertAt(s,i,r),this.update(new Delta().retain(s).insert({[i]:r}))}insertText(s,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return i=i.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(s,i),Object.keys(r).forEach(l=>{this.scroll.formatAt(s,i.length,l,r[l])}),this.update(new Delta().retain(s).insert(i,cloneDeep(r)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const s=this.scroll.children.head;if(s?.statics.blotName!==Block.blotName)return!1;const i=s;return i.children.length>1?!1:i.children.head instanceof Break}removeFormat(s,i){const r=this.getText(s,i),[l,h]=this.scroll.line(s+i);let m=0,v=new Delta;l!=null&&(m=l.length()-h,v=l.delta().slice(h,h+m-1).insert(`
`));const d=this.getContents(s,i+m).diff(new Delta().insert(r).concat(v)),c=new Delta().retain(s).concat(d);return this.applyDelta(c)}update(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const l=this.delta;if(i.length===1&&i[0].type==="characterData"&&i[0].target.data.match(ASCII)&&this.scroll.find(i[0].target)){const h=this.scroll.find(i[0].target),m=bubbleFormats(h),v=h.offset(this.scroll),A=i[0].oldValue.replace(Cursor.CONTENTS,""),d=new Delta().insert(A),c=new Delta().insert(h.value()),f=r&&{oldRange:shiftRange$1(r.oldRange,-v),newRange:shiftRange$1(r.newRange,-v)};s=new Delta().retain(v).concat(d.diff(c,f)).reduce((b,p)=>p.insert?b.insert(p.insert,m):b.push(p),new Delta),this.delta=l.compose(s)}else this.delta=this.getDelta(),(!s||!isEqual$1(l.compose(s),this.delta))&&(s=l.diff(this.delta,r));return s}}function convertListHTML(o,s,i){if(o.length===0){const[b]=getListType(i.pop());return s<=0?`</li></${b}>`:`</li></${b}>${convertListHTML([],s-1,i)}`}const[{child:r,offset:l,length:h,indent:m,type:v},...A]=o,[d,c]=getListType(v);if(m>s)return i.push(v),m===s+1?`<${d}><li${c}>${convertHTML(r,l,h)}${convertListHTML(A,m,i)}`:`<${d}><li>${convertListHTML(o,s+1,i)}`;const f=i[i.length-1];if(m===s&&v===f)return`</li><li${c}>${convertHTML(r,l,h)}${convertListHTML(A,m,i)}`;const[g]=getListType(i.pop());return`</li></${g}>${convertListHTML(o,s-1,i)}`}function convertHTML(o,s,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in o&&typeof o.html=="function")return o.html(s,i);if(o instanceof Text$1)return escapeText(o.value().slice(s,s+i)).replaceAll(" ","&nbsp;");if(o instanceof ParentBlot$1){if(o.statics.blotName==="list-container"){const d=[];return o.children.forEachAt(s,i,(c,f,g)=>{const b="formats"in c&&typeof c.formats=="function"?c.formats():{};d.push({child:c,offset:f,length:g,indent:b.indent||0,type:b.list})}),convertListHTML(d,-1,[])}const l=[];if(o.children.forEachAt(s,i,(d,c,f)=>{l.push(convertHTML(d,c,f))}),r||o.statics.blotName==="list")return l.join("");const{outerHTML:h,innerHTML:m}=o.domNode,[v,A]=h.split(`>${m}<`);return v==="<table"?`<table style="border: 1px solid #000;">${l.join("")}<${A}`:`${v}>${l.join("")}<${A}`}return o.domNode instanceof Element?o.domNode.outerHTML:""}function combineFormats(o,s){return Object.keys(s).reduce((i,r)=>{if(o[r]==null)return i;const l=s[r];return l===o[r]?i[r]=l:Array.isArray(l)?l.indexOf(o[r])<0?i[r]=l.concat([o[r]]):i[r]=l:i[r]=[l,o[r]],i},{})}function getListType(o){const s=o==="ordered"?"ol":"ul";switch(o){case"checked":return[s,' data-list="checked"'];case"unchecked":return[s,' data-list="unchecked"'];default:return[s,""]}}function normalizeDelta(o){return o.reduce((s,i)=>{if(typeof i.insert=="string"){const r=i.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return s.insert(r,i.attributes)}return s.push(i)},new Delta)}function shiftRange$1(o,s){let{index:i,length:r}=o;return new Range(i+s,r)}function splitOpLines(o){const s=[];return o.forEach(i=>{typeof i.insert=="string"?i.insert.split(`
`).forEach((l,h)=>{h&&s.push({insert:`
`,attributes:i.attributes}),l&&s.push({insert:l,attributes:i.attributes})}):s.push(i)}),s}class Module{static DEFAULTS={};constructor(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=s,this.options=i}}const GUARD_TEXT="\uFEFF";class Embed extends EmbedBlot$1{constructor(s,i){super(s,i),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(r=>{this.contentNode.appendChild(r)}),this.leftGuard=document.createTextNode(GUARD_TEXT),this.rightGuard=document.createTextNode(GUARD_TEXT),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(s,i){return s===this.leftGuard?0:s===this.rightGuard?1:super.index(s,i)}restore(s){let i=null,r;const l=s.data.split(GUARD_TEXT).join("");if(s===this.leftGuard)if(this.prev instanceof Text$1){const h=this.prev.length();this.prev.insertAt(h,l),i={startNode:this.prev.domNode,startOffset:h+l.length}}else r=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(r),this),i={startNode:r,startOffset:l.length};else s===this.rightGuard&&(this.next instanceof Text$1?(this.next.insertAt(0,l),i={startNode:this.next.domNode,startOffset:l.length}):(r=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(r),this.next),i={startNode:r,startOffset:l.length}));return s.data=GUARD_TEXT,i}update(s,i){s.forEach(r=>{if(r.type==="characterData"&&(r.target===this.leftGuard||r.target===this.rightGuard)){const l=this.restore(r.target);l&&(i.range=l)}})}}class Composition{isComposing=!1;constructor(s,i){this.scroll=s,this.emitter=i,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",s=>{this.isComposing||this.handleCompositionStart(s)}),this.scroll.domNode.addEventListener("compositionend",s=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(s)})})}handleCompositionStart(s){const i=s.target instanceof Node?this.scroll.find(s.target,!0):null;i&&!(i instanceof Embed)&&(this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START,s),this.scroll.batchStart(),this.emitter.emit(Emitter.events.COMPOSITION_START,s),this.isComposing=!0)}handleCompositionEnd(s){this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END,s),this.scroll.batchEnd(),this.emitter.emit(Emitter.events.COMPOSITION_END,s),this.isComposing=!1}}class Theme{static DEFAULTS={modules:{}};static themes={default:Theme};modules={};constructor(s,i){this.quill=s,this.options=i}init(){Object.keys(this.options.modules).forEach(s=>{this.modules[s]==null&&this.addModule(s)})}addModule(s){const i=this.quill.constructor.import(`modules/${s}`);return this.modules[s]=new i(this.quill,this.options.modules[s]||{}),this.modules[s]}}const getParentElement=o=>o.parentElement||o.getRootNode().host||null,getElementRect=o=>{const s=o.getBoundingClientRect(),i="offsetWidth"in o&&Math.abs(s.width)/o.offsetWidth||1,r="offsetHeight"in o&&Math.abs(s.height)/o.offsetHeight||1;return{top:s.top,right:s.left+o.clientWidth*i,bottom:s.top+o.clientHeight*r,left:s.left}},paddingValueToInt=o=>{const s=parseInt(o,10);return Number.isNaN(s)?0:s},getScrollDistance=(o,s,i,r,l,h)=>o<i&&s>r?0:o<i?-(i-o+l):s>r?s-o>r-i?o+l-i:s-r+h:0,scrollRectIntoView=(o,s)=>{const i=o.ownerDocument;let r=s,l=o;for(;l;){const h=l===i.body,m=h?{top:0,right:window.visualViewport?.width??i.documentElement.clientWidth,bottom:window.visualViewport?.height??i.documentElement.clientHeight,left:0}:getElementRect(l),v=getComputedStyle(l),A=getScrollDistance(r.left,r.right,m.left,m.right,paddingValueToInt(v.scrollPaddingLeft),paddingValueToInt(v.scrollPaddingRight)),d=getScrollDistance(r.top,r.bottom,m.top,m.bottom,paddingValueToInt(v.scrollPaddingTop),paddingValueToInt(v.scrollPaddingBottom));if(A||d)if(h)i.defaultView?.scrollBy(A,d);else{const{scrollLeft:c,scrollTop:f}=l;d&&(l.scrollTop+=d),A&&(l.scrollLeft+=A);const g=l.scrollLeft-c,b=l.scrollTop-f;r={left:r.left-g,top:r.top-b,right:r.right-g,bottom:r.bottom-b}}l=h||v.position==="fixed"?null:getParentElement(l)}},MAX_REGISTER_ITERATIONS=100,CORE_FORMATS=["block","break","cursor","inline","scroll","text"],createRegistryWithFormats=(o,s,i)=>{const r=new Registry;return CORE_FORMATS.forEach(l=>{const h=s.query(l);h&&r.register(h)}),o.forEach(l=>{let h=s.query(l);h||i.error(`Cannot register "${l}" specified in "formats" config. Are you sure it was registered?`);let m=0;for(;h;)if(r.register(h),h="blotName"in h?h.requiredContainer??null:null,m+=1,m>MAX_REGISTER_ITERATIONS){i.error(`Cycle detected in registering blot requiredContainer: "${l}"`);break}}),r},debug$3=namespace("quill"),globalRegistry=new Registry;ParentBlot$1.uiClass="ql-ui";class Quill{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:globalRegistry,theme:"default"};static events=Emitter.events;static sources=Emitter.sources;static version="2.0.3";static imports={delta:Delta,parchment:Parchment,"core/module":Module,"core/theme":Theme};static debug(s){s===!0&&(s="log"),namespace.level(s)}static find(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return instances.get(s)||globalRegistry.find(s,i)}static import(s){return this.imports[s]==null&&debug$3.error(`Cannot import ${s}. Are you sure it was registered?`),this.imports[s]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const s=arguments.length<=0?void 0:arguments[0],i=!!(!(arguments.length<=1)&&arguments[1]),r="attrName"in s?s.attrName:s.blotName;typeof r=="string"?this.register(`formats/${r}`,s,i):Object.keys(s).forEach(l=>{this.register(l,s[l],i)})}else{const s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=!!(!(arguments.length<=2)&&arguments[2]);this.imports[s]!=null&&!r&&debug$3.warn(`Overwriting ${s} with`,i),this.imports[s]=i,(s.startsWith("blots/")||s.startsWith("formats/"))&&i&&typeof i!="boolean"&&i.blotName!=="abstract"&&globalRegistry.register(i),typeof i.register=="function"&&i.register(globalRegistry)}}constructor(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=expandConfig(s,i),this.container=this.options.container,this.container==null){debug$3.error("Invalid Quill container",s);return}this.options.debug&&Quill.debug(this.options.debug);const r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",instances.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Emitter;const l=ScrollBlot$1.blotName,h=this.options.registry.query(l);if(!h||!("blotName"in h))throw new Error(`Cannot initialize Quill without "${l}" blot`);if(this.scroll=new h(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Editor(this.scroll),this.selection=new Selection(this.scroll,this.emitter),this.composition=new Composition(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Emitter.events.EDITOR_CHANGE,m=>{m===Emitter.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Emitter.events.SCROLL_UPDATE,(m,v)=>{const A=this.selection.lastRange,[d]=this.selection.getRange(),c=A&&d?{oldRange:A,newRange:d}:void 0;modify.call(this,()=>this.editor.update(null,v,c),m)}),this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE,(m,v)=>{const A=this.selection.lastRange,[d]=this.selection.getRange(),c=A&&d?{oldRange:A,newRange:d}:void 0;modify.call(this,()=>{const f=new Delta().retain(m.offset(this)).retain({[m.statics.blotName]:v});return this.editor.update(f,[],c)},Quill.sources.USER)}),r){const m=this.clipboard.convert({html:`${r}<p><br></p>`,text:`
`});this.setContents(m)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof s=="string"){const r=s;s=document.createElement("div"),s.classList.add(r)}return this.container.insertBefore(s,i),s}blur(){this.selection.setRange(null)}deleteText(s,i,r){return[s,i,,r]=overload(s,i,r),modify.call(this,()=>this.editor.deleteText(s,i),r,s,-1*i)}disable(){this.enable(!1)}editReadOnly(s){this.allowReadOnlyEdits=!0;const i=s();return this.allowReadOnlyEdits=!1,i}enable(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(s),this.container.classList.toggle("ql-disabled",!s)}focus(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),s.preventScroll||this.scrollSelectionIntoView()}format(s,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Emitter.sources.API;return modify.call(this,()=>{const l=this.getSelection(!0);let h=new Delta;if(l==null)return h;if(this.scroll.query(s,Scope.BLOCK))h=this.editor.formatLine(l.index,l.length,{[s]:i});else{if(l.length===0)return this.selection.format(s,i),h;h=this.editor.formatText(l.index,l.length,{[s]:i})}return this.setSelection(l,Emitter.sources.SILENT),h},r)}formatLine(s,i,r,l,h){let m;return[s,i,m,h]=overload(s,i,r,l,h),modify.call(this,()=>this.editor.formatLine(s,i,m),h,s,0)}formatText(s,i,r,l,h){let m;return[s,i,m,h]=overload(s,i,r,l,h),modify.call(this,()=>this.editor.formatText(s,i,m),h,s,0)}getBounds(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=null;if(typeof s=="number"?r=this.selection.getBounds(s,i):r=this.selection.getBounds(s.index,s.length),!r)return null;const l=this.container.getBoundingClientRect();return{bottom:r.bottom-l.top,height:r.height,left:r.left-l.left,right:r.right-l.left,top:r.top-l.top,width:r.width}}getContents(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-s;return[s,i]=overload(s,i),this.editor.getContents(s,i)}getFormat(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof s=="number"?this.editor.getFormat(s,i):this.editor.getFormat(s.index,s.length)}getIndex(s){return s.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(s){return this.scroll.leaf(s)}getLine(s){return this.scroll.line(s)}getLines(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof s!="number"?this.scroll.lines(s.index,s.length):this.scroll.lines(s,i)}getModule(s){return this.theme.modules[s]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return typeof s=="number"&&(i=i??this.getLength()-s),[s,i]=overload(s,i),this.editor.getHTML(s,i)}getText(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return typeof s=="number"&&(i=i??this.getLength()-s),[s,i]=overload(s,i),this.editor.getText(s,i)}hasFocus(){return this.selection.hasFocus()}insertEmbed(s,i,r){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Quill.sources.API;return modify.call(this,()=>this.editor.insertEmbed(s,i,r),l,s)}insertText(s,i,r,l,h){let m;return[s,,m,h]=overload(s,0,r,l,h),modify.call(this,()=>this.editor.insertText(s,i,m),h,s,i.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(s,i,r){return[s,i,,r]=overload(s,i,r),modify.call(this,()=>this.editor.removeFormat(s,i),r,s)}scrollRectIntoView(s){scrollRectIntoView(this.root,s)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const s=this.selection.lastRange,i=s&&this.selection.getBounds(s.index,s.length);i&&this.scrollRectIntoView(i)}setContents(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Emitter.sources.API;return modify.call(this,()=>{s=new Delta(s);const r=this.getLength(),l=this.editor.deleteText(0,r),h=this.editor.insertContents(0,s),m=this.editor.deleteText(this.getLength()-1,1);return l.compose(h).compose(m)},i)}setSelection(s,i,r){s==null?this.selection.setRange(null,i||Quill.sources.API):([s,i,,r]=overload(s,i,r),this.selection.setRange(new Range(Math.max(0,s),i),r),r!==Emitter.sources.SILENT&&this.scrollSelectionIntoView())}setText(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Emitter.sources.API;const r=new Delta().insert(s);return this.setContents(r,i)}update(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Emitter.sources.USER;const i=this.scroll.update(s);return this.selection.update(s),i}updateContents(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Emitter.sources.API;return modify.call(this,()=>(s=new Delta(s),this.editor.applyDelta(s)),i,!0)}}function resolveSelector(o){return typeof o=="string"?document.querySelector(o):o}function expandModuleConfig(o){return Object.entries(o??{}).reduce((s,i)=>{let[r,l]=i;return{...s,[r]:l===!0?{}:l}},{})}function omitUndefinedValuesFromOptions(o){return Object.fromEntries(Object.entries(o).filter(s=>s[1]!==void 0))}function expandConfig(o,s){const i=resolveSelector(o);if(!i)throw new Error("Invalid Quill container");const l=!s.theme||s.theme===Quill.DEFAULTS.theme?Theme:Quill.import(`themes/${s.theme}`);if(!l)throw new Error(`Invalid theme ${s.theme}. Did you register it?`);const{modules:h,...m}=Quill.DEFAULTS,{modules:v,...A}=l.DEFAULTS;let d=expandModuleConfig(s.modules);d!=null&&d.toolbar&&d.toolbar.constructor!==Object&&(d={...d,toolbar:{container:d.toolbar}});const c=merge({},expandModuleConfig(h),expandModuleConfig(v),d),f={...m,...omitUndefinedValuesFromOptions(A),...omitUndefinedValuesFromOptions(s)};let g=s.registry;return g?s.formats&&debug$3.warn('Ignoring "formats" option because "registry" is specified'):g=s.formats?createRegistryWithFormats(s.formats,f.registry,debug$3):f.registry,{...f,registry:g,container:i,theme:l,modules:Object.entries(c).reduce((b,p)=>{let[j,E]=p;if(!E)return b;const y=Quill.import(`modules/${j}`);return y==null?(debug$3.error(`Cannot load ${j} module. Are you sure you registered it?`),b):{...b,[j]:merge({},y.DEFAULTS||{},E)}},{}),bounds:resolveSelector(f.bounds)}}function modify(o,s,i,r){if(!this.isEnabled()&&s===Emitter.sources.USER&&!this.allowReadOnlyEdits)return new Delta;let l=i==null?null:this.getSelection();const h=this.editor.delta,m=o();if(l!=null&&(i===!0&&(i=l.index),r==null?l=shiftRange(l,m,s):r!==0&&(l=shiftRange(l,i,r,s)),this.setSelection(l,Emitter.sources.SILENT)),m.length()>0){const v=[Emitter.events.TEXT_CHANGE,m,h,s];this.emitter.emit(Emitter.events.EDITOR_CHANGE,...v),s!==Emitter.sources.SILENT&&this.emitter.emit(...v)}return m}function overload(o,s,i,r,l){let h={};return typeof o.index=="number"&&typeof o.length=="number"?typeof s!="number"?(l=r,r=i,i=s,s=o.length,o=o.index):(s=o.length,o=o.index):typeof s!="number"&&(l=r,r=i,i=s,s=0),typeof i=="object"?(h=i,l=r):typeof i=="string"&&(r!=null?h[i]=r:l=i),l=l||Emitter.sources.API,[o,s,h,l]}function shiftRange(o,s,i,r){const l=typeof i=="number"?i:0;if(o==null)return null;let h,m;return s&&typeof s.transformPosition=="function"?[h,m]=[o.index,o.index+o.length].map(v=>s.transformPosition(v,r!==Emitter.sources.USER)):[h,m]=[o.index,o.index+o.length].map(v=>v<s||v===s&&r===Emitter.sources.USER?v:l>=0?v+l:Math.max(s,v+l)),new Range(h,m-h)}class Container extends ContainerBlot$1{}function isLine$1(o){return o instanceof Block||o instanceof BlockEmbed}function isUpdatable(o){return typeof o.updateContent=="function"}class Scroll extends ScrollBlot$1{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Block;static allowedChildren=[Block,BlockEmbed,Container];constructor(s,i,r){let{emitter:l}=r;super(s,i),this.emitter=l,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",h=>this.handleDragStart(h))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const s=this.batch;this.batch=!1,this.update(s)}emitMount(s){this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT,s)}emitUnmount(s){this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT,s)}emitEmbedUpdate(s,i){this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE,s,i)}deleteAt(s,i){const[r,l]=this.line(s),[h]=this.line(s+i);if(super.deleteAt(s,i),h!=null&&r!==h&&l>0){if(r instanceof BlockEmbed||h instanceof BlockEmbed){this.optimize();return}const m=h.children.head instanceof Break?null:h.children.head;r.moveChildren(h,m),r.remove()}this.optimize()}enable(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",s?"true":"false")}formatAt(s,i,r,l){super.formatAt(s,i,r,l),this.optimize()}insertAt(s,i,r){if(s>=this.length())if(r==null||this.scroll.query(i,Scope.BLOCK)==null){const l=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(l),r==null&&i.endsWith(`
`)?l.insertAt(0,i.slice(0,-1),r):l.insertAt(0,i,r)}else{const l=this.scroll.create(i,r);this.appendChild(l)}else super.insertAt(s,i,r);this.optimize()}insertBefore(s,i){if(s.statics.scope===Scope.INLINE_BLOT){const r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(s),super.insertBefore(r,i)}else super.insertBefore(s,i)}insertContents(s,i){const r=this.deltaToRenderBlocks(i.concat(new Delta().insert(`
`))),l=r.pop();if(l==null)return;this.batchStart();const h=r.shift();if(h){const A=h.type==="block"&&(h.delta.length()===0||!this.descendant(BlockEmbed,s)[0]&&s<this.length()),d=h.type==="block"?h.delta:new Delta().insert({[h.key]:h.value});insertInlineContents(this,s,d);const c=h.type==="block"?1:0,f=s+d.length()+c;A&&this.insertAt(f-1,`
`);const g=bubbleFormats(this.line(s)[0]),b=DeltaExports.AttributeMap.diff(g,h.attributes)||{};Object.keys(b).forEach(p=>{this.formatAt(f-1,1,p,b[p])}),s=f}let[m,v]=this.children.find(s);if(r.length&&(m&&(m=m.split(v),v=0),r.forEach(A=>{if(A.type==="block"){const d=this.createBlock(A.attributes,m||void 0);insertInlineContents(d,0,A.delta)}else{const d=this.create(A.key,A.value);this.insertBefore(d,m||void 0),Object.keys(A.attributes).forEach(c=>{d.format(c,A.attributes[c])})}})),l.type==="block"&&l.delta.length()){const A=m?m.offset(m.scroll)+v:this.length();insertInlineContents(this,A,l.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(s){const i=this.path(s).pop();if(!i)return[null,-1];const[r,l]=i;return r instanceof LeafBlot$1?[r,l]:[null,-1]}line(s){return s===this.length()?this.line(s-1):this.descendant(isLine$1,s)}lines(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const r=(l,h,m)=>{let v=[],A=m;return l.children.forEachAt(h,m,(d,c,f)=>{isLine$1(d)?v.push(d):d instanceof ContainerBlot$1&&(v=v.concat(r(d,c,A))),A-=f}),v};return r(this,s,i)}optimize(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(s,i),s.length>0&&this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE,s,i))}path(s){return super.path(s).slice(1)}remove(){}update(s){if(this.batch){Array.isArray(s)&&(this.batch=this.batch.concat(s));return}let i=Emitter.sources.USER;typeof s=="string"&&(i=s),Array.isArray(s)||(s=this.observer.takeRecords()),s=s.filter(r=>{let{target:l}=r;const h=this.find(l,!0);return h&&!isUpdatable(h)}),s.length>0&&this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE,i,s),super.update(s.concat([])),s.length>0&&this.emitter.emit(Emitter.events.SCROLL_UPDATE,i,s)}updateEmbedAt(s,i,r){const[l]=this.descendant(h=>h instanceof BlockEmbed,s);l&&l.statics.blotName===i&&isUpdatable(l)&&l.updateContent(r)}handleDragStart(s){s.preventDefault()}deltaToRenderBlocks(s){const i=[];let r=new Delta;return s.forEach(l=>{const h=l?.insert;if(h)if(typeof h=="string"){const m=h.split(`
`);m.slice(0,-1).forEach(A=>{r.insert(A,l.attributes),i.push({type:"block",delta:r,attributes:l.attributes??{}}),r=new Delta});const v=m[m.length-1];v&&r.insert(v,l.attributes)}else{const m=Object.keys(h)[0];if(!m)return;this.query(m,Scope.INLINE)?r.push(l):(r.length()&&i.push({type:"block",delta:r,attributes:{}}),r=new Delta,i.push({type:"blockEmbed",key:m,value:h[m],attributes:l.attributes??{}}))}}),r.length()&&i.push({type:"block",delta:r,attributes:{}}),i}createBlock(s,i){let r;const l={};Object.entries(s).forEach(v=>{let[A,d]=v;this.query(A,Scope.BLOCK&Scope.BLOT)!=null?r=A:l[A]=d});const h=this.create(r||this.statics.defaultChild.blotName,r?s[r]:void 0);this.insertBefore(h,i||void 0);const m=h.length();return Object.entries(l).forEach(v=>{let[A,d]=v;h.formatAt(0,m,A,d)}),h}}function insertInlineContents(o,s,i){i.reduce((r,l)=>{const h=DeltaExports.Op.length(l);let m=l.attributes||{};if(l.insert!=null){if(typeof l.insert=="string"){const v=l.insert;o.insertAt(r,v);const[A]=o.descendant(LeafBlot$1,r),d=bubbleFormats(A);m=DeltaExports.AttributeMap.diff(d,m)||{}}else if(typeof l.insert=="object"){const v=Object.keys(l.insert)[0];if(v==null)return r;if(o.insertAt(r,v,l.insert[v]),o.scroll.query(v,Scope.INLINE)!=null){const[d]=o.descendant(LeafBlot$1,r),c=bubbleFormats(d);m=DeltaExports.AttributeMap.diff(c,m)||{}}}}return Object.keys(m).forEach(v=>{o.formatAt(r,h,v,m[v])}),r+h},s)}const config$2={scope:Scope.BLOCK,whitelist:["right","center","justify"]},AlignAttribute=new Attributor("align","align",config$2),AlignClass=new ClassAttributor$1("align","ql-align",config$2),AlignStyle=new StyleAttributor$1("align","text-align",config$2);class ColorAttributor extends StyleAttributor$1{value(s){let i=super.value(s);return i.startsWith("rgb(")?(i=i.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${i.split(",").map(l=>`00${parseInt(l,10).toString(16)}`.slice(-2)).join("")}`):i}}const ColorClass=new ClassAttributor$1("color","ql-color",{scope:Scope.INLINE}),ColorStyle=new ColorAttributor("color","color",{scope:Scope.INLINE}),BackgroundClass=new ClassAttributor$1("background","ql-bg",{scope:Scope.INLINE}),BackgroundStyle=new ColorAttributor("background","background-color",{scope:Scope.INLINE});class CodeBlockContainer extends Container{static create(s){const i=super.create(s);return i.setAttribute("spellcheck","false"),i}code(s,i){return this.children.map(r=>r.length()<=1?"":r.domNode.innerText).join(`
`).slice(s,s+i)}html(s,i){return`<pre>
${escapeText(this.code(s,i))}
</pre>`}}class CodeBlock extends Block{static TAB="  ";static register(){Quill.register(CodeBlockContainer)}}class Code extends Inline{}Code.blotName="code";Code.tagName="CODE";CodeBlock.blotName="code-block";CodeBlock.className="ql-code-block";CodeBlock.tagName="DIV";CodeBlockContainer.blotName="code-block-container";CodeBlockContainer.className="ql-code-block-container";CodeBlockContainer.tagName="DIV";CodeBlockContainer.allowedChildren=[CodeBlock];CodeBlock.allowedChildren=[Text$1,Break,Cursor];CodeBlock.requiredContainer=CodeBlockContainer;const config$1={scope:Scope.BLOCK,whitelist:["rtl"]},DirectionAttribute=new Attributor("direction","dir",config$1),DirectionClass=new ClassAttributor$1("direction","ql-direction",config$1),DirectionStyle=new StyleAttributor$1("direction","direction",config$1),config={scope:Scope.INLINE,whitelist:["serif","monospace"]},FontClass=new ClassAttributor$1("font","ql-font",config);class FontStyleAttributor extends StyleAttributor$1{value(s){return super.value(s).replace(/["']/g,"")}}const FontStyle=new FontStyleAttributor("font","font-family",config),SizeClass=new ClassAttributor$1("size","ql-size",{scope:Scope.INLINE,whitelist:["small","large","huge"]}),SizeStyle=new StyleAttributor$1("size","font-size",{scope:Scope.INLINE,whitelist:["10px","18px","32px"]}),debug$2=namespace("quill:keyboard"),SHORTKEY=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Keyboard extends Module{static match(s,i){return["altKey","ctrlKey","metaKey","shiftKey"].some(r=>!!i[r]!==s[r]&&i[r]!==null)?!1:i.key===s.key||i.key===s.which}constructor(s,i){super(s,i),this.bindings={},Object.keys(this.options.bindings).forEach(r=>{this.options.bindings[r]&&this.addBinding(this.options.bindings[r])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const l=normalize$2(s);if(l==null){debug$2.warn("Attempted to add invalid keyboard binding",l);return}typeof i=="function"&&(i={handler:i}),typeof r=="function"&&(r={handler:r}),(Array.isArray(l.key)?l.key:[l.key]).forEach(m=>{const v={...l,key:m,...i,...r};this.bindings[v.key]=this.bindings[v.key]||[],this.bindings[v.key].push(v)})}listen(){this.quill.root.addEventListener("keydown",s=>{if(s.defaultPrevented||s.isComposing||s.keyCode===229&&(s.key==="Enter"||s.key==="Backspace"))return;const l=(this.bindings[s.key]||[]).concat(this.bindings[s.which]||[]).filter(y=>Keyboard.match(s,y));if(l.length===0)return;const h=Quill.find(s.target,!0);if(h&&h.scroll!==this.quill.scroll)return;const m=this.quill.getSelection();if(m==null||!this.quill.hasFocus())return;const[v,A]=this.quill.getLine(m.index),[d,c]=this.quill.getLeaf(m.index),[f,g]=m.length===0?[d,c]:this.quill.getLeaf(m.index+m.length),b=d instanceof TextBlot$1?d.value().slice(0,c):"",p=f instanceof TextBlot$1?f.value().slice(g):"",j={collapsed:m.length===0,empty:m.length===0&&v.length()<=1,format:this.quill.getFormat(m),line:v,offset:A,prefix:b,suffix:p,event:s};l.some(y=>{if(y.collapsed!=null&&y.collapsed!==j.collapsed||y.empty!=null&&y.empty!==j.empty||y.offset!=null&&y.offset!==j.offset)return!1;if(Array.isArray(y.format)){if(y.format.every(C=>j.format[C]==null))return!1}else if(typeof y.format=="object"&&!Object.keys(y.format).every(C=>y.format[C]===!0?j.format[C]!=null:y.format[C]===!1?j.format[C]==null:isEqual$1(y.format[C],j.format[C])))return!1;return y.prefix!=null&&!y.prefix.test(j.prefix)||y.suffix!=null&&!y.suffix.test(j.suffix)?!1:y.handler.call(this,m,j,y)!==!0})&&s.preventDefault()})}handleBackspace(s,i){const r=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(i.prefix)?2:1;if(s.index===0||this.quill.getLength()<=1)return;let l={};const[h]=this.quill.getLine(s.index);let m=new Delta().retain(s.index-r).delete(r);if(i.offset===0){const[v]=this.quill.getLine(s.index-1);if(v&&!(v.statics.blotName==="block"&&v.length()<=1)){const d=h.formats(),c=this.quill.getFormat(s.index-1,1);if(l=DeltaExports.AttributeMap.diff(d,c)||{},Object.keys(l).length>0){const f=new Delta().retain(s.index+h.length()-2).retain(1,l);m=m.compose(f)}}}this.quill.updateContents(m,Quill.sources.USER),this.quill.focus()}handleDelete(s,i){const r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(i.suffix)?2:1;if(s.index>=this.quill.getLength()-r)return;let l={};const[h]=this.quill.getLine(s.index);let m=new Delta().retain(s.index).delete(r);if(i.offset>=h.length()-1){const[v]=this.quill.getLine(s.index+1);if(v){const A=h.formats(),d=this.quill.getFormat(s.index,1);l=DeltaExports.AttributeMap.diff(A,d)||{},Object.keys(l).length>0&&(m=m.retain(v.length()-1).retain(1,l))}}this.quill.updateContents(m,Quill.sources.USER),this.quill.focus()}handleDeleteRange(s){deleteRange({range:s,quill:this.quill}),this.quill.focus()}handleEnter(s,i){const r=Object.keys(i.format).reduce((h,m)=>(this.quill.scroll.query(m,Scope.BLOCK)&&!Array.isArray(i.format[m])&&(h[m]=i.format[m]),h),{}),l=new Delta().retain(s.index).delete(s.length).insert(`
`,r);this.quill.updateContents(l,Quill.sources.USER),this.quill.setSelection(s.index+1,Quill.sources.SILENT),this.quill.focus()}}const defaultOptions={bindings:{bold:makeFormatHandler("bold"),italic:makeFormatHandler("italic"),underline:makeFormatHandler("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(o,s){return s.collapsed&&s.offset!==0?!0:(this.quill.format("indent","+1",Quill.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(o,s){return s.collapsed&&s.offset!==0?!0:(this.quill.format("indent","-1",Quill.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(o,s){s.format.indent!=null?this.quill.format("indent","-1",Quill.sources.USER):s.format.list!=null&&this.quill.format("list",!1,Quill.sources.USER)}},"indent code-block":makeCodeBlockHandler(!0),"outdent code-block":makeCodeBlockHandler(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(o){this.quill.deleteText(o.index-1,1,Quill.sources.USER)}},tab:{key:"Tab",handler(o,s){if(s.format.table)return!0;this.quill.history.cutoff();const i=new Delta().retain(o.index).delete(o.length).insert("	");return this.quill.updateContents(i,Quill.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(o.index+1,Quill.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Quill.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(o,s){const i={list:!1};s.format.indent&&(i.indent=!1),this.quill.formatLine(o.index,o.length,i,Quill.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(o){const[s,i]=this.quill.getLine(o.index),r={...s.formats(),list:"checked"},l=new Delta().retain(o.index).insert(`
`,r).retain(s.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(l,Quill.sources.USER),this.quill.setSelection(o.index+1,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(o,s){const[i,r]=this.quill.getLine(o.index),l=new Delta().retain(o.index).insert(`
`,s.format).retain(i.length()-r-1).retain(1,{header:null});this.quill.updateContents(l,Quill.sources.USER),this.quill.setSelection(o.index+1,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(o){const s=this.quill.getModule("table");if(s){const[i,r,l,h]=s.getTable(o),m=tableSide(i,r,l,h);if(m==null)return;let v=i.offset();if(m<0){const A=new Delta().retain(v).insert(`
`);this.quill.updateContents(A,Quill.sources.USER),this.quill.setSelection(o.index+1,o.length,Quill.sources.SILENT)}else if(m>0){v+=i.length();const A=new Delta().retain(v).insert(`
`);this.quill.updateContents(A,Quill.sources.USER),this.quill.setSelection(v,Quill.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(o,s){const{event:i,line:r}=s,l=r.offset(this.quill.scroll);i.shiftKey?this.quill.setSelection(l-1,Quill.sources.USER):this.quill.setSelection(l+r.length(),Quill.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(o,s){if(this.quill.scroll.query("list")==null)return!0;const{length:i}=s.prefix,[r,l]=this.quill.getLine(o.index);if(l>i)return!0;let h;switch(s.prefix.trim()){case"[]":case"[ ]":h="unchecked";break;case"[x]":h="checked";break;case"-":case"*":h="bullet";break;default:h="ordered"}this.quill.insertText(o.index," ",Quill.sources.USER),this.quill.history.cutoff();const m=new Delta().retain(o.index-l).delete(i+1).retain(r.length()-2-l).retain(1,{list:h});return this.quill.updateContents(m,Quill.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(o.index-i,Quill.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(o){const[s,i]=this.quill.getLine(o.index);let r=2,l=s;for(;l!=null&&l.length()<=1&&l.formats()["code-block"];)if(l=l.prev,r-=1,r<=0){const h=new Delta().retain(o.index+s.length()-i-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(h,Quill.sources.USER),this.quill.setSelection(o.index-1,Quill.sources.SILENT),!1}return!0}},"embed left":makeEmbedArrowHandler("ArrowLeft",!1),"embed left shift":makeEmbedArrowHandler("ArrowLeft",!0),"embed right":makeEmbedArrowHandler("ArrowRight",!1),"embed right shift":makeEmbedArrowHandler("ArrowRight",!0),"table down":makeTableArrowHandler(!1),"table up":makeTableArrowHandler(!0)}};Keyboard.DEFAULTS=defaultOptions;function makeCodeBlockHandler(o){return{key:"Tab",shiftKey:!o,format:{"code-block":!0},handler(s,i){let{event:r}=i;const l=this.quill.scroll.query("code-block"),{TAB:h}=l;if(s.length===0&&!r.shiftKey){this.quill.insertText(s.index,h,Quill.sources.USER),this.quill.setSelection(s.index+h.length,Quill.sources.SILENT);return}const m=s.length===0?this.quill.getLines(s.index,1):this.quill.getLines(s);let{index:v,length:A}=s;m.forEach((d,c)=>{o?(d.insertAt(0,h),c===0?v+=h.length:A+=h.length):d.domNode.textContent.startsWith(h)&&(d.deleteAt(0,h.length),c===0?v-=h.length:A-=h.length)}),this.quill.update(Quill.sources.USER),this.quill.setSelection(v,A,Quill.sources.SILENT)}}}function makeEmbedArrowHandler(o,s){return{key:o,shiftKey:s,altKey:null,[o==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(r){let{index:l}=r;o==="ArrowRight"&&(l+=r.length+1);const[h]=this.quill.getLeaf(l);return h instanceof EmbedBlot$1?(o==="ArrowLeft"?s?this.quill.setSelection(r.index-1,r.length+1,Quill.sources.USER):this.quill.setSelection(r.index-1,Quill.sources.USER):s?this.quill.setSelection(r.index,r.length+1,Quill.sources.USER):this.quill.setSelection(r.index+r.length+1,Quill.sources.USER),!1):!0}}}function makeFormatHandler(o){return{key:o[0],shortKey:!0,handler(s,i){this.quill.format(o,!i.format[o],Quill.sources.USER)}}}function makeTableArrowHandler(o){return{key:o?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(s,i){const r=o?"prev":"next",l=i.line,h=l.parent[r];if(h!=null){if(h.statics.blotName==="table-row"){let m=h.children.head,v=l;for(;v.prev!=null;)v=v.prev,m=m.next;const A=m.offset(this.quill.scroll)+Math.min(i.offset,m.length()-1);this.quill.setSelection(A,0,Quill.sources.USER)}}else{const m=l.table()[r];m!=null&&(o?this.quill.setSelection(m.offset(this.quill.scroll)+m.length()-1,0,Quill.sources.USER):this.quill.setSelection(m.offset(this.quill.scroll),0,Quill.sources.USER))}return!1}}}function normalize$2(o){if(typeof o=="string"||typeof o=="number")o={key:o};else if(typeof o=="object")o=cloneDeep(o);else return null;return o.shortKey&&(o[SHORTKEY]=o.shortKey,delete o.shortKey),o}function deleteRange(o){let{quill:s,range:i}=o;const r=s.getLines(i);let l={};if(r.length>1){const h=r[0].formats(),m=r[r.length-1].formats();l=DeltaExports.AttributeMap.diff(m,h)||{}}s.deleteText(i,Quill.sources.USER),Object.keys(l).length>0&&s.formatLine(i.index,1,l,Quill.sources.USER),s.setSelection(i.index,Quill.sources.SILENT)}function tableSide(o,s,i,r){return s.prev==null&&s.next==null?i.prev==null&&i.next==null?r===0?-1:1:i.prev==null?-1:1:s.prev==null?-1:s.next==null?1:null}const normalWeightRegexp=/font-weight:\s*normal/,blockTagNames=["P","OL","UL"],isBlockElement=o=>o&&blockTagNames.includes(o.tagName),normalizeEmptyLines=o=>{Array.from(o.querySelectorAll("br")).filter(s=>isBlockElement(s.previousElementSibling)&&isBlockElement(s.nextElementSibling)).forEach(s=>{s.parentNode?.removeChild(s)})},normalizeFontWeight=o=>{Array.from(o.querySelectorAll('b[style*="font-weight"]')).filter(s=>s.getAttribute("style")?.match(normalWeightRegexp)).forEach(s=>{const i=o.createDocumentFragment();i.append(...s.childNodes),s.parentNode?.replaceChild(i,s)})};function normalize$1(o){o.querySelector('[id^="docs-internal-guid-"]')&&(normalizeFontWeight(o),normalizeEmptyLines(o))}const ignoreRegexp=/\bmso-list:[^;]*ignore/i,idRegexp=/\bmso-list:[^;]*\bl(\d+)/i,indentRegexp=/\bmso-list:[^;]*\blevel(\d+)/i,parseListItem=(o,s)=>{const i=o.getAttribute("style"),r=i?.match(idRegexp);if(!r)return null;const l=Number(r[1]),h=i?.match(indentRegexp),m=h?Number(h[1]):1,v=new RegExp(`@list l${l}:level${m}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),A=s.match(v),d=A&&A[1]==="bullet"?"bullet":"ordered";return{id:l,indent:m,type:d,element:o}},normalizeListItem=o=>{const s=Array.from(o.querySelectorAll("[style*=mso-list]")),i=[],r=[];s.forEach(m=>{(m.getAttribute("style")||"").match(ignoreRegexp)?i.push(m):r.push(m)}),i.forEach(m=>m.parentNode?.removeChild(m));const l=o.documentElement.innerHTML,h=r.map(m=>parseListItem(m,l)).filter(m=>m);for(;h.length;){const m=[];let v=h.shift();for(;v;)m.push(v),v=h.length&&h[0]?.element===v.element.nextElementSibling&&h[0].id===v.id?h.shift():null;const A=document.createElement("ul");m.forEach(f=>{const g=document.createElement("li");g.setAttribute("data-list",f.type),f.indent>1&&g.setAttribute("class",`ql-indent-${f.indent-1}`),g.innerHTML=f.element.innerHTML,A.appendChild(g)});const d=m[0]?.element,{parentNode:c}=d??{};d&&c?.replaceChild(A,d),m.slice(1).forEach(f=>{let{element:g}=f;c?.removeChild(g)})}};function normalize(o){o.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&normalizeListItem(o)}const NORMALIZERS=[normalize,normalize$1],normalizeExternalHTML=o=>{o.documentElement&&NORMALIZERS.forEach(s=>{s(o)})},debug$1=namespace("quill:clipboard"),CLIPBOARD_CONFIG=[[Node.TEXT_NODE,matchText],[Node.TEXT_NODE,matchNewline],["br",matchBreak],[Node.ELEMENT_NODE,matchNewline],[Node.ELEMENT_NODE,matchBlot],[Node.ELEMENT_NODE,matchAttributor],[Node.ELEMENT_NODE,matchStyles],["li",matchIndent],["ol, ul",matchList],["pre",matchCodeBlock],["tr",matchTable],["b",createMatchAlias("bold")],["i",createMatchAlias("italic")],["strike",createMatchAlias("strike")],["style",matchIgnore]],ATTRIBUTE_ATTRIBUTORS=[AlignAttribute,DirectionAttribute].reduce((o,s)=>(o[s.keyName]=s,o),{}),STYLE_ATTRIBUTORS=[AlignStyle,BackgroundStyle,ColorStyle,DirectionStyle,FontStyle,SizeStyle].reduce((o,s)=>(o[s.keyName]=s,o),{});class Clipboard extends Module{static DEFAULTS={matchers:[]};constructor(s,i){super(s,i),this.quill.root.addEventListener("copy",r=>this.onCaptureCopy(r,!1)),this.quill.root.addEventListener("cut",r=>this.onCaptureCopy(r,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],CLIPBOARD_CONFIG.concat(this.options.matchers??[]).forEach(r=>{let[l,h]=r;this.addMatcher(l,h)})}addMatcher(s,i){this.matchers.push([s,i])}convert(s){let{html:i,text:r}=s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(l[CodeBlock.blotName])return new Delta().insert(r||"",{[CodeBlock.blotName]:l[CodeBlock.blotName]});if(!i)return new Delta().insert(r||"",l);const h=this.convertHTML(i);return deltaEndsWith(h,`
`)&&(h.ops[h.ops.length-1].attributes==null||l.table)?h.compose(new Delta().retain(h.length()-1).delete(1)):h}normalizeHTML(s){normalizeExternalHTML(s)}convertHTML(s){const i=new DOMParser().parseFromString(s,"text/html");this.normalizeHTML(i);const r=i.body,l=new WeakMap,[h,m]=this.prepareMatching(r,l);return traverse(this.quill.scroll,r,h,m,l)}dangerouslyPasteHTML(s,i){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Quill.sources.API;if(typeof s=="string"){const l=this.convert({html:s,text:""});this.quill.setContents(l,i),this.quill.setSelection(0,Quill.sources.SILENT)}else{const l=this.convert({html:i,text:""});this.quill.updateContents(new Delta().retain(s).concat(l),r),this.quill.setSelection(s+l.length(),Quill.sources.SILENT)}}onCaptureCopy(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s.defaultPrevented)return;s.preventDefault();const[r]=this.quill.selection.getRange();if(r==null)return;const{html:l,text:h}=this.onCopy(r,i);s.clipboardData?.setData("text/plain",h),s.clipboardData?.setData("text/html",l),i&&deleteRange({range:r,quill:this.quill})}normalizeURIList(s){return s.split(/\r?\n/).filter(i=>i[0]!=="#").join(`
`)}onCapturePaste(s){if(s.defaultPrevented||!this.quill.isEnabled())return;s.preventDefault();const i=this.quill.getSelection(!0);if(i==null)return;const r=s.clipboardData?.getData("text/html");let l=s.clipboardData?.getData("text/plain");if(!r&&!l){const m=s.clipboardData?.getData("text/uri-list");m&&(l=this.normalizeURIList(m))}const h=Array.from(s.clipboardData?.files||[]);if(!r&&h.length>0){this.quill.uploader.upload(i,h);return}if(r&&h.length>0){const m=new DOMParser().parseFromString(r,"text/html");if(m.body.childElementCount===1&&m.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(i,h);return}}this.onPaste(i,{html:r,text:l})}onCopy(s){const i=this.quill.getText(s);return{html:this.quill.getSemanticHTML(s),text:i}}onPaste(s,i){let{text:r,html:l}=i;const h=this.quill.getFormat(s.index),m=this.convert({text:r,html:l},h);debug$1.log("onPaste",m,{text:r,html:l});const v=new Delta().retain(s.index).delete(s.length).concat(m);this.quill.updateContents(v,Quill.sources.USER),this.quill.setSelection(v.length()-s.length,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(s,i){const r=[],l=[];return this.matchers.forEach(h=>{const[m,v]=h;switch(m){case Node.TEXT_NODE:l.push(v);break;case Node.ELEMENT_NODE:r.push(v);break;default:Array.from(s.querySelectorAll(m)).forEach(A=>{i.has(A)?i.get(A)?.push(v):i.set(A,[v])});break}}),[r,l]}}function applyFormat(o,s,i,r){return r.query(s)?o.reduce((l,h)=>{if(!h.insert)return l;if(h.attributes&&h.attributes[s])return l.push(h);const m=i?{[s]:i}:{};return l.insert(h.insert,{...m,...h.attributes})},new Delta):o}function deltaEndsWith(o,s){let i="";for(let r=o.ops.length-1;r>=0&&i.length<s.length;--r){const l=o.ops[r];if(typeof l.insert!="string")break;i=l.insert+i}return i.slice(-1*s.length)===s}function isLine(o,s){if(!(o instanceof Element))return!1;const i=s.query(o);return i&&i.prototype instanceof EmbedBlot$1?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(o.tagName.toLowerCase())}function isBetweenInlineElements(o,s){return o.previousElementSibling&&o.nextElementSibling&&!isLine(o.previousElementSibling,s)&&!isLine(o.nextElementSibling,s)}const preNodes=new WeakMap;function isPre(o){return o==null?!1:(preNodes.has(o)||(o.tagName==="PRE"?preNodes.set(o,!0):preNodes.set(o,isPre(o.parentNode))),preNodes.get(o))}function traverse(o,s,i,r,l){return s.nodeType===s.TEXT_NODE?r.reduce((h,m)=>m(s,h,o),new Delta):s.nodeType===s.ELEMENT_NODE?Array.from(s.childNodes||[]).reduce((h,m)=>{let v=traverse(o,m,i,r,l);return m.nodeType===s.ELEMENT_NODE&&(v=i.reduce((A,d)=>d(m,A,o),v),v=(l.get(m)||[]).reduce((A,d)=>d(m,A,o),v)),h.concat(v)},new Delta):new Delta}function createMatchAlias(o){return(s,i,r)=>applyFormat(i,o,!0,r)}function matchAttributor(o,s,i){const r=Attributor.keys(o),l=ClassAttributor$1.keys(o),h=StyleAttributor$1.keys(o),m={};return r.concat(l).concat(h).forEach(v=>{let A=i.query(v,Scope.ATTRIBUTE);A!=null&&(m[A.attrName]=A.value(o),m[A.attrName])||(A=ATTRIBUTE_ATTRIBUTORS[v],A!=null&&(A.attrName===v||A.keyName===v)&&(m[A.attrName]=A.value(o)||void 0),A=STYLE_ATTRIBUTORS[v],A!=null&&(A.attrName===v||A.keyName===v)&&(A=STYLE_ATTRIBUTORS[v],m[A.attrName]=A.value(o)||void 0))}),Object.entries(m).reduce((v,A)=>{let[d,c]=A;return applyFormat(v,d,c,i)},s)}function matchBlot(o,s,i){const r=i.query(o);if(r==null)return s;if(r.prototype instanceof EmbedBlot$1){const l={},h=r.value(o);if(h!=null)return l[r.blotName]=h,new Delta().insert(l,r.formats(o,i))}else if(r.prototype instanceof BlockBlot$1&&!deltaEndsWith(s,`
`)&&s.insert(`
`),"blotName"in r&&"formats"in r&&typeof r.formats=="function")return applyFormat(s,r.blotName,r.formats(o,i),i);return s}function matchBreak(o,s){return deltaEndsWith(s,`
`)||s.insert(`
`),s}function matchCodeBlock(o,s,i){const r=i.query("code-block"),l=r&&"formats"in r&&typeof r.formats=="function"?r.formats(o,i):!0;return applyFormat(s,"code-block",l,i)}function matchIgnore(){return new Delta}function matchIndent(o,s,i){const r=i.query(o);if(r==null||r.blotName!=="list"||!deltaEndsWith(s,`
`))return s;let l=-1,h=o.parentNode;for(;h!=null;)["OL","UL"].includes(h.tagName)&&(l+=1),h=h.parentNode;return l<=0?s:s.reduce((m,v)=>v.insert?v.attributes&&typeof v.attributes.indent=="number"?m.push(v):m.insert(v.insert,{indent:l,...v.attributes||{}}):m,new Delta)}function matchList(o,s,i){const r=o;let l=r.tagName==="OL"?"ordered":"bullet";const h=r.getAttribute("data-checked");return h&&(l=h==="true"?"checked":"unchecked"),applyFormat(s,"list",l,i)}function matchNewline(o,s,i){if(!deltaEndsWith(s,`
`)){if(isLine(o,i)&&(o.childNodes.length>0||o instanceof HTMLParagraphElement))return s.insert(`
`);if(s.length()>0&&o.nextSibling){let r=o.nextSibling;for(;r!=null;){if(isLine(r,i))return s.insert(`
`);const l=i.query(r);if(l&&l.prototype instanceof BlockEmbed)return s.insert(`
`);r=r.firstChild}}}return s}function matchStyles(o,s,i){const r={},l=o.style||{};return l.fontStyle==="italic"&&(r.italic=!0),l.textDecoration==="underline"&&(r.underline=!0),l.textDecoration==="line-through"&&(r.strike=!0),(l.fontWeight?.startsWith("bold")||parseInt(l.fontWeight,10)>=700)&&(r.bold=!0),s=Object.entries(r).reduce((h,m)=>{let[v,A]=m;return applyFormat(h,v,A,i)},s),parseFloat(l.textIndent||0)>0?new Delta().insert("	").concat(s):s}function matchTable(o,s,i){const r=o.parentElement?.tagName==="TABLE"?o.parentElement:o.parentElement?.parentElement;if(r!=null){const h=Array.from(r.querySelectorAll("tr")).indexOf(o)+1;return applyFormat(s,"table",h,i)}return s}function matchText(o,s,i){let r=o.data;if(o.parentElement?.tagName==="O:P")return s.insert(r.trim());if(!isPre(o)){if(r.trim().length===0&&r.includes(`
`)&&!isBetweenInlineElements(o,i))return s;r=r.replace(/[^\S\u00a0]/g," "),r=r.replace(/ {2,}/g," "),(o.previousSibling==null&&o.parentElement!=null&&isLine(o.parentElement,i)||o.previousSibling instanceof Element&&isLine(o.previousSibling,i))&&(r=r.replace(/^ /,"")),(o.nextSibling==null&&o.parentElement!=null&&isLine(o.parentElement,i)||o.nextSibling instanceof Element&&isLine(o.nextSibling,i))&&(r=r.replace(/ $/,"")),r=r.replaceAll(""," ")}return s.insert(r)}class History extends Module{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(s,i){super(s,i),this.quill.on(Quill.events.EDITOR_CHANGE,(r,l,h,m)=>{r===Quill.events.SELECTION_CHANGE?l&&m!==Quill.sources.SILENT&&(this.currentRange=l):r===Quill.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||m===Quill.sources.USER?this.record(l,h):this.transform(l)),this.currentRange=transformRange(this.currentRange,l))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",r=>{r.inputType==="historyUndo"?(this.undo(),r.preventDefault()):r.inputType==="historyRedo"&&(this.redo(),r.preventDefault())})}change(s,i){if(this.stack[s].length===0)return;const r=this.stack[s].pop();if(!r)return;const l=this.quill.getContents(),h=r.delta.invert(l);this.stack[i].push({delta:h,range:transformRange(r.range,h)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r.delta,Quill.sources.USER),this.ignoreChange=!1,this.restoreSelection(r)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(s,i){if(s.ops.length===0)return;this.stack.redo=[];let r=s.invert(i),l=this.currentRange;const h=Date.now();if(this.lastRecorded+this.options.delay>h&&this.stack.undo.length>0){const m=this.stack.undo.pop();m&&(r=r.compose(m.delta),l=m.range)}else this.lastRecorded=h;r.length()!==0&&(this.stack.undo.push({delta:r,range:l}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(s){transformStack(this.stack.undo,s),transformStack(this.stack.redo,s)}undo(){this.change("undo","redo")}restoreSelection(s){if(s.range)this.quill.setSelection(s.range,Quill.sources.USER);else{const i=getLastChangeIndex(this.quill.scroll,s.delta);this.quill.setSelection(i,Quill.sources.USER)}}}function transformStack(o,s){let i=s;for(let r=o.length-1;r>=0;r-=1){const l=o[r];o[r]={delta:i.transform(l.delta,!0),range:l.range&&transformRange(l.range,i)},i=l.delta.transform(i),o[r].delta.length()===0&&o.splice(r,1)}}function endsWithNewlineChange(o,s){const i=s.ops[s.ops.length-1];return i==null?!1:i.insert!=null?typeof i.insert=="string"&&i.insert.endsWith(`
`):i.attributes!=null?Object.keys(i.attributes).some(r=>o.query(r,Scope.BLOCK)!=null):!1}function getLastChangeIndex(o,s){const i=s.reduce((l,h)=>l+(h.delete||0),0);let r=s.length()-i;return endsWithNewlineChange(o,s)&&(r-=1),r}function transformRange(o,s){if(!o)return o;const i=s.transformPosition(o.index),r=s.transformPosition(o.index+o.length);return{index:i,length:r-i}}class Uploader extends Module{constructor(s,i){super(s,i),s.root.addEventListener("drop",r=>{r.preventDefault();let l=null;if(document.caretRangeFromPoint)l=document.caretRangeFromPoint(r.clientX,r.clientY);else if(document.caretPositionFromPoint){const m=document.caretPositionFromPoint(r.clientX,r.clientY);l=document.createRange(),l.setStart(m.offsetNode,m.offset),l.setEnd(m.offsetNode,m.offset)}const h=l&&s.selection.normalizeNative(l);if(h){const m=s.selection.normalizedToRange(h);r.dataTransfer?.files&&this.upload(m,r.dataTransfer.files)}})}upload(s,i){const r=[];Array.from(i).forEach(l=>{l&&this.options.mimetypes?.includes(l.type)&&r.push(l)}),r.length>0&&this.options.handler.call(this,s,r)}}Uploader.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(o,s){if(!this.quill.scroll.query("image"))return;const i=s.map(r=>new Promise(l=>{const h=new FileReader;h.onload=()=>{l(h.result)},h.readAsDataURL(r)}));Promise.all(i).then(r=>{const l=r.reduce((h,m)=>h.insert({image:m}),new Delta().retain(o.index).delete(o.length));this.quill.updateContents(l,Emitter.sources.USER),this.quill.setSelection(o.index+r.length,Emitter.sources.SILENT)})}};const INSERT_TYPES=["insertText","insertReplacementText"];class Input extends Module{constructor(s,i){super(s,i),s.root.addEventListener("beforeinput",r=>{this.handleBeforeInput(r)}),/Android/i.test(navigator.userAgent)||s.on(Quill.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(s){deleteRange({range:s,quill:this.quill})}replaceText(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(s.length===0)return!1;if(i){const r=this.quill.getFormat(s.index,1);this.deleteRange(s),this.quill.updateContents(new Delta().retain(s.index).insert(i,r),Quill.sources.USER)}else this.deleteRange(s);return this.quill.setSelection(s.index+i.length,0,Quill.sources.SILENT),!0}handleBeforeInput(s){if(this.quill.composition.isComposing||s.defaultPrevented||!INSERT_TYPES.includes(s.inputType))return;const i=s.getTargetRanges?s.getTargetRanges()[0]:null;if(!i||i.collapsed===!0)return;const r=getPlainTextFromInputEvent(s);if(r==null)return;const l=this.quill.selection.normalizeNative(i),h=l?this.quill.selection.normalizedToRange(l):null;h&&this.replaceText(h,r)&&s.preventDefault()}handleCompositionStart(){const s=this.quill.getSelection();s&&this.replaceText(s)}}function getPlainTextFromInputEvent(o){return typeof o.data=="string"?o.data:o.dataTransfer?.types.includes("text/plain")?o.dataTransfer.getData("text/plain"):null}const isMac=/Mac/i.test(navigator.platform),TTL_FOR_VALID_SELECTION_CHANGE=100,canMoveCaretBeforeUINode=o=>!!(o.key==="ArrowLeft"||o.key==="ArrowRight"||o.key==="ArrowUp"||o.key==="ArrowDown"||o.key==="Home"||isMac&&o.key==="a"&&o.ctrlKey===!0);class UINode extends Module{isListening=!1;selectionChangeDeadline=0;constructor(s,i){super(s,i),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(s,i){let{line:r,event:l}=i;if(!(r instanceof ParentBlot$1)||!r.uiNode)return!0;const h=getComputedStyle(r.domNode).direction==="rtl";return h&&l.key!=="ArrowRight"||!h&&l.key!=="ArrowLeft"?!0:(this.quill.setSelection(s.index-1,s.length+(l.shiftKey?1:0),Quill.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",s=>{!s.defaultPrevented&&canMoveCaretBeforeUINode(s)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+TTL_FOR_VALID_SELECTION_CHANGE,this.isListening)return;this.isListening=!0;const s=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",s,{once:!0})}handleSelectionChange(){const s=document.getSelection();if(!s)return;const i=s.getRangeAt(0);if(i.collapsed!==!0||i.startOffset!==0)return;const r=this.quill.scroll.find(i.startContainer);if(!(r instanceof ParentBlot$1)||!r.uiNode)return;const l=document.createRange();l.setStartAfter(r.uiNode),l.setEndAfter(r.uiNode),s.removeAllRanges(),s.addRange(l)}}Quill.register({"blots/block":Block,"blots/block/embed":BlockEmbed,"blots/break":Break,"blots/container":Container,"blots/cursor":Cursor,"blots/embed":Embed,"blots/inline":Inline,"blots/scroll":Scroll,"blots/text":Text$1,"modules/clipboard":Clipboard,"modules/history":History,"modules/keyboard":Keyboard,"modules/uploader":Uploader,"modules/input":Input,"modules/uiNode":UINode});class IndentAttributor extends ClassAttributor$1{add(s,i){let r=0;if(i==="+1"||i==="-1"){const l=this.value(s)||0;r=i==="+1"?l+1:l-1}else typeof i=="number"&&(r=i);return r===0?(this.remove(s),!0):super.add(s,r.toString())}canAdd(s,i){return super.canAdd(s,i)||super.canAdd(s,parseInt(i,10))}value(s){return parseInt(super.value(s),10)||void 0}}const IndentClass=new IndentAttributor("indent","ql-indent",{scope:Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Blockquote extends Block{static blotName="blockquote";static tagName="blockquote"}class Header extends Block{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(s){return this.tagName.indexOf(s.tagName)+1}}class ListContainer extends Container{}ListContainer.blotName="list-container";ListContainer.tagName="OL";class ListItem extends Block{static create(s){const i=super.create();return i.setAttribute("data-list",s),i}static formats(s){return s.getAttribute("data-list")||void 0}static register(){Quill.register(ListContainer)}constructor(s,i){super(s,i);const r=i.ownerDocument.createElement("span"),l=h=>{if(!s.isEnabled())return;const m=this.statics.formats(i,s);m==="checked"?(this.format("list","unchecked"),h.preventDefault()):m==="unchecked"&&(this.format("list","checked"),h.preventDefault())};r.addEventListener("mousedown",l),r.addEventListener("touchstart",l),this.attachUI(r)}format(s,i){s===this.statics.blotName&&i?this.domNode.setAttribute("data-list",i):super.format(s,i)}}ListItem.blotName="list";ListItem.tagName="LI";ListContainer.allowedChildren=[ListItem];ListItem.requiredContainer=ListContainer;class Bold extends Inline{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(s){super.optimize(s),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class Italic extends Bold{static blotName="italic";static tagName=["EM","I"]}class Link extends Inline{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(s){const i=super.create(s);return i.setAttribute("href",this.sanitize(s)),i.setAttribute("rel","noopener noreferrer"),i.setAttribute("target","_blank"),i}static formats(s){return s.getAttribute("href")}static sanitize(s){return sanitize(s,this.PROTOCOL_WHITELIST)?s:this.SANITIZED_URL}format(s,i){s!==this.statics.blotName||!i?super.format(s,i):this.domNode.setAttribute("href",this.constructor.sanitize(i))}}function sanitize(o,s){const i=document.createElement("a");i.href=o;const r=i.href.slice(0,i.href.indexOf(":"));return s.indexOf(r)>-1}class Script extends Inline{static blotName="script";static tagName=["SUB","SUP"];static create(s){return s==="super"?document.createElement("sup"):s==="sub"?document.createElement("sub"):super.create(s)}static formats(s){if(s.tagName==="SUB")return"sub";if(s.tagName==="SUP")return"super"}}class Strike extends Bold{static blotName="strike";static tagName=["S","STRIKE"]}class Underline extends Inline{static blotName="underline";static tagName="U"}class Formula extends Embed{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(s){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const i=super.create(s);return typeof s=="string"&&(window.katex.render(s,i,{throwOnError:!1,errorColor:"#f00"}),i.setAttribute("data-value",s)),i}static value(s){return s.getAttribute("data-value")}html(){const{formula:s}=this.value();return`<span>${s}</span>`}}const ATTRIBUTES$1=["alt","height","width"];let Image$1=class extends EmbedBlot$1{static blotName="image";static tagName="IMG";static create(s){const i=super.create(s);return typeof s=="string"&&i.setAttribute("src",this.sanitize(s)),i}static formats(s){return ATTRIBUTES$1.reduce((i,r)=>(s.hasAttribute(r)&&(i[r]=s.getAttribute(r)),i),{})}static match(s){return/\.(jpe?g|gif|png)$/.test(s)||/^data:image\/.+;base64/.test(s)}static sanitize(s){return sanitize(s,["http","https","data"])?s:"//:0"}static value(s){return s.getAttribute("src")}format(s,i){ATTRIBUTES$1.indexOf(s)>-1?i?this.domNode.setAttribute(s,i):this.domNode.removeAttribute(s):super.format(s,i)}};const ATTRIBUTES=["height","width"];class Video extends BlockEmbed{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(s){const i=super.create(s);return i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen","true"),i.setAttribute("src",this.sanitize(s)),i}static formats(s){return ATTRIBUTES.reduce((i,r)=>(s.hasAttribute(r)&&(i[r]=s.getAttribute(r)),i),{})}static sanitize(s){return Link.sanitize(s)}static value(s){return s.getAttribute("src")}format(s,i){ATTRIBUTES.indexOf(s)>-1?i?this.domNode.setAttribute(s,i):this.domNode.removeAttribute(s):super.format(s,i)}html(){const{video:s}=this.value();return`<a href="${s}">${s}</a>`}}const TokenAttributor=new ClassAttributor$1("code-token","hljs",{scope:Scope.INLINE});class CodeToken extends Inline{static formats(s,i){for(;s!=null&&s!==i.domNode;){if(s.classList&&s.classList.contains(CodeBlock.className))return super.formats(s,i);s=s.parentNode}}constructor(s,i,r){super(s,i,r),TokenAttributor.add(this.domNode,r)}format(s,i){s!==CodeToken.blotName?super.format(s,i):i?TokenAttributor.add(this.domNode,i):(TokenAttributor.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),TokenAttributor.value(this.domNode)||this.unwrap()}}CodeToken.blotName="code-token";CodeToken.className="ql-token";class SyntaxCodeBlock extends CodeBlock{static create(s){const i=super.create(s);return typeof s=="string"&&i.setAttribute("data-language",s),i}static formats(s){return s.getAttribute("data-language")||"plain"}static register(){}format(s,i){s===this.statics.blotName&&i?this.domNode.setAttribute("data-language",i):super.format(s,i)}replaceWith(s,i){return this.formatAt(0,this.length(),CodeToken.blotName,!1),super.replaceWith(s,i)}}class SyntaxCodeBlockContainer extends CodeBlockContainer{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(s,i){s===SyntaxCodeBlock.blotName&&(this.forceNext=!0,this.children.forEach(r=>{r.format(s,i)}))}formatAt(s,i,r,l){r===SyntaxCodeBlock.blotName&&(this.forceNext=!0),super.formatAt(s,i,r,l)}highlight(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const l=`${Array.from(this.domNode.childNodes).filter(m=>m!==this.uiNode).map(m=>m.textContent).join(`
`)}
`,h=SyntaxCodeBlock.formats(this.children.head.domNode);if(i||this.forceNext||this.cachedText!==l){if(l.trim().length>0||this.cachedText==null){const m=this.children.reduce((A,d)=>A.concat(blockDelta(d,!1)),new Delta),v=s(l,h);m.diff(v).reduce((A,d)=>{let{retain:c,attributes:f}=d;return c?(f&&Object.keys(f).forEach(g=>{[SyntaxCodeBlock.blotName,CodeToken.blotName].includes(g)&&this.formatAt(A,c,g,f[g])}),A+c):A},0)}this.cachedText=l,this.forceNext=!1}}html(s,i){const[r]=this.children.find(s);return`<pre data-language="${r?SyntaxCodeBlock.formats(r.domNode):"plain"}">
${escapeText(this.code(s,i))}
</pre>`}optimize(s){if(super.optimize(s),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const i=SyntaxCodeBlock.formats(this.children.head.domNode);i!==this.uiNode.value&&(this.uiNode.value=i)}}}SyntaxCodeBlockContainer.allowedChildren=[SyntaxCodeBlock];SyntaxCodeBlock.requiredContainer=SyntaxCodeBlockContainer;SyntaxCodeBlock.allowedChildren=[CodeToken,Cursor,Text$1,Break];const highlight=(o,s,i)=>{if(typeof o.versionString=="string"){const r=o.versionString.split(".")[0];if(parseInt(r,10)>=11)return o.highlight(i,{language:s}).value}return o.highlight(s,i).value};class Syntax extends Module{static register(){Quill.register(CodeToken,!0),Quill.register(SyntaxCodeBlock,!0),Quill.register(SyntaxCodeBlockContainer,!0)}constructor(s,i){if(super(s,i),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((r,l)=>{let{key:h}=l;return r[h]=!0,r},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Quill.events.SCROLL_BLOT_MOUNT,s=>{if(!(s instanceof SyntaxCodeBlockContainer))return;const i=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(r=>{let{key:l,label:h}=r;const m=i.ownerDocument.createElement("option");m.textContent=h,m.setAttribute("value",l),i.appendChild(m)}),i.addEventListener("change",()=>{s.format(SyntaxCodeBlock.blotName,i.value),this.quill.root.focus(),this.highlight(s,!0)}),s.uiNode==null&&(s.attachUI(i),s.children.head&&(i.value=SyntaxCodeBlock.formats(s.children.head.domNode)))})}initTimer(){let s=null;this.quill.on(Quill.events.SCROLL_OPTIMIZE,()=>{s&&clearTimeout(s),s=setTimeout(()=>{this.highlight(),s=null},this.options.interval)})}highlight(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(Quill.sources.USER);const r=this.quill.getSelection();(s==null?this.quill.scroll.descendants(SyntaxCodeBlockContainer):[s]).forEach(h=>{h.highlight(this.highlightBlot,i)}),this.quill.update(Quill.sources.SILENT),r!=null&&this.quill.setSelection(r,Quill.sources.SILENT)}highlightBlot(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(i=this.languages[i]?i:"plain",i==="plain")return escapeText(s).split(`
`).reduce((l,h,m)=>(m!==0&&l.insert(`
`,{[CodeBlock.blotName]:i}),l.insert(h)),new Delta);const r=this.quill.root.ownerDocument.createElement("div");return r.classList.add(CodeBlock.className),r.innerHTML=highlight(this.options.hljs,i,s),traverse(this.quill.scroll,r,[(l,h)=>{const m=TokenAttributor.value(l);return m?h.compose(new Delta().retain(h.length(),{[CodeToken.blotName]:m})):h}],[(l,h)=>l.data.split(`
`).reduce((m,v,A)=>(A!==0&&m.insert(`
`,{[CodeBlock.blotName]:i}),m.insert(v)),h)],new WeakMap)}}Syntax.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class TableCell extends Block{static blotName="table";static tagName="TD";static create(s){const i=super.create();return s?i.setAttribute("data-row",s):i.setAttribute("data-row",tableId()),i}static formats(s){if(s.hasAttribute("data-row"))return s.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(s,i){s===TableCell.blotName&&i?this.domNode.setAttribute("data-row",i):super.format(s,i)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class TableRow extends Container{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const s=this.children.head.formats(),i=this.children.tail.formats(),r=this.next.children.head.formats(),l=this.next.children.tail.formats();return s.table===i.table&&s.table===r.table&&s.table===l.table}return!1}optimize(s){super.optimize(s),this.children.forEach(i=>{if(i.next==null)return;const r=i.formats(),l=i.next.formats();if(r.table!==l.table){const h=this.splitAfter(i);h&&h.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class TableBody extends Container{static blotName="table-body";static tagName="TBODY"}class TableContainer extends Container{static blotName="table-container";static tagName="TABLE";balanceCells(){const s=this.descendants(TableRow),i=s.reduce((r,l)=>Math.max(l.children.length,r),0);s.forEach(r=>{new Array(i-r.children.length).fill(0).forEach(()=>{let l;r.children.head!=null&&(l=TableCell.formats(r.children.head.domNode));const h=this.scroll.create(TableCell.blotName,l);r.appendChild(h),h.optimize()})})}cells(s){return this.rows().map(i=>i.children.at(s))}deleteColumn(s){const[i]=this.descendant(TableBody);i==null||i.children.head==null||i.children.forEach(r=>{const l=r.children.at(s);l?.remove()})}insertColumn(s){const[i]=this.descendant(TableBody);i==null||i.children.head==null||i.children.forEach(r=>{const l=r.children.at(s),h=TableCell.formats(r.children.head.domNode),m=this.scroll.create(TableCell.blotName,h);r.insertBefore(m,l)})}insertRow(s){const[i]=this.descendant(TableBody);if(i==null||i.children.head==null)return;const r=tableId(),l=this.scroll.create(TableRow.blotName);i.children.head.children.forEach(()=>{const m=this.scroll.create(TableCell.blotName,r);l.appendChild(m)});const h=i.children.at(s);i.insertBefore(l,h)}rows(){const s=this.children.head;return s==null?[]:s.children.map(i=>i)}}TableContainer.allowedChildren=[TableBody];TableBody.requiredContainer=TableContainer;TableBody.allowedChildren=[TableRow];TableRow.requiredContainer=TableBody;TableRow.allowedChildren=[TableCell];TableCell.requiredContainer=TableRow;function tableId(){return`row-${Math.random().toString(36).slice(2,6)}`}class Table extends Module{static register(){Quill.register(TableCell),Quill.register(TableRow),Quill.register(TableBody),Quill.register(TableContainer)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(TableContainer).forEach(s=>{s.balanceCells()})}deleteColumn(){const[s,,i]=this.getTable();i!=null&&(s.deleteColumn(i.cellOffset()),this.quill.update(Quill.sources.USER))}deleteRow(){const[,s]=this.getTable();s!=null&&(s.remove(),this.quill.update(Quill.sources.USER))}deleteTable(){const[s]=this.getTable();if(s==null)return;const i=s.offset();s.remove(),this.quill.update(Quill.sources.USER),this.quill.setSelection(i,Quill.sources.SILENT)}getTable(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(s==null)return[null,null,null,-1];const[i,r]=this.quill.getLine(s.index);if(i==null||i.statics.blotName!==TableCell.blotName)return[null,null,null,-1];const l=i.parent;return[l.parent.parent,l,i,r]}insertColumn(s){const i=this.quill.getSelection();if(!i)return;const[r,l,h]=this.getTable(i);if(h==null)return;const m=h.cellOffset();r.insertColumn(m+s),this.quill.update(Quill.sources.USER);let v=l.rowOffset();s===0&&(v+=1),this.quill.setSelection(i.index+v,i.length,Quill.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(s){const i=this.quill.getSelection();if(!i)return;const[r,l,h]=this.getTable(i);if(h==null)return;const m=l.rowOffset();r.insertRow(m+s),this.quill.update(Quill.sources.USER),s>0?this.quill.setSelection(i,Quill.sources.SILENT):this.quill.setSelection(i.index+l.children.length,i.length,Quill.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(s,i){const r=this.quill.getSelection();if(r==null)return;const l=new Array(s).fill(0).reduce(h=>{const m=new Array(i).fill(`
`).join("");return h.insert(m,{table:tableId()})},new Delta().retain(r.index));this.quill.updateContents(l,Quill.sources.USER),this.quill.setSelection(r.index,Quill.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Quill.events.SCROLL_OPTIMIZE,s=>{s.some(i=>["TD","TR","TBODY","TABLE"].includes(i.target.tagName)?(this.quill.once(Quill.events.TEXT_CHANGE,(r,l,h)=>{h===Quill.sources.USER&&this.balanceTables()}),!0):!1)})}}const debug=namespace("quill:toolbar");class Toolbar extends Module{constructor(s,i){if(super(s,i),Array.isArray(this.options.container)){const r=document.createElement("div");r.setAttribute("role","toolbar"),addControls(r,this.options.container),s.container?.parentNode?.insertBefore(r,s.container),this.container=r}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){debug.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(r=>{const l=this.options.handlers?.[r];l&&this.addHandler(r,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(r=>{this.attach(r)}),this.quill.on(Quill.events.EDITOR_CHANGE,()=>{const[r]=this.quill.selection.getRange();this.update(r)})}addHandler(s,i){this.handlers[s]=i}attach(s){let i=Array.from(s.classList).find(l=>l.indexOf("ql-")===0);if(!i)return;if(i=i.slice(3),s.tagName==="BUTTON"&&s.setAttribute("type","button"),this.handlers[i]==null&&this.quill.scroll.query(i)==null){debug.warn("ignoring attaching to nonexistent format",i,s);return}const r=s.tagName==="SELECT"?"change":"click";s.addEventListener(r,l=>{let h;if(s.tagName==="SELECT"){if(s.selectedIndex<0)return;const v=s.options[s.selectedIndex];v.hasAttribute("selected")?h=!1:h=v.value||!1}else s.classList.contains("ql-active")?h=!1:h=s.value||!s.hasAttribute("value"),l.preventDefault();this.quill.focus();const[m]=this.quill.selection.getRange();if(this.handlers[i]!=null)this.handlers[i].call(this,h);else if(this.quill.scroll.query(i).prototype instanceof EmbedBlot$1){if(h=prompt(`Enter ${i}`),!h)return;this.quill.updateContents(new Delta().retain(m.index).delete(m.length).insert({[i]:h}),Quill.sources.USER)}else this.quill.format(i,h,Quill.sources.USER);this.update(m)}),this.controls.push([i,s])}update(s){const i=s==null?{}:this.quill.getFormat(s);this.controls.forEach(r=>{const[l,h]=r;if(h.tagName==="SELECT"){let m=null;if(s==null)m=null;else if(i[l]==null)m=h.querySelector("option[selected]");else if(!Array.isArray(i[l])){let v=i[l];typeof v=="string"&&(v=v.replace(/"/g,'\\"')),m=h.querySelector(`option[value="${v}"]`)}m==null?(h.value="",h.selectedIndex=-1):m.selected=!0}else if(s==null)h.classList.remove("ql-active"),h.setAttribute("aria-pressed","false");else if(h.hasAttribute("value")){const m=i[l],v=m===h.getAttribute("value")||m!=null&&m.toString()===h.getAttribute("value")||m==null&&!h.getAttribute("value");h.classList.toggle("ql-active",v),h.setAttribute("aria-pressed",v.toString())}else{const m=i[l]!=null;h.classList.toggle("ql-active",m),h.setAttribute("aria-pressed",m.toString())}})}}Toolbar.DEFAULTS={};function addButton(o,s,i){const r=document.createElement("button");r.setAttribute("type","button"),r.classList.add(`ql-${s}`),r.setAttribute("aria-pressed","false"),i!=null?(r.value=i,r.setAttribute("aria-label",`${s}: ${i}`)):r.setAttribute("aria-label",s),o.appendChild(r)}function addControls(o,s){Array.isArray(s[0])||(s=[s]),s.forEach(i=>{const r=document.createElement("span");r.classList.add("ql-formats"),i.forEach(l=>{if(typeof l=="string")addButton(r,l);else{const h=Object.keys(l)[0],m=l[h];Array.isArray(m)?addSelect(r,h,m):addButton(r,h,m)}}),o.appendChild(r)})}function addSelect(o,s,i){const r=document.createElement("select");r.classList.add(`ql-${s}`),i.forEach(l=>{const h=document.createElement("option");l!==!1?h.setAttribute("value",String(l)):h.setAttribute("selected","selected"),r.appendChild(h)}),o.appendChild(r)}Toolbar.DEFAULTS={container:null,handlers:{clean(){const o=this.quill.getSelection();if(o!=null)if(o.length===0){const s=this.quill.getFormat();Object.keys(s).forEach(i=>{this.quill.scroll.query(i,Scope.INLINE)!=null&&this.quill.format(i,!1,Quill.sources.USER)})}else this.quill.removeFormat(o.index,o.length,Quill.sources.USER)},direction(o){const{align:s}=this.quill.getFormat();o==="rtl"&&s==null?this.quill.format("align","right",Quill.sources.USER):!o&&s==="right"&&this.quill.format("align",!1,Quill.sources.USER),this.quill.format("direction",o,Quill.sources.USER)},indent(o){const s=this.quill.getSelection(),i=this.quill.getFormat(s),r=parseInt(i.indent||0,10);if(o==="+1"||o==="-1"){let l=o==="+1"?1:-1;i.direction==="rtl"&&(l*=-1),this.quill.format("indent",r+l,Quill.sources.USER)}},link(o){o===!0&&(o=prompt("Enter link URL:")),this.quill.format("link",o,Quill.sources.USER)},list(o){const s=this.quill.getSelection(),i=this.quill.getFormat(s);o==="check"?i.list==="checked"||i.list==="unchecked"?this.quill.format("list",!1,Quill.sources.USER):this.quill.format("list","unchecked",Quill.sources.USER):this.quill.format("list",o,Quill.sources.USER)}}};const alignLeftIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',alignCenterIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',alignRightIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',alignJustifyIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',backgroundIcon='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquoteIcon='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',boldIcon='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',cleanIcon='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',codeIcon='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',colorIcon='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',directionLeftToRightIcon='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',directionRightToLeftIcon='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',formulaIcon='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',headerIcon='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',header2Icon='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',header3Icon='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',header4Icon='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',header5Icon='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',header6Icon='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',italicIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',imageIcon='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indentIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',outdentIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',linkIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',listBulletIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',listCheckIcon='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',listOrderedIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',subscriptIcon='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',superscriptIcon='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',strikeIcon='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',tableIcon='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underlineIcon='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',videoIcon='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Icons={align:{"":alignLeftIcon,center:alignCenterIcon,right:alignRightIcon,justify:alignJustifyIcon},background:backgroundIcon,blockquote:blockquoteIcon,bold:boldIcon,clean:cleanIcon,code:codeIcon,"code-block":codeIcon,color:colorIcon,direction:{"":directionLeftToRightIcon,rtl:directionRightToLeftIcon},formula:formulaIcon,header:{1:headerIcon,2:header2Icon,3:header3Icon,4:header4Icon,5:header5Icon,6:header6Icon},italic:italicIcon,image:imageIcon,indent:{"+1":indentIcon,"-1":outdentIcon},link:linkIcon,list:{bullet:listBulletIcon,check:listCheckIcon,ordered:listOrderedIcon},script:{sub:subscriptIcon,super:superscriptIcon},strike:strikeIcon,table:tableIcon,underline:underlineIcon,video:videoIcon},DropdownIcon='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let optionsCounter=0;function toggleAriaAttribute(o,s){o.setAttribute(s,`${o.getAttribute(s)!=="true"}`)}class Picker{constructor(s){this.select=s,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",i=>{switch(i.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),i.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),toggleAriaAttribute(this.label,"aria-expanded"),toggleAriaAttribute(this.options,"aria-hidden")}buildItem(s){const i=document.createElement("span");i.tabIndex="0",i.setAttribute("role","button"),i.classList.add("ql-picker-item");const r=s.getAttribute("value");return r&&i.setAttribute("data-value",r),s.textContent&&i.setAttribute("data-label",s.textContent),i.addEventListener("click",()=>{this.selectItem(i,!0)}),i.addEventListener("keydown",l=>{switch(l.key){case"Enter":this.selectItem(i,!0),l.preventDefault();break;case"Escape":this.escape(),l.preventDefault();break}}),i}buildLabel(){const s=document.createElement("span");return s.classList.add("ql-picker-label"),s.innerHTML=DropdownIcon,s.tabIndex="0",s.setAttribute("role","button"),s.setAttribute("aria-expanded","false"),this.container.appendChild(s),s}buildOptions(){const s=document.createElement("span");s.classList.add("ql-picker-options"),s.setAttribute("aria-hidden","true"),s.tabIndex="-1",s.id=`ql-picker-options-${optionsCounter}`,optionsCounter+=1,this.label.setAttribute("aria-controls",s.id),this.options=s,Array.from(this.select.options).forEach(i=>{const r=this.buildItem(i);s.appendChild(r),i.selected===!0&&this.selectItem(r)}),this.container.appendChild(s)}buildPicker(){Array.from(this.select.attributes).forEach(s=>{this.container.setAttribute(s.name,s.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=this.container.querySelector(".ql-selected");s!==r&&(r?.classList.remove("ql-selected"),s!=null&&(s.classList.add("ql-selected"),this.select.selectedIndex=Array.from(s.parentNode.children).indexOf(s),s.hasAttribute("data-value")?this.label.setAttribute("data-value",s.getAttribute("data-value")):this.label.removeAttribute("data-value"),s.hasAttribute("data-label")?this.label.setAttribute("data-label",s.getAttribute("data-label")):this.label.removeAttribute("data-label"),i&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let s;if(this.select.selectedIndex>-1){const r=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];s=this.select.options[this.select.selectedIndex],this.selectItem(r)}else this.selectItem(null);const i=s!=null&&s!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",i)}}class ColorPicker extends Picker{constructor(s,i){super(s),this.label.innerHTML=i,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(r=>{r.classList.add("ql-primary")})}buildItem(s){const i=super.buildItem(s);return i.style.backgroundColor=s.getAttribute("value")||"",i}selectItem(s,i){super.selectItem(s,i);const r=this.label.querySelector(".ql-color-label"),l=s&&s.getAttribute("data-value")||"";r&&(r.tagName==="line"?r.style.stroke=l:r.style.fill=l)}}class IconPicker extends Picker{constructor(s,i){super(s),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(r=>{r.innerHTML=i[r.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(s,i){super.selectItem(s,i);const r=s||this.defaultItem;if(r!=null){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}}}const isScrollable=o=>{const{overflowY:s}=getComputedStyle(o,null);return s!=="visible"&&s!=="clip"};class Tooltip{constructor(s,i){this.quill=s,this.boundsContainer=i||document.body,this.root=s.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,isScrollable(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(s){const i=s.left+s.width/2-this.root.offsetWidth/2,r=s.bottom+this.quill.root.scrollTop;this.root.style.left=`${i}px`,this.root.style.top=`${r}px`,this.root.classList.remove("ql-flip");const l=this.boundsContainer.getBoundingClientRect(),h=this.root.getBoundingClientRect();let m=0;if(h.right>l.right&&(m=l.right-h.right,this.root.style.left=`${i+m}px`),h.left<l.left&&(m=l.left-h.left,this.root.style.left=`${i+m}px`),h.bottom>l.bottom){const v=h.bottom-h.top,A=s.bottom-s.top+v;this.root.style.top=`${r-A}px`,this.root.classList.add("ql-flip")}return m}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const ALIGNS=[!1,"center","right","justify"],COLORS=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],FONTS=[!1,"serif","monospace"],HEADERS=["1","2","3",!1],SIZES=["small",!1,"large","huge"];class BaseTheme extends Theme{constructor(s,i){super(s,i);const r=l=>{if(!document.body.contains(s.root)){document.body.removeEventListener("click",r);return}this.tooltip!=null&&!this.tooltip.root.contains(l.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(h=>{h.container.contains(l.target)||h.close()})};s.emitter.listenDOM("click",document.body,r)}addModule(s){const i=super.addModule(s);return s==="toolbar"&&this.extendToolbar(i),i}buildButtons(s,i){Array.from(s).forEach(r=>{(r.getAttribute("class")||"").split(/\s+/).forEach(h=>{if(h.startsWith("ql-")&&(h=h.slice(3),i[h]!=null))if(h==="direction")r.innerHTML=i[h][""]+i[h].rtl;else if(typeof i[h]=="string")r.innerHTML=i[h];else{const m=r.value||"";m!=null&&i[h][m]&&(r.innerHTML=i[h][m])}})})}buildPickers(s,i){this.pickers=Array.from(s).map(l=>{if(l.classList.contains("ql-align")&&(l.querySelector("option")==null&&fillSelect(l,ALIGNS),typeof i.align=="object"))return new IconPicker(l,i.align);if(l.classList.contains("ql-background")||l.classList.contains("ql-color")){const h=l.classList.contains("ql-background")?"background":"color";return l.querySelector("option")==null&&fillSelect(l,COLORS,h==="background"?"#ffffff":"#000000"),new ColorPicker(l,i[h])}return l.querySelector("option")==null&&(l.classList.contains("ql-font")?fillSelect(l,FONTS):l.classList.contains("ql-header")?fillSelect(l,HEADERS):l.classList.contains("ql-size")&&fillSelect(l,SIZES)),new Picker(l)});const r=()=>{this.pickers.forEach(l=>{l.update()})};this.quill.on(Emitter.events.EDITOR_CHANGE,r)}}BaseTheme.DEFAULTS=merge({},Theme.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let o=this.container.querySelector("input.ql-image[type=file]");o==null&&(o=document.createElement("input"),o.setAttribute("type","file"),o.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),o.classList.add("ql-image"),o.addEventListener("change",()=>{const s=this.quill.getSelection(!0);this.quill.uploader.upload(s,o.files),o.value=""}),this.container.appendChild(o)),o.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class BaseTooltip extends Tooltip{constructor(s,i){super(s,i),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",s=>{s.key==="Enter"?(this.save(),s.preventDefault()):s.key==="Escape"&&(this.cancel(),s.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;i!=null?this.textbox.value=i:s!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const r=this.quill.getBounds(this.quill.selection.savedRange);r!=null&&this.position(r),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${s}`)||""),this.root.setAttribute("data-mode",s)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:s}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:i}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",s,Emitter.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",s,Emitter.sources.USER)),this.quill.root.scrollTop=i;break}case"video":s=extractVideoUrl(s);case"formula":{if(!s)break;const i=this.quill.getSelection(!0);if(i!=null){const r=i.index+i.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),s,Emitter.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(r+1," ",Emitter.sources.USER),this.quill.setSelection(r+2,Emitter.sources.USER)}break}}this.textbox.value="",this.hide()}}function extractVideoUrl(o){let s=o.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||o.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return s?`${s[1]||"https"}://www.youtube.com/embed/${s[2]}?showinfo=0`:(s=o.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${s[1]||"https"}://player.vimeo.com/video/${s[2]}/`:o}function fillSelect(o,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;s.forEach(r=>{const l=document.createElement("option");r===i?l.setAttribute("selected","selected"):l.setAttribute("value",String(r)),o.appendChild(l)})}const TOOLBAR_CONFIG$1=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class BubbleTooltip extends BaseTooltip{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(s,i){super(s,i),this.quill.on(Emitter.events.EDITOR_CHANGE,(r,l,h,m)=>{if(r===Emitter.events.SELECTION_CHANGE)if(l!=null&&l.length>0&&m===Emitter.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const v=this.quill.getLines(l.index,l.length);if(v.length===1){const A=this.quill.getBounds(l);A!=null&&this.position(A)}else{const A=v[v.length-1],d=this.quill.getIndex(A),c=Math.min(A.length()-1,l.index+l.length-d),f=this.quill.getBounds(new Range(d,c));f!=null&&this.position(f)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Emitter.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const s=this.quill.getSelection();if(s!=null){const i=this.quill.getBounds(s);i!=null&&this.position(i)}},1)})}cancel(){this.show()}position(s){const i=super.position(s),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",i!==0&&(r.style.marginLeft=`${-1*i-r.offsetWidth/2}px`),i}}class BubbleTheme extends BaseTheme{constructor(s,i){i.modules.toolbar!=null&&i.modules.toolbar.container==null&&(i.modules.toolbar.container=TOOLBAR_CONFIG$1),super(s,i),this.quill.container.classList.add("ql-bubble")}extendToolbar(s){this.tooltip=new BubbleTooltip(this.quill,this.options.bounds),s.container!=null&&(this.tooltip.root.appendChild(s.container),this.buildButtons(s.container.querySelectorAll("button"),Icons),this.buildPickers(s.container.querySelectorAll("select"),Icons))}}BubbleTheme.DEFAULTS=merge({},BaseTheme.DEFAULTS,{modules:{toolbar:{handlers:{link(o){o?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Quill.sources.USER)}}}}});const TOOLBAR_CONFIG=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class SnowTooltip extends BaseTooltip{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",s=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),s.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",s=>{if(this.linkRange!=null){const i=this.linkRange;this.restoreFocus(),this.quill.formatText(i,"link",!1,Emitter.sources.USER),delete this.linkRange}s.preventDefault(),this.hide()}),this.quill.on(Emitter.events.SELECTION_CHANGE,(s,i,r)=>{if(s!=null){if(s.length===0&&r===Emitter.sources.USER){const[l,h]=this.quill.scroll.descendant(Link,s.index);if(l!=null){this.linkRange=new Range(s.index-h,l.length());const m=Link.formats(l.domNode);this.preview.textContent=m,this.preview.setAttribute("href",m),this.show();const v=this.quill.getBounds(this.linkRange);v!=null&&this.position(v);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class SnowTheme extends BaseTheme{constructor(s,i){i.modules.toolbar!=null&&i.modules.toolbar.container==null&&(i.modules.toolbar.container=TOOLBAR_CONFIG),super(s,i),this.quill.container.classList.add("ql-snow")}extendToolbar(s){s.container!=null&&(s.container.classList.add("ql-snow"),this.buildButtons(s.container.querySelectorAll("button"),Icons),this.buildPickers(s.container.querySelectorAll("select"),Icons),this.tooltip=new SnowTooltip(this.quill,this.options.bounds),s.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(i,r)=>{s.handlers.link.call(s,!r.format.link)}))}}SnowTheme.DEFAULTS=merge({},BaseTheme.DEFAULTS,{modules:{toolbar:{handlers:{link(o){if(o){const s=this.quill.getSelection();if(s==null||s.length===0)return;let i=this.quill.getText(s);/^\S+@\S+\.\S+$/.test(i)&&i.indexOf("mailto:")!==0&&(i=`mailto:${i}`);const{tooltip:r}=this.quill.theme;r.edit("link",i)}else this.quill.format("link",!1,Quill.sources.USER)}}}}});Quill.register({"attributors/attribute/direction":DirectionAttribute,"attributors/class/align":AlignClass,"attributors/class/background":BackgroundClass,"attributors/class/color":ColorClass,"attributors/class/direction":DirectionClass,"attributors/class/font":FontClass,"attributors/class/size":SizeClass,"attributors/style/align":AlignStyle,"attributors/style/background":BackgroundStyle,"attributors/style/color":ColorStyle,"attributors/style/direction":DirectionStyle,"attributors/style/font":FontStyle,"attributors/style/size":SizeStyle},!0);Quill.register({"formats/align":AlignClass,"formats/direction":DirectionClass,"formats/indent":IndentClass,"formats/background":BackgroundStyle,"formats/color":ColorStyle,"formats/font":FontClass,"formats/size":SizeClass,"formats/blockquote":Blockquote,"formats/code-block":CodeBlock,"formats/header":Header,"formats/list":ListItem,"formats/bold":Bold,"formats/code":Code,"formats/italic":Italic,"formats/link":Link,"formats/script":Script,"formats/strike":Strike,"formats/underline":Underline,"formats/formula":Formula,"formats/image":Image$1,"formats/video":Video,"modules/syntax":Syntax,"modules/table":Table,"modules/toolbar":Toolbar,"themes/bubble":BubbleTheme,"themes/snow":SnowTheme,"ui/icons":Icons,"ui/picker":Picker,"ui/icon-picker":IconPicker,"ui/color-picker":ColorPicker,"ui/tooltip":Tooltip},!0);class ReactQuill extends React.Component{constructor(s){super(s),this.editingAreaRef=reactExports.createRef(),this.containerRef=reactExports.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(r,l,h,m)=>{r==="text-change"?this.onEditorChangeText?.(this.editor.root.innerHTML,l,m,this.unprivilegedEditor):r==="selection-change"&&this.onEditorChangeSelection?.(l,m,this.unprivilegedEditor)};const i=this.isControlled()?s.value:s.defaultValue;this.value=i??""}validateProps(s){if(React.Children.count(s.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(React.Children.count(s.children)&&React.Children.only(s.children)?.type==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&s.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(s,i){if(this.validateProps(s),!this.editor||this.state.generation!==i.generation)return!0;if("value"in s){const r=this.getEditorContents(),l=s.value??"";this.isEqualValue(l,r)||this.setEditorContents(this.editor,l)}return s.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,s.readOnly),[...this.cleanProps,...this.dirtyProps].some(r=>!isEqual$1(s[r],this.props[r]))}shouldComponentRegenerate(s){return this.dirtyProps.some(i=>!isEqual$1(s[i],this.props[i]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(s,i){if(this.editor&&this.shouldComponentRegenerate(s)){const r=this.editor.getContents(),l=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:l},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==i.generation){const{delta:r,selection:l}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const h=this.editor;h.setContents(r),postpone(()=>this.setEditorSelection(h,l))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){if(!this.editor)return;this.unhookEditor(this.editor);const s=this.props.modules?.toolbar;if(!(typeof s=="object"&&s&&"container"in s&&typeof s.container=="string"||typeof s=="string")){const r=this.containerRef.current?.querySelector(".ql-toolbar");r&&r.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(s,i){const r=new Quill(s,i);return i.tabIndex!=null&&this.setEditorTabIndex(r,i.tabIndex),this.hookEditor(r),r}hookEditor(s){this.unprivilegedEditor=this.makeUnprivilegedEditor(s),s.on("editor-change",this.onEditorChange)}unhookEditor(s){s.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(s){return s&&s.ops}isEqualValue(s,i){return this.isDelta(s)&&this.isDelta(i)?isEqual$1(s.ops,i.ops):isEqual$1(s,i)}setEditorContents(s,i){this.value=i;const r=this.getEditorSelection();typeof i=="string"?s.setContents(s.clipboard.convert({html:i})):s.setContents(i),postpone(()=>this.setEditorSelection(s,r))}setEditorSelection(s,i){if(this.selection=i,i){const r=s.getLength();i.index=Math.max(0,Math.min(i.index,r-1)),i.length=Math.max(0,Math.min(i.length,r-1-i.index)),s.setSelection(i)}}setEditorTabIndex(s,i){s?.scroll?.domNode&&(s.scroll.domNode.tabIndex=i)}setEditorReadOnly(s,i){i?s.disable():s.enable()}makeUnprivilegedEditor(s){const i=s;return{getHTML:()=>i.root.innerHTML,getSemanticHTML:i.getSemanticHTML.bind(i),getLength:i.getLength.bind(i),getText:i.getText.bind(i),getContents:i.getContents.bind(i),getSelection:i.getSelection.bind(i),getBounds:i.getBounds.bind(i)}}getEditingArea(){const s=this.editingAreaRef.current;if(!s)throw new Error("Cannot find element for editing area");if(s.nodeType===3)throw new Error("Editing area cannot be a text node");return s}renderEditingArea(){const{children:s,preserveWhitespace:i}=this.props,{generation:r}=this.state,l={key:r,ref:this.editingAreaRef};return React.Children.count(s)?React.cloneElement(React.Children.only(s),l):i?React.createElement("pre",{...l}):React.createElement("div",{...l})}render(){return React.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(s,i,r,l){if(!this.editor)return;const h=this.isDelta(this.value)?l.getContents():l.getHTML();h!==this.getEditorContents()&&(this.lastDeltaChangeSet=i,this.value=h,this.props.onChange?.(s,i,r,l))}onEditorChangeSelection(s,i,r){if(!this.editor)return;const l=this.getEditorSelection(),h=!l&&s,m=l&&!s;isEqual$1(s,l)||(this.selection=s,this.props.onChangeSelection?.(s,i,r),h?this.props.onFocus?.(s,i,r):m&&this.props.onBlur?.(l,i,r))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}ReactQuill.displayName="React Quill";ReactQuill.Quill=Quill;ReactQuill.defaultProps={theme:"snow",modules:{},readOnly:!1};function postpone(o){Promise.resolve().then(o)}const AdminSettingsPage=()=>{const[o,s]=reactExports.useState({currentPassword:"",password:"",confirmPassword:""}),[i,r]=reactExports.useState(!1),[l,h]=reactExports.useState({type:"",text:""}),[m,v]=reactExports.useState("security"),[A,d]=reactExports.useState({termsOfService:"",privacyPolicy:"",refundPolicy:""}),[c,f]=reactExports.useState(!1),[g,b]=reactExports.useState(!1),[p,j]=reactExports.useState(!1),[E,y]=reactExports.useState({type:"",text:""}),[C,B]=reactExports.useState({address:"",email:"",tel:""}),[I,N]=reactExports.useState(!1),[L,Q]=reactExports.useState([]),[tt,Z]=reactExports.useState(!1),[st,F]=reactExports.useState({title:"",description:"",file:null}),[it,Y]=reactExports.useState(!1),rt={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},lt=["header","bold","italic","underline","list","bullet","link"],U=$=>{const{name:J,value:ot}=$.target;s(yt=>({...yt,[J]:ot})),h({type:"",text:""})},P=async $=>{if($.preventDefault(),h({type:"",text:""}),o.password.length<8){h({type:"error",text:"Password must be at least 8 characters long"});return}if(o.password!==o.confirmPassword){h({type:"error",text:"Passwords do not match"});return}r(!0);try{const J=await authAPI.setAdminPassword(o.password,o.currentPassword||null);J.success?(h({type:"success",text:"Password set successfully! You can now use email/password login at /admin/login"}),s({currentPassword:"",password:"",confirmPassword:""})):h({type:"error",text:J.message||"Failed to set password"})}catch(J){h({type:"error",text:J.response?.data?.message||"Failed to set password"})}finally{r(!1)}};reactExports.useEffect(()=>{(async()=>{try{const[J,ot,yt,ut,xt,vt]=await Promise.all([settingsAPI.getByKey("terms_of_service"),settingsAPI.getByKey("privacy_policy"),settingsAPI.getByKey("refund_policy"),settingsAPI.getByKey("footer_address").catch(()=>({data:null})),settingsAPI.getByKey("footer_email").catch(()=>({data:null})),settingsAPI.getByKey("footer_tel").catch(()=>({data:null}))]);d({termsOfService:J.data?.value||"",privacyPolicy:ot.data?.value||"",refundPolicy:yt.data?.value||""}),B({address:ut.data?.value||"",email:xt.data?.value||"",tel:vt.data?.value||""})}catch(J){console.error("Error fetching settings:",J)}})()},[]),reactExports.useEffect(()=>{m==="publicDocs"&&R()},[m]);const k=$=>{d(J=>({...J,termsOfService:$})),y({type:"",text:""})},_=$=>{d(J=>({...J,privacyPolicy:$})),y({type:"",text:""})},S=async()=>{f(!0),y({type:"",text:""});try{const $=await settingsAPI.update("terms_of_service",A.termsOfService);$.success?y({type:"success",text:"Terms of Service updated successfully!"}):y({type:"error",text:$.message||"Failed to update Terms of Service"})}catch($){y({type:"error",text:$.response?.data?.message||"Failed to update Terms of Service"})}finally{f(!1)}},O=async()=>{b(!0),y({type:"",text:""});try{const $=await settingsAPI.update("privacy_policy",A.privacyPolicy);$.success?y({type:"success",text:"Privacy Policy updated successfully!"}):y({type:"error",text:$.message||"Failed to update Privacy Policy"})}catch($){y({type:"error",text:$.response?.data?.message||"Failed to update Privacy Policy"})}finally{b(!1)}},H=$=>{d(J=>({...J,refundPolicy:$})),y({type:"",text:""})},G=async()=>{j(!0),y({type:"",text:""});try{const $=await settingsAPI.update("refund_policy",A.refundPolicy);$.success?y({type:"success",text:"Refund Policy updated successfully!"}):y({type:"error",text:$.message||"Failed to update Refund Policy"})}catch($){y({type:"error",text:$.response?.data?.message||"Failed to update Refund Policy"})}finally{j(!1)}},K=($,J)=>{B(ot=>({...ot,[$]:J})),y({type:"",text:""})},q=async()=>{N(!0),y({type:"",text:""});try{await Promise.all([settingsAPI.update("footer_address",C.address),settingsAPI.update("footer_email",C.email),settingsAPI.update("footer_tel",C.tel)]),y({type:"success",text:"Footer settings updated successfully!"})}catch($){y({type:"error",text:$.response?.data?.message||"Failed to update footer settings"})}finally{N(!1)}},R=async()=>{try{Z(!0);const $=await publicDocumentsAPI.getAll();$.success&&Q($.data)}catch($){console.error("Error fetching public documents:",$)}finally{Z(!1)}},M=$=>{const J=$.target.files[0];J&&J.type==="application/pdf"?(F(ot=>({...ot,file:J})),y({type:"",text:""})):y({type:"error",text:"Only PDF files are allowed"})},D=async $=>{if($.preventDefault(),!st.title||!st.file){y({type:"error",text:"Title and file are required"});return}Y(!0),y({type:"",text:""});try{const J=new FormData;J.append("title",st.title),J.append("description",st.description),J.append("file",st.file),(await publicDocumentsAPI.upload(J)).success&&(y({type:"success",text:"Document uploaded successfully!"}),F({title:"",description:"",file:null}),document.getElementById("fileInput").value="",await R())}catch(J){y({type:"error",text:J.response?.data?.message||"Failed to upload document"})}finally{Y(!1)}},V=$=>{const J=`${window.location.origin}/public/${$}`;navigator.clipboard.writeText(J),y({type:"success",text:"Link copied to clipboard!"}),setTimeout(()=>y({type:"",text:""}),3e3)},W=async $=>{if(confirm("Are you sure you want to delete this document?"))try{(await publicDocumentsAPI.delete($)).success&&(y({type:"success",text:"Document deleted successfully!"}),await R())}catch(J){y({type:"error",text:J.response?.data?.message||"Failed to delete document"})}};return jsxRuntimeExports.jsx("div",{className:"p-8 overflow-y-auto h-screen",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account settings and preferences"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 border-b border-gray-200 mb-6",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>v("security"),className:`flex items-center gap-2 px-6 py-3 font-semibold transition-all duration-200 border-b-2 ${m==="security"?"border-[#B12417] text-[#B12417]":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Security"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>v("legal"),className:`flex items-center gap-2 px-6 py-3 font-semibold transition-all duration-200 border-b-2 ${m==="legal"?"border-[#B12417] text-[#B12417]":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Legal Documents"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>v("footer"),className:`flex items-center gap-2 px-6 py-3 font-semibold transition-all duration-200 border-b-2 ${m==="footer"?"border-[#B12417] text-[#B12417]":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Footer"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>v("publicDocs"),className:`flex items-center gap-2 px-6 py-3 font-semibold transition-all duration-200 border-b-2 ${m==="publicDocs"?"border-[#B12417] text-[#B12417]":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Public Documents"]})]}),m==="security"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Security"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Set or update your password for email/password login"})]}),jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsxs("form",{onSubmit:P,className:"space-y-6",children:[l.text&&jsxRuntimeExports.jsx("div",{className:`px-4 py-3 rounded-lg text-sm ${l.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:l.text}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"About Password Login"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Setting a password will allow you to login using email/password at ",jsxRuntimeExports.jsx("span",{className:"font-mono",children:"/admin/login"}),". You can still continue using Google login as well."]})]})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password *"}),jsxRuntimeExports.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:o.currentPassword,onChange:U,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter current password",disabled:i})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password *"}),jsxRuntimeExports.jsx("input",{type:"password",id:"password",name:"password",value:o.password,onChange:U,required:!0,minLength:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Enter new password (min 8 characters)",disabled:i})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),jsxRuntimeExports.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:o.confirmPassword,onChange:U,required:!0,minLength:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Confirm your password",disabled:i})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-end gap-4 pt-4",children:jsxRuntimeExports.jsx("button",{type:"submit",disabled:i,className:"px-6 py-3 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm hover:shadow-md",children:i?jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Setting Password..."]}):"Set Password"})})]})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Password Requirements:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[jsxRuntimeExports.jsx("li",{children:"Minimum 8 characters long"}),jsxRuntimeExports.jsx("li",{children:"Both passwords must match"}),jsxRuntimeExports.jsx("li",{children:"Choose a strong, unique password"})]})]})]}),m==="legal"&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Legal Documents"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage Terms of Service, Privacy Policy, and Refund Policy content"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-8",children:[E.text&&jsxRuntimeExports.jsx("div",{className:`px-4 py-3 rounded-lg text-sm ${E.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:E.text}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"termsOfService",className:"block text-sm font-medium text-gray-700 mb-2",children:"Terms of Service"}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-300",children:jsxRuntimeExports.jsx(ReactQuill,{theme:"snow",value:A.termsOfService,onChange:k,modules:rt,formats:lt,placeholder:"Enter Terms of Service content...",readOnly:c,className:"min-h-[300px]"})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use the toolbar above to format your content - headings, bold, lists, etc."}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:S,disabled:c,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm hover:shadow-md",children:c?"Saving...":"Save Terms of Service"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"privacyPolicy",className:"block text-sm font-medium text-gray-700 mb-2",children:"Privacy Policy"}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-300",children:jsxRuntimeExports.jsx(ReactQuill,{theme:"snow",value:A.privacyPolicy,onChange:_,modules:rt,formats:lt,placeholder:"Enter Privacy Policy content...",readOnly:g,className:"min-h-[300px]"})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use the toolbar above to format your content - headings, bold, lists, etc."}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:O,disabled:g,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm hover:shadow-md",children:g?"Saving...":"Save Privacy Policy"})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"refundPolicy",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refund Policy"}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg border border-gray-300",children:jsxRuntimeExports.jsx(ReactQuill,{theme:"snow",value:A.refundPolicy,onChange:H,modules:rt,formats:lt,placeholder:"Enter Refund Policy content...",readOnly:p,className:"min-h-[300px]"})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Use the toolbar above to format your content - headings, bold, lists, etc."}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:G,disabled:p,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm hover:shadow-md",children:p?"Saving...":"Save Refund Policy"})})]})]})]}),m==="footer"&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Footer Settings"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage footer contact information displayed on the landing page"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[E.text&&jsxRuntimeExports.jsx("div",{className:`px-4 py-3 rounded-lg text-sm ${E.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:E.text}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"footerAddress",className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),jsxRuntimeExports.jsx("textarea",{id:"footerAddress",rows:"3",value:C.address,onChange:$=>K("address",$.target.value),placeholder:"Enter company address...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Company address displayed in the footer"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"footerEmail",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",id:"footerEmail",value:C.email,onChange:$=>K("email",$.target.value),placeholder:"contact@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact email displayed in the footer"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"footerTel",className:"block text-sm font-medium text-gray-700 mb-2",children:"Telephone"}),jsxRuntimeExports.jsx("input",{type:"tel",id:"footerTel",value:C.tel,onChange:$=>K("tel",$.target.value),placeholder:"+971 4 2288006",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contact telephone number displayed in the footer"})]}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsx("button",{type:"button",onClick:q,disabled:I,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm hover:shadow-md",children:I?"Saving...":"Save Footer Settings"})})]})]}),m==="publicDocs"&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Public Documents"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Upload documents and generate public shareable links"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-8",children:[E.text&&jsxRuntimeExports.jsx("div",{className:`px-4 py-3 rounded-lg text-sm ${E.type==="success"?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:E.text}),jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload New Document"}),jsxRuntimeExports.jsxs("form",{onSubmit:D,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"docTitle",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),jsxRuntimeExports.jsx("input",{type:"text",id:"docTitle",value:st.title,onChange:$=>F(J=>({...J,title:$.target.value})),placeholder:"Enter document title...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"docDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),jsxRuntimeExports.jsx("textarea",{id:"docDescription",value:st.description,onChange:$=>F(J=>({...J,description:$.target.value})),placeholder:"Enter document description...",rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"fileInput",className:"block text-sm font-medium text-gray-700 mb-2",children:"PDF File *"}),jsxRuntimeExports.jsx("input",{type:"file",id:"fileInput",onChange:M,accept:"application/pdf",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only PDF files are allowed (max 50MB)"})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:it,className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors shadow-sm hover:shadow-md",children:it?"Uploading...":"Upload Document"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Uploaded Documents"}),tt?jsxRuntimeExports.jsx("div",{className:"text-center py-8",children:jsxRuntimeExports.jsx("div",{className:"inline-block w-8 h-8 border-4 border-gray-200 border-t-red-600 rounded-full animate-spin"})}):L.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500",children:"No public documents uploaded yet"}):jsxRuntimeExports.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Created"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),jsxRuntimeExports.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map($=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50",children:[jsxRuntimeExports.jsx("td",{className:"px-4 py-4",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900",children:$.title}),$.description&&jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500 mt-1",children:$.description})]})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:new Date($.created_at).toLocaleDateString()}),jsxRuntimeExports.jsx("td",{className:"px-4 py-4",children:jsxRuntimeExports.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:$.is_active?"Active":"Inactive"})}),jsxRuntimeExports.jsx("td",{className:"px-4 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>V($.public_token),className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",title:"Copy public link",children:"Copy Link"}),jsxRuntimeExports.jsx("button",{onClick:()=>W($.id),className:"px-3 py-1.5 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors",title:"Delete document",children:"Delete"})]})})]},$.id))})]})})]})]})]})]})})},UserDashboard=()=>{const{user:o}=useAuth(),s=useNavigate();return reactExports.useEffect(()=>{s("/subscription")},[s]),jsxRuntimeExports.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Redirecting to subscription..."})})})};var RELEASE_TRAIN="clover",runtimeVersionToUrlVersion=function(s){return s===3?"v3":s},ORIGIN="https://js.stripe.com",STRIPE_JS_URL="".concat(ORIGIN,"/").concat(RELEASE_TRAIN,"/stripe.js"),V3_URL_REGEX=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,STRIPE_JS_URL_REGEX=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,EXISTING_SCRIPT_MESSAGE="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",isStripeJSURL=function(s){return V3_URL_REGEX.test(s)||STRIPE_JS_URL_REGEX.test(s)},findScript=function(){for(var s=document.querySelectorAll('script[src^="'.concat(ORIGIN,'"]')),i=0;i<s.length;i++){var r=s[i];if(isStripeJSURL(r.src))return r}return null},injectScript=function(s){var i="",r=document.createElement("script");r.src="".concat(STRIPE_JS_URL).concat(i);var l=document.head||document.body;if(!l)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return l.appendChild(r),r},registerWrapper=function(s,i){!s||!s._registerWrapper||s._registerWrapper({name:"stripe-js",version:"8.5.3",startTime:i})},stripePromise$1=null,onErrorListener=null,onLoadListener=null,onError=function(s){return function(i){s(new Error("Failed to load Stripe.js",{cause:i}))}},onLoad=function(s,i){return function(){window.Stripe?s(window.Stripe):i(new Error("Stripe.js not available"))}},loadScript=function(s){return stripePromise$1!==null?stripePromise$1:(stripePromise$1=new Promise(function(i,r){if(typeof window>"u"||typeof document>"u"){i(null);return}if(window.Stripe){i(window.Stripe);return}try{var l=findScript();if(!(l&&s)){if(!l)l=injectScript(s);else if(l&&onLoadListener!==null&&onErrorListener!==null){var h;l.removeEventListener("load",onLoadListener),l.removeEventListener("error",onErrorListener),(h=l.parentNode)===null||h===void 0||h.removeChild(l),l=injectScript(s)}}onLoadListener=onLoad(i,r),onErrorListener=onError(r),l.addEventListener("load",onLoadListener),l.addEventListener("error",onErrorListener)}catch(m){r(m);return}}),stripePromise$1.catch(function(i){return stripePromise$1=null,Promise.reject(i)}))},initStripe=function(s,i,r){if(s===null)return null;var l=i[0],h=l.match(/^pk_test/),m=runtimeVersionToUrlVersion(s.version),v=RELEASE_TRAIN;h&&m!==v&&console.warn("Stripe.js@".concat(m," was loaded on the page, but @stripe/stripe-js@").concat("8.5.3"," expected Stripe.js@").concat(v,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var A=s.apply(void 0,i);return registerWrapper(A,r),A},stripePromise,loadCalled=!1,getStripePromise=function(){return stripePromise||(stripePromise=loadScript(null).catch(function(s){return stripePromise=null,Promise.reject(s)}),stripePromise)};Promise.resolve().then(function(){return getStripePromise()}).catch(function(o){loadCalled||console.warn(o)});var loadStripe=function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];loadCalled=!0;var l=Date.now();return getStripePromise().then(function(h){return initStripe(h,i,l)})};loadStripe("pk_live_51M7JHVDNv7aryjo3fufcb7wyfo7QDGrXP1Dx7TVUNZ0kSKQ0JvQBfK3Lf89cdzUaPeqiS5BVkjXaro0YW8iAcq9T00DgQExh3X");const Subscription=()=>{const{user:o}=useAuth(),s=useNavigate(),[i,r]=reactExports.useState(!1),[l,h]=reactExports.useState(!1),[m,v]=reactExports.useState(!0),[A,d]=reactExports.useState(null);reactExports.useEffect(()=>{g(),c(),f()},[]);const c=async()=>{try{const p=await settingsAPI.getPublicByKey("lifetime_subscription_price");p.success&&p.data&&d(p.data.value)}catch(p){console.error("Error fetching price:",p)}},f=async()=>{const p=new URLSearchParams(window.location.search),j=p.get("session_id"),E=p.get("status");if(j&&E==="cancelled")try{const y=await paymentsAPI.verifyPayment(j);window.history.replaceState({},"","/subscription")}catch(y){console.error("Error handling cancelled payment:",y)}},g=async()=>{try{const p=await usersAPI.getPurchases();p.success&&p.data&&h(p.data.length>0)}catch(p){console.error("Error checking subscription:",p)}finally{v(!1)}},b=async()=>{r(!0);try{const p=await paymentsAPI.createCheckout();if(p.success&&p.data?.checkoutUrl)window.location.href=p.data.checkoutUrl;else throw new Error(p.message||"Failed to create checkout session")}catch(p){console.error("Payment error:",p),alert("Payment failed: "+(p.message||"Please try again")),r(!1)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-[#B12417] via-[#9a1f13] to-[#821a10] px-4 py-10 md:py-12 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/20"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-[#B12417]/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-1/4 w-72 h-72 bg-[#9a1f13]/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 mx-auto max-w-7xl text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20",children:jsxRuntimeExports.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl lg:text-5xl",children:"Unlock Premium Access"}),jsxRuntimeExports.jsx("p",{className:"mx-auto mt-4 max-w-2xl text-lg leading-8 text-white/90",children:"Get lifetime access to all purchased documents and resources"})]})]}),jsxRuntimeExports.jsxs("div",{className:"relative -mt-12 mx-auto max-w-4xl px-4 sm:px-6 lg:px-8 pb-16",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl border-2 border-white/20 shadow-2xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-[#B12417] to-[#9a1f13] text-white py-3 px-6 text-center",children:jsxRuntimeExports.jsx("p",{className:"text-sm font-semibold",children:"One-Time Payment  Lifetime Access  No Recurring Fees"})}),jsxRuntimeExports.jsxs("div",{className:"p-8 sm:p-12",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-10",children:[jsxRuntimeExports.jsxs("div",{className:"inline-block bg-gradient-to-r from-[#B12417] to-[#9a1f13] rounded-2xl px-8 py-6 mb-6",children:[jsxRuntimeExports.jsx("div",{className:"text-5xl sm:text-6xl font-bold text-white mb-2",children:A?`$${A}`:"$00.00"}),jsxRuntimeExports.jsx("div",{className:"text-white/90 text-lg",children:"One-time payment"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-lg",children:"Lifetime access  No hidden fees"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Comprehensive guide"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Step by Step Process, Documentation & Compliance for Launching Businesses in UAE"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Consultative approach"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 text-sm",children:["Information for Awareness and",jsxRuntimeExports.jsx("br",{}),"Risk Mitigation"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Handy Reckoner"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Go to Tool for informed decision making"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Loaded with Simplicity"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Easy to understand format"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Regular updates"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Access relevant and updated information"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Secure Document Access"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm",children:"Password based access, non-editable files"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:m?jsxRuntimeExports.jsx("div",{className:"flex justify-center py-8",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-full border-4 border-red-200 border-t-red-600 animate-spin"})}):l?jsxRuntimeExports.jsx("div",{className:"space-y-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-green-900 mb-2",children:"You're Already Subscribed!"}),jsxRuntimeExports.jsx("p",{className:"text-green-700 mb-6",children:"You have lifetime access to all premium documents"}),jsxRuntimeExports.jsx("button",{onClick:()=>s("/documents"),className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform hover:scale-105 shadow-lg",children:"View All Documents "})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:b,disabled:i,className:`w-full font-bold py-4 px-6 rounded-xl text-lg transition-all duration-300 transform shadow-lg ${i?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-[#B12417] to-[#9a1f13] hover:from-[#9a1f13] hover:to-[#821a10] hover:scale-105 hover:shadow-xl text-white"}`,children:i?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),jsxRuntimeExports.jsx("span",{children:"Processing..."})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),jsxRuntimeExports.jsx("span",{children:"Pay with Stripe"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500 pt-4",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),jsxRuntimeExports.jsx("span",{children:"Secure Payment  SSL Encrypted"})]})]})}),jsxRuntimeExports.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200",children:jsxRuntimeExports.jsxs("p",{className:"text-center text-gray-600",children:["Logged in as: ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900",children:o?.email})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-12 grid grid-cols-3 gap-6 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-gray-900",children:"1000+"}),jsxRuntimeExports.jsx("div",{className:"text-gray-600 text-sm",children:"Happy Customers"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-gray-900",children:"50+"}),jsxRuntimeExports.jsx("div",{className:"text-gray-600 text-sm",children:"Documents"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-gray-900",children:"100%"}),jsxRuntimeExports.jsx("div",{className:"text-gray-600 text-sm",children:"Satisfaction"})]})]})]})]})},Documents=()=>{const o=useNavigate(),{user:s,loading:i}=useAuth(),[r,l]=reactExports.useState([]),[h,m]=reactExports.useState([]),[v,A]=reactExports.useState(null),[d,c]=reactExports.useState([]),[f,g]=reactExports.useState(!0),[b,p]=reactExports.useState(null),[j,E]=reactExports.useState(""),[y,C]=reactExports.useState(!1),[B,I]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{if(!i){if(!s){g(!1);return}try{if(s.role==="admin"){await L();return}if(!s.profile_completed){o("/profile-completion");return}const U=new URLSearchParams(window.location.search).get("session_id");if(U){C(!0);try{const k=await paymentsAPI.verifyPayment(U);if(C(!1),k.success){window.history.replaceState({},"","/documents"),await L();return}else console.warn(" Payment verification returned unsuccessful:",k.message),p("Payment verification was unsuccessful: "+k.message)}catch(k){console.error(" Exception calling verify payment API:",k),C(!1),p("Failed to verify payment: "+k.message)}}const P=await usersAPI.getPurchases();P.success&&P.data&&P.data.length>0?await L():o("/subscription")}catch(rt){console.error(" Error checking payment:",rt),p(rt.message),g(!1)}}})()},[s,i,o]);const N=async()=>{try{const Y=await foldersAPI.getTree();Y.success&&Y.data&&m(Y.data)}catch(Y){console.error("Error fetching folders:",Y)}},L=async()=>{try{g(!0),p(null);const Y=await documentsAPI.getAll(v);if(Y.success&&Y.data)l(Y.data);else throw new Error(Y.message||"Failed to fetch documents")}catch(Y){console.error("Error fetching documents:",Y),p(Y.message||"Failed to load documents. Please try again.")}finally{g(!1)}},Q=async()=>{if(!v){c([]);return}try{const Y=await foldersAPI.getPath(v);Y.success&&Y.data&&c(Y.data)}catch(Y){console.error("Error fetching folder path:",Y)}};reactExports.useEffect(()=>{s&&!i&&N()},[s,i]),reactExports.useEffect(()=>{s&&!i&&!y&&(L(),Q())},[v]);const tt=Y=>{o(`/documents/${Y.id}`)},Z=Y=>new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),st=Y=>{switch(Y?.split(".").pop()?.toLowerCase()){case"pdf":return jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-[#B12417]/10 rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-[#B12417]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})});case"doc":case"docx":return jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-[#2B266F]/10 rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-[#2B266F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})});default:return jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}},F=r.filter(Y=>Y.title.toLowerCase().includes(j.toLowerCase())||Y.description?.toLowerCase().includes(j.toLowerCase())),it=Y=>{A(Y?.id||null)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-[#B12417] via-[#9a1f13] to-[#821a10] px-4 py-4 sm:py-6 md:py-8 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/20"}),jsxRuntimeExports.jsxs("div",{className:"relative mx-auto max-w-7xl",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>o("/"),className:"flex items-center space-x-2 text-white/90 hover:text-white transition-all duration-300 group mb-3 md:mb-4 md:absolute md:top-0 md:left-0",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 md:w-6 md:h-6 transform group-hover:-translate-x-1 transition-transform duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),jsxRuntimeExports.jsx("span",{className:"text-sm md:text-base font-medium",children:"Back"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-3 md:mb-4",children:jsxRuntimeExports.jsx("div",{className:"p-2 md:p-3 bg-white/10 backdrop-blur-sm rounded-xl md:rounded-2xl border border-white/20",children:jsxRuntimeExports.jsx("svg",{className:"w-7 h-7 md:w-10 md:h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white sm:text-3xl md:text-4xl lg:text-5xl",children:"Document Library"}),jsxRuntimeExports.jsx("p",{className:"mx-auto mt-2 md:mt-4 max-w-2xl text-sm md:text-base lg:text-lg leading-6 md:leading-8 text-white/90 px-4",children:"Your secure document collection awaits. Access premium content with complete privacy and security."})]})]}),jsxRuntimeExports.jsx("div",{className:"hidden md:block absolute top-0 left-1/4 w-72 h-72 bg-[#B12417]/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"hidden md:block absolute bottom-0 right-1/4 w-72 h-72 bg-[#9a1f13]/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"})]}),jsxRuntimeExports.jsx("div",{className:"relative mt-4 md:mt-2 lg:-mt-4 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 mb-6 md:mb-8",children:jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-[#2B266F] to-[#211d57] text-white rounded-xl md:rounded-2xl p-4 md:p-6 shadow-xl border border-white/20 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 bg-white/20 rounded-lg md:rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("div",{className:"ml-3 md:ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-base md:text-lg font-semibold",children:"Access Granted!"}),jsxRuntimeExports.jsx("p",{className:"text-sm md:text-base text-white/90",children:"You now have full access to all premium documents with complete security protection."})]})]})})}),jsxRuntimeExports.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pb-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[B&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden transition-opacity duration-300",onClick:()=>I(!1)}),jsxRuntimeExports.jsx("div",{className:`
            ${B?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            fixed lg:sticky top-0 left-0 h-screen lg:h-auto z-50 lg:z-0
            w-80 max-w-[85vw] lg:w-64
            lg:flex-shrink-0 lg:top-4
            transition-transform duration-300 ease-in-out
            ${B?"":"lg:w-0 lg:hidden"}
          `,children:(B||window.innerWidth>=1024)&&jsxRuntimeExports.jsxs("div",{className:"h-full lg:h-auto bg-white lg:bg-white/80 lg:backdrop-blur-sm rounded-none lg:rounded-2xl border-r lg:border border-gray-200 lg:border-white/20 shadow-2xl lg:shadow-xl p-4 overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-base lg:text-sm font-semibold text-gray-900",children:"Browse by Folder"}),jsxRuntimeExports.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close folder browser",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),jsxRuntimeExports.jsx("div",{className:"max-h-[calc(100vh-120px)] lg:max-h-[600px] overflow-y-auto",children:jsxRuntimeExports.jsx(FolderTree,{folders:h,selectedId:v,onSelect:it,readOnly:!0,showRoot:!0})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl md:rounded-3xl border border-white/20 shadow-xl p-4 md:p-6 mb-6 md:mb-8",children:[d.length>0&&jsxRuntimeExports.jsxs("nav",{className:"flex items-center space-x-2 text-xs md:text-sm text-gray-600 mb-4 pb-4 border-b border-gray-200 overflow-x-auto",children:[jsxRuntimeExports.jsx("button",{onClick:()=>A(null),className:"hover:text-gray-900 transition-colors flex-shrink-0",children:"All Documents"}),d.map((Y,rt)=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 md:w-4 md:h-4 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-900 truncate max-w-[120px] md:max-w-none",children:Y.name})]},Y.id))]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search documents...",value:j,onChange:Y=>E(Y.target.value),className:"block w-full pl-10 pr-3 py-2.5 md:py-3 border border-gray-300 rounded-lg md:rounded-xl text-sm md:text-base leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all duration-300"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between sm:justify-end space-x-2",children:jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[F.length," documents"]})})]})]}),i||f||y?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-16",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-[#B12417]/20 border-t-[#B12417] animate-spin"}),jsxRuntimeExports.jsxs("div",{className:"mt-4 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 font-medium",children:i?"Authenticating...":y?"Verifying payment...":"Loading your documents..."}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:i?"Verifying your session":y?"Please wait while we confirm your payment (this may take a few seconds)":"Please wait while we fetch your secure content"})]})]})}):b?jsxRuntimeExports.jsx("div",{className:"text-center py-16",children:jsxRuntimeExports.jsxs("div",{className:"bg-[#B12417]/5 backdrop-blur-sm rounded-3xl border-2 border-[#B12417]/20 shadow-xl p-12 max-w-2xl mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-[#B12417]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:jsxRuntimeExports.jsx("svg",{className:"w-10 h-10 text-[#B12417]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Unable to Load Documents"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 mb-2 font-medium",children:b}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"This might be because the documents table hasn't been set up yet in your database."}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{onClick:L,className:"bg-gradient-to-r from-[#B12417] to-[#9a1f13] hover:from-[#9a1f13] hover:to-[#821a10] text-white font-semibold py-3 px-8 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Try Again"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"If this error persists, please contact your administrator"})]})]})}):F.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-16",children:jsxRuntimeExports.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl border border-white/20 shadow-xl p-12",children:[jsxRuntimeExports.jsx("svg",{className:"w-20 h-20 text-gray-300 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"No Documents Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:j?"No documents match your search criteria.":"Documents will appear here once uploaded by administrators."}),j&&jsxRuntimeExports.jsx("button",{onClick:()=>E(""),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105",children:"Clear Search"})]})}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:F.map((Y,rt)=>jsxRuntimeExports.jsxs("div",{onClick:()=>tt(Y),className:"group relative bg-white/80 backdrop-blur-sm rounded-xl md:rounded-2xl border border-white/20 shadow-lg hover:shadow-2xl md:hover:scale-105 md:hover:-translate-y-2 active:scale-98 transition-all duration-300 cursor-pointer",style:{animationDelay:`${rt*100}ms`},children:[jsxRuntimeExports.jsxs("div",{className:"p-4 md:p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[st(Y.file_name),jsxRuntimeExports.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-all duration-300",children:jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-[#2B266F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]}),jsxRuntimeExports.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-2 group-hover:text-[#211d57] transition-colors duration-300 line-clamp-2",children:Y.title}),Y.description&&jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-3 sm:mb-4 line-clamp-2 sm:line-clamp-3",children:Y.description}),jsxRuntimeExports.jsxs("div",{className:"border-t border-gray-100 pt-3 sm:pt-4 mt-3 sm:mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"sm:hidden space-y-2",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-end",children:jsxRuntimeExports.jsx("div",{className:"px-2 py-1 bg-[#B12417]/10 text-[#9a1f13] text-xs rounded-full font-medium",children:"Premium"})}),jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-400",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),jsxRuntimeExports.jsx("span",{children:"Secure View"})]})})]}),jsxRuntimeExports.jsxs("div",{className:"hidden sm:block",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a1 1 0 011-1h6a1 1 0 011 1v4M3 21h18M5 21l1-14h12l1 14"})}),jsxRuntimeExports.jsx("span",{children:Z(Y.created_at)})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-400",children:[jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),jsxRuntimeExports.jsx("span",{children:"Secure View"})]}),jsxRuntimeExports.jsx("div",{className:"px-2 py-1 bg-[#B12417]/10 text-[#9a1f13] text-xs rounded-full font-medium",children:"Premium"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-300"})]},Y.id))})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>I(!0),className:"fixed bottom-6 right-6 z-30 lg:hidden p-4 bg-gradient-to-r from-red-600 to-red-700 text-white rounded-full shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-110 active:scale-95","aria-label":"Open folder browser",children:jsxRuntimeExports.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})})]})]})},SecurityContext=reactExports.createContext({}),SecurityProvider=({children:o})=>{const{user:s}=useAuth(),i=reactExports.useRef(0);reactExports.useEffect(()=>{if(s)return r(),l(),h(),m(),()=>{}},[s]);const r=()=>{const d=c=>{if(c.keyCode===123||c.key==="F12")return c.preventDefault(),c.stopPropagation(),v("F12 developer tools blocked"),!1;if(c.ctrlKey&&c.shiftKey&&(c.keyCode===73||c.key==="I"))return c.preventDefault(),c.stopPropagation(),v("Inspector shortcut blocked"),!1;if(c.ctrlKey&&c.shiftKey&&(c.keyCode===74||c.key==="J"))return c.preventDefault(),c.stopPropagation(),v("Console shortcut blocked"),!1;if(c.ctrlKey&&(c.keyCode===85||c.key==="u"||c.key==="U"))return c.preventDefault(),c.stopPropagation(),v("View source blocked"),!1;if(c.ctrlKey&&c.shiftKey&&(c.keyCode===67||c.key==="C"))return c.preventDefault(),c.stopPropagation(),v("Element inspector blocked"),!1;if((c.ctrlKey||c.metaKey)&&["a","c","v","x","s","p","z","y","f","h","r"].includes(c.key.toLowerCase()))return c.preventDefault(),c.stopPropagation(),v(`Keyboard shortcut Ctrl+${c.key} blocked`),!1;if(c.key.startsWith("F")&&c.key.length>1)return c.preventDefault(),c.stopPropagation(),v(`Function key ${c.key} blocked`),!1};document.addEventListener("keydown",d,!0),document.addEventListener("keyup",d,!0),document.addEventListener("keypress",d,!0)},l=()=>{const d=f=>{if(f.keyCode===44||f.which===44||f.code==="PrintScreen"||f.key==="PrintScreen")return f.preventDefault(),f.stopPropagation(),f.stopImmediatePropagation(),v("Screenshot attempt blocked"),!1;if((f.metaKey||f.key==="Meta")&&(f.keyCode===44||f.code==="PrintScreen"))return f.preventDefault(),f.stopPropagation(),v("Windows screenshot blocked"),!1;if(f.altKey&&(f.keyCode===44||f.code==="PrintScreen"))return f.preventDefault(),f.stopPropagation(),v("Window screenshot blocked"),!1;if((f.metaKey||f.key==="Meta")&&f.shiftKey&&(f.key==="S"||f.key==="s"))return f.preventDefault(),f.stopPropagation(),v("Snipping tool blocked"),!1};document.addEventListener("keydown",d,!0),document.addEventListener("keyup",d,!0);const c=document.createElement("style");c.textContent=`
      .security-protected * {
        -webkit-user-select: none !important;
        -moz-user-select: none !important;
        -ms-user-select: none !important;
        user-select: none !important;
        -webkit-touch-callout: none !important;
        -webkit-tap-highlight-color: transparent !important;
        -webkit-user-drag: none !important;
        -webkit-app-region: no-drag !important;
      }
    `,document.head.appendChild(c)},h=()=>{const d=c=>(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),v("Context menu blocked"),!1);document.addEventListener("contextmenu",d,!0),document.addEventListener("selectstart",d,!0),document.addEventListener("dragstart",d,!0)},m=()=>{document.addEventListener("selectstart",d=>(d.preventDefault(),!1),!0),document.addEventListener("dragstart",d=>(d.preventDefault(),!1),!0),document.addEventListener("mousedown",d=>{if(d.detail>1)return d.preventDefault(),!1},!0)},v=d=>{i.current++,console.warn(` 4CSecure: ${d}`)},A={securityViolations:i.current,logSecurityViolation:v};return jsxRuntimeExports.jsx(SecurityContext.Provider,{value:A,children:jsxRuntimeExports.jsx("div",{className:"security-protected",children:o})})};function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(s,i){module.exports=s.pdfjsLib=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,((o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.TextRenderingMode=s.RenderingIntentFlag=s.PromiseCapability=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.MAX_IMAGE_SIZE_TO_CACHE=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.BASELINE_FACTOR=s.AnnotationType=s.AnnotationReplyType=s.AnnotationPrefix=s.AnnotationMode=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.assert=_,s.bytesToString=$,s.createValidAbsoluteUrl=O,s.getModificationDate=ue,s.getUuid=Nn,s.getVerbosityLevel=lt,s.info=U,s.isArrayBuffer=Vt,s.isArrayEqual=Te,s.isNodeJS=void 0,s.normalizeUnicode=Vs,s.objectFromMap=ut,s.objectSize=yt,s.setVerbosityLevel=rt,s.shadow=H,s.string32=ot,s.stringToBytes=J,s.stringToPDFString=Dt,s.stringToUTF8String=Pt,s.unreachable=k,s.utf8StringToString=kt,s.warn=P;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=i;const r=[1,0,0,1,0,0];s.IDENTITY_MATRIX=r;const l=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=l;const h=1e7;s.MAX_IMAGE_SIZE_TO_CACHE=h;const m=1.35;s.LINE_FACTOR=m;const v=.35;s.LINE_DESCENT_FACTOR=v;const A=v/m;s.BASELINE_FACTOR=A;const d={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=d;const c={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=c;const f="pdfjs_internal_editor_";s.AnnotationEditorPrefix=f;const g={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};s.AnnotationEditorType=g;const b={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};s.AnnotationEditorParamsType=b;const p={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=p;const j={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=j;const E={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=E;const y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=y;const C={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=C;const B={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=B;const I={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=I;const N={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=N;const L={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=L;const Q={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=Q;const tt={O:"PageOpen",C:"PageClose"};s.PageActionEventType=tt;const Z={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=Z;const st={NONE:0,BINARY:1};s.CMapCompressionType=st;const F={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=F;const it={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=it;let Y=Z.WARNINGS;function rt(Rt){Number.isInteger(Rt)&&(Y=Rt)}function lt(){return Y}function U(Rt){Y>=Z.INFOS&&console.log(`Info: ${Rt}`)}function P(Rt){Y>=Z.WARNINGS&&console.log(`Warning: ${Rt}`)}function k(Rt){throw new Error(Rt)}function _(Rt,ht){Rt||k(ht)}function S(Rt){switch(Rt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function O(Rt,ht=null,ct=null){if(!Rt)return null;try{if(ct&&typeof Rt=="string"&&(ct.addDefaultProtocol&&Rt.startsWith("www.")&&Rt.match(/\./g)?.length>=2&&(Rt=`http://${Rt}`),ct.tryConvertEncoding))try{Rt=Pt(Rt)}catch{}const Nt=ht?new URL(Rt,ht):new URL(Rt);if(S(Nt))return Nt}catch{}return null}function H(Rt,ht,ct,Nt=!1){return Object.defineProperty(Rt,ht,{value:ct,enumerable:!Nt,configurable:!0,writable:!1}),ct}const G=(function(){function ht(ct,Nt){this.constructor===ht&&k("Cannot initialize BaseException."),this.message=ct,this.name=Nt}return ht.prototype=new Error,ht.constructor=ht,ht})();s.BaseException=G;class K extends G{constructor(ht,ct){super(ht,"PasswordException"),this.code=ct}}s.PasswordException=K;class q extends G{constructor(ht,ct){super(ht,"UnknownErrorException"),this.details=ct}}s.UnknownErrorException=q;class R extends G{constructor(ht){super(ht,"InvalidPDFException")}}s.InvalidPDFException=R;class M extends G{constructor(ht){super(ht,"MissingPDFException")}}s.MissingPDFException=M;class D extends G{constructor(ht,ct){super(ht,"UnexpectedResponseException"),this.status=ct}}s.UnexpectedResponseException=D;class V extends G{constructor(ht){super(ht,"FormatError")}}s.FormatError=V;class W extends G{constructor(ht){super(ht,"AbortException")}}s.AbortException=W;function $(Rt){(typeof Rt!="object"||Rt?.length===void 0)&&k("Invalid argument for bytesToString");const ht=Rt.length,ct=8192;if(ht<ct)return String.fromCharCode.apply(null,Rt);const Nt=[];for(let Ut=0;Ut<ht;Ut+=ct){const Jt=Math.min(Ut+ct,ht),se=Rt.subarray(Ut,Jt);Nt.push(String.fromCharCode.apply(null,se))}return Nt.join("")}function J(Rt){typeof Rt!="string"&&k("Invalid argument for stringToBytes");const ht=Rt.length,ct=new Uint8Array(ht);for(let Nt=0;Nt<ht;++Nt)ct[Nt]=Rt.charCodeAt(Nt)&255;return ct}function ot(Rt){return String.fromCharCode(Rt>>24&255,Rt>>16&255,Rt>>8&255,Rt&255)}function yt(Rt){return Object.keys(Rt).length}function ut(Rt){const ht=Object.create(null);for(const[ct,Nt]of Rt)ht[ct]=Nt;return ht}function xt(){const Rt=new Uint8Array(4);return Rt[0]=1,new Uint32Array(Rt.buffer,0,1)[0]===1}function vt(){try{return new Function(""),!0}catch{return!1}}class Et{static get isLittleEndian(){return H(this,"isLittleEndian",xt())}static get isEvalSupported(){return H(this,"isEvalSupported",vt())}static get isOffscreenCanvasSupported(){return H(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?H(this,"platform",{isWin:!1,isMac:!1}):H(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return H(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}s.FeatureTest=Et;const wt=[...Array(256).keys()].map(Rt=>Rt.toString(16).padStart(2,"0"));class _t{static makeHexColor(ht,ct,Nt){return`#${wt[ht]}${wt[ct]}${wt[Nt]}`}static scaleMinMax(ht,ct){let Nt;ht[0]?(ht[0]<0&&(Nt=ct[0],ct[0]=ct[1],ct[1]=Nt),ct[0]*=ht[0],ct[1]*=ht[0],ht[3]<0&&(Nt=ct[2],ct[2]=ct[3],ct[3]=Nt),ct[2]*=ht[3],ct[3]*=ht[3]):(Nt=ct[0],ct[0]=ct[2],ct[2]=Nt,Nt=ct[1],ct[1]=ct[3],ct[3]=Nt,ht[1]<0&&(Nt=ct[2],ct[2]=ct[3],ct[3]=Nt),ct[2]*=ht[1],ct[3]*=ht[1],ht[2]<0&&(Nt=ct[0],ct[0]=ct[1],ct[1]=Nt),ct[0]*=ht[2],ct[1]*=ht[2]),ct[0]+=ht[4],ct[1]+=ht[4],ct[2]+=ht[5],ct[3]+=ht[5]}static transform(ht,ct){return[ht[0]*ct[0]+ht[2]*ct[1],ht[1]*ct[0]+ht[3]*ct[1],ht[0]*ct[2]+ht[2]*ct[3],ht[1]*ct[2]+ht[3]*ct[3],ht[0]*ct[4]+ht[2]*ct[5]+ht[4],ht[1]*ct[4]+ht[3]*ct[5]+ht[5]]}static applyTransform(ht,ct){const Nt=ht[0]*ct[0]+ht[1]*ct[2]+ct[4],Ut=ht[0]*ct[1]+ht[1]*ct[3]+ct[5];return[Nt,Ut]}static applyInverseTransform(ht,ct){const Nt=ct[0]*ct[3]-ct[1]*ct[2],Ut=(ht[0]*ct[3]-ht[1]*ct[2]+ct[2]*ct[5]-ct[4]*ct[3])/Nt,Jt=(-ht[0]*ct[1]+ht[1]*ct[0]+ct[4]*ct[1]-ct[5]*ct[0])/Nt;return[Ut,Jt]}static getAxialAlignedBoundingBox(ht,ct){const Nt=this.applyTransform(ht,ct),Ut=this.applyTransform(ht.slice(2,4),ct),Jt=this.applyTransform([ht[0],ht[3]],ct),se=this.applyTransform([ht[2],ht[1]],ct);return[Math.min(Nt[0],Ut[0],Jt[0],se[0]),Math.min(Nt[1],Ut[1],Jt[1],se[1]),Math.max(Nt[0],Ut[0],Jt[0],se[0]),Math.max(Nt[1],Ut[1],Jt[1],se[1])]}static inverseTransform(ht){const ct=ht[0]*ht[3]-ht[1]*ht[2];return[ht[3]/ct,-ht[1]/ct,-ht[2]/ct,ht[0]/ct,(ht[2]*ht[5]-ht[4]*ht[3])/ct,(ht[4]*ht[1]-ht[5]*ht[0])/ct]}static singularValueDecompose2dScale(ht){const ct=[ht[0],ht[2],ht[1],ht[3]],Nt=ht[0]*ct[0]+ht[1]*ct[2],Ut=ht[0]*ct[1]+ht[1]*ct[3],Jt=ht[2]*ct[0]+ht[3]*ct[2],se=ht[2]*ct[1]+ht[3]*ct[3],$e=(Nt+se)/2,Oe=Math.sqrt((Nt+se)**2-4*(Nt*se-Jt*Ut))/2,Re=$e+Oe||1,le=$e-Oe||1;return[Math.sqrt(Re),Math.sqrt(le)]}static normalizeRect(ht){const ct=ht.slice(0);return ht[0]>ht[2]&&(ct[0]=ht[2],ct[2]=ht[0]),ht[1]>ht[3]&&(ct[1]=ht[3],ct[3]=ht[1]),ct}static intersect(ht,ct){const Nt=Math.max(Math.min(ht[0],ht[2]),Math.min(ct[0],ct[2])),Ut=Math.min(Math.max(ht[0],ht[2]),Math.max(ct[0],ct[2]));if(Nt>Ut)return null;const Jt=Math.max(Math.min(ht[1],ht[3]),Math.min(ct[1],ct[3])),se=Math.min(Math.max(ht[1],ht[3]),Math.max(ct[1],ct[3]));return Jt>se?null:[Nt,Jt,Ut,se]}static bezierBoundingBox(ht,ct,Nt,Ut,Jt,se,$e,Oe){const Re=[],le=[[],[]];let ze,Qe,fs,te,ss,Ze,$s,Xs;for(let me=0;me<2;++me){if(me===0?(Qe=6*ht-12*Nt+6*Jt,ze=-3*ht+9*Nt-9*Jt+3*$e,fs=3*Nt-3*ht):(Qe=6*ct-12*Ut+6*se,ze=-3*ct+9*Ut-9*se+3*Oe,fs=3*Ut-3*ct),Math.abs(ze)<1e-12){if(Math.abs(Qe)<1e-12)continue;te=-fs/Qe,0<te&&te<1&&Re.push(te);continue}$s=Qe*Qe-4*fs*ze,Xs=Math.sqrt($s),!($s<0)&&(ss=(-Qe+Xs)/(2*ze),0<ss&&ss<1&&Re.push(ss),Ze=(-Qe-Xs)/(2*ze),0<Ze&&Ze<1&&Re.push(Ze))}let _s=Re.length,be;const ns=_s;for(;_s--;)te=Re[_s],be=1-te,le[0][_s]=be*be*be*ht+3*be*be*te*Nt+3*be*te*te*Jt+te*te*te*$e,le[1][_s]=be*be*be*ct+3*be*be*te*Ut+3*be*te*te*se+te*te*te*Oe;return le[0][ns]=ht,le[1][ns]=ct,le[0][ns+1]=$e,le[1][ns+1]=Oe,le[0].length=le[1].length=ns+2,[Math.min(...le[0]),Math.min(...le[1]),Math.max(...le[0]),Math.max(...le[1])]}}s.Util=_t;const Tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Dt(Rt){if(Rt[0]>=""){let ct;if(Rt[0]===""&&Rt[1]===""?ct="utf-16be":Rt[0]===""&&Rt[1]===""?ct="utf-16le":Rt[0]===""&&Rt[1]===""&&Rt[2]===""&&(ct="utf-8"),ct)try{const Nt=new TextDecoder(ct,{fatal:!0}),Ut=J(Rt);return Nt.decode(Ut)}catch(Nt){P(`stringToPDFString: "${Nt}".`)}}const ht=[];for(let ct=0,Nt=Rt.length;ct<Nt;ct++){const Ut=Tt[Rt.charCodeAt(ct)];ht.push(Ut?String.fromCharCode(Ut):Rt.charAt(ct))}return ht.join("")}function Pt(Rt){return decodeURIComponent(escape(Rt))}function kt(Rt){return unescape(encodeURIComponent(Rt))}function Vt(Rt){return typeof Rt=="object"&&Rt?.byteLength!==void 0}function Te(Rt,ht){if(Rt.length!==ht.length)return!1;for(let ct=0,Nt=Rt.length;ct<Nt;ct++)if(Rt[ct]!==ht[ct])return!1;return!0}function ue(Rt=new Date){return[Rt.getUTCFullYear().toString(),(Rt.getUTCMonth()+1).toString().padStart(2,"0"),Rt.getUTCDate().toString().padStart(2,"0"),Rt.getUTCHours().toString().padStart(2,"0"),Rt.getUTCMinutes().toString().padStart(2,"0"),Rt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ue{#t=!1;constructor(){this.promise=new Promise((ht,ct)=>{this.resolve=Nt=>{this.#t=!0,ht(Nt)},this.reject=Nt=>{this.#t=!0,ct(Nt)}})}get settled(){return this.#t}}s.PromiseCapability=Ue;let ge=null,de=null;function Vs(Rt){return ge||(ge=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,de=new Map([["","t"]])),Rt.replaceAll(ge,(ht,ct,Nt)=>ct?ct.normalize("NFKC"):de.get(Nt))}function Nn(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const Rt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(Rt);else for(let ht=0;ht<32;ht++)Rt[ht]=Math.floor(Math.random()*255);return $(Rt)}const Is="pdfjs_internal_id_";s.AnnotationPrefix=Is}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(o){if(typeof o=="string"||o instanceof URL?o={url:o}:(0,_util.isArrayBuffer)(o)&&(o={data:o}),typeof o!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!o.url&&!o.data&&!o.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,{docId:i}=s,r=o.url?getUrlProp(o.url):null,l=o.data?getDataProp(o.data):null,h=o.httpHeaders||null,m=o.withCredentials===!0,v=o.password??null,A=o.range instanceof PDFDataRangeTransport?o.range:null,d=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let c=o.worker instanceof PDFWorker?o.worker:null;const f=o.verbosity,g=typeof o.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(o.docBaseUrl)?o.docBaseUrl:null,b=typeof o.cMapUrl=="string"?o.cMapUrl:null,p=o.cMapPacked!==!1,j=o.CMapReaderFactory||DefaultCMapReaderFactory,E=typeof o.standardFontDataUrl=="string"?o.standardFontDataUrl:null,y=o.StandardFontDataFactory||DefaultStandardFontDataFactory,C=o.stopAtErrors!==!0,B=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,I=o.isEvalSupported!==!1,N=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!_util.isNodeJS,L=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,Q=typeof o.disableFontFace=="boolean"?o.disableFontFace:_util.isNodeJS,tt=o.fontExtraProperties===!0,Z=o.enableXfa===!0,st=o.ownerDocument||globalThis.document,F=o.disableRange===!0,it=o.disableStream===!0,Y=o.disableAutoFetch===!0,rt=o.pdfBug===!0,lt=A?A.length:o.length??NaN,U=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!_util.isNodeJS&&!Q,P=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:j===_display_utils.DOMCMapReaderFactory&&y===_display_utils.DOMStandardFontDataFactory&&b&&E&&(0,_display_utils.isValidFetchUrl)(b,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(E,document.baseURI),k=o.canvasFactory||new DefaultCanvasFactory({ownerDocument:st}),_=o.filterFactory||new DefaultFilterFactory({docId:i,ownerDocument:st}),S=null;(0,_util.setVerbosityLevel)(f);const O={canvasFactory:k,filterFactory:_};if(P||(O.cMapReaderFactory=new j({baseUrl:b,isCompressed:p}),O.standardFontDataFactory=new y({baseUrl:E})),!c){const K={verbosity:f,port:_worker_options.GlobalWorkerOptions.workerPort};c=K.port?PDFWorker.fromPort(K):new PDFWorker(K),s._worker=c}const H={docId:i,apiVersion:"3.11.174",data:l,password:v,disableAutoFetch:Y,rangeChunkSize:d,length:lt,docBaseUrl:g,enableXfa:Z,evaluatorOptions:{maxImageSize:B,disableFontFace:Q,ignoreErrors:C,isEvalSupported:I,isOffscreenCanvasSupported:N,canvasMaxAreaInBytes:L,fontExtraProperties:tt,useSystemFonts:U,cMapUrl:P?b:null,standardFontDataUrl:P?E:null}},G={ignoreErrors:C,isEvalSupported:I,disableFontFace:Q,fontExtraProperties:tt,enableXfa:Z,ownerDocument:st,disableAutoFetch:Y,pdfBug:rt,styleElement:S};return c.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const K=_fetchDocument(c,H),q=new Promise(function(R){let M;A?M=new _transport_stream.PDFDataTransportStream({length:lt,initialData:A.initialData,progressiveDone:A.progressiveDone,contentDispositionFilename:A.contentDispositionFilename,disableRange:F,disableStream:it},A):l||(M=(V=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(V):(0,_display_utils.isValidFetchUrl)(V.url)?new _displayFetch_stream.PDFFetchStream(V):new _displayNetwork.PDFNetworkStream(V))({url:r,length:lt,httpHeaders:h,withCredentials:m,rangeChunkSize:d,disableRange:F,disableStream:it})),R(M)});return Promise.all([K,q]).then(function([R,M]){if(s.destroyed)throw new Error("Loading aborted");const D=new _message_handler.MessageHandler(i,R,c.port),V=new WorkerTransport(D,s,M,G,O);s._transport=V,D.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(o,s){if(o.destroyed)throw new Error("Worker was destroyed");const i=await o.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(o.destroyed)throw new Error("Worker was destroyed");return i}function getUrlProp(o){if(o instanceof URL)return o.href;try{return new URL(o,window.location).href}catch{if(_util.isNodeJS&&typeof o=="string")return o}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(o){if(_util.isNodeJS&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return(0,_util.stringToBytes)(o);if(typeof o=="object"&&!isNaN(o?.length)||(0,_util.isArrayBuffer)(o))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(s){throw this._worker?.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,i,r=!1,l=null){this.length=s,this.initialData=i,this.progressiveDone=r,this.contentDispositionFilename=l,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,i){for(const r of this._rangeListeners)r(s,i)}onDataProgress(s,i){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(s,i)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const i of this._progressiveReadListeners)i(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,i){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,i){this._pdfInfo=s,this._transport=i,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(r=>{if(!r)return r;const l=[];for(const h in r)l.push(...r[h]);return l}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#t=null;#e=!1;constructor(s,i,r,l=!1){this._pageIndex=s,this._pageInfo=i,this._transport=r,this._stats=l?new _display_utils.StatTimer:null,this._pdfBug=l,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:i=this.rotate,offsetX:r=0,offsetY:l=0,dontFlip:h=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:i,offsetX:r,offsetY:l,dontFlip:h})}getAnnotations({intent:s="display"}={}){const i=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,i.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:s,viewport:i,intent:r="display",annotationMode:l=_util.AnnotationMode.ENABLE,transform:h=null,background:m=null,optionalContentConfigPromise:v=null,annotationCanvasMap:A=null,pageColors:d=null,printAnnotationStorage:c=null}){this._stats?.time("Overall");const f=this._transport.getRenderingIntent(r,l,c);this.#e=!1,this.#n(),v||(v=this._transport.getOptionalContentConfig());let g=this._intentStates.get(f.cacheKey);g||(g=Object.create(null),this._intentStates.set(f.cacheKey,g)),g.streamReaderCancelTimeout&&(clearTimeout(g.streamReaderCancelTimeout),g.streamReaderCancelTimeout=null);const b=!!(f.renderingIntent&_util.RenderingIntentFlag.PRINT);g.displayReadyCapability||(g.displayReadyCapability=new _util.PromiseCapability,g.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(f));const p=y=>{g.renderTasks.delete(j),(this._maybeCleanupAfterRender||b)&&(this.#e=!0),this.#s(!b),y?(j.capability.reject(y),this._abortOperatorList({intentState:g,reason:y instanceof Error?y:new Error(y)})):j.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},j=new InternalRenderTask({callback:p,params:{canvasContext:s,viewport:i,transform:h,background:m},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:A,operatorList:g.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:d});(g.renderTasks||=new Set).add(j);const E=j.task;return Promise.all([g.displayReadyCapability.promise,v]).then(([y,C])=>{if(this.destroyed){p();return}this._stats?.time("Rendering"),j.initializeGraphics({transparency:y,optionalContentConfig:C}),j.operatorListChanged()}).catch(p),E}getOperatorList({intent:s="display",annotationMode:i=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){function l(){m.operatorList.lastChunk&&(m.opListReadCapability.resolve(m.operatorList),m.renderTasks.delete(v))}const h=this._transport.getRenderingIntent(s,i,r,!0);let m=this._intentStates.get(h.cacheKey);m||(m=Object.create(null),this._intentStates.set(h.cacheKey,m));let v;return m.opListReadCapability||(v=Object.create(null),v.operatorListChanged=l,m.opListReadCapability=new _util.PromiseCapability,(m.renderTasks||=new Set).add(v),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h)),m.opListReadCapability.promise}streamTextContent({includeMarkedContent:s=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:s===!0,disableNormalization:i===!0},{highWaterMark:100,size(l){return l.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const i=this.streamTextContent(s);return new Promise(function(r,l){function h(){m.read().then(function({value:A,done:d}){if(d){r(v);return}Object.assign(v.styles,A.styles),v.items.push(...A.items),h()},l)}const m=i.getReader(),v={items:[],styles:Object.create(null)};h()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const r of i.renderTasks)s.push(r.completed),r.cancel();return this.objs.clear(),this.#e=!1,this.#n(),Promise.all(s)}cleanup(s=!1){this.#e=!0;const i=this.#s(!1);return s&&i&&(this._stats&&=new _display_utils.StatTimer),i}#s(s=!1){if(this.#n(),!this.#e||this.destroyed)return!1;if(s)return this.#t=setTimeout(()=>{this.#t=null,this.#s(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:i,operatorList:r}of this._intentStates.values())if(i.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#n(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(s,i){const r=this._intentStates.get(i);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(s))}_renderPageChunk(s,i){for(let r=0,l=s.length;r<l;r++)i.operatorList.fnArray.push(s.fnArray[r]),i.operatorList.argsArray.push(s.argsArray[r]);i.operatorList.lastChunk=s.lastChunk,i.operatorList.separateAnnots=s.separateAnnots;for(const r of i.renderTasks)r.operatorListChanged();s.lastChunk&&this.#s(!0)}_pumpOperatorList({renderingIntent:s,cacheKey:i,annotationStorageSerializable:r}){const{map:l,transfers:h}=r,v=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:i,annotationStorage:l},h).getReader(),A=this._intentStates.get(i);A.streamReader=v;const d=()=>{v.read().then(({value:c,done:f})=>{if(f){A.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(c,A),d())},c=>{if(A.streamReader=null,!this._transport.destroyed){if(A.operatorList){A.operatorList.lastChunk=!0;for(const f of A.renderTasks)f.operatorListChanged();this.#s(!0)}if(A.displayReadyCapability)A.displayReadyCapability.reject(c);else if(A.opListReadCapability)A.opListReadCapability.reject(c);else throw c}})};d()}_abortOperatorList({intentState:s,reason:i,force:r=!1}){if(s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!r){if(s.renderTasks.size>0)return;if(i instanceof _display_utils.RenderingCancelledException){let l=RENDERING_CANCELLED_TIMEOUT;i.extraDelay>0&&i.extraDelay<1e3&&(l+=i.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:i,force:!0})},l);return}}if(s.streamReader.cancel(new _util.AbortException(i.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[l,h]of this._intentStates)if(h===s){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#t=new Set;#e=Promise.resolve();postMessage(s,i){const r={data:structuredClone(s,i?{transfer:i}:null)};this.#e.then(()=>{for(const l of this.#t)l.call(this,r)})}addEventListener(s,i){this.#t.add(i)}removeEventListener(s,i){this.#t.delete(i)}terminate(){this.#t.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const o=document?.currentScript?.src;o&&(PDFWorkerUtil.fallbackWorkerSrc=o.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(o,s){let i;try{if(i=new URL(o),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(s,i);return i.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(o){const s=`importScripts("${o}");`;return URL.createObjectURL(new Blob([s]))}}class PDFWorker{static#workerPorts;constructor({name:o=null,port:s=null,verbosity:i=(0,_util.getVerbosityLevel)()}={}){if(this.name=o,this.destroyed=!1,this.verbosity=i,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,s){if(PDFWorker.#workerPorts?.has(s))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(o){this._port=o,this._messageHandler=new _message_handler.MessageHandler("main","worker",o),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:o}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,o)||(o=PDFWorkerUtil.createCDNWrapper(new URL(o,window.location).href));const s=new Worker(o),i=new _message_handler.MessageHandler("main","worker",s),r=()=>{s.removeEventListener("error",l),i.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=()=>{this._webWorker||r()};s.addEventListener("error",l),i.on("test",m=>{if(s.removeEventListener("error",l),this.destroyed){r();return}m?(this._messageHandler=i,this._port=s,this._webWorker=s,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),s.terminate())}),i.on("ready",m=>{if(s.removeEventListener("error",l),this.destroyed){r();return}try{h()}catch{this._setupFakeWorker()}});const h=()=>{const m=new Uint8Array;i.send("test",m,[m.buffer])};h();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(o=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const i=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(i+"_worker",i,s);o.setup(r,s);const l=new _message_handler.MessageHandler(i,i+"_worker",s);this._messageHandler=l,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})}).catch(o=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${o.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(o){if(!o?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const s=this.#workerPorts?.get(o.port);if(s){if(s._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new PDFWorker(o)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#t=new Map;#e=new Map;#s=new Map;#n=null;constructor(s,i,r,l,h){this.messageHandler=s,this.loadingTask=i,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this._params=l,this.canvasFactory=h.canvasFactory,this.filterFactory=h.filterFactory,this.cMapReaderFactory=h.cMapReaderFactory,this.standardFontDataFactory=h.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(s,i=null){const r=this.#t.get(s);if(r)return r;const l=this.messageHandler.sendWithPromise(s,i);return this.#t.set(s,l),l}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s,i=_util.AnnotationMode.ENABLE,r=null,l=!1){let h=_util.RenderingIntentFlag.DISPLAY,m=_annotation_storage.SerializableEmpty;switch(s){case"any":h=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":h=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(i){case _util.AnnotationMode.DISABLE:h+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:h+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:h+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,m=(h&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${i}`)}return l&&(h+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:h,cacheKey:`${h}_${m.hash}`,annotationStorageSerializable:m}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#n?.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const r of this.#e.values())s.push(r._destroy());this.#e.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return s.push(i),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:i}=this;s.on("GetReader",(r,l)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=h=>{this._lastProgress={loaded:h.loaded,total:h.total}},l.onPull=()=>{this._fullReader.read().then(function({value:h,done:m}){if(m){l.close();return}(0,_util.assert)(h instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(h),1,[h])}).catch(h=>{l.error(h)})},l.onCancel=h=>{this._fullReader.cancel(h),l.ready.catch(m=>{if(!this.destroyed)throw m})}}),s.on("ReaderHeadersReady",r=>{const l=new _util.PromiseCapability,h=this._fullReader;return h.headersReady.then(()=>{(!h.isStreamingSupported||!h.isRangeSupported)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),h.onProgress=m=>{i.onProgress?.({loaded:m.loaded,total:m.total})}),l.resolve({isStreamingSupported:h.isStreamingSupported,isRangeSupported:h.isRangeSupported,contentLength:h.contentLength})},l.reject),l.promise}),s.on("GetRangeReader",(r,l)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const h=this._networkStream.getRangeReader(r.begin,r.end);if(!h){l.close();return}l.onPull=()=>{h.read().then(function({value:m,done:v}){if(v){l.close();return}(0,_util.assert)(m instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(m),1,[m])}).catch(m=>{l.error(m)})},l.onCancel=m=>{h.cancel(m),l.ready.catch(v=>{if(!this.destroyed)throw v})}}),s.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,i._capability.resolve(new PDFDocumentProxy(r,this))}),s.on("DocException",function(r){let l;switch(r.name){case"PasswordException":l=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":l=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":l=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":l=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":l=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}i._capability.reject(l)}),s.on("PasswordRequest",r=>{if(this.#n=new _util.PromiseCapability,i.onPassword){const l=h=>{h instanceof Error?this.#n.reject(h):this.#n.resolve({password:h})};try{i.onPassword(l,r.code)}catch(h){this.#n.reject(h)}}else this.#n.reject(new _util.PasswordException(r.message,r.code));return this.#n.promise}),s.on("DataLoaded",r=>{i.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),s.on("StartRenderPage",r=>{if(this.destroyed)return;this.#e.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),s.on("commonobj",([r,l,h])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(l){case"Font":const m=this._params;if("error"in h){const d=h.error;(0,_util.warn)(`Error during font loading: ${d}`),this.commonObjs.resolve(r,d);break}const v=m.pdfBug&&globalThis.FontInspector?.enabled?(d,c)=>globalThis.FontInspector.fontAdded(d,c):null,A=new _font_loader.FontFaceObject(h,{isEvalSupported:m.isEvalSupported,disableFontFace:m.disableFontFace,ignoreErrors:m.ignoreErrors,inspectFont:v});this.fontLoader.bind(A).catch(d=>s.sendWithPromise("FontFallback",{id:r})).finally(()=>{!m.fontExtraProperties&&A.data&&(A.data=null),this.commonObjs.resolve(r,A)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,h);break;default:throw new Error(`Got unknown common object type ${l}`)}}),s.on("obj",([r,l,h,m])=>{if(this.destroyed)return;const v=this.#e.get(l);if(!v.objs.has(r))switch(h){case"Image":if(v.objs.resolve(r,m),m){let A;if(m.bitmap){const{width:d,height:c}=m;A=d*c*4}else A=m.data?.length||0;A>_util.MAX_IMAGE_SIZE_TO_CACHE&&(v._maybeCleanupAfterRender=!0)}break;case"Pattern":v.objs.resolve(r,m);break;default:throw new Error(`Got unknown object type ${h}`)}}),s.on("DocProgress",r=>{this.destroyed||i.onProgress?.({loaded:r.loaded,total:r.total})}),s.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:s,transfers:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:s,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=s-1,r=this.#s.get(i);if(r)return r;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(h=>{if(this.destroyed)throw new Error("Transport destroyed");const m=new PDFPageProxy(i,h,this,this._params.pdfBug);return this.#e.set(i,m),m});return this.#s.set(i,l),l}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:i})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",i=this.#t.get(s);if(i)return i;const r=this.messageHandler.sendWithPromise(s,null).then(l=>({info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(s,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:s,enableXfa:i}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:i})}}class PDFObjects{#t=Object.create(null);#e(s){return this.#t[s]||={capability:new _util.PromiseCapability,data:null}}get(s,i=null){if(i){const l=this.#e(s);return l.capability.promise.then(()=>i(l.data)),null}const r=this.#t[s];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${s}.`);return r.data}has(s){return this.#t[s]?.capability.settled||!1}resolve(s,i=null){const r=this.#e(s);r.data=i,r.capability.resolve()}clear(){for(const s in this.#t){const{data:i}=this.#t[s];i?.bitmap?.close()}this.#t=Object.create(null)}}class RenderTask{#t=null;constructor(s){this.#t=s,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(s=0){this.#t.cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=this.#t.operatorList;if(!s)return!1;const{annotationCanvasMap:i}=this.#t;return s.form||s.canvas&&i?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#t=new WeakSet;constructor({callback:s,params:i,objs:r,commonObjs:l,annotationCanvasMap:h,operatorList:m,pageIndex:v,canvasFactory:A,filterFactory:d,useRequestAnimationFrame:c=!1,pdfBug:f=!1,pageColors:g=null}){this.callback=s,this.params=i,this.objs=r,this.commonObjs=l,this.annotationCanvasMap=h,this.operatorListIdx=null,this.operatorList=m,this._pageIndex=v,this.canvasFactory=A,this.filterFactory=d,this._pdfBug=f,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:l,transform:h,background:m}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:h,viewport:l,transparency:s,background:m}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(s=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,i))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#t.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SerializableEmpty=s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var r=i(1),l=i(4),h=i(8);const m=Object.freeze({map:null,hash:"",transfers:void 0});s.SerializableEmpty=m;class v{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(c,f){const g=this.#e.get(c);return g===void 0?f:Object.assign(f,g)}getRawValue(c){return this.#e.get(c)}remove(c){if(this.#e.delete(c),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of this.#e.values())if(f instanceof l.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(c,f){const g=this.#e.get(c);let b=!1;if(g!==void 0)for(const[p,j]of Object.entries(f))g[p]!==j&&(b=!0,g[p]=j);else b=!0,this.#e.set(c,f);b&&this.#s(),f instanceof l.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(c){return this.#e.has(c)}getAll(){return this.#e.size>0?(0,r.objectFromMap)(this.#e):null}setAll(c){for(const[f,g]of Object.entries(c))this.setValue(f,g)}get size(){return this.#e.size}#s(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new A(this)}get serializable(){if(this.#e.size===0)return m;const c=new Map,f=new h.MurmurHash3_64,g=[],b=Object.create(null);let p=!1;for(const[j,E]of this.#e){const y=E instanceof l.AnnotationEditor?E.serialize(!1,b):E;y&&(c.set(j,y),f.update(`${j}:${JSON.stringify(y)}`),p||=!!y.bitmap)}if(p)for(const j of c.values())j.bitmap&&g.push(j.bitmap);return c.size>0?{map:c,hash:f.hexdigest(),transfers:g}:m}}s.AnnotationStorage=v;class A extends v{#t;constructor(c){super();const{map:f,hash:g,transfers:b}=c.serializable,p=structuredClone(f,b?{transfer:b}:null);this.#t={map:p,hash:g,transfers:b}}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}s.PrintAnnotationStorage=A}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var r=i(5),l=i(1),h=i(6);class m{#t="";#e=!1;#s=null;#n=null;#o=null;#a=!1;#r=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#m=m._zIndex++;static _borderLineWidth=-1;static _colorManager=new r.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(d){this.constructor===m&&(0,l.unreachable)("Cannot initialize AnnotationEditor."),this.parent=d.parent,this.id=d.id,this.width=this.height=null,this.pageIndex=d.parent.pageIndex,this.name=d.name,this.div=null,this._uiManager=d.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=d.isCentered,this._structTreeParentId=null;const{rotation:c,rawDims:{pageWidth:f,pageHeight:g,pageX:b,pageY:p}}=this.parent.viewport;this.rotation=c,this.pageRotation=(360+c-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[f,g],this.pageTranslation=[b,p];const[j,E]=this.parentDimensions;this.x=d.x/j,this.y=d.y/E,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,l.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(d){const c=new v({id:d.parent.getNextId(),parent:d.parent,uiManager:d._uiManager});c.annotationElementId=d.annotationElementId,c.deleted=!0,c._uiManager.addToAnnotationStorage(c)}static initialize(d,c=null){if(m._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(g=>[g,d.get(g)])),c?.strings)for(const g of c.strings)m._l10nPromise.set(g,d.get(g));if(m._borderLineWidth!==-1)return;const f=getComputedStyle(document.documentElement);m._borderLineWidth=parseFloat(f.getPropertyValue("--outline-width"))||0}static updateDefaultParams(d,c){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(d){return!1}static paste(d,c){(0,l.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(d){this.#h=d,this.div?.classList.toggle("draggable",d)}center(){const[d,c]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*c/(d*2),this.y+=this.width*d/(c*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*c/(d*2),this.y-=this.width*d/(c*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(d){this._uiManager.addCommands(d)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#m}setParent(d){d!==null&&(this.pageIndex=d.pageIndex,this.pageDimensions=d.pageDimensions),this.parent=d}focusin(d){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(d){!this._focusEventsAllowed||!this.isAttachedToDOM||d.relatedTarget?.closest(`#${this.id}`)||(d.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(d,c,f,g){const[b,p]=this.parentDimensions;[f,g]=this.screenToPageTranslation(f,g),this.x=(d+f)/b,this.y=(c+g)/p,this.fixAndSetPosition()}#g([d,c],f,g){[f,g]=this.screenToPageTranslation(f,g),this.x+=f/d,this.y+=g/c,this.fixAndSetPosition()}translate(d,c){this.#g(this.parentDimensions,d,c)}translateInPage(d,c){this.#g(this.pageDimensions,d,c),this.div.scrollIntoView({block:"nearest"})}drag(d,c){const[f,g]=this.parentDimensions;if(this.x+=d/f,this.y+=c/g,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:C}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,C)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:b,y:p}=this;const[j,E]=this.#x();b+=j,p+=E,this.div.style.left=`${(100*b).toFixed(2)}%`,this.div.style.top=`${(100*p).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#x(){const[d,c]=this.parentDimensions,{_borderLineWidth:f}=m,g=f/d,b=f/c;switch(this.rotation){case 90:return[-g,b];case 180:return[g,b];case 270:return[g,-b];default:return[-g,-b]}}fixAndSetPosition(){const[d,c]=this.pageDimensions;let{x:f,y:g,width:b,height:p}=this;switch(b*=d,p*=c,f*=d,g*=c,this.rotation){case 0:f=Math.max(0,Math.min(d-b,f)),g=Math.max(0,Math.min(c-p,g));break;case 90:f=Math.max(0,Math.min(d-p,f)),g=Math.min(c,Math.max(b,g));break;case 180:f=Math.min(d,Math.max(b,f)),g=Math.min(c,Math.max(p,g));break;case 270:f=Math.min(d,Math.max(p,f)),g=Math.max(0,Math.min(c-b,g));break}this.x=f/=d,this.y=g/=c;const[j,E]=this.#x();f+=j,g+=E;const{style:y}=this.div;y.left=`${(100*f).toFixed(2)}%`,y.top=`${(100*g).toFixed(2)}%`,this.moveInDOM()}static#p(d,c,f){switch(f){case 90:return[c,-d];case 180:return[-d,-c];case 270:return[-c,d];default:return[d,c]}}screenToPageTranslation(d,c){return m.#p(d,c,this.parentRotation)}pageTranslationToScreen(d,c){return m.#p(d,c,360-this.parentRotation)}#u(d){switch(d){case 90:{const[c,f]=this.pageDimensions;return[0,-c/f,f/c,0]}case 180:return[-1,0,0,-1];case 270:{const[c,f]=this.pageDimensions;return[0,c/f,-f/c,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:d,pageDimensions:[c,f]}=this,g=c*d,b=f*d;return l.FeatureTest.isCSSRoundSupported?[Math.round(g),Math.round(b)]:[g,b]}setDims(d,c){const[f,g]=this.parentDimensions;this.div.style.width=`${(100*d/f).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*c/g).toFixed(2)}%`),this.#s?.classList.toggle("small",d<m.SMALL_EDITOR_SIZE||c<m.SMALL_EDITOR_SIZE)}fixDims(){const{style:d}=this.div,{height:c,width:f}=d,g=f.endsWith("%"),b=!this.#a&&c.endsWith("%");if(g&&b)return;const[p,j]=this.parentDimensions;g||(d.width=`${(100*parseFloat(f)/p).toFixed(2)}%`),!this.#a&&!b&&(d.height=`${(100*parseFloat(c)/j).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#r)return;this.#r=document.createElement("div"),this.#r.classList.add("resizers");const d=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||d.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const c of d){const f=document.createElement("div");this.#r.append(f),f.classList.add("resizer",c),f.addEventListener("pointerdown",this.#A.bind(this,c)),f.addEventListener("contextmenu",h.noContextMenu)}this.div.prepend(this.#r)}#A(d,c){c.preventDefault();const{isMac:f}=l.FeatureTest.platform;if(c.button!==0||c.ctrlKey&&f)return;const g=this.#j.bind(this,d),b=this._isDraggable;this._isDraggable=!1;const p={passive:!0,capture:!0};window.addEventListener("pointermove",g,p);const j=this.x,E=this.y,y=this.width,C=this.height,B=this.parent.div.style.cursor,I=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(c.target).cursor;const N=()=>{this._isDraggable=b,window.removeEventListener("pointerup",N),window.removeEventListener("blur",N),window.removeEventListener("pointermove",g,p),this.parent.div.style.cursor=B,this.div.style.cursor=I;const L=this.x,Q=this.y,tt=this.width,Z=this.height;L===j&&Q===E&&tt===y&&Z===C||this.addCommands({cmd:()=>{this.width=tt,this.height=Z,this.x=L,this.y=Q;const[st,F]=this.parentDimensions;this.setDims(st*tt,F*Z),this.fixAndSetPosition()},undo:()=>{this.width=y,this.height=C,this.x=j,this.y=E;const[st,F]=this.parentDimensions;this.setDims(st*y,F*C),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",N),window.addEventListener("blur",N)}#j(d,c){const[f,g]=this.parentDimensions,b=this.x,p=this.y,j=this.width,E=this.height,y=m.MIN_SIZE/f,C=m.MIN_SIZE/g,B=q=>Math.round(q*1e4)/1e4,I=this.#u(this.rotation),N=(q,R)=>[I[0]*q+I[2]*R,I[1]*q+I[3]*R],L=this.#u(360-this.rotation),Q=(q,R)=>[L[0]*q+L[2]*R,L[1]*q+L[3]*R];let tt,Z,st=!1,F=!1;switch(d){case"topLeft":st=!0,tt=(q,R)=>[0,0],Z=(q,R)=>[q,R];break;case"topMiddle":tt=(q,R)=>[q/2,0],Z=(q,R)=>[q/2,R];break;case"topRight":st=!0,tt=(q,R)=>[q,0],Z=(q,R)=>[0,R];break;case"middleRight":F=!0,tt=(q,R)=>[q,R/2],Z=(q,R)=>[0,R/2];break;case"bottomRight":st=!0,tt=(q,R)=>[q,R],Z=(q,R)=>[0,0];break;case"bottomMiddle":tt=(q,R)=>[q/2,R],Z=(q,R)=>[q/2,0];break;case"bottomLeft":st=!0,tt=(q,R)=>[0,R],Z=(q,R)=>[q,0];break;case"middleLeft":F=!0,tt=(q,R)=>[0,R/2],Z=(q,R)=>[q,R/2];break}const it=tt(j,E),Y=Z(j,E);let rt=N(...Y);const lt=B(b+rt[0]),U=B(p+rt[1]);let P=1,k=1,[_,S]=this.screenToPageTranslation(c.movementX,c.movementY);if([_,S]=Q(_/f,S/g),st){const q=Math.hypot(j,E);P=k=Math.max(Math.min(Math.hypot(Y[0]-it[0]-_,Y[1]-it[1]-S)/q,1/j,1/E),y/j,C/E)}else F?P=Math.max(y,Math.min(1,Math.abs(Y[0]-it[0]-_)))/j:k=Math.max(C,Math.min(1,Math.abs(Y[1]-it[1]-S)))/E;const O=B(j*P),H=B(E*k);rt=N(...Z(O,H));const G=lt-rt[0],K=U-rt[1];this.width=O,this.height=H,this.x=G,this.y=K,this.setDims(f*O,g*H),this.fixAndSetPosition()}async addAltTextButton(){if(this.#s)return;const d=this.#s=document.createElement("button");d.className="altText";const c=await m._l10nPromise.get("editor_alt_text_button_label");d.textContent=c,d.setAttribute("aria-label",c),d.tabIndex="0",d.addEventListener("contextmenu",h.noContextMenu),d.addEventListener("pointerdown",f=>f.stopPropagation()),d.addEventListener("click",f=>{f.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),d.addEventListener("keydown",f=>{f.target===d&&f.key==="Enter"&&(f.preventDefault(),this._uiManager.editAltText(this))}),this.#w(),this.div.append(d),m.SMALL_EDITOR_SIZE||(m.SMALL_EDITOR_SIZE=Math.min(128,Math.round(d.getBoundingClientRect().width*1.4)))}async#w(){const d=this.#s;if(!d)return;if(!this.#t&&!this.#e){d.classList.remove("done"),this.#n?.remove();return}m._l10nPromise.get("editor_alt_text_edit_button_label").then(f=>{d.setAttribute("aria-label",f)});let c=this.#n;if(!c){this.#n=c=document.createElement("span"),c.className="tooltip",c.setAttribute("role","tooltip");const f=c.id=`alt-text-tooltip-${this.id}`;d.setAttribute("aria-describedby",f);const g=100;d.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#n.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},g)}),d.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#n?.classList.remove("show")})}d.classList.add("done"),c.innerText=this.#e?await m._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#t,c.parentNode||d.append(c)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#t,decorative:this.#e}}set altTextData({altText:d,decorative:c}){this.#t===d&&this.#e===c||(this.#t=d,this.#e=c,this.#w())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[d,c]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*c/d).toFixed(2)}%`,this.div.style.maxHeight=`${(100*d/c).toFixed(2)}%`);const[f,g]=this.getInitialTranslation();return this.translate(f,g),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(d){const{isMac:c}=l.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&c){d.preventDefault();return}this.#i=!0,this.#N(d)}#N(d){if(!this._isDraggable)return;const c=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let f,g;c&&(f={passive:!0,capture:!0},g=p=>{const[j,E]=this.screenToPageTranslation(p.movementX,p.movementY);this._uiManager.dragSelectedEditors(j,E)},window.addEventListener("pointermove",g,f));const b=()=>{if(window.removeEventListener("pointerup",b),window.removeEventListener("blur",b),c&&window.removeEventListener("pointermove",g,f),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:p}=l.FeatureTest.platform;d.ctrlKey&&!p||d.shiftKey||d.metaKey&&p?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",b),window.addEventListener("blur",b)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(d,c,f){d.changeParent(this),this.x=c,this.y=f,this.fixAndSetPosition()}getRect(d,c){const f=this.parentScale,[g,b]=this.pageDimensions,[p,j]=this.pageTranslation,E=d/f,y=c/f,C=this.x*g,B=this.y*b,I=this.width*g,N=this.height*b;switch(this.rotation){case 0:return[C+E+p,b-B-y-N+j,C+E+I+p,b-B-y+j];case 90:return[C+y+p,b-B+E+j,C+y+N+p,b-B+E+I+j];case 180:return[C-E-I+p,b-B+y+j,C-E+p,b-B+y+N+j];case 270:return[C-y-N+p,b-B-E-I+j,C-y+p,b-B-E+j];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(d,c){const[f,g,b,p]=d,j=b-f,E=p-g;switch(this.rotation){case 0:return[f,c-p,j,E];case 90:return[f,c-g,E,j];case 180:return[b,c-g,j,E];case 270:return[b,c-p,E,j];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(d=!1,c=null){(0,l.unreachable)("An editor must be serializable")}static deserialize(d,c,f){const g=new this.prototype.constructor({parent:c,id:c.getNextId(),uiManager:f});g.rotation=d.rotation;const[b,p]=g.pageDimensions,[j,E,y,C]=g.getRectInCurrentCoords(d.rect,p);return g.x=j/b,g.y=E/p,g.width=y/b,g.height=C/p,g}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#s?.remove(),this.#s=null,this.#n=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#r.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#r?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(d,c){}disableEditing(){this.#s&&(this.#s.hidden=!0)}enableEditing(){this.#s&&(this.#s.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(d){this.#f=d,this.parent&&(d?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(d,c){this.#a=!0;const f=d/c,{style:g}=this.div;g.aspectRatio=f,g.height="auto"}static get MIN_SIZE(){return 16}}s.AnnotationEditor=m;class v extends m{constructor(d){super(d),this.annotationElementId=d.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=h,s.opacityToHex=m;var r=i(1),l=i(6);function h(b,p,j){for(const E of j)p.addEventListener(E,b[E].bind(b))}function m(b){return Math.round(Math.min(255,Math.max(1,255*b))).toString(16).padStart(2,"0")}class v{#t=0;getId(){return`${r.AnnotationEditorPrefix}${this.#t++}`}}class A{#t=(0,r.getUuid)();#e=0;#s=null;static get _isSVGFittingCanvas(){const p='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',E=new OffscreenCanvas(1,3).getContext("2d"),y=new Image;y.src=p;const C=y.decode().then(()=>(E.drawImage(y,0,0,1,1,0,0,1,3),new Uint32Array(E.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",C)}async#n(p,j){this.#s||=new Map;let E=this.#s.get(p);if(E===null)return null;if(E?.bitmap)return E.refCounter+=1,E;try{E||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let y;if(typeof j=="string"){E.url=j;const C=await fetch(j);if(!C.ok)throw new Error(C.statusText);y=await C.blob()}else y=E.file=j;if(y.type==="image/svg+xml"){const C=A._isSVGFittingCanvas,B=new FileReader,I=new Image,N=new Promise((L,Q)=>{I.onload=()=>{E.bitmap=I,E.isSvg=!0,L()},B.onload=async()=>{const tt=E.svgUrl=B.result;I.src=await C?`${tt}#svgView(preserveAspectRatio(none))`:tt},I.onerror=B.onerror=Q});B.readAsDataURL(y),await N}else E.bitmap=await createImageBitmap(y);E.refCounter=1}catch(y){console.error(y),E=null}return this.#s.set(p,E),E&&this.#s.set(E.id,E),E}async getFromFile(p){const{lastModified:j,name:E,size:y,type:C}=p;return this.#n(`${j}_${E}_${y}_${C}`,p)}async getFromUrl(p){return this.#n(p,p)}async getFromId(p){this.#s||=new Map;const j=this.#s.get(p);return j?j.bitmap?(j.refCounter+=1,j):j.file?this.getFromFile(j.file):this.getFromUrl(j.url):null}getSvgUrl(p){const j=this.#s.get(p);return j?.isSvg?j.svgUrl:null}deleteId(p){this.#s||=new Map;const j=this.#s.get(p);j&&(j.refCounter-=1,j.refCounter===0&&(j.bitmap=null))}isValidId(p){return p.startsWith(`image_${this.#t}_`)}}class d{#t=[];#e=!1;#s;#n=-1;constructor(p=128){this.#s=p}add({cmd:p,undo:j,mustExec:E,type:y=NaN,overwriteIfSameType:C=!1,keepUndo:B=!1}){if(E&&p(),this.#e)return;const I={cmd:p,undo:j,type:y};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(I);return}if(C&&this.#t[this.#n].type===y){B&&(I.undo=this.#t[this.#n].undo),this.#t[this.#n]=I;return}const N=this.#n+1;N===this.#s?this.#t.splice(0,1):(this.#n=N,N<this.#t.length&&this.#t.splice(N)),this.#t.push(I)}undo(){this.#n!==-1&&(this.#e=!0,this.#t[this.#n].undo(),this.#e=!1,this.#n-=1)}redo(){this.#n<this.#t.length-1&&(this.#n+=1,this.#e=!0,this.#t[this.#n].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}destroy(){this.#t=null}}s.CommandManager=d;class c{constructor(p){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:j}=r.FeatureTest.platform;for(const[E,y,C={}]of p)for(const B of E){const I=B.startsWith("mac+");j&&I?(this.callbacks.set(B.slice(4),{callback:y,options:C}),this.allKeys.add(B.split("+").at(-1))):!j&&!I&&(this.callbacks.set(B,{callback:y,options:C}),this.allKeys.add(B.split("+").at(-1)))}}#t(p){p.altKey&&this.buffer.push("alt"),p.ctrlKey&&this.buffer.push("ctrl"),p.metaKey&&this.buffer.push("meta"),p.shiftKey&&this.buffer.push("shift"),this.buffer.push(p.key);const j=this.buffer.join("+");return this.buffer.length=0,j}exec(p,j){if(!this.allKeys.has(j.key))return;const E=this.callbacks.get(this.#t(j));if(!E)return;const{callback:y,options:{bubbles:C=!1,args:B=[],checker:I=null}}=E;I&&!I(p,j)||(y.bind(p,...B)(),C||(j.stopPropagation(),j.preventDefault()))}}s.KeyboardManager=c;class f{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const p=new Map([["CanvasText",null],["Canvas",null]]);return(0,l.getColorValues)(p),(0,r.shadow)(this,"_colors",p)}convert(p){const j=(0,l.getRGB)(p);if(!window.matchMedia("(forced-colors: active)").matches)return j;for(const[E,y]of this._colors)if(y.every((C,B)=>C===j[B]))return f._colorsMapping.get(E);return j}getHexCode(p){const j=this._colors.get(p);return j?r.Util.makeHexColor(...j):p}}s.ColorManager=f;class g{#t=null;#e=new Map;#s=new Map;#n=null;#o=null;#a=new d;#r=0;#l=new Set;#c=null;#i=null;#f=new Set;#d=null;#h=new v;#m=!1;#g=!1;#x=null;#p=r.AnnotationEditorType.NONE;#u=new Set;#b=null;#A=this.blur.bind(this);#j=this.focus.bind(this);#w=this.copy.bind(this);#N=this.cut.bind(this);#D=this.paste.bind(this);#O=this.keydown.bind(this);#P=this.onEditingAction.bind(this);#y=this.onPageChanging.bind(this);#M=this.onScaleChanging.bind(this);#T=this.onRotationChanging.bind(this);#C={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#v=[0,0];#_=null;#R=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const p=g.prototype,j=C=>{const{activeElement:B}=document;return B&&C.#R.contains(B)&&C.hasSomethingToControl()},E=this.TRANSLATE_SMALL,y=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new c([[["ctrl+a","mac+meta+a"],p.selectAll],[["ctrl+z","mac+meta+z"],p.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],p.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],p.delete],[["Escape","mac+Escape"],p.unselectAll],[["ArrowLeft","mac+ArrowLeft"],p.translateSelectedEditors,{args:[-E,0],checker:j}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],p.translateSelectedEditors,{args:[-y,0],checker:j}],[["ArrowRight","mac+ArrowRight"],p.translateSelectedEditors,{args:[E,0],checker:j}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],p.translateSelectedEditors,{args:[y,0],checker:j}],[["ArrowUp","mac+ArrowUp"],p.translateSelectedEditors,{args:[0,-E],checker:j}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],p.translateSelectedEditors,{args:[0,-y],checker:j}],[["ArrowDown","mac+ArrowDown"],p.translateSelectedEditors,{args:[0,E],checker:j}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],p.translateSelectedEditors,{args:[0,y],checker:j}]]))}constructor(p,j,E,y,C,B){this.#R=p,this.#B=j,this.#n=E,this._eventBus=y,this._eventBus._on("editingaction",this.#P),this._eventBus._on("pagechanging",this.#y),this._eventBus._on("scalechanging",this.#M),this._eventBus._on("rotationchanging",this.#T),this.#o=C.annotationStorage,this.#d=C.filterFactory,this.#b=B,this.viewParameters={realScale:l.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#k(),this.#I(),this._eventBus._off("editingaction",this.#P),this._eventBus._off("pagechanging",this.#y),this._eventBus._off("scalechanging",this.#M),this._eventBus._off("rotationchanging",this.#T);for(const p of this.#s.values())p.destroy();this.#s.clear(),this.#e.clear(),this.#f.clear(),this.#t=null,this.#u.clear(),this.#a.destroy(),this.#n.destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",this.#b?this.#d.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(this.#R).direction)}editAltText(p){this.#n?.editAltText(this,p)}onPageChanging({pageNumber:p}){this.#r=p-1}focusMainContainer(){this.#R.focus()}findParent(p,j){for(const E of this.#s.values()){const{x:y,y:C,width:B,height:I}=E.div.getBoundingClientRect();if(p>=y&&p<=y+B&&j>=C&&j<=C+I)return E}return null}disableUserSelect(p=!1){this.#B.classList.toggle("noUserSelect",p)}addShouldRescale(p){this.#f.add(p)}removeShouldRescale(p){this.#f.delete(p)}onScaleChanging({scale:p}){this.commitOrRemove(),this.viewParameters.realScale=p*l.PixelsPerInch.PDF_TO_CSS_UNITS;for(const j of this.#f)j.onScaleChanging()}onRotationChanging({pagesRotation:p}){this.commitOrRemove(),this.viewParameters.rotation=p}addToAnnotationStorage(p){!p.isEmpty()&&this.#o&&!this.#o.has(p.id)&&this.#o.setValue(p.id,p)}#F(){window.addEventListener("focus",this.#j),window.addEventListener("blur",this.#A)}#I(){window.removeEventListener("focus",this.#j),window.removeEventListener("blur",this.#A)}blur(){if(!this.hasSelection)return;const{activeElement:p}=document;for(const j of this.#u)if(j.div.contains(p)){this.#x=[j,p],j._focusEventsAllowed=!1;break}}focus(){if(!this.#x)return;const[p,j]=this.#x;this.#x=null,j.addEventListener("focusin",()=>{p._focusEventsAllowed=!0},{once:!0}),j.focus()}#q(){window.addEventListener("keydown",this.#O,{capture:!0})}#k(){window.removeEventListener("keydown",this.#O,{capture:!0})}#L(){document.addEventListener("copy",this.#w),document.addEventListener("cut",this.#N),document.addEventListener("paste",this.#D)}#S(){document.removeEventListener("copy",this.#w),document.removeEventListener("cut",this.#N),document.removeEventListener("paste",this.#D)}addEditListeners(){this.#q(),this.#L()}removeEditListeners(){this.#k(),this.#S()}copy(p){if(p.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const j=[];for(const E of this.#u){const y=E.serialize(!0);y&&j.push(y)}j.length!==0&&p.clipboardData.setData("application/pdfjs",JSON.stringify(j))}cut(p){this.copy(p),this.delete()}paste(p){p.preventDefault();const{clipboardData:j}=p;for(const C of j.items)for(const B of this.#i)if(B.isHandlingMimeForPasting(C.type)){B.paste(C,this.currentLayer);return}let E=j.getData("application/pdfjs");if(!E)return;try{E=JSON.parse(E)}catch(C){(0,r.warn)(`paste: "${C.message}".`);return}if(!Array.isArray(E))return;this.unselectAll();const y=this.currentLayer;try{const C=[];for(const N of E){const L=y.deserialize(N);if(!L)return;C.push(L)}const B=()=>{for(const N of C)this.#H(N);this.#G(C)},I=()=>{for(const N of C)N.remove()};this.addCommands({cmd:B,undo:I,mustExec:!0})}catch(C){(0,r.warn)(`paste: "${C.message}".`)}}keydown(p){this.getActive()?.shouldGetKeyboardEvents()||g._keyboardManager.exec(this,p)}onEditingAction(p){["undo","redo","delete","selectAll"].includes(p.name)&&this[p.name]()}#E(p){Object.entries(p).some(([E,y])=>this.#C[E]!==y)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#C,p)})}#U(p){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:p})}setEditingState(p){p?(this.#F(),this.#q(),this.#L(),this.#E({isEditing:this.#p!==r.AnnotationEditorType.NONE,isEmpty:this.#z(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#I(),this.#k(),this.#S(),this.#E({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(p){if(!this.#i){this.#i=p;for(const j of this.#i)this.#U(j.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#s.get(this.#r)}getLayer(p){return this.#s.get(p)}get currentPageIndex(){return this.#r}addLayer(p){this.#s.set(p.pageIndex,p),this.#m?p.enable():p.disable()}removeLayer(p){this.#s.delete(p.pageIndex)}updateMode(p,j=null){if(this.#p!==p){if(this.#p=p,p===r.AnnotationEditorType.NONE){this.setEditingState(!1),this.#$();return}this.setEditingState(!0),this.#V(),this.unselectAll();for(const E of this.#s.values())E.updateMode(p);if(j){for(const E of this.#e.values())if(E.annotationElementId===j){this.setSelected(E),E.enterInEditMode();break}}}}updateToolbar(p){p!==this.#p&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:p})}updateParams(p,j){if(this.#i){if(p===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(p);return}for(const E of this.#u)E.updateParams(p,j);for(const E of this.#i)E.updateDefaultParams(p,j)}}enableWaiting(p=!1){if(this.#g!==p){this.#g=p;for(const j of this.#s.values())p?j.disableClick():j.enableClick(),j.div.classList.toggle("waiting",p)}}#V(){if(!this.#m){this.#m=!0;for(const p of this.#s.values())p.enable()}}#$(){if(this.unselectAll(),this.#m){this.#m=!1;for(const p of this.#s.values())p.disable()}}getEditors(p){const j=[];for(const E of this.#e.values())E.pageIndex===p&&j.push(E);return j}getEditor(p){return this.#e.get(p)}addEditor(p){this.#e.set(p.id,p)}removeEditor(p){this.#e.delete(p.id),this.unselect(p),(!p.annotationElementId||!this.#l.has(p.annotationElementId))&&this.#o?.remove(p.id)}addDeletedAnnotationElement(p){this.#l.add(p.annotationElementId),p.deleted=!0}isDeletedAnnotationElement(p){return this.#l.has(p)}removeDeletedAnnotationElement(p){this.#l.delete(p.annotationElementId),p.deleted=!1}#H(p){const j=this.#s.get(p.pageIndex);j?j.addOrRebuild(p):this.addEditor(p)}setActiveEditor(p){this.#t!==p&&(this.#t=p,p&&this.#U(p.propertiesToUpdate))}toggleSelected(p){if(this.#u.has(p)){this.#u.delete(p),p.unselect(),this.#E({hasSelectedEditor:this.hasSelection});return}this.#u.add(p),p.select(),this.#U(p.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}setSelected(p){for(const j of this.#u)j!==p&&j.unselect();this.#u.clear(),this.#u.add(p),p.select(),this.#U(p.propertiesToUpdate),this.#E({hasSelectedEditor:!0})}isSelected(p){return this.#u.has(p)}unselect(p){p.unselect(),this.#u.delete(p),this.#E({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#a.undo(),this.#E({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#z()})}redo(){this.#a.redo(),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#z()})}addCommands(p){this.#a.add(p),this.#E({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#z()})}#z(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const p of this.#e.values())return p.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const p=[...this.#u],j=()=>{for(const y of p)y.remove()},E=()=>{for(const y of p)this.#H(y)};this.addCommands({cmd:j,undo:E,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#G(p){this.#u.clear();for(const j of p)j.isEmpty()||(this.#u.add(j),j.select());this.#E({hasSelectedEditor:!0})}selectAll(){for(const p of this.#u)p.commit();this.#G(this.#e.values())}unselectAll(){if(this.#t){this.#t.commitOrRemove();return}if(this.hasSelection){for(const p of this.#u)p.unselect();this.#u.clear(),this.#E({hasSelectedEditor:!1})}}translateSelectedEditors(p,j,E=!1){if(E||this.commitOrRemove(),!this.hasSelection)return;this.#v[0]+=p,this.#v[1]+=j;const[y,C]=this.#v,B=[...this.#u],I=1e3;this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.#_=null,this.#v[0]=this.#v[1]=0,this.addCommands({cmd:()=>{for(const N of B)this.#e.has(N.id)&&N.translateInPage(y,C)},undo:()=>{for(const N of B)this.#e.has(N.id)&&N.translateInPage(-y,-C)},mustExec:!1})},I);for(const N of B)N.translateInPage(p,j)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const p of this.#u)this.#c.set(p,{savedX:p.x,savedY:p.y,savedPageIndex:p.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const p=this.#c;this.#c=null;let j=!1;for(const[{x:y,y:C,pageIndex:B},I]of p)I.newX=y,I.newY=C,I.newPageIndex=B,j||=y!==I.savedX||C!==I.savedY||B!==I.savedPageIndex;if(!j)return!1;const E=(y,C,B,I)=>{if(this.#e.has(y.id)){const N=this.#s.get(I);N?y._setParentAndPosition(N,C,B):(y.pageIndex=I,y.x=C,y.y=B)}};return this.addCommands({cmd:()=>{for(const[y,{newX:C,newY:B,newPageIndex:I}]of p)E(y,C,B,I)},undo:()=>{for(const[y,{savedX:C,savedY:B,savedPageIndex:I}]of p)E(y,C,B,I)},mustExec:!0}),!0}dragSelectedEditors(p,j){if(this.#c)for(const E of this.#c.keys())E.drag(p,j)}rebuild(p){if(p.parent===null){const j=this.getLayer(p.pageIndex);j?(j.changeParent(p),j.addOrRebuild(p)):(this.addEditor(p),this.addToAnnotationStorage(p),p.rebuild())}else p.parent.addOrRebuild(p)}isActive(p){return this.#t===p}getActive(){return this.#t}getMode(){return this.#p}get imageManager(){return(0,r.shadow)(this,"imageManager",new A)}}s.AnnotationEditorUIManager=g}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMFilterFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=void 0,s.deprecated=Q,s.getColorValues=it,s.getCurrentTransform=Y,s.getCurrentTransformInverse=rt,s.getFilenameFromUrl=y,s.getPdfFilenameFromUrl=C,s.getRGB=F,s.getXfaPageViewport=st,s.isDataScheme=j,s.isPdfFile=E,s.isValidFetchUrl=I,s.loadScript=L,s.noContextMenu=N,s.setLayerDimensions=lt;var r=i(7),l=i(1);const h="http://www.w3.org/2000/svg";class m{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}s.PixelsPerInch=m;class v extends r.BaseFilterFactory{#t;#e;#s;#n;#o;#a;#r;#l;#c;#i;#f=0;constructor({docId:P,ownerDocument:k=globalThis.document}={}){super(),this.#s=P,this.#n=k}get#d(){return this.#t||=new Map}get#h(){if(!this.#e){const P=this.#n.createElement("div"),{style:k}=P;k.visibility="hidden",k.contain="strict",k.width=k.height=0,k.position="absolute",k.top=k.left=0,k.zIndex=-1;const _=this.#n.createElementNS(h,"svg");_.setAttribute("width",0),_.setAttribute("height",0),this.#e=this.#n.createElementNS(h,"defs"),P.append(_),_.append(this.#e),this.#n.body.append(P)}return this.#e}addFilter(P){if(!P)return"none";let k=this.#d.get(P);if(k)return k;let _,S,O,H;if(P.length===1){const R=P[0],M=new Array(256);for(let D=0;D<256;D++)M[D]=R[D]/255;H=_=S=O=M.join(",")}else{const[R,M,D]=P,V=new Array(256),W=new Array(256),$=new Array(256);for(let J=0;J<256;J++)V[J]=R[J]/255,W[J]=M[J]/255,$[J]=D[J]/255;_=V.join(","),S=W.join(","),O=$.join(","),H=`${_}${S}${O}`}if(k=this.#d.get(H),k)return this.#d.set(P,k),k;const G=`g_${this.#s}_transfer_map_${this.#f++}`,K=`url(#${G})`;this.#d.set(P,K),this.#d.set(H,K);const q=this.#g(G);return this.#p(_,S,O,q),K}addHCMFilter(P,k){const _=`${P}-${k}`;if(this.#a===_)return this.#r;if(this.#a=_,this.#r="none",this.#o?.remove(),!P||!k)return this.#r;const S=this.#u(P);P=l.Util.makeHexColor(...S);const O=this.#u(k);if(k=l.Util.makeHexColor(...O),this.#h.style.color="",P==="#000000"&&k==="#ffffff"||P===k)return this.#r;const H=new Array(256);for(let M=0;M<=255;M++){const D=M/255;H[M]=D<=.03928?D/12.92:((D+.055)/1.055)**2.4}const G=H.join(","),K=`g_${this.#s}_hcm_filter`,q=this.#l=this.#g(K);this.#p(G,G,G,q),this.#m(q);const R=(M,D)=>{const V=S[M]/255,W=O[M]/255,$=new Array(D+1);for(let J=0;J<=D;J++)$[J]=V+J/D*(W-V);return $.join(",")};return this.#p(R(0,5),R(1,5),R(2,5),q),this.#r=`url(#${K})`,this.#r}addHighlightHCMFilter(P,k,_,S){const O=`${P}-${k}-${_}-${S}`;if(this.#c===O)return this.#i;if(this.#c=O,this.#i="none",this.#l?.remove(),!P||!k)return this.#i;const[H,G]=[P,k].map(this.#u.bind(this));let K=Math.round(.2126*H[0]+.7152*H[1]+.0722*H[2]),q=Math.round(.2126*G[0]+.7152*G[1]+.0722*G[2]),[R,M]=[_,S].map(this.#u.bind(this));q<K&&([K,q,R,M]=[q,K,M,R]),this.#h.style.color="";const D=($,J,ot)=>{const yt=new Array(256),ut=(q-K)/ot,xt=$/255,vt=(J-$)/(255*ot);let Et=0;for(let wt=0;wt<=ot;wt++){const _t=Math.round(K+wt*ut),Tt=xt+wt*vt;for(let Dt=Et;Dt<=_t;Dt++)yt[Dt]=Tt;Et=_t+1}for(let wt=Et;wt<256;wt++)yt[wt]=yt[Et-1];return yt.join(",")},V=`g_${this.#s}_hcm_highlight_filter`,W=this.#l=this.#g(V);return this.#m(W),this.#p(D(R[0],M[0],5),D(R[1],M[1],5),D(R[2],M[2],5),W),this.#i=`url(#${V})`,this.#i}destroy(P=!1){P&&(this.#r||this.#i)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#f=0)}#m(P){const k=this.#n.createElementNS(h,"feColorMatrix");k.setAttribute("type","matrix"),k.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),P.append(k)}#g(P){const k=this.#n.createElementNS(h,"filter");return k.setAttribute("color-interpolation-filters","sRGB"),k.setAttribute("id",P),this.#h.append(k),k}#x(P,k,_){const S=this.#n.createElementNS(h,k);S.setAttribute("type","discrete"),S.setAttribute("tableValues",_),P.append(S)}#p(P,k,_,S){const O=this.#n.createElementNS(h,"feComponentTransfer");S.append(O),this.#x(O,"feFuncR",P),this.#x(O,"feFuncG",k),this.#x(O,"feFuncB",_)}#u(P){return this.#h.style.color=P,F(getComputedStyle(this.#h).getPropertyValue("color"))}}s.DOMFilterFactory=v;class A extends r.BaseCanvasFactory{constructor({ownerDocument:P=globalThis.document}={}){super(),this._document=P}_createCanvas(P,k){const _=this._document.createElement("canvas");return _.width=P,_.height=k,_}}s.DOMCanvasFactory=A;async function d(U,P=!1){if(I(U,document.baseURI)){const k=await fetch(U);if(!k.ok)throw new Error(k.statusText);return P?new Uint8Array(await k.arrayBuffer()):(0,l.stringToBytes)(await k.text())}return new Promise((k,_)=>{const S=new XMLHttpRequest;S.open("GET",U,!0),P&&(S.responseType="arraybuffer"),S.onreadystatechange=()=>{if(S.readyState===XMLHttpRequest.DONE){if(S.status===200||S.status===0){let O;if(P&&S.response?O=new Uint8Array(S.response):!P&&S.responseText&&(O=(0,l.stringToBytes)(S.responseText)),O){k(O);return}}_(new Error(S.statusText))}},S.send(null)})}class c extends r.BaseCMapReaderFactory{_fetchData(P,k){return d(P,this.isCompressed).then(_=>({cMapData:_,compressionType:k}))}}s.DOMCMapReaderFactory=c;class f extends r.BaseStandardFontDataFactory{_fetchData(P){return d(P,!0)}}s.DOMStandardFontDataFactory=f;class g extends r.BaseSVGFactory{_createSVG(P){return document.createElementNS(h,P)}}s.DOMSVGFactory=g;class b{constructor({viewBox:P,scale:k,rotation:_,offsetX:S=0,offsetY:O=0,dontFlip:H=!1}){this.viewBox=P,this.scale=k,this.rotation=_,this.offsetX=S,this.offsetY=O;const G=(P[2]+P[0])/2,K=(P[3]+P[1])/2;let q,R,M,D;switch(_%=360,_<0&&(_+=360),_){case 180:q=-1,R=0,M=0,D=1;break;case 90:q=0,R=1,M=1,D=0;break;case 270:q=0,R=-1,M=-1,D=0;break;case 0:q=1,R=0,M=0,D=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}H&&(M=-M,D=-D);let V,W,$,J;q===0?(V=Math.abs(K-P[1])*k+S,W=Math.abs(G-P[0])*k+O,$=(P[3]-P[1])*k,J=(P[2]-P[0])*k):(V=Math.abs(G-P[0])*k+S,W=Math.abs(K-P[1])*k+O,$=(P[2]-P[0])*k,J=(P[3]-P[1])*k),this.transform=[q*k,R*k,M*k,D*k,V-q*k*G-M*k*K,W-R*k*G-D*k*K],this.width=$,this.height=J}get rawDims(){const{viewBox:P}=this;return(0,l.shadow)(this,"rawDims",{pageWidth:P[2]-P[0],pageHeight:P[3]-P[1],pageX:P[0],pageY:P[1]})}clone({scale:P=this.scale,rotation:k=this.rotation,offsetX:_=this.offsetX,offsetY:S=this.offsetY,dontFlip:O=!1}={}){return new b({viewBox:this.viewBox.slice(),scale:P,rotation:k,offsetX:_,offsetY:S,dontFlip:O})}convertToViewportPoint(P,k){return l.Util.applyTransform([P,k],this.transform)}convertToViewportRectangle(P){const k=l.Util.applyTransform([P[0],P[1]],this.transform),_=l.Util.applyTransform([P[2],P[3]],this.transform);return[k[0],k[1],_[0],_[1]]}convertToPdfPoint(P,k){return l.Util.applyInverseTransform([P,k],this.transform)}}s.PageViewport=b;class p extends l.BaseException{constructor(P,k=0){super(P,"RenderingCancelledException"),this.extraDelay=k}}s.RenderingCancelledException=p;function j(U){const P=U.length;let k=0;for(;k<P&&U[k].trim()==="";)k++;return U.substring(k,k+5).toLowerCase()==="data:"}function E(U){return typeof U=="string"&&/\.pdf$/i.test(U)}function y(U,P=!1){return P||([U]=U.split(/[#?]/,1)),U.substring(U.lastIndexOf("/")+1)}function C(U,P="document.pdf"){if(typeof U!="string")return P;if(j(U))return(0,l.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),P;const k=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,_=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,S=k.exec(U);let O=_.exec(S[1])||_.exec(S[2])||_.exec(S[3]);if(O&&(O=O[0],O.includes("%")))try{O=_.exec(decodeURIComponent(O))[0]}catch{}return O||P}class B{started=Object.create(null);times=[];time(P){P in this.started&&(0,l.warn)(`Timer is already running for ${P}`),this.started[P]=Date.now()}timeEnd(P){P in this.started||(0,l.warn)(`Timer has not been started for ${P}`),this.times.push({name:P,start:this.started[P],end:Date.now()}),delete this.started[P]}toString(){const P=[];let k=0;for(const{name:_}of this.times)k=Math.max(_.length,k);for(const{name:_,start:S,end:O}of this.times)P.push(`${_.padEnd(k)} ${O-S}ms
`);return P.join("")}}s.StatTimer=B;function I(U,P){try{const{protocol:k}=P?new URL(U,P):new URL(U);return k==="http:"||k==="https:"}catch{return!1}}function N(U){U.preventDefault()}function L(U,P=!1){return new Promise((k,_)=>{const S=document.createElement("script");S.src=U,S.onload=function(O){P&&S.remove(),k(O)},S.onerror=function(){_(new Error(`Cannot load script at: ${S.src}`))},(document.head||document.documentElement).append(S)})}function Q(U){console.log("Deprecated API usage: "+U)}let tt;class Z{static toDateObject(P){if(!P||typeof P!="string")return null;tt||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const k=tt.exec(P);if(!k)return null;const _=parseInt(k[1],10);let S=parseInt(k[2],10);S=S>=1&&S<=12?S-1:0;let O=parseInt(k[3],10);O=O>=1&&O<=31?O:1;let H=parseInt(k[4],10);H=H>=0&&H<=23?H:0;let G=parseInt(k[5],10);G=G>=0&&G<=59?G:0;let K=parseInt(k[6],10);K=K>=0&&K<=59?K:0;const q=k[7]||"Z";let R=parseInt(k[8],10);R=R>=0&&R<=23?R:0;let M=parseInt(k[9],10)||0;return M=M>=0&&M<=59?M:0,q==="-"?(H+=R,G+=M):q==="+"&&(H-=R,G-=M),new Date(Date.UTC(_,S,O,H,G,K))}}s.PDFDateString=Z;function st(U,{scale:P=1,rotation:k=0}){const{width:_,height:S}=U.attributes.style,O=[0,0,parseInt(_),parseInt(S)];return new b({viewBox:O,scale:P,rotation:k})}function F(U){if(U.startsWith("#")){const P=parseInt(U.slice(1),16);return[(P&16711680)>>16,(P&65280)>>8,P&255]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(P=>parseInt(P)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(P=>parseInt(P)).slice(0,3):((0,l.warn)(`Not a valid color format: "${U}"`),[0,0,0])}function it(U){const P=document.createElement("span");P.style.visibility="hidden",document.body.append(P);for(const k of U.keys()){P.style.color=k;const _=window.getComputedStyle(P).color;U.set(k,F(_))}P.remove()}function Y(U){const{a:P,b:k,c:_,d:S,e:O,f:H}=U.getTransform();return[P,k,_,S,O,H]}function rt(U){const{a:P,b:k,c:_,d:S,e:O,f:H}=U.getTransform().invertSelf();return[P,k,_,S,O,H]}function lt(U,P,k=!1,_=!0){if(P instanceof b){const{pageWidth:S,pageHeight:O}=P.rawDims,{style:H}=U,G=l.FeatureTest.isCSSRoundSupported,K=`var(--scale-factor) * ${S}px`,q=`var(--scale-factor) * ${O}px`,R=G?`round(${K}, 1px)`:`calc(${K})`,M=G?`round(${q}, 1px)`:`calc(${q})`;!k||P.rotation%180===0?(H.width=R,H.height=M):(H.width=M,H.height=R)}_&&U.setAttribute("data-main-rotation",P.rotation)}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseFilterFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var r=i(1);class l{constructor(){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(c){return"none"}addHCMFilter(c,f){return"none"}addHighlightHCMFilter(c,f,g,b){return"none"}destroy(c=!1){}}s.BaseFilterFactory=l;class h{constructor(){this.constructor===h&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,f){if(c<=0||f<=0)throw new Error("Invalid canvas size");const g=this._createCanvas(c,f);return{canvas:g,context:g.getContext("2d")}}reset(c,f,g){if(!c.canvas)throw new Error("Canvas is not specified");if(f<=0||g<=0)throw new Error("Invalid canvas size");c.canvas.width=f,c.canvas.height=g}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}_createCanvas(c,f){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=h;class m{constructor({baseUrl:c=null,isCompressed:f=!0}){this.constructor===m&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=f}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const f=this.baseUrl+c+(this.isCompressed?".bcmap":""),g=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(f,g).catch(b=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${f}`)})}_fetchData(c,f){(0,r.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=m;class v{constructor({baseUrl:c=null}){this.constructor===v&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=c}async fetch({filename:c}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!c)throw new Error("Font filename must be specified.");const f=`${this.baseUrl}${c}`;return this._fetchData(f).catch(g=>{throw new Error(`Unable to load font data at: ${f}`)})}_fetchData(c){(0,r.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=v;class A{constructor(){this.constructor===A&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(c,f,g=!1){if(c<=0||f<=0)throw new Error("Invalid SVG dimensions");const b=this._createSVG("svg:svg");return b.setAttribute("version","1.1"),g||(b.setAttribute("width",`${c}px`),b.setAttribute("height",`${f}px`)),b.setAttribute("preserveAspectRatio","none"),b.setAttribute("viewBox",`0 0 ${c} ${f}`),b}createElement(c){if(typeof c!="string")throw new Error("Invalid SVG element type");return this._createSVG(c)}_createSVG(c){(0,r.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=A}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var r=i(1);const l=3285377520,h=4294901760,m=65535;class v{constructor(d){this.h1=d?d&4294967295:l,this.h2=d?d&4294967295:l}update(d){let c,f;if(typeof d=="string"){c=new Uint8Array(d.length*2),f=0;for(let Q=0,tt=d.length;Q<tt;Q++){const Z=d.charCodeAt(Q);Z<=255?c[f++]=Z:(c[f++]=Z>>>8,c[f++]=Z&255)}}else if((0,r.isArrayBuffer)(d))c=d.slice(),f=c.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const g=f>>2,b=f-g*4,p=new Uint32Array(c.buffer,0,g);let j=0,E=0,y=this.h1,C=this.h2;const B=3432918353,I=461845907,N=B&m,L=I&m;for(let Q=0;Q<g;Q++)Q&1?(j=p[Q],j=j*B&h|j*N&m,j=j<<15|j>>>17,j=j*I&h|j*L&m,y^=j,y=y<<13|y>>>19,y=y*5+3864292196):(E=p[Q],E=E*B&h|E*N&m,E=E<<15|E>>>17,E=E*I&h|E*L&m,C^=E,C=C<<13|C>>>19,C=C*5+3864292196);switch(j=0,b){case 3:j^=c[g*4+2]<<16;case 2:j^=c[g*4+1]<<8;case 1:j^=c[g*4],j=j*B&h|j*N&m,j=j<<15|j>>>17,j=j*I&h|j*L&m,g&1?y^=j:C^=j}this.h1=y,this.h2=C}hexdigest(){let d=this.h1,c=this.h2;return d^=c>>>1,d=d*3981806797&h|d*36045&m,c=c*4283543511&h|((c<<16|d>>>16)*2950163797&h)>>>16,d^=c>>>1,d=d*444984403&h|d*60499&m,c=c*3301882366&h|((c<<16|d>>>16)*3120437893&h)>>>16,d^=c>>>1,(d>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}s.MurmurHash3_64=v}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var r=i(1);class l{#t=new Set;constructor({ownerDocument:v=globalThis.document,styleElement:A=null}){this._document=v,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(v){this.nativeFontFaces.add(v),this._document.fonts.add(v)}removeNativeFontFace(v){this.nativeFontFaces.delete(v),this._document.fonts.delete(v)}insertRule(v){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const A=this.styleElement.sheet;A.insertRule(v,A.cssRules.length)}clear(){for(const v of this.nativeFontFaces)this._document.fonts.delete(v);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(v){if(!(!v||this.#t.has(v.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:A,src:d,style:c}=v,f=new FontFace(A,d,c);this.addNativeFontFace(f);try{await f.load(),this.#t.add(A)}catch{(0,r.warn)(`Cannot load system font: ${v.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(f)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(v){if(v.attached||v.missingFile&&!v.systemFontInfo)return;if(v.attached=!0,v.systemFontInfo){await this.loadSystemFont(v.systemFontInfo);return}if(this.isFontLoadingAPISupported){const d=v.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(c){throw(0,r.warn)(`Failed to load font '${d.family}': '${c}'.`),v.disableFontFace=!0,c}}return}const A=v.createFontFaceRule();if(A){if(this.insertRule(A),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const c=this._queueLoadingCallback(d);this._prepareFontLoadEvent(v,c)})}}get isFontLoadingAPISupported(){const v=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",v)}get isSyncFontLoadingSupported(){let v=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(v=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",v)}_queueLoadingCallback(v){function A(){for((0,r.assert)(!c.done,"completeRequest() cannot be called twice."),c.done=!0;d.length>0&&d[0].done;){const f=d.shift();setTimeout(f.callback,0)}}const{loadingRequests:d}=this,c={done:!1,complete:A,callback:v};return d.push(c),c}get _loadTestFont(){const v=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",v)}_prepareFontLoadEvent(v,A){function d(st,F){return st.charCodeAt(F)<<24|st.charCodeAt(F+1)<<16|st.charCodeAt(F+2)<<8|st.charCodeAt(F+3)&255}function c(st,F,it,Y){const rt=st.substring(0,F),lt=st.substring(F+it);return rt+Y+lt}let f,g;const b=this._document.createElement("canvas");b.width=1,b.height=1;const p=b.getContext("2d");let j=0;function E(st,F){if(++j>30){(0,r.warn)("Load test font never loaded."),F();return}if(p.font="30px "+st,p.fillText(".",0,20),p.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(E.bind(null,st,F))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let C=this._loadTestFont;C=c(C,976,y.length,y);const I=16,N=1482184792;let L=d(C,I);for(f=0,g=y.length-3;f<g;f+=4)L=L-N+d(y,f)|0;f<y.length&&(L=L-N+d(y+"XXX",f)|0),C=c(C,I,4,(0,r.string32)(L));const Q=`url(data:font/opentype;base64,${btoa(C)});`,tt=`@font-face {font-family:"${y}";src:${Q}}`;this.insertRule(tt);const Z=this._document.createElement("div");Z.style.visibility="hidden",Z.style.width=Z.style.height="10px",Z.style.position="absolute",Z.style.top=Z.style.left="0px";for(const st of[v.loadedName,y]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=st,Z.append(F)}this._document.body.append(Z),E(y,()=>{Z.remove(),A.complete()})}}s.FontLoader=l;class h{constructor(v,{isEvalSupported:A=!0,disableFontFace:d=!1,ignoreErrors:c=!1,inspectFont:f=null}){this.compiledGlyphs=Object.create(null);for(const g in v)this[g]=v[g];this.isEvalSupported=A!==!1,this.disableFontFace=d===!0,this.ignoreErrors=c===!0,this._inspectFont=f}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let v;if(!this.cssFontInfo)v=new FontFace(this.loadedName,this.data,{});else{const A={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(A.style=`oblique ${this.cssFontInfo.italicAngle}deg`),v=new FontFace(this.cssFontInfo.fontFamily,this.data,A)}return this._inspectFont?.(this),v}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const v=(0,r.bytesToString)(this.data),A=`url(data:${this.mimetype};base64,${btoa(v)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${A}}`;else{let c=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(c+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${c}src:${A}}`}return this._inspectFont?.(this,A),d}getPathGenerator(v,A){if(this.compiledGlyphs[A]!==void 0)return this.compiledGlyphs[A];let d;try{d=v.get(this.loadedName+"_path_"+A)}catch(c){if(!this.ignoreErrors)throw c;return(0,r.warn)(`getPathGenerator - ignoring character: "${c}".`),this.compiledGlyphs[A]=function(f,g){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const c=[];for(const f of d){const g=f.args!==void 0?f.args.join(","):"";c.push("c.",f.cmd,"(",g,`);
`)}return this.compiledGlyphs[A]=new Function("c","size",c.join(""))}return this.compiledGlyphs[A]=function(c,f){for(const g of d)g.cmd==="scale"&&(g.args=[f,-f]),c[g.cmd].apply(c,g.args)}}}s.FontFaceObject=h}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeFilterFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var r=i(7);i(1);const l=function(d){return new Promise((c,f)=>{require$$5.readFile(d,(b,p)=>{if(b||!p){f(new Error(b));return}c(new Uint8Array(p))})})};class h extends r.BaseFilterFactory{}s.NodeFilterFactory=h;class m extends r.BaseCanvasFactory{_createCanvas(c,f){return require$$5.createCanvas(c,f)}}s.NodeCanvasFactory=m;class v extends r.BaseCMapReaderFactory{_fetchData(c,f){return l(c).then(g=>({cMapData:g,compressionType:f}))}}s.NodeCMapReaderFactory=v;class A extends r.BaseStandardFontDataFactory{_fetchData(c){return l(c)}}s.NodeStandardFontDataFactory=A}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var r=i(1),l=i(6),h=i(12),m=i(13);const v=16,A=100,d=4096,c=15,f=10,g=1e3,b=16;function p(k,_){if(k._removeMirroring)throw new Error("Context is already forwarding operations.");k.__originalSave=k.save,k.__originalRestore=k.restore,k.__originalRotate=k.rotate,k.__originalScale=k.scale,k.__originalTranslate=k.translate,k.__originalTransform=k.transform,k.__originalSetTransform=k.setTransform,k.__originalResetTransform=k.resetTransform,k.__originalClip=k.clip,k.__originalMoveTo=k.moveTo,k.__originalLineTo=k.lineTo,k.__originalBezierCurveTo=k.bezierCurveTo,k.__originalRect=k.rect,k.__originalClosePath=k.closePath,k.__originalBeginPath=k.beginPath,k._removeMirroring=()=>{k.save=k.__originalSave,k.restore=k.__originalRestore,k.rotate=k.__originalRotate,k.scale=k.__originalScale,k.translate=k.__originalTranslate,k.transform=k.__originalTransform,k.setTransform=k.__originalSetTransform,k.resetTransform=k.__originalResetTransform,k.clip=k.__originalClip,k.moveTo=k.__originalMoveTo,k.lineTo=k.__originalLineTo,k.bezierCurveTo=k.__originalBezierCurveTo,k.rect=k.__originalRect,k.closePath=k.__originalClosePath,k.beginPath=k.__originalBeginPath,delete k._removeMirroring},k.save=function(){_.save(),this.__originalSave()},k.restore=function(){_.restore(),this.__originalRestore()},k.translate=function(O,H){_.translate(O,H),this.__originalTranslate(O,H)},k.scale=function(O,H){_.scale(O,H),this.__originalScale(O,H)},k.transform=function(O,H,G,K,q,R){_.transform(O,H,G,K,q,R),this.__originalTransform(O,H,G,K,q,R)},k.setTransform=function(O,H,G,K,q,R){_.setTransform(O,H,G,K,q,R),this.__originalSetTransform(O,H,G,K,q,R)},k.resetTransform=function(){_.resetTransform(),this.__originalResetTransform()},k.rotate=function(O){_.rotate(O),this.__originalRotate(O)},k.clip=function(O){_.clip(O),this.__originalClip(O)},k.moveTo=function(S,O){_.moveTo(S,O),this.__originalMoveTo(S,O)},k.lineTo=function(S,O){_.lineTo(S,O),this.__originalLineTo(S,O)},k.bezierCurveTo=function(S,O,H,G,K,q){_.bezierCurveTo(S,O,H,G,K,q),this.__originalBezierCurveTo(S,O,H,G,K,q)},k.rect=function(S,O,H,G){_.rect(S,O,H,G),this.__originalRect(S,O,H,G)},k.closePath=function(){_.closePath(),this.__originalClosePath()},k.beginPath=function(){_.beginPath(),this.__originalBeginPath()}}class j{constructor(_){this.canvasFactory=_,this.cache=Object.create(null)}getCanvas(_,S,O){let H;return this.cache[_]!==void 0?(H=this.cache[_],this.canvasFactory.reset(H,S,O)):(H=this.canvasFactory.create(S,O),this.cache[_]=H),H}delete(_){delete this.cache[_]}clear(){for(const _ in this.cache){const S=this.cache[_];this.canvasFactory.destroy(S),delete this.cache[_]}}}function E(k,_,S,O,H,G,K,q,R,M){const[D,V,W,$,J,ot]=(0,l.getCurrentTransform)(k);if(V===0&&W===0){const xt=K*D+J,vt=Math.round(xt),Et=q*$+ot,wt=Math.round(Et),_t=(K+R)*D+J,Tt=Math.abs(Math.round(_t)-vt)||1,Dt=(q+M)*$+ot,Pt=Math.abs(Math.round(Dt)-wt)||1;return k.setTransform(Math.sign(D),0,0,Math.sign($),vt,wt),k.drawImage(_,S,O,H,G,0,0,Tt,Pt),k.setTransform(D,V,W,$,J,ot),[Tt,Pt]}if(D===0&&$===0){const xt=q*W+J,vt=Math.round(xt),Et=K*V+ot,wt=Math.round(Et),_t=(q+M)*W+J,Tt=Math.abs(Math.round(_t)-vt)||1,Dt=(K+R)*V+ot,Pt=Math.abs(Math.round(Dt)-wt)||1;return k.setTransform(0,Math.sign(V),Math.sign(W),0,vt,wt),k.drawImage(_,S,O,H,G,0,0,Pt,Tt),k.setTransform(D,V,W,$,J,ot),[Pt,Tt]}k.drawImage(_,S,O,H,G,K,q,R,M);const yt=Math.hypot(D,V),ut=Math.hypot(W,$);return[yt*R,ut*M]}function y(k){const{width:_,height:S}=k;if(_>g||S>g)return null;const O=1e3,H=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),G=_+1;let K=new Uint8Array(G*(S+1)),q,R,M;const D=_+7&-8;let V=new Uint8Array(D*S),W=0;for(const ut of k.data){let xt=128;for(;xt>0;)V[W++]=ut&xt?0:255,xt>>=1}let $=0;for(W=0,V[W]!==0&&(K[0]=1,++$),R=1;R<_;R++)V[W]!==V[W+1]&&(K[R]=V[W]?2:1,++$),W++;for(V[W]!==0&&(K[R]=2,++$),q=1;q<S;q++){W=q*D,M=q*G,V[W-D]!==V[W]&&(K[M]=V[W]?1:8,++$);let ut=(V[W]?4:0)+(V[W-D]?8:0);for(R=1;R<_;R++)ut=(ut>>2)+(V[W+1]?4:0)+(V[W-D+1]?8:0),H[ut]&&(K[M+R]=H[ut],++$),W++;if(V[W-D]!==V[W]&&(K[M+R]=V[W]?2:4,++$),$>O)return null}for(W=D*(S-1),M=q*G,V[W]!==0&&(K[M]=8,++$),R=1;R<_;R++)V[W]!==V[W+1]&&(K[M+R]=V[W]?4:8,++$),W++;if(V[W]!==0&&(K[M+R]=4,++$),$>O)return null;const J=new Int32Array([0,G,-1,0,-G,0,0,0,1]),ot=new Path2D;for(q=0;$&&q<=S;q++){let ut=q*G;const xt=ut+_;for(;ut<xt&&!K[ut];)ut++;if(ut===xt)continue;ot.moveTo(ut%G,q);const vt=ut;let Et=K[ut];do{const wt=J[Et];do ut+=wt;while(!K[ut]);const _t=K[ut];_t!==5&&_t!==10?(Et=_t,K[ut]=0):(Et=_t&51*Et>>4,K[ut]&=Et>>2|Et<<2),ot.lineTo(ut%G,ut/G|0),K[ut]||--$}while(vt!==ut);--q}return V=null,K=null,function(ut){ut.save(),ut.scale(1/_,-1/S),ut.translate(0,-S),ut.fill(ot),ut.beginPath(),ut.restore()}}class C{constructor(_,S){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,_,S])}clone(){const _=Object.create(this);return _.clipBox=this.clipBox.slice(),_}setCurrentPoint(_,S){this.x=_,this.y=S}updatePathMinMax(_,S,O){[S,O]=r.Util.applyTransform([S,O],_),this.minX=Math.min(this.minX,S),this.minY=Math.min(this.minY,O),this.maxX=Math.max(this.maxX,S),this.maxY=Math.max(this.maxY,O)}updateRectMinMax(_,S){const O=r.Util.applyTransform(S,_),H=r.Util.applyTransform(S.slice(2),_);this.minX=Math.min(this.minX,O[0],H[0]),this.minY=Math.min(this.minY,O[1],H[1]),this.maxX=Math.max(this.maxX,O[0],H[0]),this.maxY=Math.max(this.maxY,O[1],H[1])}updateScalingPathMinMax(_,S){r.Util.scaleMinMax(_,S),this.minX=Math.min(this.minX,S[0]),this.maxX=Math.max(this.maxX,S[1]),this.minY=Math.min(this.minY,S[2]),this.maxY=Math.max(this.maxY,S[3])}updateCurvePathMinMax(_,S,O,H,G,K,q,R,M,D){const V=r.Util.bezierBoundingBox(S,O,H,G,K,q,R,M);if(D){D[0]=Math.min(D[0],V[0],V[2]),D[1]=Math.max(D[1],V[0],V[2]),D[2]=Math.min(D[2],V[1],V[3]),D[3]=Math.max(D[3],V[1],V[3]);return}this.updateRectMinMax(_,V)}getPathBoundingBox(_=h.PathType.FILL,S=null){const O=[this.minX,this.minY,this.maxX,this.maxY];if(_===h.PathType.STROKE){S||(0,r.unreachable)("Stroke bounding box must include transform.");const H=r.Util.singularValueDecompose2dScale(S),G=H[0]*this.lineWidth/2,K=H[1]*this.lineWidth/2;O[0]-=G,O[1]-=K,O[2]+=G,O[3]+=K}return O}updateClipFromPath(){const _=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(_||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(_){this.clipBox=_,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(_=h.PathType.FILL,S=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(_,S))}}function B(k,_){if(typeof ImageData<"u"&&_ instanceof ImageData){k.putImageData(_,0,0);return}const S=_.height,O=_.width,H=S%b,G=(S-H)/b,K=H===0?G:G+1,q=k.createImageData(O,b);let R=0,M;const D=_.data,V=q.data;let W,$,J,ot;if(_.kind===r.ImageKind.GRAYSCALE_1BPP){const yt=D.byteLength,ut=new Uint32Array(V.buffer,0,V.byteLength>>2),xt=ut.length,vt=O+7>>3,Et=4294967295,wt=r.FeatureTest.isLittleEndian?4278190080:255;for(W=0;W<K;W++){for(J=W<G?b:H,M=0,$=0;$<J;$++){const _t=yt-R;let Tt=0;const Dt=_t>vt?O:_t*8-7,Pt=Dt&-8;let kt=0,Vt=0;for(;Tt<Pt;Tt+=8)Vt=D[R++],ut[M++]=Vt&128?Et:wt,ut[M++]=Vt&64?Et:wt,ut[M++]=Vt&32?Et:wt,ut[M++]=Vt&16?Et:wt,ut[M++]=Vt&8?Et:wt,ut[M++]=Vt&4?Et:wt,ut[M++]=Vt&2?Et:wt,ut[M++]=Vt&1?Et:wt;for(;Tt<Dt;Tt++)kt===0&&(Vt=D[R++],kt=128),ut[M++]=Vt&kt?Et:wt,kt>>=1}for(;M<xt;)ut[M++]=0;k.putImageData(q,0,W*b)}}else if(_.kind===r.ImageKind.RGBA_32BPP){for($=0,ot=O*b*4,W=0;W<G;W++)V.set(D.subarray(R,R+ot)),R+=ot,k.putImageData(q,0,$),$+=b;W<K&&(ot=O*H*4,V.set(D.subarray(R,R+ot)),k.putImageData(q,0,$))}else if(_.kind===r.ImageKind.RGB_24BPP)for(J=b,ot=O*J,W=0;W<K;W++){for(W>=G&&(J=H,ot=O*J),M=0,$=ot;$--;)V[M++]=D[R++],V[M++]=D[R++],V[M++]=D[R++],V[M++]=255;k.putImageData(q,0,W*b)}else throw new Error(`bad image kind: ${_.kind}`)}function I(k,_){if(_.bitmap){k.drawImage(_.bitmap,0,0);return}const S=_.height,O=_.width,H=S%b,G=(S-H)/b,K=H===0?G:G+1,q=k.createImageData(O,b);let R=0;const M=_.data,D=q.data;for(let V=0;V<K;V++){const W=V<G?b:H;({srcPos:R}=(0,m.convertBlackAndWhiteToRGBA)({src:M,srcPos:R,dest:D,width:O,height:W,nonBlackColor:0})),k.putImageData(q,0,V*b)}}function N(k,_){const S=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const O of S)k[O]!==void 0&&(_[O]=k[O]);k.setLineDash!==void 0&&(_.setLineDash(k.getLineDash()),_.lineDashOffset=k.lineDashOffset)}function L(k){if(k.strokeStyle=k.fillStyle="#000000",k.fillRule="nonzero",k.globalAlpha=1,k.lineWidth=1,k.lineCap="butt",k.lineJoin="miter",k.miterLimit=10,k.globalCompositeOperation="source-over",k.font="10px sans-serif",k.setLineDash!==void 0&&(k.setLineDash([]),k.lineDashOffset=0),!r.isNodeJS){const{filter:_}=k;_!=="none"&&_!==""&&(k.filter="none")}}function Q(k,_,S,O){const H=k.length;for(let G=3;G<H;G+=4){const K=k[G];if(K===0)k[G-3]=_,k[G-2]=S,k[G-1]=O;else if(K<255){const q=255-K;k[G-3]=k[G-3]*K+_*q>>8,k[G-2]=k[G-2]*K+S*q>>8,k[G-1]=k[G-1]*K+O*q>>8}}}function tt(k,_,S){const O=k.length,H=1/255;for(let G=3;G<O;G+=4){const K=S?S[k[G]]:k[G];_[G]=_[G]*K*H|0}}function Z(k,_,S){const O=k.length;for(let H=3;H<O;H+=4){const G=k[H-3]*77+k[H-2]*152+k[H-1]*28;_[H]=S?_[H]*S[G>>8]>>8:_[H]*G>>16}}function st(k,_,S,O,H,G,K,q,R,M,D){const V=!!G,W=V?G[0]:0,$=V?G[1]:0,J=V?G[2]:0,ot=H==="Luminosity"?Z:tt,ut=Math.min(O,Math.ceil(1048576/S));for(let xt=0;xt<O;xt+=ut){const vt=Math.min(ut,O-xt),Et=k.getImageData(q-M,xt+(R-D),S,vt),wt=_.getImageData(q,xt+R,S,vt);V&&Q(Et.data,W,$,J),ot(Et.data,wt.data,K),_.putImageData(wt,q,xt+R)}}function F(k,_,S,O){const H=O[0],G=O[1],K=O[2]-H,q=O[3]-G;K===0||q===0||(st(_.context,S,K,q,_.subtype,_.backdrop,_.transferMap,H,G,_.offsetX,_.offsetY),k.save(),k.globalAlpha=1,k.globalCompositeOperation="source-over",k.setTransform(1,0,0,1,0,0),k.drawImage(S.canvas,0,0),k.restore())}function it(k,_){const S=r.Util.singularValueDecompose2dScale(k);S[0]=Math.fround(S[0]),S[1]=Math.fround(S[1]);const O=Math.fround((globalThis.devicePixelRatio||1)*l.PixelsPerInch.PDF_TO_CSS_UNITS);return _!==void 0?_:S[0]<=O||S[1]<=O}const Y=["butt","round","square"],rt=["miter","round","bevel"],lt={},U={};class P{constructor(_,S,O,H,G,{optionalContentConfig:K,markedContentStack:q=null},R,M){this.ctx=_,this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=S,this.objs=O,this.canvasFactory=H,this.filterFactory=G,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=q||[],this.optionalContentConfig=K,this.cachedCanvases=new j(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=R,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=M,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(_,S=null){return typeof _=="string"?_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_):S}beginDrawing({transform:_,viewport:S,transparency:O=!1,background:H=null}){const G=this.ctx.canvas.width,K=this.ctx.canvas.height,q=this.ctx.fillStyle;if(this.ctx.fillStyle=H||"#ffffff",this.ctx.fillRect(0,0,G,K),this.ctx.fillStyle=q,O){const R=this.cachedCanvases.getCanvas("transparent",G,K);this.compositeCtx=this.ctx,this.transparentCanvas=R.canvas,this.ctx=R.context,this.ctx.save(),this.ctx.transform(...(0,l.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),L(this.ctx),_&&(this.ctx.transform(..._),this.outputScaleX=_[0],this.outputScaleY=_[0]),this.ctx.transform(...S.transform),this.viewportScale=S.scale,this.baseTransform=(0,l.getCurrentTransform)(this.ctx)}executeOperatorList(_,S,O,H){const G=_.argsArray,K=_.fnArray;let q=S||0;const R=G.length;if(R===q)return q;const M=R-q>f&&typeof O=="function",D=M?Date.now()+c:0;let V=0;const W=this.commonObjs,$=this.objs;let J;for(;;){if(H!==void 0&&q===H.nextBreakPoint)return H.breakIt(q,O),q;if(J=K[q],J!==r.OPS.dependency)this[J].apply(this,G[q]);else for(const ot of G[q]){const yt=ot.startsWith("g_")?W:$;if(!yt.has(ot))return yt.get(ot,O),q}if(q++,q===R)return q;if(M&&++V>f){if(Date.now()>D)return O(),q;V=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const _ of this._cachedBitmapsMap.values()){for(const S of _.values())typeof HTMLCanvasElement<"u"&&S instanceof HTMLCanvasElement&&(S.width=S.height=0);_.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const _=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(_!=="none"){const S=this.ctx.filter;this.ctx.filter=_,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=S}}}_scaleImage(_,S){const O=_.width,H=_.height;let G=Math.max(Math.hypot(S[0],S[1]),1),K=Math.max(Math.hypot(S[2],S[3]),1),q=O,R=H,M="prescale1",D,V;for(;G>2&&q>1||K>2&&R>1;){let W=q,$=R;G>2&&q>1&&(W=q>=16384?Math.floor(q/2)-1||1:Math.ceil(q/2),G/=q/W),K>2&&R>1&&($=R>=16384?Math.floor(R/2)-1||1:Math.ceil(R)/2,K/=R/$),D=this.cachedCanvases.getCanvas(M,W,$),V=D.context,V.clearRect(0,0,W,$),V.drawImage(_,0,0,q,R,0,0,W,$),_=D.canvas,q=W,R=$,M=M==="prescale1"?"prescale2":"prescale1"}return{img:_,paintWidth:q,paintHeight:R}}_createMaskCanvas(_){const S=this.ctx,{width:O,height:H}=_,G=this.current.fillColor,K=this.current.patternFill,q=(0,l.getCurrentTransform)(S);let R,M,D,V;if((_.bitmap||_.data)&&_.count>1){const Tt=_.bitmap||_.data.buffer;M=JSON.stringify(K?q:[q.slice(0,4),G]),R=this._cachedBitmapsMap.get(Tt),R||(R=new Map,this._cachedBitmapsMap.set(Tt,R));const Dt=R.get(M);if(Dt&&!K){const Pt=Math.round(Math.min(q[0],q[2])+q[4]),kt=Math.round(Math.min(q[1],q[3])+q[5]);return{canvas:Dt,offsetX:Pt,offsetY:kt}}D=Dt}D||(V=this.cachedCanvases.getCanvas("maskCanvas",O,H),I(V.context,_));let W=r.Util.transform(q,[1/O,0,0,-1/H,0,0]);W=r.Util.transform(W,[1,0,0,1,0,-H]);const $=r.Util.applyTransform([0,0],W),J=r.Util.applyTransform([O,H],W),ot=r.Util.normalizeRect([$[0],$[1],J[0],J[1]]),yt=Math.round(ot[2]-ot[0])||1,ut=Math.round(ot[3]-ot[1])||1,xt=this.cachedCanvases.getCanvas("fillCanvas",yt,ut),vt=xt.context,Et=Math.min($[0],J[0]),wt=Math.min($[1],J[1]);vt.translate(-Et,-wt),vt.transform(...W),D||(D=this._scaleImage(V.canvas,(0,l.getCurrentTransformInverse)(vt)),D=D.img,R&&K&&R.set(M,D)),vt.imageSmoothingEnabled=it((0,l.getCurrentTransform)(vt),_.interpolate),E(vt,D,0,0,D.width,D.height,0,0,O,H),vt.globalCompositeOperation="source-in";const _t=r.Util.transform((0,l.getCurrentTransformInverse)(vt),[1,0,0,1,-Et,-wt]);return vt.fillStyle=K?G.getPattern(S,this,_t,h.PathType.FILL):G,vt.fillRect(0,0,O,H),R&&!K&&(this.cachedCanvases.delete("fillCanvas"),R.set(M,xt.canvas)),{canvas:xt.canvas,offsetX:Math.round(Et),offsetY:Math.round(wt)}}setLineWidth(_){_!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=_,this.ctx.lineWidth=_}setLineCap(_){this.ctx.lineCap=Y[_]}setLineJoin(_){this.ctx.lineJoin=rt[_]}setMiterLimit(_){this.ctx.miterLimit=_}setDash(_,S){const O=this.ctx;O.setLineDash!==void 0&&(O.setLineDash(_),O.lineDashOffset=S)}setRenderingIntent(_){}setFlatness(_){}setGState(_){for(const[S,O]of _)switch(S){case"LW":this.setLineWidth(O);break;case"LC":this.setLineCap(O);break;case"LJ":this.setLineJoin(O);break;case"ML":this.setMiterLimit(O);break;case"D":this.setDash(O[0],O[1]);break;case"RI":this.setRenderingIntent(O);break;case"FL":this.setFlatness(O);break;case"Font":this.setFont(O[0],O[1]);break;case"CA":this.current.strokeAlpha=O;break;case"ca":this.current.fillAlpha=O,this.ctx.globalAlpha=O;break;case"BM":this.ctx.globalCompositeOperation=O;break;case"SMask":this.current.activeSMask=O?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(O);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const _=this.inSMaskMode;this.current.activeSMask&&!_?this.beginSMaskMode():!this.current.activeSMask&&_&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const _=this.ctx.canvas.width,S=this.ctx.canvas.height,O="smaskGroupAt"+this.groupLevel,H=this.cachedCanvases.getCanvas(O,_,S);this.suspendedCtx=this.ctx,this.ctx=H.context;const G=this.ctx;G.setTransform(...(0,l.getCurrentTransform)(this.suspendedCtx)),N(this.suspendedCtx,G),p(G,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),N(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(_){if(!this.current.activeSMask)return;_?(_[0]=Math.floor(_[0]),_[1]=Math.floor(_[1]),_[2]=Math.ceil(_[2]),_[3]=Math.ceil(_[3])):_=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const S=this.current.activeSMask,O=this.suspendedCtx;F(O,S,this.ctx,_),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(N(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const _=this.current;this.stateStack.push(_),this.current=_.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),N(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(_,S,O,H,G,K){this.ctx.transform(_,S,O,H,G,K),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(_,S,O){const H=this.ctx,G=this.current;let K=G.x,q=G.y,R,M;const D=(0,l.getCurrentTransform)(H),V=D[0]===0&&D[3]===0||D[1]===0&&D[2]===0,W=V?O.slice(0):null;for(let $=0,J=0,ot=_.length;$<ot;$++)switch(_[$]|0){case r.OPS.rectangle:K=S[J++],q=S[J++];const yt=S[J++],ut=S[J++],xt=K+yt,vt=q+ut;H.moveTo(K,q),yt===0||ut===0?H.lineTo(xt,vt):(H.lineTo(xt,q),H.lineTo(xt,vt),H.lineTo(K,vt)),V||G.updateRectMinMax(D,[K,q,xt,vt]),H.closePath();break;case r.OPS.moveTo:K=S[J++],q=S[J++],H.moveTo(K,q),V||G.updatePathMinMax(D,K,q);break;case r.OPS.lineTo:K=S[J++],q=S[J++],H.lineTo(K,q),V||G.updatePathMinMax(D,K,q);break;case r.OPS.curveTo:R=K,M=q,K=S[J+4],q=S[J+5],H.bezierCurveTo(S[J],S[J+1],S[J+2],S[J+3],K,q),G.updateCurvePathMinMax(D,R,M,S[J],S[J+1],S[J+2],S[J+3],K,q,W),J+=6;break;case r.OPS.curveTo2:R=K,M=q,H.bezierCurveTo(K,q,S[J],S[J+1],S[J+2],S[J+3]),G.updateCurvePathMinMax(D,R,M,K,q,S[J],S[J+1],S[J+2],S[J+3],W),K=S[J+2],q=S[J+3],J+=4;break;case r.OPS.curveTo3:R=K,M=q,K=S[J+2],q=S[J+3],H.bezierCurveTo(S[J],S[J+1],K,q,K,q),G.updateCurvePathMinMax(D,R,M,S[J],S[J+1],K,q,K,q,W),J+=4;break;case r.OPS.closePath:H.closePath();break}V&&G.updateScalingPathMinMax(D,W),G.setCurrentPoint(K,q)}closePath(){this.ctx.closePath()}stroke(_=!0){const S=this.ctx,O=this.current.strokeColor;S.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof O=="object"&&O?.getPattern?(S.save(),S.strokeStyle=O.getPattern(S,this,(0,l.getCurrentTransformInverse)(S),h.PathType.STROKE),this.rescaleAndStroke(!1),S.restore()):this.rescaleAndStroke(!0)),_&&this.consumePath(this.current.getClippedPathBoundingBox()),S.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(_=!0){const S=this.ctx,O=this.current.fillColor,H=this.current.patternFill;let G=!1;H&&(S.save(),S.fillStyle=O.getPattern(S,this,(0,l.getCurrentTransformInverse)(S),h.PathType.FILL),G=!0);const K=this.current.getClippedPathBoundingBox();this.contentVisible&&K!==null&&(this.pendingEOFill?(S.fill("evenodd"),this.pendingEOFill=!1):S.fill()),G&&S.restore(),_&&this.consumePath(K)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=lt}eoClip(){this.pendingClip=U}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const _=this.pendingTextPaths,S=this.ctx;if(_===void 0){S.beginPath();return}S.save(),S.beginPath();for(const O of _)S.setTransform(...O.transform),S.translate(O.x,O.y),O.addToPath(S,O.fontSize);S.restore(),S.clip(),S.beginPath(),delete this.pendingTextPaths}setCharSpacing(_){this.current.charSpacing=_}setWordSpacing(_){this.current.wordSpacing=_}setHScale(_){this.current.textHScale=_/100}setLeading(_){this.current.leading=-_}setFont(_,S){const O=this.commonObjs.get(_),H=this.current;if(!O)throw new Error(`Can't find font for ${_}`);if(H.fontMatrix=O.fontMatrix||r.FONT_IDENTITY_MATRIX,(H.fontMatrix[0]===0||H.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+_),S<0?(S=-S,H.fontDirection=-1):H.fontDirection=1,this.current.font=O,this.current.fontSize=S,O.isType3Font)return;const G=O.loadedName||"sans-serif",K=O.systemFontInfo?.css||`"${G}", ${O.fallbackName}`;let q="normal";O.black?q="900":O.bold&&(q="bold");const R=O.italic?"italic":"normal";let M=S;S<v?M=v:S>A&&(M=A),this.current.fontSizeScale=S/M,this.ctx.font=`${R} ${q} ${M}px ${K}`}setTextRenderingMode(_){this.current.textRenderingMode=_}setTextRise(_){this.current.textRise=_}moveText(_,S){this.current.x=this.current.lineX+=_,this.current.y=this.current.lineY+=S}setLeadingMoveText(_,S){this.setLeading(-S),this.moveText(_,S)}setTextMatrix(_,S,O,H,G,K){this.current.textMatrix=[_,S,O,H,G,K],this.current.textMatrixScale=Math.hypot(_,S),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(_,S,O,H){const G=this.ctx,K=this.current,q=K.font,R=K.textRenderingMode,M=K.fontSize/K.fontSizeScale,D=R&r.TextRenderingMode.FILL_STROKE_MASK,V=!!(R&r.TextRenderingMode.ADD_TO_PATH_FLAG),W=K.patternFill&&!q.missingFile;let $;(q.disableFontFace||V||W)&&($=q.getPathGenerator(this.commonObjs,_)),q.disableFontFace||W?(G.save(),G.translate(S,O),G.beginPath(),$(G,M),H&&G.setTransform(...H),(D===r.TextRenderingMode.FILL||D===r.TextRenderingMode.FILL_STROKE)&&G.fill(),(D===r.TextRenderingMode.STROKE||D===r.TextRenderingMode.FILL_STROKE)&&G.stroke(),G.restore()):((D===r.TextRenderingMode.FILL||D===r.TextRenderingMode.FILL_STROKE)&&G.fillText(_,S,O),(D===r.TextRenderingMode.STROKE||D===r.TextRenderingMode.FILL_STROKE)&&G.strokeText(_,S,O)),V&&(this.pendingTextPaths||=[]).push({transform:(0,l.getCurrentTransform)(G),x:S,y:O,fontSize:M,addToPath:$})}get isFontSubpixelAAEnabled(){const{context:_}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);_.scale(1.5,1),_.fillText("I",0,10);const S=_.getImageData(0,0,10,10).data;let O=!1;for(let H=3;H<S.length;H+=4)if(S[H]>0&&S[H]<255){O=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",O)}showText(_){const S=this.current,O=S.font;if(O.isType3Font)return this.showType3Text(_);const H=S.fontSize;if(H===0)return;const G=this.ctx,K=S.fontSizeScale,q=S.charSpacing,R=S.wordSpacing,M=S.fontDirection,D=S.textHScale*M,V=_.length,W=O.vertical,$=W?1:-1,J=O.defaultVMetrics,ot=H*S.fontMatrix[0],yt=S.textRenderingMode===r.TextRenderingMode.FILL&&!O.disableFontFace&&!S.patternFill;G.save(),G.transform(...S.textMatrix),G.translate(S.x,S.y+S.textRise),M>0?G.scale(D,-1):G.scale(D,1);let ut;if(S.patternFill){G.save();const _t=S.fillColor.getPattern(G,this,(0,l.getCurrentTransformInverse)(G),h.PathType.FILL);ut=(0,l.getCurrentTransform)(G),G.restore(),G.fillStyle=_t}let xt=S.lineWidth;const vt=S.textMatrixScale;if(vt===0||xt===0){const _t=S.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(_t===r.TextRenderingMode.STROKE||_t===r.TextRenderingMode.FILL_STROKE)&&(xt=this.getSinglePixelWidth())}else xt/=vt;if(K!==1&&(G.scale(K,K),xt/=K),G.lineWidth=xt,O.isInvalidPDFjsFont){const _t=[];let Tt=0;for(const Dt of _)_t.push(Dt.unicode),Tt+=Dt.width;G.fillText(_t.join(""),0,0),S.x+=Tt*ot*D,G.restore(),this.compose();return}let Et=0,wt;for(wt=0;wt<V;++wt){const _t=_[wt];if(typeof _t=="number"){Et+=$*_t*H/1e3;continue}let Tt=!1;const Dt=(_t.isSpace?R:0)+q,Pt=_t.fontChar,kt=_t.accent;let Vt,Te,ue=_t.width;if(W){const ge=_t.vmetric||J,de=-(_t.vmetric?ge[1]:ue*.5)*ot,Vs=ge[2]*ot;ue=ge?-ge[0]:ue,Vt=de/K,Te=(Et+Vs)/K}else Vt=Et/K,Te=0;if(O.remeasure&&ue>0){const ge=G.measureText(Pt).width*1e3/H*K;if(ue<ge&&this.isFontSubpixelAAEnabled){const de=ue/ge;Tt=!0,G.save(),G.scale(de,1),Vt/=de}else ue!==ge&&(Vt+=(ue-ge)/2e3*H/K)}if(this.contentVisible&&(_t.isInFont||O.missingFile)){if(yt&&!kt)G.fillText(Pt,Vt,Te);else if(this.paintChar(Pt,Vt,Te,ut),kt){const ge=Vt+H*kt.offset.x/K,de=Te-H*kt.offset.y/K;this.paintChar(kt.fontChar,ge,de,ut)}}const Ue=W?ue*ot-Dt*M:ue*ot+Dt*M;Et+=Ue,Tt&&G.restore()}W?S.y-=Et:S.x+=Et*D,G.restore(),this.compose()}showType3Text(_){const S=this.ctx,O=this.current,H=O.font,G=O.fontSize,K=O.fontDirection,q=H.vertical?1:-1,R=O.charSpacing,M=O.wordSpacing,D=O.textHScale*K,V=O.fontMatrix||r.FONT_IDENTITY_MATRIX,W=_.length,$=O.textRenderingMode===r.TextRenderingMode.INVISIBLE;let J,ot,yt,ut;if(!($||G===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,S.save(),S.transform(...O.textMatrix),S.translate(O.x,O.y),S.scale(D,K),J=0;J<W;++J){if(ot=_[J],typeof ot=="number"){ut=q*ot*G/1e3,this.ctx.translate(ut,0),O.x+=ut*D;continue}const xt=(ot.isSpace?M:0)+R,vt=H.charProcOperatorList[ot.operatorListId];if(!vt){(0,r.warn)(`Type3 character "${ot.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ot,this.save(),S.scale(G,G),S.transform(...V),this.executeOperatorList(vt),this.restore()),yt=r.Util.applyTransform([ot.width,0],V)[0]*G+xt,S.translate(yt,0),O.x+=yt*D}S.restore(),this.processingType3=null}}setCharWidth(_,S){}setCharWidthAndBounds(_,S,O,H,G,K){this.ctx.rect(O,H,G-O,K-H),this.ctx.clip(),this.endPath()}getColorN_Pattern(_){let S;if(_[0]==="TilingPattern"){const O=_[1],H=this.baseTransform||(0,l.getCurrentTransform)(this.ctx),G={createCanvasGraphics:K=>new P(K,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};S=new h.TilingPattern(_,O,this.ctx,G,H)}else S=this._getPattern(_[1],_[2]);return S}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(_,S,O){const H=r.Util.makeHexColor(_,S,O);this.ctx.strokeStyle=H,this.current.strokeColor=H}setFillRGBColor(_,S,O){const H=r.Util.makeHexColor(_,S,O);this.ctx.fillStyle=H,this.current.fillColor=H,this.current.patternFill=!1}_getPattern(_,S=null){let O;return this.cachedPatterns.has(_)?O=this.cachedPatterns.get(_):(O=(0,h.getShadingPattern)(this.getObject(_)),this.cachedPatterns.set(_,O)),S&&(O.matrix=S),O}shadingFill(_){if(!this.contentVisible)return;const S=this.ctx;this.save();const O=this._getPattern(_);S.fillStyle=O.getPattern(S,this,(0,l.getCurrentTransformInverse)(S),h.PathType.SHADING);const H=(0,l.getCurrentTransformInverse)(S);if(H){const{width:G,height:K}=S.canvas,[q,R,M,D]=r.Util.getAxialAlignedBoundingBox([0,0,G,K],H);this.ctx.fillRect(q,R,M-q,D-R)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(_,S){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(_)&&_.length===6&&this.transform(..._),this.baseTransform=(0,l.getCurrentTransform)(this.ctx),S)){const O=S[2]-S[0],H=S[3]-S[1];this.ctx.rect(S[0],S[1],O,H),this.current.updateRectMinMax((0,l.getCurrentTransform)(this.ctx),S),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(_){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const S=this.ctx;_.isolated||(0,r.info)("TODO: Support non-isolated groups."),_.knockout&&(0,r.warn)("Knockout groups not supported.");const O=(0,l.getCurrentTransform)(S);if(_.matrix&&S.transform(..._.matrix),!_.bbox)throw new Error("Bounding box is required.");let H=r.Util.getAxialAlignedBoundingBox(_.bbox,(0,l.getCurrentTransform)(S));const G=[0,0,S.canvas.width,S.canvas.height];H=r.Util.intersect(H,G)||[0,0,0,0];const K=Math.floor(H[0]),q=Math.floor(H[1]);let R=Math.max(Math.ceil(H[2])-K,1),M=Math.max(Math.ceil(H[3])-q,1),D=1,V=1;R>d&&(D=R/d,R=d),M>d&&(V=M/d,M=d),this.current.startNewPathAndClipBox([0,0,R,M]);let W="groupAt"+this.groupLevel;_.smask&&(W+="_smask_"+this.smaskCounter++%2);const $=this.cachedCanvases.getCanvas(W,R,M),J=$.context;J.scale(1/D,1/V),J.translate(-K,-q),J.transform(...O),_.smask?this.smaskStack.push({canvas:$.canvas,context:J,offsetX:K,offsetY:q,scaleX:D,scaleY:V,subtype:_.smask.subtype,backdrop:_.smask.backdrop,transferMap:_.smask.transferMap||null,startTransformInverse:null}):(S.setTransform(1,0,0,1,0,0),S.translate(K,q),S.scale(D,V),S.save()),N(S,J),this.ctx=J,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(S),this.groupLevel++}endGroup(_){if(!this.contentVisible)return;this.groupLevel--;const S=this.ctx,O=this.groupStack.pop();if(this.ctx=O,this.ctx.imageSmoothingEnabled=!1,_.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const H=(0,l.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...H);const G=r.Util.getAxialAlignedBoundingBox([0,0,S.canvas.width,S.canvas.height],H);this.ctx.drawImage(S.canvas,0,0),this.ctx.restore(),this.compose(G)}}beginAnnotation(_,S,O,H,G){if(this.#t(),L(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(S)&&S.length===4){const K=S[2]-S[0],q=S[3]-S[1];if(G&&this.annotationCanvasMap){O=O.slice(),O[4]-=S[0],O[5]-=S[1],S=S.slice(),S[0]=S[1]=0,S[2]=K,S[3]=q;const[R,M]=r.Util.singularValueDecompose2dScale((0,l.getCurrentTransform)(this.ctx)),{viewportScale:D}=this,V=Math.ceil(K*this.outputScaleX*D),W=Math.ceil(q*this.outputScaleY*D);this.annotationCanvas=this.canvasFactory.create(V,W);const{canvas:$,context:J}=this.annotationCanvas;this.annotationCanvasMap.set(_,$),this.annotationCanvas.savedCtx=this.ctx,this.ctx=J,this.ctx.save(),this.ctx.setTransform(R,0,0,-M,0,q*M),L(this.ctx)}else L(this.ctx),this.ctx.rect(S[0],S[1],K,q),this.ctx.clip(),this.endPath()}this.current=new C(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...O),this.transform(...H)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(_){if(!this.contentVisible)return;const S=_.count;_=this.getObject(_.data,_),_.count=S;const O=this.ctx,H=this.processingType3;if(H&&(H.compiled===void 0&&(H.compiled=y(_)),H.compiled)){H.compiled(O);return}const G=this._createMaskCanvas(_),K=G.canvas;O.save(),O.setTransform(1,0,0,1,0,0),O.drawImage(K,G.offsetX,G.offsetY),O.restore(),this.compose()}paintImageMaskXObjectRepeat(_,S,O=0,H=0,G,K){if(!this.contentVisible)return;_=this.getObject(_.data,_);const q=this.ctx;q.save();const R=(0,l.getCurrentTransform)(q);q.transform(S,O,H,G,0,0);const M=this._createMaskCanvas(_);q.setTransform(1,0,0,1,M.offsetX-R[4],M.offsetY-R[5]);for(let D=0,V=K.length;D<V;D+=2){const W=r.Util.transform(R,[S,O,H,G,K[D],K[D+1]]),[$,J]=r.Util.applyTransform([0,0],W);q.drawImage(M.canvas,$,J)}q.restore(),this.compose()}paintImageMaskXObjectGroup(_){if(!this.contentVisible)return;const S=this.ctx,O=this.current.fillColor,H=this.current.patternFill;for(const G of _){const{data:K,width:q,height:R,transform:M}=G,D=this.cachedCanvases.getCanvas("maskCanvas",q,R),V=D.context;V.save();const W=this.getObject(K,G);I(V,W),V.globalCompositeOperation="source-in",V.fillStyle=H?O.getPattern(V,this,(0,l.getCurrentTransformInverse)(S),h.PathType.FILL):O,V.fillRect(0,0,q,R),V.restore(),S.save(),S.transform(...M),S.scale(1,-1),E(S,D.canvas,0,0,q,R,0,-1,1,1),S.restore()}this.compose()}paintImageXObject(_){if(!this.contentVisible)return;const S=this.getObject(_);if(!S){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(S)}paintImageXObjectRepeat(_,S,O,H){if(!this.contentVisible)return;const G=this.getObject(_);if(!G){(0,r.warn)("Dependent image isn't ready yet");return}const K=G.width,q=G.height,R=[];for(let M=0,D=H.length;M<D;M+=2)R.push({transform:[S,0,0,O,H[M],H[M+1]],x:0,y:0,w:K,h:q});this.paintInlineImageXObjectGroup(G,R)}applyTransferMapsToCanvas(_){return this.current.transferMaps!=="none"&&(_.filter=this.current.transferMaps,_.drawImage(_.canvas,0,0),_.filter="none"),_.canvas}applyTransferMapsToBitmap(_){if(this.current.transferMaps==="none")return _.bitmap;const{bitmap:S,width:O,height:H}=_,G=this.cachedCanvases.getCanvas("inlineImage",O,H),K=G.context;return K.filter=this.current.transferMaps,K.drawImage(S,0,0),K.filter="none",G.canvas}paintInlineImageXObject(_){if(!this.contentVisible)return;const S=_.width,O=_.height,H=this.ctx;if(this.save(),!r.isNodeJS){const{filter:q}=H;q!=="none"&&q!==""&&(H.filter="none")}H.scale(1/S,-1/O);let G;if(_.bitmap)G=this.applyTransferMapsToBitmap(_);else if(typeof HTMLElement=="function"&&_ instanceof HTMLElement||!_.data)G=_;else{const R=this.cachedCanvases.getCanvas("inlineImage",S,O).context;B(R,_),G=this.applyTransferMapsToCanvas(R)}const K=this._scaleImage(G,(0,l.getCurrentTransformInverse)(H));H.imageSmoothingEnabled=it((0,l.getCurrentTransform)(H),_.interpolate),E(H,K.img,0,0,K.paintWidth,K.paintHeight,0,-O,S,O),this.compose(),this.restore()}paintInlineImageXObjectGroup(_,S){if(!this.contentVisible)return;const O=this.ctx;let H;if(_.bitmap)H=_.bitmap;else{const G=_.width,K=_.height,R=this.cachedCanvases.getCanvas("inlineImage",G,K).context;B(R,_),H=this.applyTransferMapsToCanvas(R)}for(const G of S)O.save(),O.transform(...G.transform),O.scale(1,-1),E(O,H,G.x,G.y,G.w,G.h,0,-1,1,1),O.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(_){}markPointProps(_,S){}beginMarkedContent(_){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(_,S){_==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(S)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(_){const S=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(_);const O=this.ctx;this.pendingClip&&(S||(this.pendingClip===U?O.clip("evenodd"):O.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),O.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const _=(0,l.getCurrentTransform)(this.ctx);if(_[1]===0&&_[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(_[0]),Math.abs(_[3]));else{const S=Math.abs(_[0]*_[3]-_[2]*_[1]),O=Math.hypot(_[0],_[2]),H=Math.hypot(_[1],_[3]);this._cachedGetSinglePixelWidth=Math.max(O,H)/S}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:_}=this.current,{a:S,b:O,c:H,d:G}=this.ctx.getTransform();let K,q;if(O===0&&H===0){const R=Math.abs(S),M=Math.abs(G);if(R===M)if(_===0)K=q=1/R;else{const D=R*_;K=q=D<1?1/D:1}else if(_===0)K=1/R,q=1/M;else{const D=R*_,V=M*_;K=D<1?1/D:1,q=V<1?1/V:1}}else{const R=Math.abs(S*G-O*H),M=Math.hypot(S,O),D=Math.hypot(H,G);if(_===0)K=D/R,q=M/R;else{const V=_*R;K=D>V?D/V:1,q=M>V?M/V:1}}this._cachedScaleForStroking[0]=K,this._cachedScaleForStroking[1]=q}return this._cachedScaleForStroking}rescaleAndStroke(_){const{ctx:S}=this,{lineWidth:O}=this.current,[H,G]=this.getScaleForStroking();if(S.lineWidth=O||1,H===1&&G===1){S.stroke();return}const K=S.getLineDash();if(_&&S.save(),S.scale(H,G),K.length>0){const q=Math.max(H,G);S.setLineDash(K.map(R=>R/q)),S.lineDashOffset/=q}S.stroke(),_&&S.restore()}isContentVisible(){for(let _=this.markedContentStack.length-1;_>=0;_--)if(!this.markedContentStack[_].visible)return!1;return!0}}s.CanvasGraphics=P;for(const k in r.OPS)P.prototype[k]!==void 0&&(P.prototype[r.OPS[k]]=P.prototype[k])}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=b;var r=i(1),l=i(6);const h={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=h;function m(E,y){if(!y)return;const C=y[2]-y[0],B=y[3]-y[1],I=new Path2D;I.rect(y[0],y[1],C,B),E.clip(I)}class v{constructor(){this.constructor===v&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class A extends v{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let C;this._type==="axial"?C=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(C=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const B of this._colorStops)C.addColorStop(B[0],B[1]);return C}getPattern(y,C,B,I){let N;if(I===h.STROKE||I===h.FILL){const L=C.current.getClippedPathBoundingBox(I,(0,l.getCurrentTransform)(y))||[0,0,0,0],Q=Math.ceil(L[2]-L[0])||1,tt=Math.ceil(L[3]-L[1])||1,Z=C.cachedCanvases.getCanvas("pattern",Q,tt,!0),st=Z.context;st.clearRect(0,0,st.canvas.width,st.canvas.height),st.beginPath(),st.rect(0,0,st.canvas.width,st.canvas.height),st.translate(-L[0],-L[1]),B=r.Util.transform(B,[1,0,0,1,L[0],L[1]]),st.transform(...C.baseTransform),this.matrix&&st.transform(...this.matrix),m(st,this._bbox),st.fillStyle=this._createGradient(st),st.fill(),N=y.createPattern(Z.canvas,"no-repeat");const F=new DOMMatrix(B);N.setTransform(F)}else m(y,this._bbox),N=this._createGradient(y);return N}}function d(E,y,C,B,I,N,L,Q){const tt=y.coords,Z=y.colors,st=E.data,F=E.width*4;let it;tt[C+1]>tt[B+1]&&(it=C,C=B,B=it,it=N,N=L,L=it),tt[B+1]>tt[I+1]&&(it=B,B=I,I=it,it=L,L=Q,Q=it),tt[C+1]>tt[B+1]&&(it=C,C=B,B=it,it=N,N=L,L=it);const Y=(tt[C]+y.offsetX)*y.scaleX,rt=(tt[C+1]+y.offsetY)*y.scaleY,lt=(tt[B]+y.offsetX)*y.scaleX,U=(tt[B+1]+y.offsetY)*y.scaleY,P=(tt[I]+y.offsetX)*y.scaleX,k=(tt[I+1]+y.offsetY)*y.scaleY;if(rt>=k)return;const _=Z[N],S=Z[N+1],O=Z[N+2],H=Z[L],G=Z[L+1],K=Z[L+2],q=Z[Q],R=Z[Q+1],M=Z[Q+2],D=Math.round(rt),V=Math.round(k);let W,$,J,ot,yt,ut,xt,vt;for(let Et=D;Et<=V;Et++){if(Et<U){const Pt=Et<rt?0:(rt-Et)/(rt-U);W=Y-(Y-lt)*Pt,$=_-(_-H)*Pt,J=S-(S-G)*Pt,ot=O-(O-K)*Pt}else{let Pt;Et>k?Pt=1:U===k?Pt=0:Pt=(U-Et)/(U-k),W=lt-(lt-P)*Pt,$=H-(H-q)*Pt,J=G-(G-R)*Pt,ot=K-(K-M)*Pt}let wt;Et<rt?wt=0:Et>k?wt=1:wt=(rt-Et)/(rt-k),yt=Y-(Y-P)*wt,ut=_-(_-q)*wt,xt=S-(S-R)*wt,vt=O-(O-M)*wt;const _t=Math.round(Math.min(W,yt)),Tt=Math.round(Math.max(W,yt));let Dt=F*Et+_t*4;for(let Pt=_t;Pt<=Tt;Pt++)wt=(W-Pt)/(W-yt),wt<0?wt=0:wt>1&&(wt=1),st[Dt++]=$-($-ut)*wt|0,st[Dt++]=J-(J-xt)*wt|0,st[Dt++]=ot-(ot-vt)*wt|0,st[Dt++]=255}}function c(E,y,C){const B=y.coords,I=y.colors;let N,L;switch(y.type){case"lattice":const Q=y.verticesPerRow,tt=Math.floor(B.length/Q)-1,Z=Q-1;for(N=0;N<tt;N++){let st=N*Q;for(let F=0;F<Z;F++,st++)d(E,C,B[st],B[st+1],B[st+Q],I[st],I[st+1],I[st+Q]),d(E,C,B[st+Q+1],B[st+1],B[st+Q],I[st+Q+1],I[st+1],I[st+Q])}break;case"triangles":for(N=0,L=B.length;N<L;N+=3)d(E,C,B[N],B[N+1],B[N+2],I[N],I[N+1],I[N+2]);break;default:throw new Error("illegal figure")}}class f extends v{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,C,B){const Q=Math.floor(this._bounds[0]),tt=Math.floor(this._bounds[1]),Z=Math.ceil(this._bounds[2])-Q,st=Math.ceil(this._bounds[3])-tt,F=Math.min(Math.ceil(Math.abs(Z*y[0]*1.1)),3e3),it=Math.min(Math.ceil(Math.abs(st*y[1]*1.1)),3e3),Y=Z/F,rt=st/it,lt={coords:this._coords,colors:this._colors,offsetX:-Q,offsetY:-tt,scaleX:1/Y,scaleY:1/rt},U=F+4,P=it+4,k=B.getCanvas("mesh",U,P,!1),_=k.context,S=_.createImageData(F,it);if(C){const H=S.data;for(let G=0,K=H.length;G<K;G+=4)H[G]=C[0],H[G+1]=C[1],H[G+2]=C[2],H[G+3]=255}for(const H of this._figures)c(S,H,lt);return _.putImageData(S,2,2),{canvas:k.canvas,offsetX:Q-2*Y,offsetY:tt-2*rt,scaleX:Y,scaleY:rt}}getPattern(y,C,B,I){m(y,this._bbox);let N;if(I===h.SHADING)N=r.Util.singularValueDecompose2dScale((0,l.getCurrentTransform)(y));else if(N=r.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const Q=r.Util.singularValueDecompose2dScale(this.matrix);N=[N[0]*Q[0],N[1]*Q[1]]}const L=this._createMeshCanvas(N,I===h.SHADING?null:this._background,C.cachedCanvases);return I!==h.SHADING&&(y.setTransform(...C.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(L.offsetX,L.offsetY),y.scale(L.scaleX,L.scaleY),y.createPattern(L.canvas,"no-repeat")}}class g extends v{getPattern(){return"hotpink"}}function b(E){switch(E[0]){case"RadialAxial":return new A(E);case"Mesh":return new f(E);case"Dummy":return new g}throw new Error(`Unknown IR type: ${E[0]}`)}const p={COLORED:1,UNCOLORED:2};class j{static MAX_PATTERN_SIZE=3e3;constructor(y,C,B,I,N){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=C,this.ctx=B,this.canvasGraphicsFactory=I,this.baseTransform=N}createPatternCanvas(y){const C=this.operatorList,B=this.bbox,I=this.xstep,N=this.ystep,L=this.paintType,Q=this.tilingType,tt=this.color,Z=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+Q);const st=B[0],F=B[1],it=B[2],Y=B[3],rt=r.Util.singularValueDecompose2dScale(this.matrix),lt=r.Util.singularValueDecompose2dScale(this.baseTransform),U=[rt[0]*lt[0],rt[1]*lt[1]],P=this.getSizeAndScale(I,this.ctx.canvas.width,U[0]),k=this.getSizeAndScale(N,this.ctx.canvas.height,U[1]),_=y.cachedCanvases.getCanvas("pattern",P.size,k.size,!0),S=_.context,O=Z.createCanvasGraphics(S);O.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(O,L,tt);let H=st,G=F,K=it,q=Y;return st<0&&(H=0,K+=Math.abs(st)),F<0&&(G=0,q+=Math.abs(F)),S.translate(-(P.scale*H),-(k.scale*G)),O.transform(P.scale,0,0,k.scale,0,0),S.save(),this.clipBbox(O,H,G,K,q),O.baseTransform=(0,l.getCurrentTransform)(O.ctx),O.executeOperatorList(C),O.endDrawing(),{canvas:_.canvas,scaleX:P.scale,scaleY:k.scale,offsetX:H,offsetY:G}}getSizeAndScale(y,C,B){y=Math.abs(y);const I=Math.max(j.MAX_PATTERN_SIZE,C);let N=Math.ceil(y*B);return N>=I?N=I:B=N/y,{scale:B,size:N}}clipBbox(y,C,B,I,N){const L=I-C,Q=N-B;y.ctx.rect(C,B,L,Q),y.current.updateRectMinMax((0,l.getCurrentTransform)(y.ctx),[C,B,I,N]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,C,B){const I=y.ctx,N=y.current;switch(C){case p.COLORED:const L=this.ctx;I.fillStyle=L.fillStyle,I.strokeStyle=L.strokeStyle,N.fillColor=L.fillStyle,N.strokeColor=L.strokeStyle;break;case p.UNCOLORED:const Q=r.Util.makeHexColor(B[0],B[1],B[2]);I.fillStyle=Q,I.strokeStyle=Q,N.fillColor=Q,N.strokeColor=Q;break;default:throw new r.FormatError(`Unsupported paint type: ${C}`)}}getPattern(y,C,B,I){let N=B;I!==h.SHADING&&(N=r.Util.transform(N,C.baseTransform),this.matrix&&(N=r.Util.transform(N,this.matrix)));const L=this.createPatternCanvas(C);let Q=new DOMMatrix(N);Q=Q.translate(L.offsetX,L.offsetY),Q=Q.scale(1/L.scaleX,1/L.scaleY);const tt=y.createPattern(L.canvas,"repeat");return tt.setTransform(Q),tt}}s.TilingPattern=j}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.convertBlackAndWhiteToRGBA=h,s.convertToRGBA=l,s.grayToRGBA=v;var r=i(1);function l(A){switch(A.kind){case r.ImageKind.GRAYSCALE_1BPP:return h(A);case r.ImageKind.RGB_24BPP:return m(A)}return null}function h({src:A,srcPos:d=0,dest:c,width:f,height:g,nonBlackColor:b=4294967295,inverseDecode:p=!1}){const j=r.FeatureTest.isLittleEndian?4278190080:255,[E,y]=p?[b,j]:[j,b],C=f>>3,B=f&7,I=A.length;c=new Uint32Array(c.buffer);let N=0;for(let L=0;L<g;L++){for(const tt=d+C;d<tt;d++){const Z=d<I?A[d]:255;c[N++]=Z&128?y:E,c[N++]=Z&64?y:E,c[N++]=Z&32?y:E,c[N++]=Z&16?y:E,c[N++]=Z&8?y:E,c[N++]=Z&4?y:E,c[N++]=Z&2?y:E,c[N++]=Z&1?y:E}if(B===0)continue;const Q=d<I?A[d++]:255;for(let tt=0;tt<B;tt++)c[N++]=Q&1<<7-tt?y:E}return{srcPos:d,destPos:N}}function m({src:A,srcPos:d=0,dest:c,destPos:f=0,width:g,height:b}){let p=0;const j=A.length>>2,E=new Uint32Array(A.buffer,d,j);if(r.FeatureTest.isLittleEndian){for(;p<j-2;p+=3,f+=4){const y=E[p],C=E[p+1],B=E[p+2];c[f]=y|4278190080,c[f+1]=y>>>24|C<<8|4278190080,c[f+2]=C>>>16|B<<16|4278190080,c[f+3]=B>>>8|4278190080}for(let y=p*4,C=A.length;y<C;y+=3)c[f++]=A[y]|A[y+1]<<8|A[y+2]<<16|4278190080}else{for(;p<j-2;p+=3,f+=4){const y=E[p],C=E[p+1],B=E[p+2];c[f]=y|255,c[f+1]=y<<24|C>>>8|255,c[f+2]=C<<16|B>>>16|255,c[f+3]=B<<8|255}for(let y=p*4,C=A.length;y<C;y+=3)c[f++]=A[y]<<24|A[y+1]<<16|A[y+2]<<8|255}return{srcPos:d,destPos:f}}function v(A,d){if(r.FeatureTest.isLittleEndian)for(let c=0,f=A.length;c<f;c++)d[c]=A[c]*65793|4278190080;else for(let c=0,f=A.length;c<f;c++)d[c]=A[c]*16843008|255}}),((o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const i=Object.create(null);s.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var r=i(1);const l={DATA:1,ERROR:2},h={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function m(A){switch(A instanceof Error||typeof A=="object"&&A!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),A.name){case"AbortException":return new r.AbortException(A.message);case"MissingPDFException":return new r.MissingPDFException(A.message);case"PasswordException":return new r.PasswordException(A.message,A.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(A.message,A.status);case"UnknownErrorException":return new r.UnknownErrorException(A.message,A.details);default:return new r.UnknownErrorException(A.message,A.toString())}}class v{constructor(d,c,f){this.sourceName=d,this.targetName=c,this.comObj=f,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=g=>{const b=g.data;if(b.targetName!==this.sourceName)return;if(b.stream){this.#e(b);return}if(b.callback){const j=b.callbackId,E=this.callbackCapabilities[j];if(!E)throw new Error(`Cannot resolve callback ${j}`);if(delete this.callbackCapabilities[j],b.callback===l.DATA)E.resolve(b.data);else if(b.callback===l.ERROR)E.reject(m(b.reason));else throw new Error("Unexpected callback case");return}const p=this.actionHandler[b.action];if(!p)throw new Error(`Unknown action from worker: ${b.action}`);if(b.callbackId){const j=this.sourceName,E=b.sourceName;new Promise(function(y){y(p(b.data))}).then(function(y){f.postMessage({sourceName:j,targetName:E,callback:l.DATA,callbackId:b.callbackId,data:y})},function(y){f.postMessage({sourceName:j,targetName:E,callback:l.ERROR,callbackId:b.callbackId,reason:m(y)})});return}if(b.streamId){this.#t(b);return}p(b.data)},f.addEventListener("message",this._onComObjOnMessage)}on(d,c){const f=this.actionHandler;if(f[d])throw new Error(`There is already an actionName called "${d}"`);f[d]=c}send(d,c,f){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:c},f)}sendWithPromise(d,c,f){const g=this.callbackId++,b=new r.PromiseCapability;this.callbackCapabilities[g]=b;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:g,data:c},f)}catch(p){b.reject(p)}return b.promise}sendWithStream(d,c,f,g){const b=this.streamId++,p=this.sourceName,j=this.targetName,E=this.comObj;return new ReadableStream({start:y=>{const C=new r.PromiseCapability;return this.streamControllers[b]={controller:y,startCall:C,pullCall:null,cancelCall:null,isClosed:!1},E.postMessage({sourceName:p,targetName:j,action:d,streamId:b,data:c,desiredSize:y.desiredSize},g),C.promise},pull:y=>{const C=new r.PromiseCapability;return this.streamControllers[b].pullCall=C,E.postMessage({sourceName:p,targetName:j,stream:h.PULL,streamId:b,desiredSize:y.desiredSize}),C.promise},cancel:y=>{(0,r.assert)(y instanceof Error,"cancel must have a valid reason");const C=new r.PromiseCapability;return this.streamControllers[b].cancelCall=C,this.streamControllers[b].isClosed=!0,E.postMessage({sourceName:p,targetName:j,stream:h.CANCEL,streamId:b,reason:m(y)}),C.promise}},f)}#t(d){const c=d.streamId,f=this.sourceName,g=d.sourceName,b=this.comObj,p=this,j=this.actionHandler[d.action],E={enqueue(y,C=1,B){if(this.isCancelled)return;const I=this.desiredSize;this.desiredSize-=C,I>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),b.postMessage({sourceName:f,targetName:g,stream:h.ENQUEUE,streamId:c,chunk:y},B)},close(){this.isCancelled||(this.isCancelled=!0,b.postMessage({sourceName:f,targetName:g,stream:h.CLOSE,streamId:c}),delete p.streamSinks[c])},error(y){(0,r.assert)(y instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,b.postMessage({sourceName:f,targetName:g,stream:h.ERROR,streamId:c,reason:m(y)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};E.sinkCapability.resolve(),E.ready=E.sinkCapability.promise,this.streamSinks[c]=E,new Promise(function(y){y(j(d.data,E))}).then(function(){b.postMessage({sourceName:f,targetName:g,stream:h.START_COMPLETE,streamId:c,success:!0})},function(y){b.postMessage({sourceName:f,targetName:g,stream:h.START_COMPLETE,streamId:c,reason:m(y)})})}#e(d){const c=d.streamId,f=this.sourceName,g=d.sourceName,b=this.comObj,p=this.streamControllers[c],j=this.streamSinks[c];switch(d.stream){case h.START_COMPLETE:d.success?p.startCall.resolve():p.startCall.reject(m(d.reason));break;case h.PULL_COMPLETE:d.success?p.pullCall.resolve():p.pullCall.reject(m(d.reason));break;case h.PULL:if(!j){b.postMessage({sourceName:f,targetName:g,stream:h.PULL_COMPLETE,streamId:c,success:!0});break}j.desiredSize<=0&&d.desiredSize>0&&j.sinkCapability.resolve(),j.desiredSize=d.desiredSize,new Promise(function(E){E(j.onPull?.())}).then(function(){b.postMessage({sourceName:f,targetName:g,stream:h.PULL_COMPLETE,streamId:c,success:!0})},function(E){b.postMessage({sourceName:f,targetName:g,stream:h.PULL_COMPLETE,streamId:c,reason:m(E)})});break;case h.ENQUEUE:if((0,r.assert)(p,"enqueue should have stream controller"),p.isClosed)break;p.controller.enqueue(d.chunk);break;case h.CLOSE:if((0,r.assert)(p,"close should have stream controller"),p.isClosed)break;p.isClosed=!0,p.controller.close(),this.#s(p,c);break;case h.ERROR:(0,r.assert)(p,"error should have stream controller"),p.controller.error(m(d.reason)),this.#s(p,c);break;case h.CANCEL_COMPLETE:d.success?p.cancelCall.resolve():p.cancelCall.reject(m(d.reason)),this.#s(p,c);break;case h.CANCEL:if(!j)break;new Promise(function(E){E(j.onCancel?.(m(d.reason)))}).then(function(){b.postMessage({sourceName:f,targetName:g,stream:h.CANCEL_COMPLETE,streamId:c,success:!0})},function(E){b.postMessage({sourceName:f,targetName:g,stream:h.CANCEL_COMPLETE,streamId:c,reason:m(E)})}),j.sinkCapability.reject(m(d.reason)),j.isCancelled=!0,delete this.streamSinks[c];break;default:throw new Error("Unexpected stream case")}}async#s(d,c){await Promise.allSettled([d.startCall?.promise,d.pullCall?.promise,d.cancelCall?.promise]),delete this.streamControllers[c]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}s.MessageHandler=v}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var r=i(1);class l{#t;#e;constructor({parsedData:m,rawData:v}){this.#t=m,this.#e=v}getRaw(){return this.#e}get(m){return this.#t.get(m)??null}getAll(){return(0,r.objectFromMap)(this.#t)}has(m){return this.#t.has(m)}}s.Metadata=l}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var r=i(1),l=i(8);const h=Symbol("INTERNAL");class m{#t=!0;constructor(d,c){this.name=d,this.intent=c}get visible(){return this.#t}_setVisible(d,c){d!==h&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#t=c}}class v{#t=null;#e=new Map;#s=null;#n=null;constructor(d){if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,this.#n=d.order;for(const c of d.groups)this.#e.set(c.id,new m(c.name,c.intent));if(d.baseState==="OFF")for(const c of this.#e.values())c._setVisible(h,!1);for(const c of d.on)this.#e.get(c)._setVisible(h,!0);for(const c of d.off)this.#e.get(c)._setVisible(h,!1);this.#s=this.getHash()}}#o(d){const c=d.length;if(c<2)return!0;const f=d[0];for(let g=1;g<c;g++){const b=d[g];let p;if(Array.isArray(b))p=this.#o(b);else if(this.#e.has(b))p=this.#e.get(b).visible;else return(0,r.warn)(`Optional content group not found: ${b}`),!0;switch(f){case"And":if(!p)return!1;break;case"Or":if(p)return!0;break;case"Not":return!p;default:return!0}}return f==="And"}isVisible(d){if(this.#e.size===0)return!0;if(!d)return(0,r.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return this.#e.has(d.id)?this.#e.get(d.id).visible:((0,r.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return this.#o(d.expression);if(!d.policy||d.policy==="AnyOn"){for(const c of d.ids){if(!this.#e.has(c))return(0,r.warn)(`Optional content group not found: ${c}`),!0;if(this.#e.get(c).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const c of d.ids){if(!this.#e.has(c))return(0,r.warn)(`Optional content group not found: ${c}`),!0;if(!this.#e.get(c).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const c of d.ids){if(!this.#e.has(c))return(0,r.warn)(`Optional content group not found: ${c}`),!0;if(!this.#e.get(c).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const c of d.ids){if(!this.#e.has(c))return(0,r.warn)(`Optional content group not found: ${c}`),!0;if(this.#e.get(c).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,r.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,c=!0){if(!this.#e.has(d)){(0,r.warn)(`Optional content group not found: ${d}`);return}this.#e.get(d)._setVisible(h,!!c),this.#t=null}get hasInitialVisibility(){return this.#s===null||this.getHash()===this.#s}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,r.objectFromMap)(this.#e):null}getGroup(d){return this.#e.get(d)||null}getHash(){if(this.#t!==null)return this.#t;const d=new l.MurmurHash3_64;for(const[c,f]of this.#e)d.update(`${c}:${f.visible}`);return this.#t=d.hexdigest()}}s.OptionalContentConfig=v}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var r=i(1),l=i(6);class h{constructor({length:d,initialData:c,progressiveDone:f=!1,contentDispositionFilename:g=null,disableRange:b=!1,disableStream:p=!1},j){if((0,r.assert)(j,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=f,this._contentDispositionFilename=g,c?.length>0){const E=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(E)}this._pdfDataRangeTransport=j,this._isStreamingSupported=!p,this._isRangeSupported=!b,this._contentLength=d,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((E,y)=>{this._onReceiveData({begin:E,chunk:y})}),this._pdfDataRangeTransport.addProgressListener((E,y)=>{this._onProgress({loaded:E,total:y})}),this._pdfDataRangeTransport.addProgressiveReadListener(E=>{this._onReceiveData({chunk:E})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:d,chunk:c}){const f=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(d===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{const g=this._rangeReaders.some(function(b){return b._begin!==d?!1:(b._enqueue(f),!0)});(0,r.assert)(g,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(d){d.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:d.loaded}):this._fullRequestReader?.onProgress?.({loaded:d.loaded,total:d.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const c=this._rangeReaders.indexOf(d);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new m(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,c){if(c<=this._progressiveDataLength)return null;const f=new v(this,d,c);return this._pdfDataRangeTransport.requestDataRange(d,c),this._rangeReaders.push(f),f}cancelAllRequests(d){this._fullRequestReader?.cancel(d);for(const c of this._rangeReaders.slice(0))c.cancel(d);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=h;class m{constructor(d,c,f=!1,g=null){this._stream=d,this._done=f||!1,this._filename=(0,l.isPdfFile)(g)?g:null,this._queuedChunks=c||[],this._loaded=0;for(const b of this._queuedChunks)this._loaded+=b.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const d=new r.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class v{constructor(d,c,f){this._stream=d,this._begin=c,this._end=f,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(this._requests.length===0)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const d=new r.PromiseCapability;return this._requests.push(d),d.promise}cancel(d){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var r=i(1),l=i(20);function h(f,g,b){return{method:"GET",headers:f,signal:b.signal,mode:"cors",credentials:g?"include":"same-origin",redirect:"follow"}}function m(f){const g=new Headers;for(const b in f){const p=f[b];p!==void 0&&g.append(b,p)}return g}function v(f){return f instanceof Uint8Array?f.buffer:f instanceof ArrayBuffer?f:((0,r.warn)(`getArrayBuffer - unexpected data format: ${f}`),new Uint8Array(f).buffer)}class A{constructor(g){this.source=g,this.isHttp=/^https?:/i.test(g.url),this.httpHeaders=this.isHttp&&g.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(g,b){if(b<=this._progressiveDataLength)return null;const p=new c(this,g,b);return this._rangeRequestReaders.push(p),p}cancelAllRequests(g){this._fullRequestReader?.cancel(g);for(const b of this._rangeRequestReaders.slice(0))b.cancel(g)}}s.PDFFetchStream=A;class d{constructor(g){this._stream=g,this._reader=null,this._loaded=0,this._filename=null;const b=g.source;this._withCredentials=b.withCredentials||!1,this._contentLength=b.length,this._headersCapability=new r.PromiseCapability,this._disableRange=b.disableRange||!1,this._rangeChunkSize=b.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._headers=m(this._stream.httpHeaders);const p=b.url;fetch(p,h(this._headers,this._withCredentials,this._abortController)).then(j=>{if(!(0,l.validateResponseStatus)(j.status))throw(0,l.createResponseStatusError)(j.status,p);this._reader=j.body.getReader(),this._headersCapability.resolve();const E=B=>j.headers.get(B),{allowRangeRequests:y,suggestedLength:C}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:E,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=y,this._contentLength=C||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(E),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:g,done:b}=await this._reader.read();return b?{value:g,done:b}:(this._loaded+=g.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:v(g),done:!1})}cancel(g){this._reader?.cancel(g),this._abortController.abort()}}class c{constructor(g,b,p){this._stream=g,this._reader=null,this._loaded=0;const j=g.source;this._withCredentials=j.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!j.disableStream,this._abortController=new AbortController,this._headers=m(this._stream.httpHeaders),this._headers.append("Range",`bytes=${b}-${p-1}`);const E=j.url;fetch(E,h(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,l.validateResponseStatus)(y.status))throw(0,l.createResponseStatusError)(y.status,E);this._readCapability.resolve(),this._reader=y.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:g,done:b}=await this._reader.read();return b?{value:g,done:b}:(this._loaded+=g.byteLength,this.onProgress?.({loaded:this._loaded}),{value:v(g),done:!1})}cancel(g){this._reader?.cancel(g),this._abortController.abort()}}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=A,s.extractFilenameFromHeader=v,s.validateRangeRequestCapabilities=m,s.validateResponseStatus=d;var r=i(1),l=i(21),h=i(6);function m({getResponseHeader:c,isHttp:f,rangeChunkSize:g,disableRange:b}){const p={allowRangeRequests:!1,suggestedLength:void 0},j=parseInt(c("Content-Length"),10);return!Number.isInteger(j)||(p.suggestedLength=j,j<=2*g)||b||!f||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(p.allowRangeRequests=!0),p}function v(c){const f=c("Content-Disposition");if(f){let g=(0,l.getFilenameFromContentDispositionHeader)(f);if(g.includes("%"))try{g=decodeURIComponent(g)}catch{}if((0,h.isPdfFile)(g))return g}return null}function A(c,f){return c===404||c===0&&f.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+f+'".'):new r.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${f}".`,c)}function d(c){return c===200||c===206}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=l;var r=i(1);function l(h){let m=!0,v=A("filename\\*","i").exec(h);if(v){v=v[1];let j=g(v);return j=unescape(j),j=b(j),j=p(j),c(j)}if(v=f(h),v){const j=p(v);return c(j)}if(v=A("filename","i").exec(h),v){v=v[1];let j=g(v);return j=p(j),c(j)}function A(j,E){return new RegExp("(?:^|;)\\s*"+j+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',E)}function d(j,E){if(j){if(!/^[\x00-\xFF]+$/.test(E))return E;try{const y=new TextDecoder(j,{fatal:!0}),C=(0,r.stringToBytes)(E);E=y.decode(C),m=!1}catch{}}return E}function c(j){return m&&/[\x80-\xff]/.test(j)&&(j=d("utf-8",j),m&&(j=d("iso-8859-1",j))),j}function f(j){const E=[];let y;const C=A("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=C.exec(j))!==null;){let[,I,N,L]=y;if(I=parseInt(I,10),I in E){if(I===0)break;continue}E[I]=[N,L]}const B=[];for(let I=0;I<E.length&&I in E;++I){let[N,L]=E[I];L=g(L),N&&(L=unescape(L),I===0&&(L=b(L))),B.push(L)}return B.join("")}function g(j){if(j.startsWith('"')){const E=j.slice(1).split('\\"');for(let y=0;y<E.length;++y){const C=E[y].indexOf('"');C!==-1&&(E[y]=E[y].slice(0,C),E.length=y+1),E[y]=E[y].replaceAll(/\\(.)/g,"$1")}j=E.join('"')}return j}function b(j){const E=j.indexOf("'");if(E===-1)return j;const y=j.slice(0,E),B=j.slice(E+1).replace(/^[^']*'/,"");return d(y,B)}function p(j){return!j.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(j)?j:j.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(E,y,C,B){if(C==="q"||C==="Q")return B=B.replaceAll("_"," "),B=B.replaceAll(/=([0-9a-fA-F]{2})/g,function(I,N){return String.fromCharCode(parseInt(N,16))}),d(y,B);try{B=atob(B)}catch{}return d(y,B)})}return""}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var r=i(1),l=i(20);const h=200,m=206;function v(g){const b=g.response;return typeof b!="string"?b:(0,r.stringToBytes)(b).buffer}class A{constructor(b,p={}){this.url=b,this.isHttp=/^https?:/i.test(b),this.httpHeaders=this.isHttp&&p.httpHeaders||Object.create(null),this.withCredentials=p.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(b,p,j){const E={begin:b,end:p};for(const y in j)E[y]=j[y];return this.request(E)}requestFull(b){return this.request(b)}request(b){const p=new XMLHttpRequest,j=this.currXhrId++,E=this.pendingRequests[j]={xhr:p};p.open("GET",this.url),p.withCredentials=this.withCredentials;for(const y in this.httpHeaders){const C=this.httpHeaders[y];C!==void 0&&p.setRequestHeader(y,C)}return this.isHttp&&"begin"in b&&"end"in b?(p.setRequestHeader("Range",`bytes=${b.begin}-${b.end-1}`),E.expectedStatus=m):E.expectedStatus=h,p.responseType="arraybuffer",b.onError&&(p.onerror=function(y){b.onError(p.status)}),p.onreadystatechange=this.onStateChange.bind(this,j),p.onprogress=this.onProgress.bind(this,j),E.onHeadersReceived=b.onHeadersReceived,E.onDone=b.onDone,E.onError=b.onError,E.onProgress=b.onProgress,p.send(null),j}onProgress(b,p){const j=this.pendingRequests[b];j&&j.onProgress?.(p)}onStateChange(b,p){const j=this.pendingRequests[b];if(!j)return;const E=j.xhr;if(E.readyState>=2&&j.onHeadersReceived&&(j.onHeadersReceived(),delete j.onHeadersReceived),E.readyState!==4||!(b in this.pendingRequests))return;if(delete this.pendingRequests[b],E.status===0&&this.isHttp){j.onError?.(E.status);return}const y=E.status||h;if(!(y===h&&j.expectedStatus===m)&&y!==j.expectedStatus){j.onError?.(E.status);return}const B=v(E);if(y===m){const I=E.getResponseHeader("Content-Range"),N=/bytes (\d+)-(\d+)\/(\d+)/.exec(I);j.onDone({begin:parseInt(N[1],10),chunk:B})}else B?j.onDone({begin:0,chunk:B}):j.onError?.(E.status)}getRequestXhr(b){return this.pendingRequests[b].xhr}isPendingRequest(b){return b in this.pendingRequests}abortRequest(b){const p=this.pendingRequests[b].xhr;delete this.pendingRequests[b],p.abort()}}class d{constructor(b){this._source=b,this._manager=new A(b.url,{httpHeaders:b.httpHeaders,withCredentials:b.withCredentials}),this._rangeChunkSize=b.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(b){const p=this._rangeRequestReaders.indexOf(b);p>=0&&this._rangeRequestReaders.splice(p,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(b,p){const j=new f(this._manager,b,p);return j.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(j),j}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(const p of this._rangeRequestReaders.slice(0))p.cancel(b)}}s.PDFNetworkStream=d;class c{constructor(b,p){this._manager=b;const j={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=p.url,this._fullRequestId=b.requestFull(j),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=p.disableRange||!1,this._contentLength=p.length,this._rangeChunkSize=p.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const b=this._fullRequestId,p=this._manager.getRequestXhr(b),j=C=>p.getResponseHeader(C),{allowRangeRequests:E,suggestedLength:y}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:j,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});E&&(this._isRangeSupported=!0),this._contentLength=y||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(j),this._isRangeSupported&&this._manager.abortRequest(b),this._headersReceivedCapability.resolve()}_onDone(b){if(b&&(this._requests.length>0?this._requests.shift().resolve({value:b.chunk,done:!1}):this._cachedChunks.push(b.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(b){this._storedError=(0,l.createResponseStatusError)(b,this._url),this._headersReceivedCapability.reject(this._storedError);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(b){this.onProgress?.({loaded:b.loaded,total:b.lengthComputable?b.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new r.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._headersReceivedCapability.reject(b);for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class f{constructor(b,p,j){this._manager=b;const E={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=b.url,this._requestId=b.requestRange(p,j,E),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(b){const p=b.chunk;this._requests.length>0?this._requests.shift().resolve({value:p,done:!1}):this._queuedChunk=p,this._done=!0;for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(b){this._storedError=(0,l.createResponseStatusError)(b,this._url);for(const p of this._requests)p.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(b){this.isStreamingSupported||this.onProgress?.({loaded:b.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new r.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var r=i(1),l=i(20);const h=/^file:\/\/\/[a-zA-Z]:\//;function m(j){const E=require$$5,y=E.parse(j);return y.protocol==="file:"||y.host?y:/^[a-z]:[/\\]/i.test(j)?E.parse(`file:///${j}`):(y.host||(y.protocol="file:"),y)}class v{constructor(E){this.source=E,this.url=m(E.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new b(this):new f(this),this._fullRequestReader}getRangeReader(E,y){if(y<=this._progressiveDataLength)return null;const C=this.isFsUrl?new p(this,E,y):new g(this,E,y);return this._rangeRequestReaders.push(C),C}cancelAllRequests(E){this._fullRequestReader?.cancel(E);for(const y of this._rangeRequestReaders.slice(0))y.cancel(E)}}s.PDFNodeStream=v;class A{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null;const y=E.source;this._contentLength=y.length,this._loaded=0,this._filename=null,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=E.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",y=>{this._error(y)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class d{constructor(E){this._url=E.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const y=E.source;this._isStreamingSupported=!y.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const E=this._readableStream.read();return E===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=E.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){if(!this._readableStream){this._error(E);return}this._readableStream.destroy(E)}_error(E){this._storedError=E,this._readCapability.resolve()}_setReadableStream(E){this._readableStream=E,E.on("readable",()=>{this._readCapability.resolve()}),E.on("end",()=>{E.destroy(),this._done=!0,this._readCapability.resolve()}),E.on("error",y=>{this._error(y)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function c(j,E){return{protocol:j.protocol,auth:j.auth,host:j.hostname,port:j.port,path:j.path,method:"GET",headers:E}}class f extends A{constructor(E){super(E);const y=C=>{if(C.statusCode===404){const L=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(C);const B=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:I,suggestedLength:N}=(0,l.validateRangeRequestCapabilities)({getResponseHeader:B,isHttp:E.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=I,this._contentLength=N||this._contentLength,this._filename=(0,l.extractFilenameFromHeader)(B)};if(this._request=null,this._url.protocol==="http:"){const C=require$$5;this._request=C.request(c(this._url,E.httpHeaders),y)}else{const C=require$$5;this._request=C.request(c(this._url,E.httpHeaders),y)}this._request.on("error",C=>{this._storedError=C,this._headersCapability.reject(C)}),this._request.end()}}class g extends d{constructor(E,y,C){super(E),this._httpHeaders={};for(const I in E.httpHeaders){const N=E.httpHeaders[I];N!==void 0&&(this._httpHeaders[I]=N)}this._httpHeaders.Range=`bytes=${y}-${C-1}`;const B=I=>{if(I.statusCode===404){const N=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=N;return}this._setReadableStream(I)};if(this._request=null,this._url.protocol==="http:"){const I=require$$5;this._request=I.request(c(this._url,this._httpHeaders),B)}else{const I=require$$5;this._request=I.request(c(this._url,this._httpHeaders),B)}this._request.on("error",I=>{this._storedError=I}),this._request.end()}}class b extends A{constructor(E){super(E);let y=decodeURIComponent(this._url.path);h.test(this._url.href)&&(y=y.replace(/^\//,""));const C=require$$5;C.lstat(y,(B,I)=>{if(B){B.code==="ENOENT"&&(B=new r.MissingPDFException(`Missing PDF "${y}".`)),this._storedError=B,this._headersCapability.reject(B);return}this._contentLength=I.size,this._setReadableStream(C.createReadStream(y)),this._headersCapability.resolve()})}}class p extends d{constructor(E,y,C){super(E);let B=decodeURIComponent(this._url.path);h.test(this._url.href)&&(B=B.replace(/^\//,""));const I=require$$5;this._setReadableStream(I.createReadStream(B,{start:y,end:C-1}))}}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var r=i(6),l=i(1);const h={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},m="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/1999/xlink",A=["butt","round","square"],d=["miter","round","bevel"],c=function(I,N="",L=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!L)return URL.createObjectURL(new Blob([I],{type:N}));const Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let tt=`data:${N};base64,`;for(let Z=0,st=I.length;Z<st;Z+=3){const F=I[Z]&255,it=I[Z+1]&255,Y=I[Z+2]&255,rt=F>>2,lt=(F&3)<<4|it>>4,U=Z+1<st?(it&15)<<2|Y>>6:64,P=Z+2<st?Y&63:64;tt+=Q[rt]+Q[lt]+Q[U]+Q[P]}return tt},f=(function(){const I=new Uint8Array([137,80,78,71,13,10,26,10]),N=12,L=new Int32Array(256);for(let Y=0;Y<256;Y++){let rt=Y;for(let lt=0;lt<8;lt++)rt=rt&1?3988292384^rt>>1&2147483647:rt>>1&2147483647;L[Y]=rt}function Q(Y,rt,lt){let U=-1;for(let P=rt;P<lt;P++){const k=(U^Y[P])&255,_=L[k];U=U>>>8^_}return U^-1}function tt(Y,rt,lt,U){let P=U;const k=rt.length;lt[P]=k>>24&255,lt[P+1]=k>>16&255,lt[P+2]=k>>8&255,lt[P+3]=k&255,P+=4,lt[P]=Y.charCodeAt(0)&255,lt[P+1]=Y.charCodeAt(1)&255,lt[P+2]=Y.charCodeAt(2)&255,lt[P+3]=Y.charCodeAt(3)&255,P+=4,lt.set(rt,P),P+=rt.length;const _=Q(lt,U+4,P);lt[P]=_>>24&255,lt[P+1]=_>>16&255,lt[P+2]=_>>8&255,lt[P+3]=_&255}function Z(Y,rt,lt){let U=1,P=0;for(let k=rt;k<lt;++k)U=(U+(Y[k]&255))%65521,P=(P+U)%65521;return P<<16|U}function st(Y){if(!l.isNodeJS)return F(Y);try{const rt=parseInt(process.versions.node)>=8?Y:Buffer.from(Y),lt=require$$5.deflateSync(rt,{level:9});return lt instanceof Uint8Array?lt:new Uint8Array(lt)}catch(rt){(0,l.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+rt)}return F(Y)}function F(Y){let rt=Y.length;const lt=65535,U=Math.ceil(rt/lt),P=new Uint8Array(2+rt+U*5+4);let k=0;P[k++]=120,P[k++]=156;let _=0;for(;rt>lt;)P[k++]=0,P[k++]=255,P[k++]=255,P[k++]=0,P[k++]=0,P.set(Y.subarray(_,_+lt),k),k+=lt,_+=lt,rt-=lt;P[k++]=1,P[k++]=rt&255,P[k++]=rt>>8&255,P[k++]=~rt&65535&255,P[k++]=(~rt&65535)>>8&255,P.set(Y.subarray(_),k),k+=Y.length-_;const S=Z(Y,0,Y.length);return P[k++]=S>>24&255,P[k++]=S>>16&255,P[k++]=S>>8&255,P[k++]=S&255,P}function it(Y,rt,lt,U){const P=Y.width,k=Y.height;let _,S,O;const H=Y.data;switch(rt){case l.ImageKind.GRAYSCALE_1BPP:S=0,_=1,O=P+7>>3;break;case l.ImageKind.RGB_24BPP:S=2,_=8,O=P*3;break;case l.ImageKind.RGBA_32BPP:S=6,_=8,O=P*4;break;default:throw new Error("invalid format")}const G=new Uint8Array((1+O)*k);let K=0,q=0;for(let $=0;$<k;++$)G[K++]=0,G.set(H.subarray(q,q+O),K),q+=O,K+=O;if(rt===l.ImageKind.GRAYSCALE_1BPP&&U){K=0;for(let $=0;$<k;$++){K++;for(let J=0;J<O;J++)G[K++]^=255}}const R=new Uint8Array([P>>24&255,P>>16&255,P>>8&255,P&255,k>>24&255,k>>16&255,k>>8&255,k&255,_,S,0,0,0]),M=st(G),D=I.length+N*3+R.length+M.length,V=new Uint8Array(D);let W=0;return V.set(I,W),W+=I.length,tt("IHDR",R,V,W),W+=N+R.length,tt("IDATA",M,V,W),W+=N+M.length,tt("IEND",new Uint8Array(0),V,W),c(V,"image/png",lt)}return function(rt,lt,U){const P=rt.kind===void 0?l.ImageKind.GRAYSCALE_1BPP:rt.kind;return it(rt,P,lt,U)}})();class g{constructor(){this.fontSizeScale=1,this.fontWeight=h.fontWeight,this.fontSize=0,this.textMatrix=l.IDENTITY_MATRIX,this.fontMatrix=l.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=l.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=h.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(N,L){this.x=N,this.y=L}}function b(I){let N=[];const L=[];for(const Q of I){if(Q.fn==="save"){N.push({fnId:92,fn:"group",items:[]}),L.push(N),N=N.at(-1).items;continue}Q.fn==="restore"?N=L.pop():N.push(Q)}return N}function p(I){if(Number.isInteger(I))return I.toString();const N=I.toFixed(10);let L=N.length-1;if(N[L]!=="0")return N;do L--;while(N[L]==="0");return N.substring(0,N[L]==="."?L:L+1)}function j(I){if(I[4]===0&&I[5]===0){if(I[1]===0&&I[2]===0)return I[0]===1&&I[3]===1?"":`scale(${p(I[0])} ${p(I[3])})`;if(I[0]===I[3]&&I[1]===-I[2]){const N=Math.acos(I[0])*180/Math.PI;return`rotate(${p(N)})`}}else if(I[0]===1&&I[1]===0&&I[2]===0&&I[3]===1)return`translate(${p(I[4])} ${p(I[5])})`;return`matrix(${p(I[0])} ${p(I[1])} ${p(I[2])} ${p(I[3])} ${p(I[4])} ${p(I[5])})`}let E=0,y=0,C=0;class B{constructor(N,L,Q=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new g,this.transformMatrix=l.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=N,this.objs=L,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Q,this._operatorIdMapping=[];for(const tt in l.OPS)this._operatorIdMapping[l.OPS[tt]]=tt}getObject(N,L=null){return typeof N=="string"?N.startsWith("g_")?this.commonObjs.get(N):this.objs.get(N):L}save(){this.transformStack.push(this.transformMatrix);const N=this.current;this.extraStack.push(N),this.current=N.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(N){this.save(),this.executeOpTree(N),this.restore()}loadDependencies(N){const L=N.fnArray,Q=N.argsArray;for(let tt=0,Z=L.length;tt<Z;tt++)if(L[tt]===l.OPS.dependency)for(const st of Q[tt]){const F=st.startsWith("g_")?this.commonObjs:this.objs,it=new Promise(Y=>{F.get(st,Y)});this.current.dependencies.push(it)}return Promise.all(this.current.dependencies)}transform(N,L,Q,tt,Z,st){const F=[N,L,Q,tt,Z,st];this.transformMatrix=l.Util.transform(this.transformMatrix,F),this.tgrp=null}getSVG(N,L){this.viewport=L;const Q=this._initialize(L);return this.loadDependencies(N).then(()=>(this.transformMatrix=l.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(N)),Q))}convertOpList(N){const L=this._operatorIdMapping,Q=N.argsArray,tt=N.fnArray,Z=[];for(let st=0,F=tt.length;st<F;st++){const it=tt[st];Z.push({fnId:it,fn:L[it],args:Q[st]})}return b(Z)}executeOpTree(N){for(const L of N){const Q=L.fn,tt=L.fnId,Z=L.args;switch(tt|0){case l.OPS.beginText:this.beginText();break;case l.OPS.dependency:break;case l.OPS.setLeading:this.setLeading(Z);break;case l.OPS.setLeadingMoveText:this.setLeadingMoveText(Z[0],Z[1]);break;case l.OPS.setFont:this.setFont(Z);break;case l.OPS.showText:this.showText(Z[0]);break;case l.OPS.showSpacedText:this.showText(Z[0]);break;case l.OPS.endText:this.endText();break;case l.OPS.moveText:this.moveText(Z[0],Z[1]);break;case l.OPS.setCharSpacing:this.setCharSpacing(Z[0]);break;case l.OPS.setWordSpacing:this.setWordSpacing(Z[0]);break;case l.OPS.setHScale:this.setHScale(Z[0]);break;case l.OPS.setTextMatrix:this.setTextMatrix(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]);break;case l.OPS.setTextRise:this.setTextRise(Z[0]);break;case l.OPS.setTextRenderingMode:this.setTextRenderingMode(Z[0]);break;case l.OPS.setLineWidth:this.setLineWidth(Z[0]);break;case l.OPS.setLineJoin:this.setLineJoin(Z[0]);break;case l.OPS.setLineCap:this.setLineCap(Z[0]);break;case l.OPS.setMiterLimit:this.setMiterLimit(Z[0]);break;case l.OPS.setFillRGBColor:this.setFillRGBColor(Z[0],Z[1],Z[2]);break;case l.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Z[0],Z[1],Z[2]);break;case l.OPS.setStrokeColorN:this.setStrokeColorN(Z);break;case l.OPS.setFillColorN:this.setFillColorN(Z);break;case l.OPS.shadingFill:this.shadingFill(Z[0]);break;case l.OPS.setDash:this.setDash(Z[0],Z[1]);break;case l.OPS.setRenderingIntent:this.setRenderingIntent(Z[0]);break;case l.OPS.setFlatness:this.setFlatness(Z[0]);break;case l.OPS.setGState:this.setGState(Z[0]);break;case l.OPS.fill:this.fill();break;case l.OPS.eoFill:this.eoFill();break;case l.OPS.stroke:this.stroke();break;case l.OPS.fillStroke:this.fillStroke();break;case l.OPS.eoFillStroke:this.eoFillStroke();break;case l.OPS.clip:this.clip("nonzero");break;case l.OPS.eoClip:this.clip("evenodd");break;case l.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case l.OPS.paintImageXObject:this.paintImageXObject(Z[0]);break;case l.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Z[0]);break;case l.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Z[0]);break;case l.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Z[0],Z[1]);break;case l.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case l.OPS.closePath:this.closePath();break;case l.OPS.closeStroke:this.closeStroke();break;case l.OPS.closeFillStroke:this.closeFillStroke();break;case l.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case l.OPS.nextLine:this.nextLine();break;case l.OPS.transform:this.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]);break;case l.OPS.constructPath:this.constructPath(Z[0],Z[1]);break;case l.OPS.endPath:this.endPath();break;case 92:this.group(L.items);break;default:(0,l.warn)(`Unimplemented operator ${Q}`);break}}}setWordSpacing(N){this.current.wordSpacing=N}setCharSpacing(N){this.current.charSpacing=N}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(N,L,Q,tt,Z,st){const F=this.current;F.textMatrix=F.lineMatrix=[N,L,Q,tt,Z,st],F.textMatrixScale=Math.hypot(N,L),F.x=F.lineX=0,F.y=F.lineY=0,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${p(F.fontSize)}px`),F.tspan.setAttributeNS(null,"y",p(-F.y)),F.txtElement=this.svgFactory.createElement("svg:text"),F.txtElement.append(F.tspan)}beginText(){const N=this.current;N.x=N.lineX=0,N.y=N.lineY=0,N.textMatrix=l.IDENTITY_MATRIX,N.lineMatrix=l.IDENTITY_MATRIX,N.textMatrixScale=1,N.tspan=this.svgFactory.createElement("svg:tspan"),N.txtElement=this.svgFactory.createElement("svg:text"),N.txtgrp=this.svgFactory.createElement("svg:g"),N.xcoords=[],N.ycoords=[]}moveText(N,L){const Q=this.current;Q.x=Q.lineX+=N,Q.y=Q.lineY+=L,Q.xcoords=[],Q.ycoords=[],Q.tspan=this.svgFactory.createElement("svg:tspan"),Q.tspan.setAttributeNS(null,"font-family",Q.fontFamily),Q.tspan.setAttributeNS(null,"font-size",`${p(Q.fontSize)}px`),Q.tspan.setAttributeNS(null,"y",p(-Q.y))}showText(N){const L=this.current,Q=L.font,tt=L.fontSize;if(tt===0)return;const Z=L.fontSizeScale,st=L.charSpacing,F=L.wordSpacing,it=L.fontDirection,Y=L.textHScale*it,rt=Q.vertical,lt=rt?1:-1,U=Q.defaultVMetrics,P=tt*L.fontMatrix[0];let k=0;for(const O of N){if(O===null){k+=it*F;continue}else if(typeof O=="number"){k+=lt*O*tt/1e3;continue}const H=(O.isSpace?F:0)+st,G=O.fontChar;let K,q,R=O.width;if(rt){let D;const V=O.vmetric||U;D=O.vmetric?V[1]:R*.5,D=-D*P;const W=V[2]*P;R=V?-V[0]:R,K=D/Z,q=(k+W)/Z}else K=k/Z,q=0;(O.isInFont||Q.missingFile)&&(L.xcoords.push(L.x+K),rt&&L.ycoords.push(-L.y+q),L.tspan.textContent+=G);const M=rt?R*P-H*it:R*P+H*it;k+=M}L.tspan.setAttributeNS(null,"x",L.xcoords.map(p).join(" ")),rt?L.tspan.setAttributeNS(null,"y",L.ycoords.map(p).join(" ")):L.tspan.setAttributeNS(null,"y",p(-L.y)),rt?L.y-=k:L.x+=k*Y,L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${p(L.fontSize)}px`),L.fontStyle!==h.fontStyle&&L.tspan.setAttributeNS(null,"font-style",L.fontStyle),L.fontWeight!==h.fontWeight&&L.tspan.setAttributeNS(null,"font-weight",L.fontWeight);const _=L.textRenderingMode&l.TextRenderingMode.FILL_STROKE_MASK;if(_===l.TextRenderingMode.FILL||_===l.TextRenderingMode.FILL_STROKE?(L.fillColor!==h.fillColor&&L.tspan.setAttributeNS(null,"fill",L.fillColor),L.fillAlpha<1&&L.tspan.setAttributeNS(null,"fill-opacity",L.fillAlpha)):L.textRenderingMode===l.TextRenderingMode.ADD_TO_PATH?L.tspan.setAttributeNS(null,"fill","transparent"):L.tspan.setAttributeNS(null,"fill","none"),_===l.TextRenderingMode.STROKE||_===l.TextRenderingMode.FILL_STROKE){const O=1/(L.textMatrixScale||1);this._setStrokeAttributes(L.tspan,O)}let S=L.textMatrix;L.textRise!==0&&(S=S.slice(),S[5]+=L.textRise),L.txtElement.setAttributeNS(null,"transform",`${j(S)} scale(${p(Y)}, -1)`),L.txtElement.setAttributeNS(m,"xml:space","preserve"),L.txtElement.append(L.tspan),L.txtgrp.append(L.txtElement),this._ensureTransformGroup().append(L.txtElement)}setLeadingMoveText(N,L){this.setLeading(-L),this.moveText(N,L)}addFontStyle(N){if(!N.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const L=c(N.data,N.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${N.loadedName}"; src: url(${L}); }
`}setFont(N){const L=this.current,Q=this.commonObjs.get(N[0]);let tt=N[1];L.font=Q,this.embedFonts&&!Q.missingFile&&!this.embeddedFonts[Q.loadedName]&&(this.addFontStyle(Q),this.embeddedFonts[Q.loadedName]=Q),L.fontMatrix=Q.fontMatrix||l.FONT_IDENTITY_MATRIX;let Z="normal";Q.black?Z="900":Q.bold&&(Z="bold");const st=Q.italic?"italic":"normal";tt<0?(tt=-tt,L.fontDirection=-1):L.fontDirection=1,L.fontSize=tt,L.fontFamily=Q.loadedName,L.fontWeight=Z,L.fontStyle=st,L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"y",p(-L.y)),L.xcoords=[],L.ycoords=[]}endText(){const N=this.current;N.textRenderingMode&l.TextRenderingMode.ADD_TO_PATH_FLAG&&N.txtElement?.hasChildNodes()&&(N.element=N.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(N){N>0&&(this.current.lineWidth=N)}setLineCap(N){this.current.lineCap=A[N]}setLineJoin(N){this.current.lineJoin=d[N]}setMiterLimit(N){this.current.miterLimit=N}setStrokeAlpha(N){this.current.strokeAlpha=N}setStrokeRGBColor(N,L,Q){this.current.strokeColor=l.Util.makeHexColor(N,L,Q)}setFillAlpha(N){this.current.fillAlpha=N}setFillRGBColor(N,L,Q){this.current.fillColor=l.Util.makeHexColor(N,L,Q),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(N){this.current.strokeColor=this._makeColorN_Pattern(N)}setFillColorN(N){this.current.fillColor=this._makeColorN_Pattern(N)}shadingFill(N){const{width:L,height:Q}=this.viewport,tt=l.Util.inverseTransform(this.transformMatrix),[Z,st,F,it]=l.Util.getAxialAlignedBoundingBox([0,0,L,Q],tt),Y=this.svgFactory.createElement("svg:rect");Y.setAttributeNS(null,"x",Z),Y.setAttributeNS(null,"y",st),Y.setAttributeNS(null,"width",F-Z),Y.setAttributeNS(null,"height",it-st),Y.setAttributeNS(null,"fill",this._makeShadingPattern(N)),this.current.fillAlpha<1&&Y.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Y)}_makeColorN_Pattern(N){return N[0]==="TilingPattern"?this._makeTilingPattern(N):this._makeShadingPattern(N)}_makeTilingPattern(N){const L=N[1],Q=N[2],tt=N[3]||l.IDENTITY_MATRIX,[Z,st,F,it]=N[4],Y=N[5],rt=N[6],lt=N[7],U=`shading${C++}`,[P,k,_,S]=l.Util.normalizeRect([...l.Util.applyTransform([Z,st],tt),...l.Util.applyTransform([F,it],tt)]),[O,H]=l.Util.singularValueDecompose2dScale(tt),G=Y*O,K=rt*H,q=this.svgFactory.createElement("svg:pattern");q.setAttributeNS(null,"id",U),q.setAttributeNS(null,"patternUnits","userSpaceOnUse"),q.setAttributeNS(null,"width",G),q.setAttributeNS(null,"height",K),q.setAttributeNS(null,"x",`${P}`),q.setAttributeNS(null,"y",`${k}`);const R=this.svg,M=this.transformMatrix,D=this.current.fillColor,V=this.current.strokeColor,W=this.svgFactory.create(_-P,S-k);if(this.svg=W,this.transformMatrix=tt,lt===2){const $=l.Util.makeHexColor(...L);this.current.fillColor=$,this.current.strokeColor=$}return this.executeOpTree(this.convertOpList(Q)),this.svg=R,this.transformMatrix=M,this.current.fillColor=D,this.current.strokeColor=V,q.append(W.childNodes[0]),this.defs.append(q),`url(#${U})`}_makeShadingPattern(N){switch(typeof N=="string"&&(N=this.objs.get(N)),N[0]){case"RadialAxial":const L=`shading${C++}`,Q=N[3];let tt;switch(N[1]){case"axial":const Z=N[4],st=N[5];tt=this.svgFactory.createElement("svg:linearGradient"),tt.setAttributeNS(null,"id",L),tt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),tt.setAttributeNS(null,"x1",Z[0]),tt.setAttributeNS(null,"y1",Z[1]),tt.setAttributeNS(null,"x2",st[0]),tt.setAttributeNS(null,"y2",st[1]);break;case"radial":const F=N[4],it=N[5],Y=N[6],rt=N[7];tt=this.svgFactory.createElement("svg:radialGradient"),tt.setAttributeNS(null,"id",L),tt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),tt.setAttributeNS(null,"cx",it[0]),tt.setAttributeNS(null,"cy",it[1]),tt.setAttributeNS(null,"r",rt),tt.setAttributeNS(null,"fx",F[0]),tt.setAttributeNS(null,"fy",F[1]),tt.setAttributeNS(null,"fr",Y);break;default:throw new Error(`Unknown RadialAxial type: ${N[1]}`)}for(const Z of Q){const st=this.svgFactory.createElement("svg:stop");st.setAttributeNS(null,"offset",Z[0]),st.setAttributeNS(null,"stop-color",Z[1]),tt.append(st)}return this.defs.append(tt),`url(#${L})`;case"Mesh":return(0,l.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${N[0]}`)}}setDash(N,L){this.current.dashArray=N,this.current.dashPhase=L}constructPath(N,L){const Q=this.current;let tt=Q.x,Z=Q.y,st=[],F=0;for(const it of N)switch(it|0){case l.OPS.rectangle:tt=L[F++],Z=L[F++];const Y=L[F++],rt=L[F++],lt=tt+Y,U=Z+rt;st.push("M",p(tt),p(Z),"L",p(lt),p(Z),"L",p(lt),p(U),"L",p(tt),p(U),"Z");break;case l.OPS.moveTo:tt=L[F++],Z=L[F++],st.push("M",p(tt),p(Z));break;case l.OPS.lineTo:tt=L[F++],Z=L[F++],st.push("L",p(tt),p(Z));break;case l.OPS.curveTo:tt=L[F+4],Z=L[F+5],st.push("C",p(L[F]),p(L[F+1]),p(L[F+2]),p(L[F+3]),p(tt),p(Z)),F+=6;break;case l.OPS.curveTo2:st.push("C",p(tt),p(Z),p(L[F]),p(L[F+1]),p(L[F+2]),p(L[F+3])),tt=L[F+2],Z=L[F+3],F+=4;break;case l.OPS.curveTo3:tt=L[F+2],Z=L[F+3],st.push("C",p(L[F]),p(L[F+1]),p(tt),p(Z),p(tt),p(Z)),F+=4;break;case l.OPS.closePath:st.push("Z");break}st=st.join(" "),Q.path&&N.length>0&&N[0]!==l.OPS.rectangle&&N[0]!==l.OPS.moveTo?st=Q.path.getAttributeNS(null,"d")+st:(Q.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Q.path)),Q.path.setAttributeNS(null,"d",st),Q.path.setAttributeNS(null,"fill","none"),Q.element=Q.path,Q.setCurrentPoint(tt,Z)}endPath(){const N=this.current;if(N.path=null,!this.pendingClip)return;if(!N.element){this.pendingClip=null;return}const L=`clippath${E++}`,Q=this.svgFactory.createElement("svg:clipPath");Q.setAttributeNS(null,"id",L),Q.setAttributeNS(null,"transform",j(this.transformMatrix));const tt=N.element.cloneNode(!0);if(this.pendingClip==="evenodd"?tt.setAttributeNS(null,"clip-rule","evenodd"):tt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Q.append(tt),this.defs.append(Q),N.activeClipUrl){N.clipGroup=null;for(const Z of this.extraStack)Z.clipGroup=null;Q.setAttributeNS(null,"clip-path",N.activeClipUrl)}N.activeClipUrl=`url(#${L})`,this.tgrp=null}clip(N){this.pendingClip=N}closePath(){const N=this.current;if(N.path){const L=`${N.path.getAttributeNS(null,"d")}Z`;N.path.setAttributeNS(null,"d",L)}}setLeading(N){this.current.leading=-N}setTextRise(N){this.current.textRise=N}setTextRenderingMode(N){this.current.textRenderingMode=N}setHScale(N){this.current.textHScale=N/100}setRenderingIntent(N){}setFlatness(N){}setGState(N){for(const[L,Q]of N)switch(L){case"LW":this.setLineWidth(Q);break;case"LC":this.setLineCap(Q);break;case"LJ":this.setLineJoin(Q);break;case"ML":this.setMiterLimit(Q);break;case"D":this.setDash(Q[0],Q[1]);break;case"RI":this.setRenderingIntent(Q);break;case"FL":this.setFlatness(Q);break;case"Font":this.setFont(Q);break;case"CA":this.setStrokeAlpha(Q);break;case"ca":this.setFillAlpha(Q);break;default:(0,l.warn)(`Unimplemented graphic state operator ${L}`);break}}fill(){const N=this.current;N.element&&(N.element.setAttributeNS(null,"fill",N.fillColor),N.element.setAttributeNS(null,"fill-opacity",N.fillAlpha),this.endPath())}stroke(){const N=this.current;N.element&&(this._setStrokeAttributes(N.element),N.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(N,L=1){const Q=this.current;let tt=Q.dashArray;L!==1&&tt.length>0&&(tt=tt.map(function(Z){return L*Z})),N.setAttributeNS(null,"stroke",Q.strokeColor),N.setAttributeNS(null,"stroke-opacity",Q.strokeAlpha),N.setAttributeNS(null,"stroke-miterlimit",p(Q.miterLimit)),N.setAttributeNS(null,"stroke-linecap",Q.lineCap),N.setAttributeNS(null,"stroke-linejoin",Q.lineJoin),N.setAttributeNS(null,"stroke-width",p(L*Q.lineWidth)+"px"),N.setAttributeNS(null,"stroke-dasharray",tt.map(p).join(" ")),N.setAttributeNS(null,"stroke-dashoffset",p(L*Q.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width","1px"),N.setAttributeNS(null,"height","1px"),N.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(N)}paintImageXObject(N){const L=this.getObject(N);if(!L){(0,l.warn)(`Dependent image with object ID ${N} is not ready yet`);return}this.paintInlineImageXObject(L)}paintInlineImageXObject(N,L){const Q=N.width,tt=N.height,Z=f(N,this.forceDataSchema,!!L),st=this.svgFactory.createElement("svg:rect");st.setAttributeNS(null,"x","0"),st.setAttributeNS(null,"y","0"),st.setAttributeNS(null,"width",p(Q)),st.setAttributeNS(null,"height",p(tt)),this.current.element=st,this.clip("nonzero");const F=this.svgFactory.createElement("svg:image");F.setAttributeNS(v,"xlink:href",Z),F.setAttributeNS(null,"x","0"),F.setAttributeNS(null,"y",p(-tt)),F.setAttributeNS(null,"width",p(Q)+"px"),F.setAttributeNS(null,"height",p(tt)+"px"),F.setAttributeNS(null,"transform",`scale(${p(1/Q)} ${p(-1/tt)})`),L?L.append(F):this._ensureTransformGroup().append(F)}paintImageMaskXObject(N){const L=this.getObject(N.data,N);if(L.bitmap){(0,l.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Q=this.current,tt=L.width,Z=L.height,st=Q.fillColor;Q.maskId=`mask${y++}`;const F=this.svgFactory.createElement("svg:mask");F.setAttributeNS(null,"id",Q.maskId);const it=this.svgFactory.createElement("svg:rect");it.setAttributeNS(null,"x","0"),it.setAttributeNS(null,"y","0"),it.setAttributeNS(null,"width",p(tt)),it.setAttributeNS(null,"height",p(Z)),it.setAttributeNS(null,"fill",st),it.setAttributeNS(null,"mask",`url(#${Q.maskId})`),this.defs.append(F),this._ensureTransformGroup().append(it),this.paintInlineImageXObject(L,F)}paintFormXObjectBegin(N,L){if(Array.isArray(N)&&N.length===6&&this.transform(N[0],N[1],N[2],N[3],N[4],N[5]),L){const Q=L[2]-L[0],tt=L[3]-L[1],Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x",L[0]),Z.setAttributeNS(null,"y",L[1]),Z.setAttributeNS(null,"width",p(Q)),Z.setAttributeNS(null,"height",p(tt)),this.current.element=Z,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(N){const L=this.svgFactory.create(N.width,N.height),Q=this.svgFactory.createElement("svg:defs");L.append(Q),this.defs=Q;const tt=this.svgFactory.createElement("svg:g");return tt.setAttributeNS(null,"transform",j(N.transform)),L.append(tt),this.svg=tt,L}_ensureClipGroup(){if(!this.current.clipGroup){const N=this.svgFactory.createElement("svg:g");N.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(N),this.current.clipGroup=N}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",j(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}s.SVGGraphics=B}),((o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class i{static textContent(l){const h=[],m={items:h,styles:Object.create(null)};function v(A){if(!A)return;let d=null;const c=A.name;if(c==="#text")d=A.value;else if(i.shouldBuildText(c))A?.attributes?.textContent?d=A.attributes.textContent:A.value&&(d=A.value);else return;if(d!==null&&h.push({str:d}),!!A.children)for(const f of A.children)v(f)}return v(l),m}static shouldBuildText(l){return!(l==="textarea"||l==="input"||l==="option"||l==="select")}}s.XfaText=i}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=j,s.updateTextLayer=E;var r=i(1),l=i(6);const h=1e5,m=30,v=.8,A=new Map;function d(y,C){let B;if(C&&r.FeatureTest.isOffscreenCanvasSupported)B=new OffscreenCanvas(y,y).getContext("2d",{alpha:!1});else{const I=document.createElement("canvas");I.width=I.height=y,B=I.getContext("2d",{alpha:!1})}return B}function c(y,C){const B=A.get(y);if(B)return B;const I=d(m,C);I.font=`${m}px ${y}`;const N=I.measureText("");let L=N.fontBoundingBoxAscent,Q=Math.abs(N.fontBoundingBoxDescent);if(L){const Z=L/(L+Q);return A.set(y,Z),I.canvas.width=I.canvas.height=0,Z}I.strokeStyle="red",I.clearRect(0,0,m,m),I.strokeText("g",0,0);let tt=I.getImageData(0,0,m,m).data;Q=0;for(let Z=tt.length-1-3;Z>=0;Z-=4)if(tt[Z]>0){Q=Math.ceil(Z/4/m);break}I.clearRect(0,0,m,m),I.strokeText("A",0,m),tt=I.getImageData(0,0,m,m).data,L=0;for(let Z=0,st=tt.length;Z<st;Z+=4)if(tt[Z]>0){L=m-Math.floor(Z/4/m);break}if(I.canvas.width=I.canvas.height=0,L){const Z=L/(L+Q);return A.set(y,Z),Z}return A.set(y,v),v}function f(y,C,B){const I=document.createElement("span"),N={angle:0,canvasWidth:0,hasText:C.str!=="",hasEOL:C.hasEOL,fontSize:0};y._textDivs.push(I);const L=r.Util.transform(y._transform,C.transform);let Q=Math.atan2(L[1],L[0]);const tt=B[C.fontName];tt.vertical&&(Q+=Math.PI/2);const Z=Math.hypot(L[2],L[3]),st=Z*c(tt.fontFamily,y._isOffscreenCanvasSupported);let F,it;Q===0?(F=L[4],it=L[5]-st):(F=L[4]+st*Math.sin(Q),it=L[5]-st*Math.cos(Q));const Y="calc(var(--scale-factor)*",rt=I.style;y._container===y._rootContainer?(rt.left=`${(100*F/y._pageWidth).toFixed(2)}%`,rt.top=`${(100*it/y._pageHeight).toFixed(2)}%`):(rt.left=`${Y}${F.toFixed(2)}px)`,rt.top=`${Y}${it.toFixed(2)}px)`),rt.fontSize=`${Y}${Z.toFixed(2)}px)`,rt.fontFamily=tt.fontFamily,N.fontSize=Z,I.setAttribute("role","presentation"),I.textContent=C.str,I.dir=C.dir,y._fontInspectorEnabled&&(I.dataset.fontName=C.fontName),Q!==0&&(N.angle=Q*(180/Math.PI));let lt=!1;if(C.str.length>1)lt=!0;else if(C.str!==" "&&C.transform[0]!==C.transform[3]){const U=Math.abs(C.transform[0]),P=Math.abs(C.transform[3]);U!==P&&Math.max(U,P)/Math.min(U,P)>1.5&&(lt=!0)}lt&&(N.canvasWidth=tt.vertical?C.height:C.width),y._textDivProperties.set(I,N),y._isReadableStream&&y._layoutText(I)}function g(y){const{div:C,scale:B,properties:I,ctx:N,prevFontSize:L,prevFontFamily:Q}=y,{style:tt}=C;let Z="";if(I.canvasWidth!==0&&I.hasText){const{fontFamily:st}=tt,{canvasWidth:F,fontSize:it}=I;(L!==it||Q!==st)&&(N.font=`${it*B}px ${st}`,y.prevFontSize=it,y.prevFontFamily=st);const{width:Y}=N.measureText(C.textContent);Y>0&&(Z=`scaleX(${F*B/Y})`)}I.angle!==0&&(Z=`rotate(${I.angle}deg) ${Z}`),Z.length>0&&(tt.transform=Z)}function b(y){if(y._canceled)return;const C=y._textDivs,B=y._capability;if(C.length>h){B.resolve();return}if(!y._isReadableStream)for(const N of C)y._layoutText(N);B.resolve()}class p{constructor({textContentSource:C,container:B,viewport:I,textDivs:N,textDivProperties:L,textContentItemsStr:Q,isOffscreenCanvasSupported:tt}){this._textContentSource=C,this._isReadableStream=C instanceof ReadableStream,this._container=this._rootContainer=B,this._textDivs=N||[],this._textContentItemsStr=Q||[],this._isOffscreenCanvasSupported=tt,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=L||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:d(0,tt)};const{pageWidth:Z,pageHeight:st,pageX:F,pageY:it}=I.rawDims;this._transform=[1,0,0,-1,-F,it+st],this._pageWidth=Z,this._pageHeight=st,(0,l.setLayerDimensions)(B,I),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(C,B){for(const I of C){if(I.str===void 0){if(I.type==="beginMarkedContentProps"||I.type==="beginMarkedContent"){const N=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),I.id!==null&&this._container.setAttribute("id",`${I.id}`),N.append(this._container)}else I.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(I.str),f(this,I,B)}}_layoutText(C){const B=this._layoutTextParams.properties=this._textDivProperties.get(C);if(this._layoutTextParams.div=C,g(this._layoutTextParams),B.hasText&&this._container.append(C),B.hasEOL){const I=document.createElement("br");I.setAttribute("role","presentation"),this._container.append(I)}}_render(){const C=new r.PromiseCapability;let B=Object.create(null);if(this._isReadableStream){const I=()=>{this._reader.read().then(({value:N,done:L})=>{if(L){C.resolve();return}Object.assign(B,N.styles),this._processItems(N.items,B),I()},C.reject)};this._reader=this._textContentSource.getReader(),I()}else if(this._textContentSource){const{items:I,styles:N}=this._textContentSource;this._processItems(I,N),C.resolve()}else throw new Error('No "textContentSource" parameter specified.');C.promise.then(()=>{B=null,b(this)},this._capability.reject)}}s.TextLayerRenderTask=p;function j(y){!y.textContentSource&&(y.textContent||y.textContentStream)&&((0,l.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),y.textContentSource=y.textContent||y.textContentStream);const{container:C,viewport:B}=y,I=getComputedStyle(C),N=I.getPropertyValue("visibility"),L=parseFloat(I.getPropertyValue("--scale-factor"));N==="visible"&&(!L||Math.abs(L-B.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Q=new p(y);return Q._render(),Q}function E({container:y,viewport:C,textDivs:B,textDivProperties:I,isOffscreenCanvasSupported:N,mustRotate:L=!0,mustRescale:Q=!0}){if(L&&(0,l.setLayerDimensions)(y,{rotation:C.rotation}),Q){const tt=d(0,N),st={prevFontSize:null,prevFontFamily:null,div:null,scale:C.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:tt};for(const F of B)st.properties=I.get(F),st.div=F,g(st)}}}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var r=i(1),l=i(4),h=i(28),m=i(33),v=i(6),A=i(34);class d{#t;#e=!1;#s=null;#n=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#a=new Map;#r=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:f,pageIndex:g,div:b,accessibilityManager:p,annotationLayer:j,viewport:E,l10n:y}){const C=[h.FreeTextEditor,m.InkEditor,A.StampEditor];if(!d._initialized){d._initialized=!0;for(const B of C)B.initialize(y)}f.registerEditorTypes(C),this.#i=f,this.pageIndex=g,this.div=b,this.#t=p,this.#s=j,this.viewport=E,this.#i.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(f){this.#i.updateToolbar(f)}updateMode(f=this.#i.getMode()){this.#m(),f===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),f!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",f===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",f===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",f===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(f){if(!f&&this.#i.getMode()!==r.AnnotationEditorType.INK)return;if(!f){for(const b of this.#a.values())if(b.isEmpty()){b.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(f){this.#i.setEditingState(f)}addCommands(f){this.#i.addCommands(f)}enable(){this.div.style.pointerEvents="auto";const f=new Set;for(const b of this.#a.values())b.enableEditing(),b.annotationElementId&&f.add(b.annotationElementId);if(!this.#s)return;const g=this.#s.getEditableAnnotations();for(const b of g){if(b.hide(),this.#i.isDeletedAnnotationElement(b.data.id)||f.has(b.data.id))continue;const p=this.deserialize(b);p&&(this.addOrRebuild(p),p.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const f=new Set;for(const g of this.#a.values()){if(g.disableEditing(),!g.annotationElementId||g.serialize()!==null){f.add(g.annotationElementId);continue}this.getEditableAnnotation(g.annotationElementId)?.show(),g.remove()}if(this.#s){const g=this.#s.getEditableAnnotations();for(const b of g){const{id:p}=b.data;f.has(p)||this.#i.isDeletedAnnotationElement(p)||b.show()}}this.#m(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(f){return this.#s?.getEditableAnnotation(f)||null}setActiveEditor(f){this.#i.getActive()!==f&&this.#i.setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#n)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#n)}attach(f){this.#a.set(f.id,f);const{annotationElementId:g}=f;g&&this.#i.isDeletedAnnotationElement(g)&&this.#i.removeDeletedAnnotationElement(f)}detach(f){this.#a.delete(f.id),this.#t?.removePointerInTextLayer(f.contentDiv),!this.#c&&f.annotationElementId&&this.#i.addDeletedAnnotationElement(f)}remove(f){this.detach(f),this.#i.removeEditor(f),f.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),f.div.remove(),f.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(f){f.parent!==this&&(f.annotationElementId&&(this.#i.addDeletedAnnotationElement(f.annotationElementId),l.AnnotationEditor.deleteAnnotationElement(f),f.annotationElementId=null),this.attach(f),f.parent?.detach(f),f.setParent(this),f.div&&f.isAttachedToDOM&&(f.div.remove(),this.div.append(f.div)))}add(f){if(this.changeParent(f),this.#i.addEditor(f),this.attach(f),!f.isAttachedToDOM){const g=f.render();this.div.append(g),f.isAttachedToDOM=!0}f.fixAndSetPosition(),f.onceAdded(),this.#i.addToAnnotationStorage(f)}moveEditorInDOM(f){if(!f.isAttachedToDOM)return;const{activeElement:g}=document;f.div.contains(g)&&(f._focusEventsAllowed=!1,setTimeout(()=>{f.div.contains(document.activeElement)?f._focusEventsAllowed=!0:(f.div.addEventListener("focusin",()=>{f._focusEventsAllowed=!0},{once:!0}),g.focus())},0)),f._structTreeParentId=this.#t?.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addUndoableEditor(f){const g=()=>f._uiManager.rebuild(f),b=()=>{f.remove()};this.addCommands({cmd:g,undo:b,mustExec:!1})}getNextId(){return this.#i.getId()}#f(f){switch(this.#i.getMode()){case r.AnnotationEditorType.FREETEXT:return new h.FreeTextEditor(f);case r.AnnotationEditorType.INK:return new m.InkEditor(f);case r.AnnotationEditorType.STAMP:return new A.StampEditor(f)}return null}pasteEditor(f,g){this.#i.updateToolbar(f),this.#i.updateMode(f);const{offsetX:b,offsetY:p}=this.#h(),j=this.getNextId(),E=this.#f({parent:this,id:j,x:b,y:p,uiManager:this.#i,isCentered:!0,...g});E&&this.add(E)}deserialize(f){switch(f.annotationType??f.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return h.FreeTextEditor.deserialize(f,this,this.#i);case r.AnnotationEditorType.INK:return m.InkEditor.deserialize(f,this,this.#i);case r.AnnotationEditorType.STAMP:return A.StampEditor.deserialize(f,this,this.#i)}return null}#d(f,g){const b=this.getNextId(),p=this.#f({parent:this,id:b,x:f.offsetX,y:f.offsetY,uiManager:this.#i,isCentered:g});return p&&this.add(p),p}#h(){const{x:f,y:g,width:b,height:p}=this.div.getBoundingClientRect(),j=Math.max(0,f),E=Math.max(0,g),y=Math.min(window.innerWidth,f+b),C=Math.min(window.innerHeight,g+p),B=(j+y)/2-f,I=(E+C)/2-g,[N,L]=this.viewport.rotation%180===0?[B,I]:[I,B];return{offsetX:N,offsetY:L}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(f){this.#i.setSelected(f)}toggleSelected(f){this.#i.toggleSelected(f)}isSelected(f){return this.#i.isSelected(f)}unselect(f){this.#i.unselect(f)}pointerup(f){const{isMac:g}=r.FeatureTest.platform;if(!(f.button!==0||f.ctrlKey&&g)&&f.target===this.div&&this.#r){if(this.#r=!1,!this.#e){this.#e=!0;return}if(this.#i.getMode()===r.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(f,!1)}}pointerdown(f){if(this.#r){this.#r=!1;return}const{isMac:g}=r.FeatureTest.platform;if(f.button!==0||f.ctrlKey&&g||f.target!==this.div)return;this.#r=!0;const b=this.#i.getActive();this.#e=!b||b.isEmpty()}findNewParent(f,g,b){const p=this.#i.findParent(g,b);return p===null||p===this?!1:(p.changeParent(f),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const f of this.#a.values())this.#t?.removePointerInTextLayer(f.contentDiv),f.setParent(null),f.isAttachedToDOM=!1,f.div.remove();this.div=null,this.#a.clear(),this.#i.removeLayer(this)}#m(){this.#l=!0;for(const f of this.#a.values())f.isEmpty()&&f.remove();this.#l=!1}render({viewport:f}){this.viewport=f,(0,v.setLayerDimensions)(this.div,f);for(const g of this.#i.getEditors(this.pageIndex))this.add(g);this.updateMode()}update({viewport:f}){this.#i.commitOrRemove(),this.viewport=f,(0,v.setLayerDimensions)(this.div,{rotation:f.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:f,pageHeight:g}=this.viewport.rawDims;return[f,g]}}s.AnnotationEditorLayer=d}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var r=i(1),l=i(5),h=i(4),m=i(29);class v extends h.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#s=this.editorDivInput.bind(this);#n=this.editorDivKeydown.bind(this);#o;#a="";#r=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const d=v.prototype,c=b=>b.isEmpty(),f=l.AnnotationEditorUIManager.TRANSLATE_SMALL,g=l.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new l.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],d.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],d.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],d._translateEmpty,{args:[-f,0],checker:c}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],d._translateEmpty,{args:[-g,0],checker:c}],[["ArrowRight","mac+ArrowRight"],d._translateEmpty,{args:[f,0],checker:c}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],d._translateEmpty,{args:[g,0],checker:c}],[["ArrowUp","mac+ArrowUp"],d._translateEmpty,{args:[0,-f],checker:c}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],d._translateEmpty,{args:[0,-g],checker:c}],[["ArrowDown","mac+ArrowDown"],d._translateEmpty,{args:[0,f],checker:c}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],d._translateEmpty,{args:[0,g],checker:c}]]))}static _type="freetext";constructor(d){super({...d,name:"freeTextEditor"}),this.#o=d.color||v._defaultColor||h.AnnotationEditor._defaultLineColor,this.#l=d.fontSize||v._defaultFontSize}static initialize(d){h.AnnotationEditor.initialize(d,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const c=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(c.getPropertyValue("--freetext-padding"))}static updateDefaultParams(d,c){switch(d){case r.AnnotationEditorParamsType.FREETEXT_SIZE:v._defaultFontSize=c;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:v._defaultColor=c;break}}updateParams(d,c){switch(d){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(c);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(c);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,v._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,v._defaultColor||h.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#i(d){const c=g=>{this.editorDiv.style.fontSize=`calc(${g}px * var(--scale-factor))`,this.translate(0,-(g-this.#l)*this.parentScale),this.#l=g,this.#h()},f=this.#l;this.addCommands({cmd:()=>{c(d)},undo:()=>{c(f)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(d){const c=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=d},undo:()=>{this.#o=this.editorDiv.style.color=c},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(d,c){this._uiManager.translateSelectedEditors(d,c,!0)}getInitialTranslation(){const d=this.parentScale;return[-v._internalPadding*d,-(v._internalPadding+this.#l)*d]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#n),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#s))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#n),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#s),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(d){this._focusEventsAllowed&&(super.focusin(d),d.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#x();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const d=this.editorDiv.getElementsByTagName("div");if(d.length===0)return this.editorDiv.innerText;const c=[];for(const f of d)c.push(f.innerText.replace(/\r\n?|\n/,""));return c.join(`
`)}#h(){const[d,c]=this.parentDimensions;let f;if(this.isAttachedToDOM)f=this.div.getBoundingClientRect();else{const{currentLayer:g,div:b}=this,p=b.style.display;b.style.display="hidden",g.div.append(this.div),f=b.getBoundingClientRect(),b.remove(),b.style.display=p}this.rotation%180===this.parentRotation%180?(this.width=f.width/d,this.height=f.height/c):(this.width=f.height/d,this.height=f.width/c),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const d=this.#a,c=this.#a=this.#d().trimEnd();if(d===c)return;const f=g=>{if(this.#a=g,!g){this.remove();return}this.#m(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{f(c)},undo:()=>{f(d)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(d){this.enterInEditMode()}keydown(d){d.target===this.div&&d.key==="Enter"&&(this.enterInEditMode(),d.preventDefault())}editorDivKeydown(d){v._keyboardManager.exec(this,d)}editorDivFocus(d){this.isEditing=!0}editorDivBlur(d){this.isEditing=!1}editorDivInput(d){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let d,c;this.width&&(d=this.x,c=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.enableEditing(),h.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(g=>this.editorDiv?.setAttribute("aria-label",g)),h.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(g=>this.editorDiv?.setAttribute("default-content",g)),this.editorDiv.contentEditable=!0;const{style:f}=this.editorDiv;if(f.fontSize=`calc(${this.#l}px * var(--scale-factor))`,f.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,l.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[g,b]=this.parentDimensions;if(this.annotationElementId){const{position:p}=this.#c;let[j,E]=this.getInitialTranslation();[j,E]=this.pageTranslationToScreen(j,E);const[y,C]=this.pageDimensions,[B,I]=this.pageTranslation;let N,L;switch(this.rotation){case 0:N=d+(p[0]-B)/y,L=c+this.height-(p[1]-I)/C;break;case 90:N=d+(p[0]-B)/y,L=c-(p[1]-I)/C,[j,E]=[E,-j];break;case 180:N=d-this.width+(p[0]-B)/y,L=c-(p[1]-I)/C,[j,E]=[-j,-E];break;case 270:N=d+(p[0]-B-this.height*C)/y,L=c+(p[1]-I-this.width*y)/C,[j,E]=[-E,j];break}this.setAt(N*g,L*b,j,E)}else this.setAt(d*g,c*b,this.width*g,this.height*b);this.#m(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#m(){if(this.editorDiv.replaceChildren(),!!this.#a)for(const d of this.#a.split(`
`)){const c=document.createElement("div");c.append(d?document.createTextNode(d):document.createElement("br")),this.editorDiv.append(c)}}get contentDiv(){return this.editorDiv}static deserialize(d,c,f){let g=null;if(d instanceof m.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:p,fontColor:j},rect:E,rotation:y,id:C},textContent:B,textPosition:I,parent:{page:{pageNumber:N}}}=d;if(!B||B.length===0)return null;g=d={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(j),fontSize:p,value:B.join(`
`),position:I,pageIndex:N-1,rect:E,rotation:y,id:C,deleted:!1}}const b=super.deserialize(d,c,f);return b.#l=d.fontSize,b.#o=r.Util.makeHexColor(...d.color),b.#a=d.value,b.annotationElementId=d.id||null,b.#c=g,b}serialize(d=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const c=v._internalPadding*this.parentScale,f=this.getRect(c,c),g=h.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),b={annotationType:r.AnnotationEditorType.FREETEXT,color:g,fontSize:this.#l,value:this.#a,pageIndex:this.pageIndex,rect:f,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return d?b:this.annotationElementId&&!this.#g(b)?null:(b.id=this.annotationElementId,b)}#g(d){const{value:c,fontSize:f,color:g,rect:b,pageIndex:p}=this.#c;return d.value!==c||d.fontSize!==f||d.rect.some((j,E)=>Math.abs(j-b[E])>=1)||d.color.some((j,E)=>j!==g[E])||d.pageIndex!==p}#x(d=!1){if(!this.annotationElementId)return;if(this.#h(),!d&&(this.width===0||this.height===0)){setTimeout(()=>this.#x(!0),0);return}const c=v._internalPadding*this.parentScale;this.#c.rect=this.getRect(c,c)}}s.FreeTextEditor=v}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StampAnnotationElement=s.InkAnnotationElement=s.FreeTextAnnotationElement=s.AnnotationLayer=void 0;var r=i(1),l=i(6),h=i(3),m=i(30),v=i(31),A=i(32);const d=1e3,c=9,f=new WeakSet;function g(q){return{width:q[2]-q[0],height:q[3]-q[1]}}class b{static create(R){switch(R.data.annotationType){case r.AnnotationType.LINK:return new j(R);case r.AnnotationType.TEXT:return new E(R);case r.AnnotationType.WIDGET:switch(R.data.fieldType){case"Tx":return new C(R);case"Btn":return R.data.radioButton?new N(R):R.data.checkBox?new I(R):new L(R);case"Ch":return new Q(R);case"Sig":return new B(R)}return new y(R);case r.AnnotationType.POPUP:return new tt(R);case r.AnnotationType.FREETEXT:return new st(R);case r.AnnotationType.LINE:return new F(R);case r.AnnotationType.SQUARE:return new it(R);case r.AnnotationType.CIRCLE:return new Y(R);case r.AnnotationType.POLYLINE:return new rt(R);case r.AnnotationType.CARET:return new U(R);case r.AnnotationType.INK:return new P(R);case r.AnnotationType.POLYGON:return new lt(R);case r.AnnotationType.HIGHLIGHT:return new k(R);case r.AnnotationType.UNDERLINE:return new _(R);case r.AnnotationType.SQUIGGLY:return new S(R);case r.AnnotationType.STRIKEOUT:return new O(R);case r.AnnotationType.STAMP:return new H(R);case r.AnnotationType.FILEATTACHMENT:return new G(R);default:return new p(R)}}}class p{#t=!1;constructor(R,{isRenderable:M=!1,ignoreBorder:D=!1,createQuadrilaterals:V=!1}={}){this.isRenderable=M,this.data=R.data,this.layer=R.layer,this.linkService=R.linkService,this.downloadManager=R.downloadManager,this.imageResourcesPath=R.imageResourcesPath,this.renderForms=R.renderForms,this.svgFactory=R.svgFactory,this.annotationStorage=R.annotationStorage,this.enableScripting=R.enableScripting,this.hasJSActions=R.hasJSActions,this._fieldObjects=R.fieldObjects,this.parent=R.parent,M&&(this.container=this._createContainer(D)),V&&this._createQuadrilaterals()}static _hasPopupData({titleObj:R,contentsObj:M,richText:D}){return!!(R?.str||M?.str||D?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(R){const{data:M,parent:{page:D,viewport:V}}=this,W=document.createElement("section");W.setAttribute("data-annotation-id",M.id),this instanceof y||(W.tabIndex=d),W.style.zIndex=this.parent.zIndex++,this.data.popupRef&&W.setAttribute("aria-haspopup","dialog"),M.noRotate&&W.classList.add("norotate");const{pageWidth:$,pageHeight:J,pageX:ot,pageY:yt}=V.rawDims;if(!M.rect||this instanceof tt){const{rotation:wt}=M;return!M.hasOwnCanvas&&wt!==0&&this.setRotation(wt,W),W}const{width:ut,height:xt}=g(M.rect),vt=r.Util.normalizeRect([M.rect[0],D.view[3]-M.rect[1]+D.view[1],M.rect[2],D.view[3]-M.rect[3]+D.view[1]]);if(!R&&M.borderStyle.width>0){W.style.borderWidth=`${M.borderStyle.width}px`;const wt=M.borderStyle.horizontalCornerRadius,_t=M.borderStyle.verticalCornerRadius;if(wt>0||_t>0){const Dt=`calc(${wt}px * var(--scale-factor)) / calc(${_t}px * var(--scale-factor))`;W.style.borderRadius=Dt}else if(this instanceof N){const Dt=`calc(${ut}px * var(--scale-factor)) / calc(${xt}px * var(--scale-factor))`;W.style.borderRadius=Dt}switch(M.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:W.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:W.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:W.style.borderBottomStyle="solid";break}const Tt=M.borderColor||null;Tt?(this.#t=!0,W.style.borderColor=r.Util.makeHexColor(Tt[0]|0,Tt[1]|0,Tt[2]|0)):W.style.borderWidth=0}W.style.left=`${100*(vt[0]-ot)/$}%`,W.style.top=`${100*(vt[1]-yt)/J}%`;const{rotation:Et}=M;return M.hasOwnCanvas||Et===0?(W.style.width=`${100*ut/$}%`,W.style.height=`${100*xt/J}%`):this.setRotation(Et,W),W}setRotation(R,M=this.container){if(!this.data.rect)return;const{pageWidth:D,pageHeight:V}=this.parent.viewport.rawDims,{width:W,height:$}=g(this.data.rect);let J,ot;R%180===0?(J=100*W/D,ot=100*$/V):(J=100*$/D,ot=100*W/V),M.style.width=`${J}%`,M.style.height=`${ot}%`,M.setAttribute("data-main-rotation",(360-R)%360)}get _commonActions(){const R=(M,D,V)=>{const W=V.detail[M],$=W[0],J=W.slice(1);V.target.style[D]=m.ColorConverters[`${$}_HTML`](J),this.annotationStorage.setValue(this.data.id,{[D]:m.ColorConverters[`${$}_rgb`](J)})};return(0,r.shadow)(this,"_commonActions",{display:M=>{const{display:D}=M.detail,V=D%2===1;this.container.style.visibility=V?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:V,noPrint:D===1||D===2})},print:M=>{this.annotationStorage.setValue(this.data.id,{noPrint:!M.detail.print})},hidden:M=>{const{hidden:D}=M.detail;this.container.style.visibility=D?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:D,noView:D})},focus:M=>{setTimeout(()=>M.target.focus({preventScroll:!1}),0)},userName:M=>{M.target.title=M.detail.userName},readonly:M=>{M.target.disabled=M.detail.readonly},required:M=>{this._setRequired(M.target,M.detail.required)},bgColor:M=>{R("bgColor","backgroundColor",M)},fillColor:M=>{R("fillColor","backgroundColor",M)},fgColor:M=>{R("fgColor","color",M)},textColor:M=>{R("textColor","color",M)},borderColor:M=>{R("borderColor","borderColor",M)},strokeColor:M=>{R("strokeColor","borderColor",M)},rotation:M=>{const D=M.detail.rotation;this.setRotation(D),this.annotationStorage.setValue(this.data.id,{rotation:D})}})}_dispatchEventFromSandbox(R,M){const D=this._commonActions;for(const V of Object.keys(M.detail))(R[V]||D[V])?.(M)}_setDefaultPropertiesFromJS(R){if(!this.enableScripting)return;const M=this.annotationStorage.getRawValue(this.data.id);if(!M)return;const D=this._commonActions;for(const[V,W]of Object.entries(M)){const $=D[V];if($){const J={detail:{[V]:W},target:R};$(J),delete M[V]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:R}=this.data;if(!R)return;const[M,D,V,W]=this.data.rect;if(R.length===1){const[,{x:_t,y:Tt},{x:Dt,y:Pt}]=R[0];if(V===_t&&W===Tt&&M===Dt&&D===Pt)return}const{style:$}=this.container;let J;if(this.#t){const{borderColor:_t,borderWidth:Tt}=$;$.borderWidth=0,J=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_t}" stroke-width="${Tt}">`],this.container.classList.add("hasBorder")}const ot=V-M,yt=W-D,{svgFactory:ut}=this,xt=ut.createElement("svg");xt.classList.add("quadrilateralsContainer"),xt.setAttribute("width",0),xt.setAttribute("height",0);const vt=ut.createElement("defs");xt.append(vt);const Et=ut.createElement("clipPath"),wt=`clippath_${this.data.id}`;Et.setAttribute("id",wt),Et.setAttribute("clipPathUnits","objectBoundingBox"),vt.append(Et);for(const[,{x:_t,y:Tt},{x:Dt,y:Pt}]of R){const kt=ut.createElement("rect"),Vt=(Dt-M)/ot,Te=(W-Tt)/yt,ue=(_t-Dt)/ot,Ue=(Tt-Pt)/yt;kt.setAttribute("x",Vt),kt.setAttribute("y",Te),kt.setAttribute("width",ue),kt.setAttribute("height",Ue),Et.append(kt),J?.push(`<rect vector-effect="non-scaling-stroke" x="${Vt}" y="${Te}" width="${ue}" height="${Ue}"/>`)}this.#t&&(J.push("</g></svg>')"),$.backgroundImage=J.join("")),this.container.append(xt),this.container.style.clipPath=`url(#${wt})`}_createPopup(){const{container:R,data:M}=this;R.setAttribute("aria-haspopup","dialog");const D=new tt({data:{color:M.color,titleObj:M.titleObj,modificationDate:M.modificationDate,contentsObj:M.contentsObj,richText:M.richText,parentRect:M.rect,borderStyle:0,id:`popup_${M.id}`,rotation:M.rotation},parent:this.parent,elements:[this]});this.parent.div.append(D.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(R,M=null){const D=[];if(this._fieldObjects){const V=this._fieldObjects[R];if(V)for(const{page:W,id:$,exportValues:J}of V){if(W===-1||$===M)continue;const ot=typeof J=="string"?J:null,yt=document.querySelector(`[data-element-id="${$}"]`);if(yt&&!f.has(yt)){(0,r.warn)(`_getElementsByName - element not allowed: ${$}`);continue}D.push({id:$,exportValue:ot,domElement:yt})}return D}for(const V of document.getElementsByName(R)){const{exportValue:W}=V,$=V.getAttribute("data-element-id");$!==M&&f.has(V)&&D.push({id:$,exportValue:W,domElement:V})}return D}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const R=this.getElementsToTriggerPopup();if(Array.isArray(R))for(const M of R)M.classList.add("highlightArea");else R.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:R,data:{id:M}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:R,editId:M})})}}class j extends p{constructor(R,M=null){super(R,{isRenderable:!0,ignoreBorder:!!M?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=R.data.isTooltipOnly}render(){const{data:R,linkService:M}=this,D=document.createElement("a");D.setAttribute("data-element-id",R.id);let V=!1;return R.url?(M.addLinkAttributes(D,R.url,R.newWindow),V=!0):R.action?(this._bindNamedAction(D,R.action),V=!0):R.attachment?(this._bindAttachment(D,R.attachment),V=!0):R.setOCGState?(this.#e(D,R.setOCGState),V=!0):R.dest?(this._bindLink(D,R.dest),V=!0):(R.actions&&(R.actions.Action||R.actions["Mouse Up"]||R.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(D,R),V=!0),R.resetForm?(this._bindResetFormAction(D,R.resetForm),V=!0):this.isTooltipOnly&&!V&&(this._bindLink(D,""),V=!0)),this.container.classList.add("linkAnnotation"),V&&this.container.append(D),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(R,M){R.href=this.linkService.getDestinationHash(M),R.onclick=()=>(M&&this.linkService.goToDestination(M),!1),(M||M==="")&&this.#t()}_bindNamedAction(R,M){R.href=this.linkService.getAnchorUrl(""),R.onclick=()=>(this.linkService.executeNamedAction(M),!1),this.#t()}_bindAttachment(R,M){R.href=this.linkService.getAnchorUrl(""),R.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,M.content,M.filename),!1),this.#t()}#e(R,M){R.href=this.linkService.getAnchorUrl(""),R.onclick=()=>(this.linkService.executeSetOCGState(M),!1),this.#t()}_bindJSAction(R,M){R.href=this.linkService.getAnchorUrl("");const D=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const V of Object.keys(M.actions)){const W=D.get(V);W&&(R[W]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M.id,name:V}}),!1))}R.onclick||(R.onclick=()=>!1),this.#t()}_bindResetFormAction(R,M){const D=R.onclick;if(D||(R.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),D||(R.onclick=()=>!1);return}R.onclick=()=>{D?.();const{fields:V,refs:W,include:$}=M,J=[];if(V.length!==0||W.length!==0){const ut=new Set(W);for(const xt of V){const vt=this._fieldObjects[xt]||[];for(const{id:Et}of vt)ut.add(Et)}for(const xt of Object.values(this._fieldObjects))for(const vt of xt)ut.has(vt.id)===$&&J.push(vt)}else for(const ut of Object.values(this._fieldObjects))J.push(...ut);const ot=this.annotationStorage,yt=[];for(const ut of J){const{id:xt}=ut;switch(yt.push(xt),ut.type){case"text":{const Et=ut.defaultValue||"";ot.setValue(xt,{value:Et});break}case"checkbox":case"radiobutton":{const Et=ut.defaultValue===ut.exportValues;ot.setValue(xt,{value:Et});break}case"combobox":case"listbox":{const Et=ut.defaultValue||"";ot.setValue(xt,{value:Et});break}default:continue}const vt=document.querySelector(`[data-element-id="${xt}"]`);if(vt){if(!f.has(vt)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${xt}`);continue}}else continue;vt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:yt,name:"ResetForm"}}),!1}}}class E extends p{constructor(R){super(R,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const R=document.createElement("img");return R.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",R.alt="[{{type}} Annotation]",R.dataset.l10nId="text_annotation_type",R.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(R),this.container}}class y extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(R){this.data.hasOwnCanvas&&(R.previousSibling?.nodeName==="CANVAS"&&(R.previousSibling.hidden=!0),R.hidden=!1)}_getKeyModifier(R){const{isWin:M,isMac:D}=r.FeatureTest.platform;return M&&R.ctrlKey||D&&R.metaKey}_setEventListener(R,M,D,V,W){D.includes("mouse")?R.addEventListener(D,$=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:V,value:W($),shift:$.shiftKey,modifier:this._getKeyModifier($)}})}):R.addEventListener(D,$=>{if(D==="blur"){if(!M.focused||!$.relatedTarget)return;M.focused=!1}else if(D==="focus"){if(M.focused)return;M.focused=!0}W&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:V,value:W($)}})})}_setEventListeners(R,M,D,V){for(const[W,$]of D)($==="Action"||this.data.actions?.[$])&&(($==="Focus"||$==="Blur")&&(M||={focused:!1}),this._setEventListener(R,M,W,$,V),$==="Focus"&&!this.data.actions?.Blur?this._setEventListener(R,M,"blur","Blur",null):$==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(R,M,"focus","Focus",null))}_setBackgroundColor(R){const M=this.data.backgroundColor||null;R.style.backgroundColor=M===null?"transparent":r.Util.makeHexColor(M[0],M[1],M[2])}_setTextStyle(R){const M=["left","center","right"],{fontColor:D}=this.data.defaultAppearanceData,V=this.data.defaultAppearanceData.fontSize||c,W=R.style;let $;const J=2,ot=yt=>Math.round(10*yt)/10;if(this.data.multiLine){const yt=Math.abs(this.data.rect[3]-this.data.rect[1]-J),ut=Math.round(yt/(r.LINE_FACTOR*V))||1,xt=yt/ut;$=Math.min(V,ot(xt/r.LINE_FACTOR))}else{const yt=Math.abs(this.data.rect[3]-this.data.rect[1]-J);$=Math.min(V,ot(yt/r.LINE_FACTOR))}W.fontSize=`calc(${$}px * var(--scale-factor))`,W.color=r.Util.makeHexColor(D[0],D[1],D[2]),this.data.textAlignment!==null&&(W.textAlign=M[this.data.textAlignment])}_setRequired(R,M){M?R.setAttribute("required",!0):R.removeAttribute("required"),R.setAttribute("aria-required",M)}}class C extends y{constructor(R){const M=R.renderForms||!R.data.hasAppearance&&!!R.data.fieldValue;super(R,{isRenderable:M})}setPropertyOnSiblings(R,M,D,V){const W=this.annotationStorage;for(const $ of this._getElementsByName(R.name,R.id))$.domElement&&($.domElement[M]=D),W.setValue($.id,{[V]:D})}render(){const R=this.annotationStorage,M=this.data.id;this.container.classList.add("textWidgetAnnotation");let D=null;if(this.renderForms){const V=R.getValue(M,{value:this.data.fieldValue});let W=V.value||"";const $=R.getValue(M,{charLimit:this.data.maxLen}).charLimit;$&&W.length>$&&(W=W.slice(0,$));let J=V.formattedValue||this.data.textContent?.join(`
`)||null;J&&this.data.comb&&(J=J.replaceAll(/\s+/g,""));const ot={userValue:W,formattedValue:J,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(D=document.createElement("textarea"),D.textContent=J??W,this.data.doNotScroll&&(D.style.overflowY="hidden")):(D=document.createElement("input"),D.type="text",D.setAttribute("value",J??W),this.data.doNotScroll&&(D.style.overflowX="hidden")),this.data.hasOwnCanvas&&(D.hidden=!0),f.add(D),D.setAttribute("data-element-id",M),D.disabled=this.data.readOnly,D.name=this.data.fieldName,D.tabIndex=d,this._setRequired(D,this.data.required),$&&(D.maxLength=$),D.addEventListener("input",ut=>{R.setValue(M,{value:ut.target.value}),this.setPropertyOnSiblings(D,"value",ut.target.value,"value"),ot.formattedValue=null}),D.addEventListener("resetform",ut=>{const xt=this.data.defaultFieldValue??"";D.value=ot.userValue=xt,ot.formattedValue=null});let yt=ut=>{const{formattedValue:xt}=ot;xt!=null&&(ut.target.value=xt),ut.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){D.addEventListener("focus",xt=>{if(ot.focused)return;const{target:vt}=xt;ot.userValue&&(vt.value=ot.userValue),ot.lastCommittedValue=vt.value,ot.commitKey=1,ot.focused=!0}),D.addEventListener("updatefromsandbox",xt=>{this.showElementAndHideCanvas(xt.target);const vt={value(Et){ot.userValue=Et.detail.value??"",R.setValue(M,{value:ot.userValue.toString()}),Et.target.value=ot.userValue},formattedValue(Et){const{formattedValue:wt}=Et.detail;ot.formattedValue=wt,wt!=null&&Et.target!==document.activeElement&&(Et.target.value=wt),R.setValue(M,{formattedValue:wt})},selRange(Et){Et.target.setSelectionRange(...Et.detail.selRange)},charLimit:Et=>{const{charLimit:wt}=Et.detail,{target:_t}=Et;if(wt===0){_t.removeAttribute("maxLength");return}_t.setAttribute("maxLength",wt);let Tt=ot.userValue;!Tt||Tt.length<=wt||(Tt=Tt.slice(0,wt),_t.value=ot.userValue=Tt,R.setValue(M,{value:Tt}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:Tt,willCommit:!0,commitKey:1,selStart:_t.selectionStart,selEnd:_t.selectionEnd}}))}};this._dispatchEventFromSandbox(vt,xt)}),D.addEventListener("keydown",xt=>{ot.commitKey=1;let vt=-1;if(xt.key==="Escape"?vt=0:xt.key==="Enter"&&!this.data.multiLine?vt=2:xt.key==="Tab"&&(ot.commitKey=3),vt===-1)return;const{value:Et}=xt.target;ot.lastCommittedValue!==Et&&(ot.lastCommittedValue=Et,ot.userValue=Et,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:Et,willCommit:!0,commitKey:vt,selStart:xt.target.selectionStart,selEnd:xt.target.selectionEnd}}))});const ut=yt;yt=null,D.addEventListener("blur",xt=>{if(!ot.focused||!xt.relatedTarget)return;ot.focused=!1;const{value:vt}=xt.target;ot.userValue=vt,ot.lastCommittedValue!==vt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:vt,willCommit:!0,commitKey:ot.commitKey,selStart:xt.target.selectionStart,selEnd:xt.target.selectionEnd}}),ut(xt)}),this.data.actions?.Keystroke&&D.addEventListener("beforeinput",xt=>{ot.lastCommittedValue=null;const{data:vt,target:Et}=xt,{value:wt,selectionStart:_t,selectionEnd:Tt}=Et;let Dt=_t,Pt=Tt;switch(xt.inputType){case"deleteWordBackward":{const kt=wt.substring(0,_t).match(/\w*[^\w]*$/);kt&&(Dt-=kt[0].length);break}case"deleteWordForward":{const kt=wt.substring(_t).match(/^[^\w]*\w*/);kt&&(Pt+=kt[0].length);break}case"deleteContentBackward":_t===Tt&&(Dt-=1);break;case"deleteContentForward":_t===Tt&&(Pt+=1);break}xt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:wt,change:vt||"",willCommit:!1,selStart:Dt,selEnd:Pt}})}),this._setEventListeners(D,ot,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xt=>xt.target.value)}if(yt&&D.addEventListener("blur",yt),this.data.comb){const xt=(this.data.rect[2]-this.data.rect[0])/$;D.classList.add("comb"),D.style.letterSpacing=`calc(${xt}px * var(--scale-factor) - 1ch)`}}else D=document.createElement("div"),D.textContent=this.data.fieldValue,D.style.verticalAlign="middle",D.style.display="table-cell";return this._setTextStyle(D),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class B extends y{constructor(R){super(R,{isRenderable:!!R.data.hasOwnCanvas})}}class I extends y{constructor(R){super(R,{isRenderable:R.renderForms})}render(){const R=this.annotationStorage,M=this.data,D=M.id;let V=R.getValue(D,{value:M.exportValue===M.fieldValue}).value;typeof V=="string"&&(V=V!=="Off",R.setValue(D,{value:V})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const W=document.createElement("input");return f.add(W),W.setAttribute("data-element-id",D),W.disabled=M.readOnly,this._setRequired(W,this.data.required),W.type="checkbox",W.name=M.fieldName,V&&W.setAttribute("checked",!0),W.setAttribute("exportValue",M.exportValue),W.tabIndex=d,W.addEventListener("change",$=>{const{name:J,checked:ot}=$.target;for(const yt of this._getElementsByName(J,D)){const ut=ot&&yt.exportValue===M.exportValue;yt.domElement&&(yt.domElement.checked=ut),R.setValue(yt.id,{value:ut})}R.setValue(D,{value:ot})}),W.addEventListener("resetform",$=>{const J=M.defaultFieldValue||"Off";$.target.checked=J===M.exportValue}),this.enableScripting&&this.hasJSActions&&(W.addEventListener("updatefromsandbox",$=>{const J={value(ot){ot.target.checked=ot.detail.value!=="Off",R.setValue(D,{value:ot.target.checked})}};this._dispatchEventFromSandbox(J,$)}),this._setEventListeners(W,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)),this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class N extends y{constructor(R){super(R,{isRenderable:R.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const R=this.annotationStorage,M=this.data,D=M.id;let V=R.getValue(D,{value:M.fieldValue===M.buttonValue}).value;typeof V=="string"&&(V=V!==M.buttonValue,R.setValue(D,{value:V}));const W=document.createElement("input");if(f.add(W),W.setAttribute("data-element-id",D),W.disabled=M.readOnly,this._setRequired(W,this.data.required),W.type="radio",W.name=M.fieldName,V&&W.setAttribute("checked",!0),W.tabIndex=d,W.addEventListener("change",$=>{const{name:J,checked:ot}=$.target;for(const yt of this._getElementsByName(J,D))R.setValue(yt.id,{value:!1});R.setValue(D,{value:ot})}),W.addEventListener("resetform",$=>{const J=M.defaultFieldValue;$.target.checked=J!=null&&J===M.buttonValue}),this.enableScripting&&this.hasJSActions){const $=M.buttonValue;W.addEventListener("updatefromsandbox",J=>{const ot={value:yt=>{const ut=$===yt.detail.value;for(const xt of this._getElementsByName(yt.target.name)){const vt=ut&&xt.id===D;xt.domElement&&(xt.domElement.checked=vt),R.setValue(xt.id,{value:vt})}}};this._dispatchEventFromSandbox(ot,J)}),this._setEventListeners(W,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],J=>J.target.checked)}return this._setBackgroundColor(W),this._setDefaultPropertiesFromJS(W),this.container.append(W),this.container}}class L extends j{constructor(R){super(R,{ignoreBorder:R.data.hasAppearance})}render(){const R=super.render();R.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(R.title=this.data.alternativeText);const M=R.lastChild;return this.enableScripting&&this.hasJSActions&&M&&(this._setDefaultPropertiesFromJS(M),M.addEventListener("updatefromsandbox",D=>{this._dispatchEventFromSandbox({},D)})),R}}class Q extends y{constructor(R){super(R,{isRenderable:R.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const R=this.annotationStorage,M=this.data.id,D=R.getValue(M,{value:this.data.fieldValue}),V=document.createElement("select");f.add(V),V.setAttribute("data-element-id",M),V.disabled=this.data.readOnly,this._setRequired(V,this.data.required),V.name=this.data.fieldName,V.tabIndex=d;let W=this.data.combo&&this.data.options.length>0;this.data.combo||(V.size=this.data.options.length,this.data.multiSelect&&(V.multiple=!0)),V.addEventListener("resetform",ut=>{const xt=this.data.defaultFieldValue;for(const vt of V.options)vt.selected=vt.value===xt});for(const ut of this.data.options){const xt=document.createElement("option");xt.textContent=ut.displayValue,xt.value=ut.exportValue,D.value.includes(ut.exportValue)&&(xt.setAttribute("selected",!0),W=!1),V.append(xt)}let $=null;if(W){const ut=document.createElement("option");ut.value=" ",ut.setAttribute("hidden",!0),ut.setAttribute("selected",!0),V.prepend(ut),$=()=>{ut.remove(),V.removeEventListener("input",$),$=null},V.addEventListener("input",$)}const J=ut=>{const xt=ut?"value":"textContent",{options:vt,multiple:Et}=V;return Et?Array.prototype.filter.call(vt,wt=>wt.selected).map(wt=>wt[xt]):vt.selectedIndex===-1?null:vt[vt.selectedIndex][xt]};let ot=J(!1);const yt=ut=>{const xt=ut.target.options;return Array.prototype.map.call(xt,vt=>({displayValue:vt.textContent,exportValue:vt.value}))};return this.enableScripting&&this.hasJSActions?(V.addEventListener("updatefromsandbox",ut=>{const xt={value(vt){$?.();const Et=vt.detail.value,wt=new Set(Array.isArray(Et)?Et:[Et]);for(const _t of V.options)_t.selected=wt.has(_t.value);R.setValue(M,{value:J(!0)}),ot=J(!1)},multipleSelection(vt){V.multiple=!0},remove(vt){const Et=V.options,wt=vt.detail.remove;Et[wt].selected=!1,V.remove(wt),Et.length>0&&Array.prototype.findIndex.call(Et,Tt=>Tt.selected)===-1&&(Et[0].selected=!0),R.setValue(M,{value:J(!0),items:yt(vt)}),ot=J(!1)},clear(vt){for(;V.length!==0;)V.remove(0);R.setValue(M,{value:null,items:[]}),ot=J(!1)},insert(vt){const{index:Et,displayValue:wt,exportValue:_t}=vt.detail.insert,Tt=V.children[Et],Dt=document.createElement("option");Dt.textContent=wt,Dt.value=_t,Tt?Tt.before(Dt):V.append(Dt),R.setValue(M,{value:J(!0),items:yt(vt)}),ot=J(!1)},items(vt){const{items:Et}=vt.detail;for(;V.length!==0;)V.remove(0);for(const wt of Et){const{displayValue:_t,exportValue:Tt}=wt,Dt=document.createElement("option");Dt.textContent=_t,Dt.value=Tt,V.append(Dt)}V.options.length>0&&(V.options[0].selected=!0),R.setValue(M,{value:J(!0),items:yt(vt)}),ot=J(!1)},indices(vt){const Et=new Set(vt.detail.indices);for(const wt of vt.target.options)wt.selected=Et.has(wt.index);R.setValue(M,{value:J(!0)}),ot=J(!1)},editable(vt){vt.target.disabled=!vt.detail.editable}};this._dispatchEventFromSandbox(xt,ut)}),V.addEventListener("input",ut=>{const xt=J(!0);R.setValue(M,{value:xt}),ut.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:M,name:"Keystroke",value:ot,changeEx:xt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(V,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ut=>ut.target.value)):V.addEventListener("input",function(ut){R.setValue(M,{value:J(!0)})}),this.data.combo&&this._setTextStyle(V),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class tt extends p{constructor(R){const{data:M,elements:D}=R;super(R,{isRenderable:p._hasPopupData(M)}),this.elements=D}render(){this.container.classList.add("popupAnnotation");const R=new Z({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),M=[];for(const D of this.elements)D.popup=R,M.push(D.data.id),D.addHighlightArea();return this.container.setAttribute("aria-controls",M.map(D=>`${r.AnnotationPrefix}${D}`).join(",")),this.container}}class Z{#t=null;#e=this.#u.bind(this);#s=this.#j.bind(this);#n=this.#A.bind(this);#o=this.#b.bind(this);#a=null;#r=null;#l=null;#c=null;#i=null;#f=null;#d=!1;#h=null;#m=null;#g=null;#x=null;#p=!1;constructor({container:R,color:M,elements:D,titleObj:V,modificationDate:W,contentsObj:$,richText:J,parent:ot,rect:yt,parentRect:ut,open:xt}){this.#r=R,this.#x=V,this.#l=$,this.#g=J,this.#i=ot,this.#a=M,this.#m=yt,this.#f=ut,this.#c=D;const vt=l.PDFDateString.toDateObject(W);vt&&(this.#t=ot.l10n.get("annotation_date_string",{date:vt.toLocaleDateString(),time:vt.toLocaleTimeString()})),this.trigger=D.flatMap(Et=>Et.getElementsToTriggerPopup());for(const Et of this.trigger)Et.addEventListener("click",this.#o),Et.addEventListener("mouseenter",this.#n),Et.addEventListener("mouseleave",this.#s),Et.classList.add("popupTriggerArea");for(const Et of D)Et.container?.addEventListener("keydown",this.#e);this.#r.hidden=!0,xt&&this.#b()}render(){if(this.#h)return;const{page:{view:R},viewport:{rawDims:{pageWidth:M,pageHeight:D,pageX:V,pageY:W}}}=this.#i,$=this.#h=document.createElement("div");if($.className="popup",this.#a){const kt=$.style.outlineColor=r.Util.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?$.style.backgroundColor=`color-mix(in srgb, ${kt} 30%, white)`:$.style.backgroundColor=r.Util.makeHexColor(...this.#a.map(Te=>Math.floor(.7*(255-Te)+Te)))}const J=document.createElement("span");J.className="header";const ot=document.createElement("h1");if(J.append(ot),{dir:ot.dir,str:ot.textContent}=this.#x,$.append(J),this.#t){const kt=document.createElement("span");kt.classList.add("popupDate"),this.#t.then(Vt=>{kt.textContent=Vt}),J.append(kt)}const yt=this.#l,ut=this.#g;if(ut?.str&&(!yt?.str||yt.str===ut.str))A.XfaLayer.render({xfaHtml:ut.html,intent:"richText",div:$}),$.lastChild.classList.add("richText","popupContent");else{const kt=this._formatContents(yt);$.append(kt)}let xt=!!this.#f,vt=xt?this.#f:this.#m;for(const kt of this.#c)if(!vt||r.Util.intersect(kt.data.rect,vt)!==null){vt=kt.data.rect,xt=!0;break}const Et=r.Util.normalizeRect([vt[0],R[3]-vt[1]+R[1],vt[2],R[3]-vt[3]+R[1]]),_t=xt?vt[2]-vt[0]+5:0,Tt=Et[0]+_t,Dt=Et[1],{style:Pt}=this.#r;Pt.left=`${100*(Tt-V)/M}%`,Pt.top=`${100*(Dt-W)/D}%`,this.#r.append($)}_formatContents({str:R,dir:M}){const D=document.createElement("p");D.classList.add("popupContent"),D.dir=M;const V=R.split(/(?:\r\n?|\n)/);for(let W=0,$=V.length;W<$;++W){const J=V[W];D.append(document.createTextNode(J)),W<$-1&&D.append(document.createElement("br"))}return D}#u(R){R.altKey||R.shiftKey||R.ctrlKey||R.metaKey||(R.key==="Enter"||R.key==="Escape"&&this.#d)&&this.#b()}#b(){this.#d=!this.#d,this.#d?(this.#A(),this.#r.addEventListener("click",this.#o),this.#r.addEventListener("keydown",this.#e)):(this.#j(),this.#r.removeEventListener("click",this.#o),this.#r.removeEventListener("keydown",this.#e))}#A(){this.#h||this.render(),this.isVisible?this.#d&&this.#r.classList.add("focused"):(this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#j(){this.#r.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#p=this.isVisible,this.#p&&(this.#r.hidden=!0)}maybeShow(){this.#p&&(this.#p=!1,this.#r.hidden=!1)}get isVisible(){return this.#r.hidden===!1}}class st extends p{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0}),this.textContent=R.data.textContent,this.textPosition=R.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const R=document.createElement("div");R.classList.add("annotationTextContent"),R.setAttribute("role","comment");for(const M of this.textContent){const D=document.createElement("span");D.textContent=M,R.append(D)}this.container.append(R)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}s.FreeTextAnnotationElement=st;class F extends p{#t=null;constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const R=this.data,{width:M,height:D}=g(R.rect),V=this.svgFactory.create(M,D,!0),W=this.#t=this.svgFactory.createElement("svg:line");return W.setAttribute("x1",R.rect[2]-R.lineCoordinates[0]),W.setAttribute("y1",R.rect[3]-R.lineCoordinates[1]),W.setAttribute("x2",R.rect[2]-R.lineCoordinates[2]),W.setAttribute("y2",R.rect[3]-R.lineCoordinates[3]),W.setAttribute("stroke-width",R.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),V.append(W),this.container.append(V),!R.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class it extends p{#t=null;constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const R=this.data,{width:M,height:D}=g(R.rect),V=this.svgFactory.create(M,D,!0),W=R.borderStyle.width,$=this.#t=this.svgFactory.createElement("svg:rect");return $.setAttribute("x",W/2),$.setAttribute("y",W/2),$.setAttribute("width",M-W),$.setAttribute("height",D-W),$.setAttribute("stroke-width",W||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),V.append($),this.container.append(V),!R.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Y extends p{#t=null;constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const R=this.data,{width:M,height:D}=g(R.rect),V=this.svgFactory.create(M,D,!0),W=R.borderStyle.width,$=this.#t=this.svgFactory.createElement("svg:ellipse");return $.setAttribute("cx",M/2),$.setAttribute("cy",D/2),$.setAttribute("rx",M/2-W/2),$.setAttribute("ry",D/2-W/2),$.setAttribute("stroke-width",W||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),V.append($),this.container.append(V),!R.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class rt extends p{#t=null;constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const R=this.data,{width:M,height:D}=g(R.rect),V=this.svgFactory.create(M,D,!0);let W=[];for(const J of R.vertices){const ot=J.x-R.rect[0],yt=R.rect[3]-J.y;W.push(ot+","+yt)}W=W.join(" ");const $=this.#t=this.svgFactory.createElement(this.svgElementName);return $.setAttribute("points",W),$.setAttribute("stroke-width",R.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),V.append($),this.container.append(V),!R.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class lt extends rt{constructor(R){super(R),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class U extends p{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class P extends p{#t=[];constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const R=this.data,{width:M,height:D}=g(R.rect),V=this.svgFactory.create(M,D,!0);for(const W of R.inkLists){let $=[];for(const ot of W){const yt=ot.x-R.rect[0],ut=R.rect[3]-ot.y;$.push(`${yt},${ut}`)}$=$.join(" ");const J=this.svgFactory.createElement(this.svgElementName);this.#t.push(J),J.setAttribute("points",$),J.setAttribute("stroke-width",R.borderStyle.width||1),J.setAttribute("stroke","transparent"),J.setAttribute("fill","transparent"),!R.popupRef&&this.hasPopupData&&this._createPopup(),V.append(J)}return this.container.append(V),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}s.InkAnnotationElement=P;class k extends p{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class _ extends p{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class S extends p{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class O extends p{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class H extends p{constructor(R){super(R,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}s.StampAnnotationElement=H;class G extends p{#t=null;constructor(R){super(R,{isRenderable:!0});const{filename:M,content:D}=this.data.file;this.filename=(0,l.getFilenameFromUrl)(M,!0),this.content=D,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:M,content:D})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:R,data:M}=this;let D;M.hasAppearance||M.fillAlpha===0?D=document.createElement("div"):(D=document.createElement("img"),D.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(M.name)?"paperclip":"pushpin"}.svg`,M.fillAlpha&&M.fillAlpha<1&&(D.style=`filter: opacity(${Math.round(M.fillAlpha*100)}%);`)),D.addEventListener("dblclick",this.#e.bind(this)),this.#t=D;const{isMac:V}=r.FeatureTest.platform;return R.addEventListener("keydown",W=>{W.key==="Enter"&&(V?W.metaKey:W.ctrlKey)&&this.#e()}),!M.popupRef&&this.hasPopupData?this._createPopup():D.classList.add("popupTriggerArea"),R.append(D),R}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class K{#t=null;#e=null;#s=new Map;constructor({div:R,accessibilityManager:M,annotationCanvasMap:D,l10n:V,page:W,viewport:$}){this.div=R,this.#t=M,this.#e=D,this.l10n=V,this.page=W,this.viewport=$,this.zIndex=0,this.l10n||=v.NullL10n}#n(R,M){const D=R.firstChild||R;D.id=`${r.AnnotationPrefix}${M}`,this.div.append(R),this.#t?.moveElementInDOM(this.div,R,D,!1)}async render(R){const{annotations:M}=R,D=this.div;(0,l.setLayerDimensions)(D,this.viewport);const V=new Map,W={data:null,layer:D,linkService:R.linkService,downloadManager:R.downloadManager,imageResourcesPath:R.imageResourcesPath||"",renderForms:R.renderForms!==!1,svgFactory:new l.DOMSVGFactory,annotationStorage:R.annotationStorage||new h.AnnotationStorage,enableScripting:R.enableScripting===!0,hasJSActions:R.hasJSActions,fieldObjects:R.fieldObjects,parent:this,elements:null};for(const $ of M){if($.noHTML)continue;const J=$.annotationType===r.AnnotationType.POPUP;if(J){const ut=V.get($.id);if(!ut)continue;W.elements=ut}else{const{width:ut,height:xt}=g($.rect);if(ut<=0||xt<=0)continue}W.data=$;const ot=b.create(W);if(!ot.isRenderable)continue;if(!J&&$.popupRef){const ut=V.get($.popupRef);ut?ut.push(ot):V.set($.popupRef,[ot])}ot.annotationEditorType>0&&this.#s.set(ot.data.id,ot);const yt=ot.render();$.hidden&&(yt.style.visibility="hidden"),this.#n(yt,$.id)}this.#o(),await this.l10n.translate(D)}update({viewport:R}){const M=this.div;this.viewport=R,(0,l.setLayerDimensions)(M,{rotation:R.rotation}),this.#o(),M.hidden=!1}#o(){if(!this.#e)return;const R=this.div;for(const[M,D]of this.#e){const V=R.querySelector(`[data-annotation-id="${M}"]`);if(!V)continue;const{firstChild:W}=V;W?W.nodeName==="CANVAS"?W.replaceWith(D):W.before(D):V.append(D)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(R){return this.#s.get(R)}}s.AnnotationLayer=K}),((o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function i(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function r(h){return Math.max(0,Math.min(255,255*h))}class l{static CMYK_G([m,v,A,d]){return["G",1-Math.min(1,.3*m+.59*A+.11*v+d)]}static G_CMYK([m]){return["CMYK",0,0,0,1-m]}static G_RGB([m]){return["RGB",m,m,m]}static G_rgb([m]){return m=r(m),[m,m,m]}static G_HTML([m]){const v=i(m);return`#${v}${v}${v}`}static RGB_G([m,v,A]){return["G",.3*m+.59*v+.11*A]}static RGB_rgb(m){return m.map(r)}static RGB_HTML(m){return`#${m.map(i).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([m,v,A,d]){return["RGB",1-Math.min(1,m+d),1-Math.min(1,A+d),1-Math.min(1,v+d)]}static CMYK_rgb([m,v,A,d]){return[r(1-Math.min(1,m+d)),r(1-Math.min(1,A+d)),r(1-Math.min(1,v+d))]}static CMYK_HTML(m){const v=this.CMYK_RGB(m).slice(1);return this.RGB_HTML(v)}static RGB_CMYK([m,v,A]){const d=1-m,c=1-v,f=1-A,g=Math.min(d,c,f);return["CMYK",d,c,f,g]}}s.ColorConverters=l}),((o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.getL10nFallback=r;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};i.print_progress_percent="{{progress}}%";function r(m,v){switch(m){case"find_match_count":m=`find_match_count[${v.total===1?"one":"other"}]`;break;case"find_match_count_limit":m=`find_match_count_limit[${v.limit===1?"one":"other"}]`;break}return i[m]||""}function l(m,v){return v?m.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(A,d)=>d in v?v[d]:"{{"+d+"}}"):m}const h={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(m,v=null,A=r(m,v)){return l(A,v)},async translate(m){}};s.NullL10n=h}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var r=i(25);class l{static setupStorage(m,v,A,d,c){const f=d.getValue(v,{value:null});switch(A.name){case"textarea":if(f.value!==null&&(m.textContent=f.value),c==="print")break;m.addEventListener("input",g=>{d.setValue(v,{value:g.target.value})});break;case"input":if(A.attributes.type==="radio"||A.attributes.type==="checkbox"){if(f.value===A.attributes.xfaOn?m.setAttribute("checked",!0):f.value===A.attributes.xfaOff&&m.removeAttribute("checked"),c==="print")break;m.addEventListener("change",g=>{d.setValue(v,{value:g.target.checked?g.target.getAttribute("xfaOn"):g.target.getAttribute("xfaOff")})})}else{if(f.value!==null&&m.setAttribute("value",f.value),c==="print")break;m.addEventListener("input",g=>{d.setValue(v,{value:g.target.value})})}break;case"select":if(f.value!==null){m.setAttribute("value",f.value);for(const g of A.children)g.attributes.value===f.value?g.attributes.selected=!0:g.attributes.hasOwnProperty("selected")&&delete g.attributes.selected}m.addEventListener("input",g=>{const b=g.target.options,p=b.selectedIndex===-1?"":b[b.selectedIndex].value;d.setValue(v,{value:p})});break}}static setAttributes({html:m,element:v,storage:A=null,intent:d,linkService:c}){const{attributes:f}=v,g=m instanceof HTMLAnchorElement;f.type==="radio"&&(f.name=`${f.name}-${d}`);for(const[b,p]of Object.entries(f))if(p!=null)switch(b){case"class":p.length&&m.setAttribute(b,p.join(" "));break;case"dataId":break;case"id":m.setAttribute("data-element-id",p);break;case"style":Object.assign(m.style,p);break;case"textContent":m.textContent=p;break;default:(!g||b!=="href"&&b!=="newWindow")&&m.setAttribute(b,p)}g&&c.addLinkAttributes(m,f.href,f.newWindow),A&&f.dataId&&this.setupStorage(m,f.dataId,v,A)}static render(m){const v=m.annotationStorage,A=m.linkService,d=m.xfaHtml,c=m.intent||"display",f=document.createElement(d.name);d.attributes&&this.setAttributes({html:f,element:d,intent:c,linkService:A});const g=[[d,-1,f]],b=m.div;if(b.append(f),m.viewport){const j=`matrix(${m.viewport.transform.join(",")})`;b.style.transform=j}c!=="richText"&&b.setAttribute("class","xfaLayer xfaFont");const p=[];for(;g.length>0;){const[j,E,y]=g.at(-1);if(E+1===j.children.length){g.pop();continue}const C=j.children[++g.at(-1)[1]];if(C===null)continue;const{name:B}=C;if(B==="#text"){const N=document.createTextNode(C.value);p.push(N),y.append(N);continue}const I=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,B):document.createElement(B);if(y.append(I),C.attributes&&this.setAttributes({html:I,element:C,storage:v,intent:c,linkService:A}),C.children&&C.children.length>0)g.push([C,-1,I]);else if(C.value){const N=document.createTextNode(C.value);r.XfaText.shouldBuildText(B)&&p.push(N),I.append(N)}}for(const j of b.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))j.setAttribute("readOnly",!0);return{textDivs:p}}static update(m){const v=`matrix(${m.viewport.transform.join(",")})`;m.div.style.transform=v,m.div.hidden=!1}}s.XfaLayer=l}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0;var r=i(1),l=i(4),h=i(29),m=i(6),v=i(5);class A extends l.AnnotationEditor{#t=0;#e=0;#s=this.canvasPointermove.bind(this);#n=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#r=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#d=0;#h=0;#m=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(c){super({...c,name:"inkEditor"}),this.color=c.color||null,this.thickness=c.thickness||null,this.opacity=c.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(c){l.AnnotationEditor.initialize(c,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(c,f){switch(c){case r.AnnotationEditorParamsType.INK_THICKNESS:A._defaultThickness=f;break;case r.AnnotationEditorParamsType.INK_COLOR:A._defaultColor=f;break;case r.AnnotationEditorParamsType.INK_OPACITY:A._defaultOpacity=f/100;break}}updateParams(c,f){switch(c){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#g(f);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#x(f);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#p(f);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,A._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,A._defaultColor||l.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(A._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||A._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||A._defaultColor||l.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??A._defaultOpacity))]]}#g(c){const f=this.thickness;this.addCommands({cmd:()=>{this.thickness=c,this.#S()},undo:()=>{this.thickness=f,this.#S()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#x(c){const f=this.color;this.addCommands({cmd:()=>{this.color=c,this.#y()},undo:()=>{this.color=f,this.#y()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#p(c){c/=100;const f=this.opacity;this.addCommands({cmd:()=>{this.opacity=c,this.#y()},undo:()=>{this.opacity=f,this.#y()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#T(),this.#C()),this.isAttachedToDOM||(this.parent.add(this),this.#v()),this.#S()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(c){!this.parent&&c?this._uiManager.removeShouldRescale(this):this.parent&&c===null&&this._uiManager.addShouldRescale(this),super.setParent(c)}onScaleChanging(){const[c,f]=this.parentDimensions,g=this.width*c,b=this.height*f;this.setDimensions(g,b)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#a))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:c,parentDimensions:[f,g]}=this;switch(c){case 90:return[0,g,g,f];case 180:return[f,g,f,g];case 270:return[f,0,g,f];default:return[0,0,f,g]}}#b(){const{ctx:c,color:f,opacity:g,thickness:b,parentScale:p,scaleFactor:j}=this;c.lineWidth=b*p/j,c.lineCap="round",c.lineJoin="round",c.miterLimit=10,c.strokeStyle=`${f}${(0,v.opacityToHex)(g)}`}#A(c,f){this.canvas.addEventListener("contextmenu",m.noContextMenu),this.canvas.addEventListener("pointerleave",this.#n),this.canvas.addEventListener("pointermove",this.#s),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#a),this.isEditing=!0,this.#i||(this.#i=!0,this.#v(),this.thickness||=A._defaultThickness,this.color||=A._defaultColor||l.AnnotationEditor._defaultLineColor,this.opacity??=A._defaultOpacity),this.currentPath.push([c,f]),this.#c=!1,this.#b(),this.#m=()=>{this.#D(),this.#m&&window.requestAnimationFrame(this.#m)},window.requestAnimationFrame(this.#m)}#j(c,f){const[g,b]=this.currentPath.at(-1);if(this.currentPath.length>1&&c===g&&f===b)return;const p=this.currentPath;let j=this.#r;if(p.push([c,f]),this.#c=!0,p.length<=2){j.moveTo(...p[0]),j.lineTo(c,f);return}p.length===3&&(this.#r=j=new Path2D,j.moveTo(...p[0])),this.#O(j,...p.at(-3),...p.at(-2),c,f)}#w(){if(this.currentPath.length===0)return;const c=this.currentPath.at(-1);this.#r.lineTo(...c)}#N(c,f){this.#m=null,c=Math.min(Math.max(c,0),this.canvas.width),f=Math.min(Math.max(f,0),this.canvas.height),this.#j(c,f),this.#w();let g;if(this.currentPath.length!==1)g=this.#P();else{const y=[c,f];g=[[y,y.slice(),y.slice(),y]]}const b=this.#r,p=this.currentPath;this.currentPath=[],this.#r=new Path2D;const j=()=>{this.allRawPaths.push(p),this.paths.push(g),this.bezierPath2D.push(b),this.rebuild()},E=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#T(),this.#C()),this.#S())};this.addCommands({cmd:j,undo:E,mustExec:!0})}#D(){if(!this.#c)return;this.#c=!1;const c=Math.ceil(this.thickness*this.parentScale),f=this.currentPath.slice(-3),g=f.map(j=>j[0]),b=f.map(j=>j[1]);Math.min(...g)-c,Math.max(...g)+c,Math.min(...b)-c,Math.max(...b)+c;const{ctx:p}=this;p.save(),p.clearRect(0,0,this.canvas.width,this.canvas.height);for(const j of this.bezierPath2D)p.stroke(j);p.stroke(this.#r),p.restore()}#O(c,f,g,b,p,j,E){const y=(f+b)/2,C=(g+p)/2,B=(b+j)/2,I=(p+E)/2;c.bezierCurveTo(y+2*(b-y)/3,C+2*(p-C)/3,B+2*(b-B)/3,I+2*(p-I)/3,B,I)}#P(){const c=this.currentPath;if(c.length<=2)return[[c[0],c[0],c.at(-1),c.at(-1)]];const f=[];let g,[b,p]=c[0];for(g=1;g<c.length-2;g++){const[N,L]=c[g],[Q,tt]=c[g+1],Z=(N+Q)/2,st=(L+tt)/2,F=[b+2*(N-b)/3,p+2*(L-p)/3],it=[Z+2*(N-Z)/3,st+2*(L-st)/3];f.push([[b,p],F,it,[Z,st]]),[b,p]=[Z,st]}const[j,E]=c[g],[y,C]=c[g+1],B=[b+2*(j-b)/3,p+2*(E-p)/3],I=[y+2*(j-y)/3,C+2*(E-C)/3];return f.push([[b,p],B,I,[y,C]]),f}#y(){if(this.isEmpty()){this.#R();return}this.#b();const{canvas:c,ctx:f}=this;f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,c.width,c.height),this.#R();for(const g of this.bezierPath2D)f.stroke(g)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#S(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(c){this._focusEventsAllowed&&(super.focusin(c),this.enableEditMode())}canvasPointerdown(c){c.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),c.preventDefault(),c.type!=="mouse"&&this.div.focus(),this.#A(c.offsetX,c.offsetY))}canvasPointermove(c){c.preventDefault(),this.#j(c.offsetX,c.offsetY)}canvasPointerup(c){c.preventDefault(),this.#M(c)}canvasPointerleave(c){this.#M(c)}#M(c){this.canvas.removeEventListener("pointerleave",this.#n),this.canvas.removeEventListener("pointermove",this.#s),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#a),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",m.noContextMenu)},10),this.#N(c.offsetX,c.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#T(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",l.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(c=>this.canvas?.setAttribute("aria-label",c)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#C(){this.#f=new ResizeObserver(c=>{const f=c[0].contentRect;f.width&&f.height&&this.setDimensions(f.width,f.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let c,f;this.width&&(c=this.x,f=this.y),super.render(),l.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(E=>this.div?.setAttribute("aria-label",E));const[g,b,p,j]=this.#u();if(this.setAt(g,b,0,0),this.setDims(p,j),this.#T(),this.width){const[E,y]=this.parentDimensions;this.setAspectRatio(this.width*E,this.height*y),this.setAt(c*E,f*y,this.width*E,this.height*y),this.#i=!0,this.#v(),this.setDims(this.width*E,this.height*y),this.#y(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#C(),this.div}#v(){if(!this.#i)return;const[c,f]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*c),this.canvas.height=Math.ceil(this.height*f),this.#R()}setDimensions(c,f){const g=Math.round(c),b=Math.round(f);if(this.#d===g&&this.#h===b)return;this.#d=g,this.#h=b,this.canvas.style.visibility="hidden";const[p,j]=this.parentDimensions;this.width=c/p,this.height=f/j,this.fixAndSetPosition(),this.#l&&this.#_(c,f),this.#v(),this.#y(),this.canvas.style.visibility="visible",this.fixDims()}#_(c,f){const g=this.#L(),b=(c-g)/this.#e,p=(f-g)/this.#t;this.scaleFactor=Math.min(b,p)}#R(){const c=this.#L()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+c,this.translationY*this.scaleFactor+c)}static#B(c){const f=new Path2D;for(let g=0,b=c.length;g<b;g++){const[p,j,E,y]=c[g];g===0&&f.moveTo(...p),f.bezierCurveTo(j[0],j[1],E[0],E[1],y[0],y[1])}return f}static#F(c,f,g){const[b,p,j,E]=f;switch(g){case 0:for(let y=0,C=c.length;y<C;y+=2)c[y]+=b,c[y+1]=E-c[y+1];break;case 90:for(let y=0,C=c.length;y<C;y+=2){const B=c[y];c[y]=c[y+1]+b,c[y+1]=B+p}break;case 180:for(let y=0,C=c.length;y<C;y+=2)c[y]=j-c[y],c[y+1]+=p;break;case 270:for(let y=0,C=c.length;y<C;y+=2){const B=c[y];c[y]=j-c[y+1],c[y+1]=E-B}break;default:throw new Error("Invalid rotation")}return c}static#I(c,f,g){const[b,p,j,E]=f;switch(g){case 0:for(let y=0,C=c.length;y<C;y+=2)c[y]-=b,c[y+1]=E-c[y+1];break;case 90:for(let y=0,C=c.length;y<C;y+=2){const B=c[y];c[y]=c[y+1]-p,c[y+1]=B-b}break;case 180:for(let y=0,C=c.length;y<C;y+=2)c[y]=j-c[y],c[y+1]-=p;break;case 270:for(let y=0,C=c.length;y<C;y+=2){const B=c[y];c[y]=E-c[y+1],c[y+1]=j-B}break;default:throw new Error("Invalid rotation")}return c}#q(c,f,g,b){const p=[],j=this.thickness/2,E=c*f+j,y=c*g+j;for(const C of this.paths){const B=[],I=[];for(let N=0,L=C.length;N<L;N++){const[Q,tt,Z,st]=C[N],F=c*Q[0]+E,it=c*Q[1]+y,Y=c*tt[0]+E,rt=c*tt[1]+y,lt=c*Z[0]+E,U=c*Z[1]+y,P=c*st[0]+E,k=c*st[1]+y;N===0&&(B.push(F,it),I.push(F,it)),B.push(Y,rt,lt,U,P,k),I.push(Y,rt),N===L-1&&I.push(P,k)}p.push({bezier:A.#F(B,b,this.rotation),points:A.#F(I,b,this.rotation)})}return p}#k(){let c=1/0,f=-1/0,g=1/0,b=-1/0;for(const p of this.paths)for(const[j,E,y,C]of p){const B=r.Util.bezierBoundingBox(...j,...E,...y,...C);c=Math.min(c,B[0]),g=Math.min(g,B[1]),f=Math.max(f,B[2]),b=Math.max(b,B[3])}return[c,g,f,b]}#L(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#S(c=!1){if(this.isEmpty())return;if(!this.#l){this.#y();return}const f=this.#k(),g=this.#L();this.#e=Math.max(l.AnnotationEditor.MIN_SIZE,f[2]-f[0]),this.#t=Math.max(l.AnnotationEditor.MIN_SIZE,f[3]-f[1]);const b=Math.ceil(g+this.#e*this.scaleFactor),p=Math.ceil(g+this.#t*this.scaleFactor),[j,E]=this.parentDimensions;this.width=b/j,this.height=p/E,this.setAspectRatio(b,p);const y=this.translationX,C=this.translationY;this.translationX=-f[0],this.translationY=-f[1],this.#v(),this.#y(),this.#d=b,this.#h=p,this.setDims(b,p);const B=c?g/this.scaleFactor/2:0;this.translate(y-this.translationX-B,C-this.translationY-B)}static deserialize(c,f,g){if(c instanceof h.InkAnnotationElement)return null;const b=super.deserialize(c,f,g);b.thickness=c.thickness,b.color=r.Util.makeHexColor(...c.color),b.opacity=c.opacity;const[p,j]=b.pageDimensions,E=b.width*p,y=b.height*j,C=b.parentScale,B=c.thickness/2;b.#l=!0,b.#d=Math.round(E),b.#h=Math.round(y);const{paths:I,rect:N,rotation:L}=c;for(let{bezier:tt}of I){tt=A.#I(tt,N,L);const Z=[];b.paths.push(Z);let st=C*(tt[0]-B),F=C*(tt[1]-B);for(let Y=2,rt=tt.length;Y<rt;Y+=6){const lt=C*(tt[Y]-B),U=C*(tt[Y+1]-B),P=C*(tt[Y+2]-B),k=C*(tt[Y+3]-B),_=C*(tt[Y+4]-B),S=C*(tt[Y+5]-B);Z.push([[st,F],[lt,U],[P,k],[_,S]]),st=_,F=S}const it=this.#B(Z);b.bezierPath2D.push(it)}const Q=b.#k();return b.#e=Math.max(l.AnnotationEditor.MIN_SIZE,Q[2]-Q[0]),b.#t=Math.max(l.AnnotationEditor.MIN_SIZE,Q[3]-Q[1]),b.#_(E,y),b}serialize(){if(this.isEmpty())return null;const c=this.getRect(0,0),f=l.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:f,thickness:this.thickness,opacity:this.opacity,paths:this.#q(this.scaleFactor/this.parentScale,this.translationX,this.translationY,c),pageIndex:this.pageIndex,rect:c,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}s.InkEditor=A}),((o,s,i)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StampEditor=void 0;var r=i(1),l=i(4),h=i(6),m=i(29);class v extends l.AnnotationEditor{#t=null;#e=null;#s=null;#n=null;#o=null;#a=null;#r=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(d){super({...d,name:"stampEditor"}),this.#n=d.bitmapUrl,this.#o=d.bitmapFile}static initialize(d){l.AnnotationEditor.initialize(d)}static get supportedTypes(){const d=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",d.map(c=>`image/${c}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(d){return this.supportedTypes.includes(d)}static paste(d,c){c.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:d.getAsFile()})}#f(d,c=!1){if(!d){this.remove();return}this.#t=d.bitmap,c||(this.#e=d.id,this.#c=d.isSvg),this.#m()}#d(){this.#s=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#h(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(c=>this.#f(c,!0)).finally(()=>this.#d());return}if(this.#n){const c=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromUrl(c).then(f=>this.#f(f)).finally(()=>this.#d());return}if(this.#o){const c=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#s=this._uiManager.imageManager.getFromFile(c).then(f=>this.#f(f)).finally(()=>this.#d());return}const d=document.createElement("input");d.type="file",d.accept=v.supportedTypesStr,this.#s=new Promise(c=>{d.addEventListener("change",async()=>{if(!d.files||d.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const f=await this._uiManager.imageManager.getFromFile(d.files[0]);this.#f(f)}c()}),d.addEventListener("cancel",()=>{this.remove(),c()})}).finally(()=>this.#d()),d.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#r?.disconnect(),this.#r=null),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#h();return}super.rebuild(),this.div!==null&&(this.#e&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#s||this.#t||this.#n||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let d,c;if(this.width&&(d=this.x,c=this.y),super.render(),this.div.hidden=!0,this.#t?this.#m():this.#h(),this.width){const[f,g]=this.parentDimensions;this.setAt(d*f,c*g,this.width*f,this.height*g)}return this.div}#m(){const{div:d}=this;let{width:c,height:f}=this.#t;const[g,b]=this.pageDimensions,p=.75;if(this.width)c=this.width*g,f=this.height*b;else if(c>p*g||f>p*b){const C=Math.min(p*g/c,p*b/f);c*=C,f*=C}const[j,E]=this.parentDimensions;this.setDims(c*j/g,f*E/b),this._uiManager.enableWaiting(!1);const y=this.#a=document.createElement("canvas");d.append(y),d.hidden=!1,this.#p(c,f),this.#b(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#g(d,c){const[f,g]=this.parentDimensions;this.width=d/f,this.height=c/g,this.setDims(d,c),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const b=200;this.#l=setTimeout(()=>{this.#l=null,this.#p(d,c)},b)}#x(d,c){const{width:f,height:g}=this.#t;let b=f,p=g,j=this.#t;for(;b>2*d||p>2*c;){const E=b,y=p;b>2*d&&(b=b>=16384?Math.floor(b/2)-1:Math.ceil(b/2)),p>2*c&&(p=p>=16384?Math.floor(p/2)-1:Math.ceil(p/2));const C=new OffscreenCanvas(b,p);C.getContext("2d").drawImage(j,0,0,E,y,0,0,b,p),j=C.transferToImageBitmap()}return j}#p(d,c){d=Math.ceil(d),c=Math.ceil(c);const f=this.#a;if(!f||f.width===d&&f.height===c)return;f.width=d,f.height=c;const g=this.#c?this.#t:this.#x(d,c),b=f.getContext("2d");b.filter=this._uiManager.hcmFilter,b.drawImage(g,0,0,g.width,g.height,0,0,d,c)}#u(d){if(d){if(this.#c){const g=this._uiManager.imageManager.getSvgUrl(this.#e);if(g)return g}const c=document.createElement("canvas");return{width:c.width,height:c.height}=this.#t,c.getContext("2d").drawImage(this.#t,0,0),c.toDataURL()}if(this.#c){const[c,f]=this.pageDimensions,g=Math.round(this.width*c*h.PixelsPerInch.PDF_TO_CSS_UNITS),b=Math.round(this.height*f*h.PixelsPerInch.PDF_TO_CSS_UNITS),p=new OffscreenCanvas(g,b);return p.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,g,b),p.transferToImageBitmap()}return structuredClone(this.#t)}#b(){this.#r=new ResizeObserver(d=>{const c=d[0].contentRect;c.width&&c.height&&this.#g(c.width,c.height)}),this.#r.observe(this.div)}static deserialize(d,c,f){if(d instanceof m.StampAnnotationElement)return null;const g=super.deserialize(d,c,f),{rect:b,bitmapUrl:p,bitmapId:j,isSvg:E,accessibilityData:y}=d;j&&f.imageManager.isValidId(j)?g.#e=j:g.#n=p,g.#c=E;const[C,B]=g.pageDimensions;return g.width=(b[2]-b[0])/C,g.height=(b[3]-b[1])/B,y&&(g.altTextData=y),g}serialize(d=!1,c=null){if(this.isEmpty())return null;const f={annotationType:r.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(d)return f.bitmapUrl=this.#u(!0),f.accessibilityData=this.altTextData,f;const{decorative:g,altText:b}=this.altTextData;if(!g&&b&&(f.accessibilityData={type:"Figure",alt:b}),c===null)return f;c.stamps||=new Map;const p=this.#c?(f.rect[2]-f.rect[0])*(f.rect[3]-f.rect[1]):null;if(!c.stamps.has(this.#e))c.stamps.set(this.#e,{area:p,serialized:f}),f.bitmap=this.#u(!1);else if(this.#c){const j=c.stamps.get(this.#e);p>j.area&&(j.area=p,j.serialized.bitmap.close(),j.serialized.bitmap=this.#u(!1))}return f}}s.StampEditor=v})],__webpack_module_cache__={};function __w_pdfjs_require__(o){var s=__webpack_module_cache__[o];if(s!==void 0)return s.exports;var i=__webpack_module_cache__[o]={exports:{}};return __webpack_modules__[o](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var o=__webpack_exports__;Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"AbortException",{enumerable:!0,get:function(){return s.AbortException}}),Object.defineProperty(o,"AnnotationEditorLayer",{enumerable:!0,get:function(){return h.AnnotationEditorLayer}}),Object.defineProperty(o,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(o,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(o,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return m.AnnotationEditorUIManager}}),Object.defineProperty(o,"AnnotationLayer",{enumerable:!0,get:function(){return v.AnnotationLayer}}),Object.defineProperty(o,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(o,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(o,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(o,"FeatureTest",{enumerable:!0,get:function(){return s.FeatureTest}}),Object.defineProperty(o,"GlobalWorkerOptions",{enumerable:!0,get:function(){return A.GlobalWorkerOptions}}),Object.defineProperty(o,"ImageKind",{enumerable:!0,get:function(){return s.ImageKind}}),Object.defineProperty(o,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(o,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(o,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(o,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(o,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(o,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(o,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(o,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(o,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(o,"PromiseCapability",{enumerable:!0,get:function(){return s.PromiseCapability}}),Object.defineProperty(o,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(o,"SVGGraphics",{enumerable:!0,get:function(){return i.SVGGraphics}}),Object.defineProperty(o,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(o,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(o,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(o,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(o,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(o,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(o,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(o,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(o,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(o,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(o,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(o,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(o,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(o,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(o,"normalizeUnicode",{enumerable:!0,get:function(){return s.normalizeUnicode}}),Object.defineProperty(o,"renderTextLayer",{enumerable:!0,get:function(){return l.renderTextLayer}}),Object.defineProperty(o,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(o,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(o,"updateTextLayer",{enumerable:!0,get:function(){return l.updateTextLayer}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return i.version}});var s=__w_pdfjs_require__(1),i=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),l=__w_pdfjs_require__(26),h=__w_pdfjs_require__(27),m=__w_pdfjs_require__(5),v=__w_pdfjs_require__(29),A=__w_pdfjs_require__(14),d=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();pdfExports.GlobalWorkerOptions.workerSrc=new URL("/assets/pdf.worker.min-DKQKFyKK.js",import.meta.url).toString();const convertPdfPageToImage=async(o,s,i=1.8,r=null,l=!1)=>{try{const h=l?15e3:i>=6?45e3:3e4,m=new Promise((y,C)=>{const B=setTimeout(()=>{C(new Error("PDF conversion timeout"))},h);r&&r.addEventListener("abort",()=>{clearTimeout(B),C(new Error("PDF conversion aborted"))})}),v=pdfExports.getDocument(o),A=await Promise.race([v.promise,m]);if(r?.aborted)throw new Error("PDF conversion aborted");const d=await A.getPage(s),c=d.getViewport({scale:i});if(r?.aborted)throw new Error("PDF conversion aborted");const f=document.createElement("canvas"),g=f.getContext("2d",{willReadFrequently:!0});f.height=c.height,f.width=c.width,l?(g.imageSmoothingEnabled=!0,g.imageSmoothingQuality="medium"):g.imageSmoothingEnabled=!1;const b={canvasContext:g,viewport:c,intent:l?"display":"print"},p=d.render(b).promise;await Promise.race([p,m]);const j=l?.8:1,E=f.toDataURL("image/png",j);return f.remove(),{pageNumber:s,imageData:E,width:c.width,height:c.height,originalWidth:d.view[2],originalHeight:d.view[3],totalPages:A.numPages,success:!0,isPreview:l,scale:i}}catch(h){throw console.error(` Error converting page ${s}:`,h.message),new Error(`Failed to convert page ${s}: ${h.message}`)}},getPdfMetadata=async(o,s=null)=>{try{const i=new Promise((h,m)=>{const v=setTimeout(()=>{m(new Error("PDF metadata timeout"))},1e4);s&&s.addEventListener("abort",()=>{clearTimeout(v),m(new Error("PDF metadata request aborted"))})}),r=pdfExports.getDocument(o);return{totalPages:(await Promise.race([r.promise,i])).numPages,success:!0}}catch(i){return console.error(" Error getting PDF metadata:",i.message),{totalPages:0,success:!1,error:i.message}}},WatermarkedCanvas=({imageData:o,watermarkText:s="4Csecure",pageNumber:i,totalPages:r,className:l="",style:h={},userEmail:m=null,userId:v=null})=>{const A=reactExports.useRef(null);reactExports.useEffect(()=>{if(!o||!A.current)return;const E=A.current,y=E.getContext("2d"),C=new Image;E.style.opacity="0.3",C.onload=()=>{try{E.width=C.width,E.height=C.height,y.imageSmoothingEnabled=!1,y.imageSmoothingQuality="high",y.clearRect(0,0,E.width,E.height),y.drawImage(C,0,0,E.width,E.height),d(y,E.width,E.height,s,m,v),r>1&&c(y,E.width,i,r),requestAnimationFrame(()=>{E.style.opacity="1"})}catch(B){console.error("Error rendering canvas:",B),E.style.opacity="1"}},C.onerror=B=>{console.error("Error loading image:",B),A.current&&(A.current.style.opacity="1")},C.crossOrigin="anonymous",C.src=o},[o,s,i,r,m,v]);const d=()=>{},c=(E,y,C,B)=>{E.save(),E.globalAlpha=.9,E.fillStyle="#ffffff",E.strokeStyle="#000000",E.lineWidth=2,E.font="bold 16px Arial",E.textAlign="left",E.textBaseline="top";const I=`Page ${C} of ${B}`,N=12,Q=E.measureText(I).width,tt=20;E.fillStyle="rgba(0, 0, 0, 0.8)",E.fillRect(N,N,Q+N*2,tt+N),E.fillStyle="#ffffff",E.fillText(I,N*2,N*2),E.restore()},f=E=>(E.preventDefault(),E.stopPropagation(),!1),g=E=>(E.preventDefault(),E.stopPropagation(),!1),b=E=>(E.preventDefault(),E.stopPropagation(),!1),p=E=>(E.preventDefault(),E.stopPropagation(),!1),j=E=>{if((E.ctrlKey||E.metaKey)&&["a","c","v","s","p","x","z","y"].includes(E.key.toLowerCase())||E.key==="F12"||E.key==="F11"||E.ctrlKey&&E.shiftKey&&["I","J","C"].includes(E.key)||E.ctrlKey&&E.key==="U"||E.key==="PrintScreen"||E.keyCode===44||E.which===44||E.code==="PrintScreen"||(E.metaKey||E.key==="Meta")&&E.key==="PrintScreen"||E.altKey&&E.key==="PrintScreen"||E.shiftKey&&(E.metaKey||E.key==="Meta")&&E.key==="S"||["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"].includes(E.key)||E.key==="Escape")return E.preventDefault(),E.stopPropagation(),!1};return jsxRuntimeExports.jsx("canvas",{ref:A,className:`w-full h-auto transition-opacity duration-500 ${l}`,style:{minHeight:"80vh",objectFit:"contain",backgroundColor:"white",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",pointerEvents:"auto",imageRendering:"auto",WebkitImageRendering:"-webkit-optimize-contrast",MozImageRendering:"auto",WebkitUserDrag:"none",WebkitAppRegion:"no-drag",...h},onContextMenu:f,onDragStart:g,onSelectStart:b,onMouseDown:p,onKeyDown:j,tabIndex:0,onCopy:E=>(E.preventDefault(),!1),onCut:E=>(E.preventDefault(),!1),onPaste:E=>(E.preventDefault(),!1)})},DocumentViewer=()=>{const{id:o}=useParams(),s=useNavigate(),{user:i}=useAuth(),[r,l]=reactExports.useState(null),[h,m]=reactExports.useState(!0),[v,A]=reactExports.useState(null),[d,c]=reactExports.useState(0),[f,g]=reactExports.useState(new Map),[b,p]=reactExports.useState(!1),[j,E]=reactExports.useState(1),[y,C]=reactExports.useState(""),[B,I]=reactExports.useState(null),[N,L]=reactExports.useState(new Set),[Q,tt]=reactExports.useState(!1),Z=reactExports.useRef(null),st=reactExports.useRef(!0);reactExports.useEffect(()=>()=>{st.current=!1,B&&B.abort()},[]),reactExports.useEffect(()=>{if(!st.current)return;const D=new AbortController;return I(D),(async(W=1)=>{try{if(!st.current)return;if(!i){A("Please log in to view documents."),m(!1);return}A(null);const $=await documentsAPI.getById(o);if(!st.current)return;if(!$.success||!$.data){A("Document not found or access denied."),m(!1);return}const J=$.data;if(J.hasAccess===!1){A("You do not have access to this document. Please purchase it first."),m(!1);return}if(!J.file_url){A("Document file is not available. Please contact support."),m(!1);return}try{l(J)}catch(yt){throw console.error(" Error setting document:",yt),yt}if(!st.current)return;if((J.file_url?.split(".").pop()?.toLowerCase()||"pdf")==="pdf"){const yt=await getPdfMetadata(J.file_url,D.signal);if(!st.current)return;if(yt.success&&yt.totalPages>0)c(yt.totalPages),E(1),m(!1),setTimeout(()=>{st.current&&F(1,J.file_url,D.signal)},100);else throw new Error("Failed to load PDF metadata: "+(yt.error||"Unknown error"))}else c(1),m(!1)}catch($){if(!st.current)return;console.error("Error fetching document:",$),A(`Failed to load document: ${$.message}`),m(!1)}})(),()=>{D.abort()}},[o,i]);const F=async(D,V,W=null)=>{const $=`${D}_final`,J=`${D}_preview`;if(f.has($))return f.get($);if(N.has(D)||!st.current)return null;p(!0);try{let ot=null;for(let yt=1;yt<=2&&!ot;yt++){if(!st.current)return null;try{ot=await convertPdfPageToImage(V,D,1,W,!0),ot?.success||(ot=null)}catch(ut){console.error(`Preview attempt ${yt}/2 failed for page ${D}:`,ut.message),yt<2&&await new Promise(xt=>setTimeout(xt,1500))}}if(!st.current)return null;if(ot&&ot.success)return f.set(J,ot),g(new Map(f)),p(!1),setTimeout(async()=>{if(!st.current||N.has(D))return;let yt=null;for(let ut=1;ut<=2&&!yt;ut++){if(!st.current)return;try{yt=await convertPdfPageToImage(V,D,4,null,!1),yt?.success||(yt=null)}catch(xt){console.error(`4.0x attempt ${ut}/2 failed for page ${D}:`,xt.message),ut<2&&await new Promise(vt=>setTimeout(vt,1e3))}}!st.current||!yt||(f.set($,yt),g(new Map(f)),setTimeout(async()=>{if(!st.current||N.has(D))return;let ut=null;for(let vt=1;vt<=2&&!ut;vt++){if(!st.current)return;try{ut=await convertPdfPageToImage(V,D,6,null,!1),ut?.success||(ut=null)}catch(Et){console.error(`6.0x attempt ${vt}/2 failed for page ${D}:`,Et.message),vt<2&&await new Promise(wt=>setTimeout(wt,1e3))}}if(!st.current||!ut)return;const xt=`${D}_ultra`;f.set(xt,ut),g(new Map(f)),setTimeout(()=>{st.current&&(f.delete(J),f.delete($),f.size>8&&Array.from(f.entries()).slice(0,f.size-8).forEach(([Et])=>{f.delete(Et)}),g(new Map(f)))},600),D===j&&(tt(!0),setTimeout(()=>tt(!1),2e3))},2e3))},500),ot;throw new Error("Failed to convert preview")}catch(ot){if(!st.current)return null;console.error(`Error loading page ${D}:`,ot.message),L(yt=>new Set([...yt,D])),D===j&&A(`Failed to load page ${D}: ${ot.message}`)}finally{st.current&&p(!1)}return null},it=()=>{s("/documents")},Y=()=>{A(null),m(!0),g(new Map),L(new Set),window.location.reload()},rt=async D=>{if(!st.current)return;const V=Math.max(1,Math.min(D,d||1)),W=`${V}_ultra`,$=`${V}_final`,J=`${V}_preview`,ot=f.has(W)||f.has($)||f.has(J);r?.file_url&&!ot?(p(!0),E(V),await F(V,r.file_url,B?.signal)):E(V)},lt=D=>{if(D.key==="Enter"){const V=parseInt(D.target.value)||1;rt(V),C(""),D.target.blur()}},U=()=>{if(Z.current){const D=parseInt(Z.current.value)||1;rt(D),C(""),Z.current.blur()}},P=D=>{C(D.target.value)},k=()=>{y===""&&C(j.toString())},_=()=>{(y.trim()===""||y===j.toString())&&C("")};if(h)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Loading document..."})]})});if(v||!r)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Document Not Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:v}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsxs("button",{onClick:Y,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]}),jsxRuntimeExports.jsx("button",{onClick:it,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Back to Documents"})]})]})});if(b&&!f.has(j))return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-lg mx-auto bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-12",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-6",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600"})}),jsxRuntimeExports.jsxs("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:["Loading Page ",j]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 mb-6",children:["Converting page ",j," of ",d,"..."]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 border border-blue-200",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700",children:"Rendering high-quality watermarked page for secure viewing..."})})]})});const S=`${j}_ultra`,O=`${j}_final`,H=`${j}_preview`,G=f.has(S),K=!G&&f.has(O),q=!G&&!K&&f.has(H),R=G?"6.0x":K?"4.0x":"Preview",M=f.get(S)||f.get(O)||f.get(H);return jsxRuntimeExports.jsx(SecurityProvider,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-800 via-blue-900 to-indigo-900",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 shadow-xl border-b border-white/10 sticky top-0 z-10 backdrop-blur-sm",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center min-w-0",children:[jsxRuntimeExports.jsxs("button",{onClick:it,className:"group flex items-center text-white/90 hover:text-white mr-3 sm:mr-6 transition-all duration-300 transform hover:scale-105 mobile-min-h-44",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center mr-1 sm:mr-2 group-hover:bg-white/20 transition-all duration-300",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),jsxRuntimeExports.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Back"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center min-w-0 flex-1",children:jsxRuntimeExports.jsx("h1",{className:"text-base sm:text-xl font-bold text-white mr-2 sm:mr-4 truncate max-w-xs sm:max-w-md",children:r?.title})})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2 sm:space-x-3",children:jsxRuntimeExports.jsxs("button",{onClick:()=>window.location.reload(),className:"group relative bg-white/20 hover:bg-white/30 text-white px-3 sm:px-4 py-2 rounded-xl text-xs sm:text-sm font-semibold flex items-center transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl mobile-min-h-44",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 mr-1 sm:mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),jsxRuntimeExports.jsx("span",{className:"mobile-hide sm-tablet-show",children:"Refresh"}),jsxRuntimeExports.jsx("span",{className:"mobile-show sm-tablet-hide",children:""})]})})]})})}),d>1&&jsxRuntimeExports.jsx("div",{className:"bg-white/90 backdrop-blur-sm border-b border-white/20 px-3 sm:px-4 py-3 sm:py-4 shadow-lg",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"sm:hidden flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:()=>rt(j-1),disabled:j<=1,className:"group flex items-center px-3 py-2 text-sm font-semibold text-gray-700 bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl hover:from-red-50 hover:to-red-100 hover:border-red-300 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 mobile-min-h-44",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 bg-gradient-to-r from-red-50 to-orange-50 px-3 py-2 rounded-xl border border-red-200",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-red-700",children:j}),jsxRuntimeExports.jsx("span",{className:"text-xs text-red-500",children:"/"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-red-700",children:d})]}),jsxRuntimeExports.jsx("button",{onClick:()=>rt(j+1),disabled:j>=d,className:"group flex items-center px-3 py-2 text-sm font-semibold text-gray-700 bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl hover:from-red-50 hover:to-red-100 hover:border-red-300 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 mobile-min-h-44",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),jsxRuntimeExports.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>rt(j-1),disabled:j<=1,className:"group flex items-center px-4 py-2 text-sm font-semibold text-gray-700 bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl hover:from-red-50 hover:to-red-100 hover:border-red-300 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-white disabled:hover:to-gray-50 disabled:hover:border-gray-200 disabled:hover:text-gray-700 transition-all duration-300 transform hover:scale-105 disabled:hover:scale-100 shadow-sm hover:shadow-md",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 mr-2 group-hover:animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Previous"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3 bg-gradient-to-r from-red-50 to-orange-50 px-4 py-2 rounded-xl border border-red-200",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-red-700",children:"Page"}),jsxRuntimeExports.jsx("input",{ref:Z,type:"number",min:"1",max:d,value:y,onChange:P,onKeyPress:lt,onFocus:k,onBlur:_,placeholder:`1-${d}`,title:`Jump to page (1-${d})`,className:"w-20 px-3 py-2 text-sm text-center border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all duration-300 placeholder-red-400 bg-white/80"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-red-700",children:["of ",d]}),jsxRuntimeExports.jsx("button",{onClick:U,className:"px-4 py-2 text-xs bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg border border-red-600 transition-all duration-300 font-semibold transform hover:scale-105 shadow-sm hover:shadow-md",title:"Go to page",children:"Go"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>rt(j+1),disabled:j>=d,className:"group flex items-center px-4 py-2 text-sm font-semibold text-gray-700 bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-xl hover:from-red-50 hover:to-red-100 hover:border-red-300 hover:text-red-700 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:from-white disabled:hover:to-gray-50 disabled:hover:border-gray-200 disabled:hover:text-gray-700 transition-all duration-300 transform hover:scale-105 disabled:hover:scale-100 shadow-sm hover:shadow-md",children:["Next",jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:animate-pulse",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex items-center space-x-2 text-sm text-gray-500 bg-red-50 px-3 py-2 rounded-lg border border-red-200",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),jsxRuntimeExports.jsx("span",{className:"font-medium text-red-700",children:"Read Only Mode"})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"px-3 sm:px-4 py-4 sm:py-8",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto",children:M?.imageData?jsxRuntimeExports.jsxs("div",{className:"bg-white/90 backdrop-blur-sm shadow-2xl border border-white/20 overflow-hidden rounded-3xl",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-red-600 to-red-700 px-6 py-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-lg flex items-center justify-center border border-white/30",children:jsxRuntimeExports.jsx("span",{className:"text-white font-bold text-sm",children:j})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-white font-semibold",children:["Page ",j]}),jsxRuntimeExports.jsxs("p",{className:"text-blue-100 text-xs",children:["of ",d," total pages"]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-2",children:q?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-yellow-200 text-xs font-medium",children:"Loading... (Preview)"})]}):K?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),jsxRuntimeExports.jsxs("span",{className:"text-blue-200 text-xs font-medium",children:["Quality: ",R]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),jsxRuntimeExports.jsxs("span",{className:"text-green-200 text-xs font-medium",children:["Quality: ",R]})]})})]})}),jsxRuntimeExports.jsx("div",{className:"relative bg-gradient-to-br from-gray-50 to-gray-100 p-8",children:jsxRuntimeExports.jsxs("div",{className:"relative group",children:[jsxRuntimeExports.jsx(WatermarkedCanvas,{imageData:M.imageData,watermarkText:"4Csecure",pageNumber:j,totalPages:d,userEmail:i?.email,userId:i?.id,className:"rounded-2xl shadow-2xl border border-white/50 transition-all duration-500 group-hover:shadow-3xl"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl pointer-events-none"})]})})]}):N.has(j)?jsxRuntimeExports.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:jsxRuntimeExports.jsx("svg",{className:"w-10 h-10 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Conversion Failed"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:v||"Unable to convert document to secure viewing format."}),jsxRuntimeExports.jsxs("button",{onClick:()=>{A(null),N.delete(j),L(new Set(N)),f.delete(`${j}_preview`),f.delete(`${j}_final`),f.delete(`${j}_ultra`),g(new Map(f)),r?.file_url&&(p(!0),F(j,r.file_url,B?.signal))},className:"bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center mx-auto",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry Page ",j]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 p-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-6",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-red-600"})}),jsxRuntimeExports.jsxs("h3",{className:"text-2xl font-semibold text-gray-900 mb-4",children:["Loading Page ",j]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Converting page for secure viewing..."})]})})})]})})},PHONE_VALIDATION$1={"+971":{length:9,country:"UAE"},"+1":{length:10,country:"USA/Canada"},"+44":{length:10,country:"UK"},"+91":{length:10,country:"India"},"+966":{length:9,country:"Saudi Arabia"},"+974":{length:8,country:"Qatar"},"+965":{length:8,country:"Kuwait"},"+968":{length:8,country:"Oman"},"+973":{length:8,country:"Bahrain"},"+20":{length:10,country:"Egypt"},"+92":{length:10,country:"Pakistan"},"+880":{length:10,country:"Bangladesh"},"+94":{length:9,country:"Sri Lanka"},"+63":{length:10,country:"Philippines"},"+60":{length:9,country:"Malaysia"},"+65":{length:8,country:"Singapore"},"+86":{length:11,country:"China"},"+81":{length:10,country:"Japan"},"+82":{length:10,country:"South Korea"},"+61":{length:9,country:"Australia"},"+64":{length:9,country:"New Zealand"},"+27":{length:9,country:"South Africa"},"+33":{length:9,country:"France"},"+49":{length:10,country:"Germany"},"+39":{length:10,country:"Italy"},"+34":{length:9,country:"Spain"},"+7":{length:10,country:"Russia"},"+90":{length:10,country:"Turkey"},"+55":{length:11,country:"Brazil"},"+52":{length:10,country:"Mexico"},"+234":{length:10,country:"Nigeria"}},COUNTRY_CODES$1=[{code:"+971",country:"UAE",flag:""},{code:"+1",country:"USA",flag:""},{code:"+44",country:"UK",flag:""},{code:"+91",country:"India",flag:""},{code:"+966",country:"Saudi Arabia",flag:""},{code:"+974",country:"Qatar",flag:""},{code:"+965",country:"Kuwait",flag:""},{code:"+968",country:"Oman",flag:""},{code:"+973",country:"Bahrain",flag:""},{code:"+20",country:"Egypt",flag:""},{code:"+92",country:"Pakistan",flag:""},{code:"+880",country:"Bangladesh",flag:""},{code:"+94",country:"Sri Lanka",flag:""},{code:"+63",country:"Philippines",flag:""},{code:"+60",country:"Malaysia",flag:""},{code:"+65",country:"Singapore",flag:""},{code:"+86",country:"China",flag:""},{code:"+81",country:"Japan",flag:""},{code:"+82",country:"South Korea",flag:""},{code:"+61",country:"Australia",flag:""},{code:"+64",country:"New Zealand",flag:""},{code:"+27",country:"South Africa",flag:""},{code:"+33",country:"France",flag:""},{code:"+49",country:"Germany",flag:""},{code:"+39",country:"Italy",flag:""},{code:"+34",country:"Spain",flag:""},{code:"+7",country:"Russia",flag:""},{code:"+90",country:"Turkey",flag:""},{code:"+55",country:"Brazil",flag:""},{code:"+52",country:"Mexico",flag:""},{code:"+234",country:"Nigeria",flag:""}],ProfileCompletion=()=>{const o=useNavigate(),{user:s,checkAuth:i}=useAuth(),[r,l]=reactExports.useState(!1),[h,m]=reactExports.useState(null),[v,A]=reactExports.useState(null),[d,c]=reactExports.useState("+971"),[f,g]=reactExports.useState(""),[b,p]=reactExports.useState({name:"",industry:"",address:""});reactExports.useEffect(()=>{s?.name&&p(I=>({...I,name:s.name}))},[s]);const j=I=>{const{name:N,value:L}=I.target;p(Q=>({...Q,[N]:L})),h&&m(null)},E=(I,N)=>{const L=I.replace(/\D/g,""),Q=PHONE_VALIDATION$1[N];return Q?L.length===0?{isValid:!1,error:"Phone number is required"}:L.length!==Q.length?{isValid:!1,error:`${Q.country} numbers must be exactly ${Q.length} digits`}:{isValid:!0,error:null}:{isValid:!0,error:null}},y=I=>{const L=I.target.value.replace(/[^\d\s]/g,""),Q=PHONE_VALIDATION$1[d],tt=Q?Q.length:15;if(!(L.replace(/\s/g,"").length>tt)&&(g(L),h&&m(null),v&&A(null),L.trim())){const st=E(L,d);st.isValid||A(st.error)}},C=I=>{const N=I.target.value;if(c(N),f.trim()){const L=E(f,N);A(L.isValid?null:L.error)}},B=async I=>{I.preventDefault(),l(!0),m(null),A(null);try{if(!b.industry.trim()){m("Industry is required"),l(!1);return}if(!f.trim()){m("Contact number is required"),l(!1);return}const N=E(f,d);if(!N.isValid){A(N.error),l(!1);return}const L=`${d} ${f.trim()}`,Q=await usersAPI.updateProfile({name:b.name.trim(),industry:b.industry.trim(),contact_number:L,address:b.address.trim()||null});if(Q.success){const tt=JSON.parse(localStorage.getItem("lead_tracking_data")||"{}");fetch("https://rgkzbfbrybzpoalseqai.supabase.co/functions/v1/capture-lead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,name:b.name.trim(),phone:L,utm_source:tt.utm_source||null,utm_medium:tt.utm_medium||null,utm_campaign:tt.utm_campaign||null,utm_content:tt.utm_content||null,affiliate_code:tt.affiliate_code||null,referrer:tt.referrer||null})}).catch(Z=>console.error("Lead capture error:",Z)),localStorage.removeItem("lead_tracking_data"),await i(),o("/subscription")}else m(Q.message||"Failed to update profile")}catch(N){console.error("Profile update error:",N),m(N.response?.data?.message||N.message||"Failed to update profile. Please try again.")}finally{l(!1)}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-r from-[#B12417] via-[#9a1f13] to-[#821a10] px-4 py-8 md:py-10 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/20"}),jsxRuntimeExports.jsxs("div",{className:"relative mx-auto max-w-3xl text-center",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx("div",{className:"p-3 bg-white/10 backdrop-blur-sm rounded-2xl border border-white/20",children:jsxRuntimeExports.jsx("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white sm:text-4xl lg:text-5xl",children:"Complete Your Profile"}),jsxRuntimeExports.jsx("p",{className:"mx-auto mt-4 max-w-2xl text-lg leading-8 text-white/90",children:"We need a few more details to personalize your experience and provide you with the best service."})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/4 w-72 h-72 bg-[#B12417]/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-1/4 w-72 h-72 bg-[#9a1f13]/20 rounded-full mix-blend-multiply filter blur-xl animate-pulse animation-delay-2000"})]}),jsxRuntimeExports.jsx("div",{className:"mx-auto max-w-3xl px-4 sm:px-6 lg:px-8 pt-8 pb-16",children:jsxRuntimeExports.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl border border-white/20 shadow-xl p-8 sm:p-12",children:[h&&jsxRuntimeExports.jsx("div",{className:"mb-6 p-4 bg-[#B12417]/5 border-l-4 border-[#B12417] rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-red-500 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),jsxRuntimeExports.jsx("p",{className:"ml-3 text-sm text-[#9a1f13]",children:h})]})}),jsxRuntimeExports.jsxs("form",{onSubmit:B,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Full Name"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",name:"name",value:b.name,onChange:j,className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400",placeholder:"Enter your full name"}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Your name from Google profile"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{htmlFor:"industry",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Industry ",jsxRuntimeExports.jsx("span",{className:"text-[#B12417]",children:"*"})]}),jsxRuntimeExports.jsx("input",{type:"text",id:"industry",name:"industry",value:b.industry,onChange:j,required:!0,className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400",placeholder:"e.g., Real Estate, Technology, Healthcare"}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"What industry is your business in?"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{htmlFor:"phone_number",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Contact Number ",jsxRuntimeExports.jsx("span",{className:"text-[#B12417]",children:"*"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("select",{value:d,onChange:C,className:"w-32 px-3 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all duration-300 text-gray-900 bg-white cursor-pointer",children:COUNTRY_CODES$1.map(I=>jsxRuntimeExports.jsxs("option",{value:I.code,children:[I.flag," ",I.code]},I.code))}),jsxRuntimeExports.jsx("input",{type:"tel",id:"phone_number",name:"phone_number",value:f,onChange:y,required:!0,className:`flex-1 px-4 py-3 border rounded-xl shadow-sm focus:ring-2 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${v?"border-[#B12417] focus:ring-[#B12417]":"border-gray-300 focus:ring-[#B12417]"}`,placeholder:"50 123 4567"})]}),v?jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-[#B12417]",children:v}):jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-gray-500",children:PHONE_VALIDATION$1[d]?`${PHONE_VALIDATION$1[d].country} numbers must be ${PHONE_VALIDATION$1[d].length} digits`:"Select your country code and enter your phone number"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{htmlFor:"address",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Business Address ",jsxRuntimeExports.jsx("span",{className:"text-gray-400 font-normal",children:"(Optional)"})]}),jsxRuntimeExports.jsx("textarea",{id:"address",name:"address",value:b.address,onChange:j,rows:3,className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 resize-none",placeholder:"Enter your business address"}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Your business location (optional)"})]}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-[#B12417] to-[#9a1f13] hover:from-[#9a1f13] hover:to-[#821a10] text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:r?jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-center",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Profile..."]}):"Continue to Subscription"})})]}),jsxRuntimeExports.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-blue-500 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),jsxRuntimeExports.jsx("div",{className:"ml-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Why do we need this?"}),jsxRuntimeExports.jsx("br",{}),"This information helps us provide you with personalized recommendations and ensures we can reach you for important updates about your subscription and documents."]})})]})})]})})]})},PHONE_VALIDATION={"+971":{length:9,country:"UAE"},"+1":{length:10,country:"USA/Canada"},"+44":{length:10,country:"UK"},"+91":{length:10,country:"India"},"+966":{length:9,country:"Saudi Arabia"},"+974":{length:8,country:"Qatar"},"+965":{length:8,country:"Kuwait"},"+968":{length:8,country:"Oman"},"+973":{length:8,country:"Bahrain"},"+20":{length:10,country:"Egypt"},"+92":{length:10,country:"Pakistan"},"+880":{length:10,country:"Bangladesh"},"+94":{length:9,country:"Sri Lanka"},"+63":{length:10,country:"Philippines"},"+60":{length:9,country:"Malaysia"},"+65":{length:8,country:"Singapore"},"+86":{length:11,country:"China"},"+81":{length:10,country:"Japan"},"+82":{length:10,country:"South Korea"},"+61":{length:9,country:"Australia"},"+64":{length:9,country:"New Zealand"},"+27":{length:9,country:"South Africa"},"+33":{length:9,country:"France"},"+49":{length:10,country:"Germany"},"+39":{length:10,country:"Italy"},"+34":{length:9,country:"Spain"},"+7":{length:10,country:"Russia"},"+90":{length:10,country:"Turkey"},"+55":{length:11,country:"Brazil"},"+52":{length:10,country:"Mexico"},"+234":{length:10,country:"Nigeria"}},COUNTRY_CODES=[{code:"+971",country:"UAE",flag:""},{code:"+1",country:"USA",flag:""},{code:"+44",country:"UK",flag:""},{code:"+91",country:"India",flag:""},{code:"+966",country:"Saudi Arabia",flag:""},{code:"+974",country:"Qatar",flag:""},{code:"+965",country:"Kuwait",flag:""},{code:"+968",country:"Oman",flag:""},{code:"+973",country:"Bahrain",flag:""},{code:"+20",country:"Egypt",flag:""},{code:"+92",country:"Pakistan",flag:""},{code:"+880",country:"Bangladesh",flag:""},{code:"+94",country:"Sri Lanka",flag:""},{code:"+63",country:"Philippines",flag:""},{code:"+60",country:"Malaysia",flag:""},{code:"+65",country:"Singapore",flag:""},{code:"+86",country:"China",flag:""},{code:"+81",country:"Japan",flag:""},{code:"+82",country:"South Korea",flag:""},{code:"+61",country:"Australia",flag:""},{code:"+64",country:"New Zealand",flag:""},{code:"+27",country:"South Africa",flag:""},{code:"+33",country:"France",flag:""},{code:"+49",country:"Germany",flag:""},{code:"+39",country:"Italy",flag:""},{code:"+34",country:"Spain",flag:""},{code:"+7",country:"Russia",flag:""},{code:"+90",country:"Turkey",flag:""},{code:"+55",country:"Brazil",flag:""},{code:"+52",country:"Mexico",flag:""},{code:"+234",country:"Nigeria",flag:""}],Profile=()=>{const{user:o,checkAuth:s}=useAuth(),[i,r]=reactExports.useState(!0),[l,h]=reactExports.useState(!1),[m,v]=reactExports.useState({type:"",text:""}),[A,d]=reactExports.useState(null),[c,f]=reactExports.useState("+971"),[g,b]=reactExports.useState(""),[p,j]=reactExports.useState({name:"",email:"",industry:"",contact_number:"",address:""});reactExports.useEffect(()=>{E()},[]);const E=async()=>{try{r(!0);const L=await usersAPI.getProfile();if(L.success&&L.data){const Q=L.data.contact_number||"";if(Q){let tt="+971",Z="";for(const st of COUNTRY_CODES)if(Q.startsWith(st.code)){tt=st.code,Z=Q.substring(st.code.length).trim();break}f(tt),b(Z)}j({name:L.data.name||"",email:L.data.email||"",industry:L.data.industry||"",contact_number:L.data.contact_number||"",address:L.data.address||""})}}catch(L){console.error("Error fetching profile:",L),v({type:"error",text:"Failed to load profile data"})}finally{r(!1)}},y=L=>{const{name:Q,value:tt}=L.target;j(Z=>({...Z,[Q]:tt})),v({type:"",text:""})},C=(L,Q)=>{const tt=L.replace(/\D/g,""),Z=PHONE_VALIDATION[Q];return Z?tt.length===0?{isValid:!1,error:"Phone number is required"}:tt.length!==Z.length?{isValid:!1,error:`${Z.country} numbers must be exactly ${Z.length} digits`}:{isValid:!0,error:null}:{isValid:!0,error:null}},B=L=>{const tt=L.target.value.replace(/[^\d\s]/g,""),Z=PHONE_VALIDATION[c],st=Z?Z.length:15;if(!(tt.replace(/\s/g,"").length>st)&&(b(tt),v({type:"",text:""}),A&&d(null),tt.trim())){const it=C(tt,c);it.isValid||d(it.error)}},I=L=>{const Q=L.target.value;if(f(Q),g.trim()){const tt=C(g,Q);d(tt.isValid?null:tt.error)}},N=async L=>{L.preventDefault(),v({type:"",text:""});const Q=C(g,c);if(!Q.isValid){d(Q.error);return}h(!0);try{const tt=c+g.replace(/\s/g,""),Z=await usersAPI.updateProfile({name:p.name,industry:p.industry,contact_number:tt,address:p.address});Z.success?(v({type:"success",text:"Profile updated successfully!"}),await s()):v({type:"error",text:Z.message||"Failed to update profile"})}catch(tt){v({type:"error",text:tt.response?.data?.message||"Failed to update profile"})}finally{h(!1)}};return i?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 border-4 border-[#B12417] border-t-transparent rounded-full animate-spin mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-gray-100 to-purple-50 py-12",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl font-bold bg-gradient-to-r from-[#B12417] to-[#2B266F] bg-clip-text text-transparent",children:"My Profile"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"Manage your personal information and preferences"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl border border-gray-200/50 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-[#B12417] to-[#2B266F] px-8 py-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Profile Information"}),jsxRuntimeExports.jsx("p",{className:"text-white/90 mt-1",children:"Update your personal details below"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:N,className:"p-8 space-y-6",children:[m.text&&jsxRuntimeExports.jsx("div",{className:`px-4 py-3 rounded-lg ${m.type==="success"?"bg-emerald-50 border border-emerald-200 text-emerald-700":"bg-red-50 border border-red-200 text-red-700"}`,children:m.text}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name *"}),jsxRuntimeExports.jsx("input",{type:"text",id:"name",name:"name",value:p.name,onChange:y,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all",placeholder:"Enter your full name"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),jsxRuntimeExports.jsx("input",{type:"email",id:"email",name:"email",value:p.email,disabled:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed"}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Email cannot be changed"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"industry",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Industry *"}),jsxRuntimeExports.jsx("input",{type:"text",id:"industry",name:"industry",value:p.industry,onChange:y,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all",placeholder:"Enter your industry (e.g., Technology, Healthcare, Finance)"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contact Number *"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("select",{value:c,onChange:I,className:"w-32 px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all bg-white",required:!0,children:COUNTRY_CODES.map(L=>jsxRuntimeExports.jsxs("option",{value:L.code,children:[L.flag," ",L.code]},L.code))}),jsxRuntimeExports.jsx("input",{type:"tel",value:g,onChange:B,placeholder:"50 123 4567",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all",required:!0})]}),A&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-[#B12417]",children:A})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"address",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Business Address (Optional)"}),jsxRuntimeExports.jsx("textarea",{id:"address",name:"address",value:p.address,onChange:y,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#B12417] focus:border-transparent transition-all resize-none",placeholder:"Enter your business address"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:E,className:"px-6 py-3 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors",disabled:l,children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:l,className:"px-6 py-3 bg-gradient-to-r from-[#B12417] to-[#2B266F] text-white rounded-lg font-medium hover:shadow-lg hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 transition-all",children:l?jsxRuntimeExports.jsxs("span",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Changes"})]})]})]})]})})},PaymentHistory=()=>{const[o,s]=reactExports.useState([]),[i,r]=reactExports.useState(!0),[l,h]=reactExports.useState(""),[m,v]=reactExports.useState(null);reactExports.useEffect(()=>{A()},[]);const A=async()=>{try{r(!0);const g=await usersAPI.getPurchases();g.success&&g.data?s(g.data):h(g.message||"Failed to fetch payment history")}catch(g){console.error("Error fetching payment history:",g),h("Failed to load payment history")}finally{r(!1)}},d=g=>g?new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",c=g=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g),f=async g=>{try{await navigator.clipboard.writeText(g),v(g),setTimeout(()=>{v(null)},2e3)}catch(b){console.error("Failed to copy:",b)}};return i?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 border-4 border-[#B12417] border-t-transparent rounded-full animate-spin mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Loading payment history..."})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-gray-100 to-purple-50 py-12",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-12",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl sm:text-5xl font-bold bg-gradient-to-r from-[#B12417] to-[#2B266F] bg-clip-text text-transparent",children:"Payment History"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600 text-lg",children:"View all your purchase transactions and payment details"})]}),l&&jsxRuntimeExports.jsx("div",{className:"mb-6 px-4 py-3 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:l}),o.length===0?jsxRuntimeExports.jsx("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl border border-gray-200/50 p-12 text-center",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto",children:[jsxRuntimeExports.jsx("svg",{className:"w-20 h-20 text-gray-300 mx-auto mb-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),jsxRuntimeExports.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Payments Yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:"You haven't made any purchases yet. Start exploring our documents to make your first purchase!"}),jsxRuntimeExports.jsx("a",{href:"/subscription",className:"inline-block px-6 py-3 bg-gradient-to-r from-[#B12417] to-[#2B266F] text-white rounded-lg font-medium hover:shadow-lg hover:scale-105 transition-all",children:"Browse Documents"})]})}):jsxRuntimeExports.jsxs("div",{className:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl border border-gray-200/50 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-[#B12417] to-[#2B266F] px-8 py-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:"Transaction History"}),jsxRuntimeExports.jsxs("p",{className:"text-white/90 mt-1",children:[o.length," transaction(s) found"]})]}),jsxRuntimeExports.jsx("div",{className:"hidden md:block overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Document"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Amount"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),jsxRuntimeExports.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Transaction ID"})]})}),jsxRuntimeExports.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(g=>jsxRuntimeExports.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d(g.purchased_at)}),jsxRuntimeExports.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:g.document?.title||"Lifetime Subscription"}),g.document?.description&&jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-xs mt-1",children:g.document.description})]}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:c(g.amount)}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:jsxRuntimeExports.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-emerald-100 text-emerald-800",children:"Completed"})}),jsxRuntimeExports.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.id?jsxRuntimeExports.jsxs("button",{onClick:()=>f(g.id),className:"group relative text-sm text-gray-500 hover:text-gray-900 font-mono transition-colors cursor-pointer flex items-center gap-2",title:"Click to copy full ID",children:[jsxRuntimeExports.jsxs("span",{children:[g.id.substring(0,20),"..."]}),m===g.id?jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),m===g.id&&jsxRuntimeExports.jsx("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded whitespace-nowrap",children:"Copied!"})]}):jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500 font-mono",children:"N/A"})})]},g.id))})]})}),jsxRuntimeExports.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:o.map(g=>jsxRuntimeExports.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:g.document?.title||"Lifetime Subscription"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mt-1",children:d(g.purchased_at)})]}),jsxRuntimeExports.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-emerald-100 text-emerald-800",children:"Completed"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:"Amount:"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-semibold text-gray-900",children:c(g.amount)})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:"Transaction ID:"}),g.id?jsxRuntimeExports.jsxs("button",{onClick:()=>f(g.id),className:"relative flex items-center gap-1 text-xs text-gray-500 hover:text-gray-900 font-mono transition-colors",children:[jsxRuntimeExports.jsxs("span",{children:[g.id.substring(0,15),"..."]}),m===g.id?jsxRuntimeExports.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):jsxRuntimeExports.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})]}):jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 font-mono",children:"N/A"})]})]})]},g.id))})]})]})})},ThankYou=()=>{const o=useNavigate(),[s]=useSearchParams(),[i,r]=reactExports.useState(!0),[l,h]=reactExports.useState(null),[m,v]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{const c=s.get("session_id");if(!c){h("No payment session found"),r(!1);return}try{const f=await paymentsAPI.verifyPayment(c);f.success?v({type:f.subscriptionType==="lifetime"?"Lifetime Subscription":"Document Access",date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}):h("Payment verification failed")}catch(f){console.error("Payment verification error:",f),h("Failed to verify payment")}finally{r(!1)}})()},[s]);const A=()=>{o("/documents")};return i?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-gray-100 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-red-600 mx-auto"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Verifying your payment..."})]})}):l?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-gray-100 flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl p-8 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-[#B12417]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Error"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:l}),jsxRuntimeExports.jsx("button",{onClick:()=>o("/subscription"),className:"w-full bg-gradient-to-r from-[#B12417] to-[#9a1f13] hover:from-[#9a1f13] hover:to-[#821a10] text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300",children:"Go to Subscription"})]})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-gray-100 flex items-center justify-center px-4",children:[jsxRuntimeExports.jsx("div",{className:"max-w-2xl w-full",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-[#2B266F] to-[#211d57] px-8 py-12 text-center",children:[jsxRuntimeExports.jsx("div",{className:"relative mx-auto w-24 h-24 mb-6",children:jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-white rounded-full flex items-center justify-center animate-[scale-in_0.3s_ease-out]",children:jsxRuntimeExports.jsx("svg",{className:"w-14 h-14 text-[#2B266F] animate-[check_0.5s_ease-out_0.3s_both]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})}),jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Thank You!"}),jsxRuntimeExports.jsx("p",{className:"text-white/90 text-lg",children:"Your payment was successful"})]}),jsxRuntimeExports.jsxs("div",{className:"px-8 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-6 mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-4",children:"Purchase Details"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Plan"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900",children:m?.type})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Date"}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900",children:m?.date})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-300 pt-3 mt-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 text-sm text-gray-600",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-[#2B266F] flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jsxRuntimeExports.jsx("p",{children:"You now have full access to all premium documents with complete security protection."})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-700 text-lg mb-2",children:"Welcome to your document library!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"You can now access all your premium documents"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{onClick:A,className:"w-full bg-gradient-to-r from-[#B12417] to-[#9a1f13] hover:from-[#9a1f13] hover:to-[#821a10] text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-xl",children:"Access Documents Now"}),jsxRuntimeExports.jsx("button",{onClick:()=>o("/subscription"),className:"w-full bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-4 px-6 rounded-xl transition-all duration-300",children:"View Subscription Details"})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 px-8 py-4 border-t border-blue-100",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-800",children:"A confirmation email has been sent to your registered email address."})]})})]})}),jsxRuntimeExports.jsx("style",{children:`
        @keyframes scale-in {
          from {
            transform: scale(0);
            opacity: 0;
          }
          to {
            transform: scale(1);
            opacity: 1;
          }
        }

        @keyframes check {
          0% {
            stroke-dashoffset: 50;
            stroke-dasharray: 50;
          }
          100% {
            stroke-dashoffset: 0;
            stroke-dasharray: 50;
          }
        }
      `})]})},PublicDocument=()=>{const{token:o}=useParams(),s=useNavigate(),[i,r]=reactExports.useState(null),[l,h]=reactExports.useState(!0),[m,v]=reactExports.useState(null);return reactExports.useEffect(()=>{o?(async()=>{try{h(!0);const d=await publicDocumentsAPI.getByToken(o);d.success?r(d.data):v("Document not found or has been disabled")}catch(d){console.error("Error fetching public document:",d),v(d.response?.data?.message||"Document not found or has been disabled")}finally{h(!1)}})():(v("Invalid document link"),h(!1))},[o]),l?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"inline-block w-12 h-12 border-4 border-gray-200 border-t-red-600 rounded-full animate-spin"}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-600",children:"Loading document..."})]})}):m?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[jsxRuntimeExports.jsx("svg",{className:"w-16 h-16 text-red-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Document Not Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:m}),jsxRuntimeExports.jsx("button",{onClick:()=>s("/"),className:"px-6 py-2.5 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Go to Home"})]})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.title}),i.description&&jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-1",children:i.description}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Published: ",new Date(i.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>s("/"),className:"px-4 py-2 text-white rounded-lg font-medium hover:opacity-90 transition-opacity flex items-center gap-2",style:{backgroundColor:"#292A77"},children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Back to Home"]}),jsxRuntimeExports.jsxs("a",{href:i.file_url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download PDF"]})]})]})})}),jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:jsxRuntimeExports.jsx("iframe",{src:i.file_url,className:"w-full",style:{height:"calc(100vh - 250px)",minHeight:"600px"},title:i.title})})})]})},NotFound=()=>{const o=useNavigate();return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-gray-100 flex items-center justify-center px-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full text-center",children:[jsxRuntimeExports.jsx("div",{className:"mb-8",children:jsxRuntimeExports.jsx("h1",{className:"text-9xl font-bold bg-gradient-to-r from-[#2B266F] to-[#B12417] bg-clip-text text-transparent animate-pulse",children:"404"})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-8",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-[#2B266F] to-[#211d57] rounded-full flex items-center justify-center mx-auto mb-6",children:jsxRuntimeExports.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Page Not Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-8",children:"Oops! The page you're looking for doesn't exist. It might have been moved or deleted."}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>o("/"),className:"w-full bg-gradient-to-r from-[#B12417] to-[#9a1f13] hover:from-[#9a1f13] hover:to-[#821a10] text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-[1.02] shadow-lg hover:shadow-xl",children:"Go to Home"}),jsxRuntimeExports.jsx("button",{onClick:()=>o(-1),className:"w-full bg-white border-2 border-gray-300 hover:border-gray-400 text-gray-700 font-semibold py-4 px-6 rounded-xl transition-all duration-300",children:"Go Back"})]})]}),jsxRuntimeExports.jsx("p",{className:"mt-6 text-sm text-gray-500",children:"Need help? Contact our support team."})]})})},App=()=>jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(Layout,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/admin/login",element:jsxRuntimeExports.jsx(AdminLogin,{})}),jsxRuntimeExports.jsxs(Route,{path:"/admin/*",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"admin",children:jsxRuntimeExports.jsx(AdminLayout,{})}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:jsxRuntimeExports.jsx(AdminDashboard,{})}),jsxRuntimeExports.jsx(Route,{path:"documents",element:jsxRuntimeExports.jsx(DocumentManagerPage,{})}),jsxRuntimeExports.jsx(Route,{path:"documents/view/:id",element:jsxRuntimeExports.jsx(AdminDocumentViewer,{})}),jsxRuntimeExports.jsx(Route,{path:"transactions",element:jsxRuntimeExports.jsx(TransactionsPage,{})}),jsxRuntimeExports.jsx(Route,{path:"users",element:jsxRuntimeExports.jsx(UsersManagementPage,{})}),jsxRuntimeExports.jsx(Route,{path:"pricing",element:jsxRuntimeExports.jsx(PricingPage,{})}),jsxRuntimeExports.jsx(Route,{path:"settings",element:jsxRuntimeExports.jsx(AdminSettingsPage,{})})]}),jsxRuntimeExports.jsx(Route,{path:"/dashboard",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"user",children:jsxRuntimeExports.jsx(UserDashboard,{})})}),jsxRuntimeExports.jsx(Route,{path:"/profile-completion",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"user",children:jsxRuntimeExports.jsx(ProfileCompletion,{})})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"user",children:jsxRuntimeExports.jsx(Profile,{})})}),jsxRuntimeExports.jsx(Route,{path:"/payment-history",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"user",children:jsxRuntimeExports.jsx(PaymentHistory,{})})}),jsxRuntimeExports.jsx(Route,{path:"/subscription",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"user",children:jsxRuntimeExports.jsx(Subscription,{})})}),jsxRuntimeExports.jsx(Route,{path:"/thank-you",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"user",children:jsxRuntimeExports.jsx(ThankYou,{})})}),jsxRuntimeExports.jsx(Route,{path:"/documents",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"user",children:jsxRuntimeExports.jsx(Documents,{})})}),jsxRuntimeExports.jsx(Route,{path:"/documents/:id",element:jsxRuntimeExports.jsx(ProtectedRoute,{requiredRole:"user",children:jsxRuntimeExports.jsx(DocumentViewer,{})})}),jsxRuntimeExports.jsx(Route,{path:"/public/:token",element:jsxRuntimeExports.jsx(PublicDocument,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})})})}),GOOGLE_CLIENT_ID="190464074695-joch89ciuq95u35ei2chohrmucr4i3du.apps.googleusercontent.com";clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(GoogleOAuthProvider,{clientId:GOOGLE_CLIENT_ID,children:jsxRuntimeExports.jsx(App,{})}));
